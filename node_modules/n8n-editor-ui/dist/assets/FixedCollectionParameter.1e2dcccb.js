import{_ as m}from"./index.9a182bb0.js";import{V as u}from"./vendor.a2fafdee.js";import{a as o,o as n,l as p}from"./n8n-workflow.4d086b10.js";import{n as c}from"./n8n-design-system.670325b1.js";import"./@fortawesome/fontawesome-svg-core.2d7f1ae5.js";import"./@fortawesome/free-solid-svg-icons.4a1e939e.js";import"./@fortawesome/free-regular-svg-icons.9fb25f9a.js";import"./@fortawesome/vue-fontawesome.4443d979.js";import"./vue2-touch-events.f7c2b344.js";import"./v-click-outside.2a379eae.js";import"./axios.4a974fe3.js";import"./vue-fragment.3d40e27f.js";import"./vue-agile.3c7c1e37.js";import"./lodash-es.e05ea3b9.js";import"./prismjs.95406fca.js";import"./vue-typed-mixins.81797ea0.js";import"./xss.ffb35cb9.js";import"./flatted.12ebcbd8.js";import"./uuid.6335a3e0.js";import"./dateformat.a1136387.js";import"./monaco-editor.21485360.js";import"./quill.470e9400.js";import"./quill-autoformat.e2d87442.js";import"./fast-json-stable-stringify.d7c839ef.js";import"./vue-prism-editor.20a215ee.js";import"./esprima.67881ccb.js";import"./vue-i18n.517f429e.js";import"./timeago.js.677063e2.js";import"./file-saver.a22fc8cb.js";import"./jsplumb.1ecfd296.js";import"./normalize-wheel.53b95207.js";import"./vue2-teleport.e42b1fad.js";import"./vue-json-pretty.7b5bff4b.js";import"./luxon.daa33f39.js";var d=u.extend({name:"FixedCollectionParameter",props:{nodeValues:{type:Object,required:!0},parameter:{type:Object,required:!0},path:{type:String,required:!0},values:{type:Object,default:()=>({})},isReadOnly:{type:Boolean,default:!1}},components:{ParameterInputList:()=>m(()=>import("./index.9a182bb0.js").then(function(t){return t.P}),["assets/index.9a182bb0.js","assets/index.f7a3e682.css","assets/vendor.a2fafdee.js","assets/@fortawesome/fontawesome-svg-core.2d7f1ae5.js","assets/@fortawesome/free-solid-svg-icons.4a1e939e.js","assets/@fortawesome/free-regular-svg-icons.9fb25f9a.js","assets/@fortawesome/vue-fontawesome.4443d979.js","assets/vue2-touch-events.f7c2b344.js","assets/v-click-outside.2a379eae.js","assets/axios.4a974fe3.js","assets/vue-fragment.3d40e27f.js","assets/vue-agile.3c7c1e37.js","assets/vue-agile.db3fb5fe.css","assets/lodash-es.e05ea3b9.js","assets/n8n-design-system.670325b1.js","assets/n8n-design-system.4c7f4b23.css","assets/normalize-wheel.53b95207.js","assets/xss.ffb35cb9.js","assets/vue-typed-mixins.81797ea0.js","assets/prismjs.95406fca.js","assets/n8n-workflow.4d086b10.js","assets/luxon.daa33f39.js","assets/flatted.12ebcbd8.js","assets/uuid.6335a3e0.js","assets/dateformat.a1136387.js","assets/monaco-editor.21485360.js","assets/monaco-editor.45667471.css","assets/quill.470e9400.js","assets/quill-autoformat.e2d87442.js","assets/fast-json-stable-stringify.d7c839ef.js","assets/vue-prism-editor.20a215ee.js","assets/esprima.67881ccb.js","assets/vue-i18n.517f429e.js","assets/timeago.js.677063e2.js","assets/file-saver.a22fc8cb.js","assets/jsplumb.1ecfd296.js","assets/vue2-teleport.e42b1fad.js","assets/vue-json-pretty.7b5bff4b.js"])},data(){return{selectedOption:void 0,mutableValues:{}}},watch:{values:{handler(t){this.mutableValues=o(t)},deep:!0}},created(){this.mutableValues=o(this.values)},computed:{getPlaceholderText(){const t=this.$locale.nodeText().placeholder(this.parameter,this.path);return t||this.$locale.baseText("fixedCollectionParameter.choose")},getProperties(){const t=[];let e;for(const a of this.propertyNames)e=this.getOptionProperties(a),e!==void 0&&t.push(e);return t},multipleValues(){var t;return!!((t=this.parameter.typeOptions)!=null&&t.multipleValues)},parameterOptions(){return this.multipleValues&&n(this.parameter.options)?this.parameter.options:this.parameter.options.filter(t=>!this.propertyNames.includes(t.name))},propertyNames(){return Object.keys(this.mutableValues||{})},sortable(){var t;return!!((t=this.parameter.typeOptions)!=null&&t.sortable)}},methods:{deleteOption(t,e){const a=this.mutableValues[t];!a||a.length>1?this.$emit("valueChanged",{name:this.getPropertyPath(t,e),value:void 0}):this.$emit("valueChanged",{name:this.getPropertyPath(t),value:void 0})},getPropertyPath(t,e){return`${this.path}.${t}`+(e!==void 0?`[${e}]`:"")},getOptionProperties(t){if(n(this.parameter.options)){for(const e of this.parameter.options)if(e.name===t)return e}},moveOptionDown(t,e){Array.isArray(this.mutableValues[t])&&this.mutableValues[t].splice(e+1,0,this.mutableValues[t].splice(e,1)[0]);const a={name:this.getPropertyPath(t),value:this.mutableValues[t]};this.$emit("valueChanged",a)},moveOptionUp(t,e){var i;Array.isArray(this.mutableValues[t])&&((i=this.mutableValues)==null||i[t].splice(e-1,0,this.mutableValues[t].splice(e,1)[0]));const a={name:this.getPropertyPath(t),value:this.mutableValues[t]};this.$emit("valueChanged",a)},optionSelected(t){const e=this.getOptionProperties(t);if(e===void 0)return;const a=`${this.path}.${e.name}`,i={};for(const l of e.values)l.type==="fixedCollection"&&l.typeOptions!==void 0&&l.typeOptions.multipleValues===!0?i[l.name]={}:l.typeOptions!==void 0&&l.typeOptions.multipleValues===!0?(i[l.name]=p.exports.get(this.nodeValues,`${this.path}.${l.name}`,[]),Array.isArray(l.default)?i[l.name].push(...o(l.default)):l.default!==""&&typeof l.default!="object"&&i[l.name].push(o(l.default))):i[l.name]=o(l.default);let r;this.multipleValues?(r=p.exports.get(this.nodeValues,a,[]),r.push(i)):r=i;const s={name:a,value:r};this.$emit("valueChanged",s),this.selectedOption=void 0},valueChanged(t){this.$emit("valueChanged",t)}}});var h=function(){var e=this,a=e._self._c;return e._self._setupProxy,a("div",{staticClass:"fixed-collection-parameter",on:{keydown:function(i){i.stopPropagation()}}},[e.getProperties.length===0?a("div",{staticClass:"no-items-exist"},[a("n8n-text",{attrs:{size:"small"}},[e._v(e._s(e.$locale.baseText("fixedCollectionParameter.currentlyNoItemsExist")))])],1):e._e(),e._l(e.getProperties,function(i){return a("div",{key:i.name,staticClass:"fixed-collection-parameter-property"},[i.displayName!==""&&e.parameter.options&&e.parameter.options.length!==1?a("n8n-input-label",{attrs:{label:e.$locale.nodeText().inputLabelDisplayName(i,e.path),underline:!0,size:"small",color:"text-dark"}}):e._e(),e.multipleValues?a("div",e._l(e.mutableValues[i.name],function(r,s){return a("div",{key:i.name+s,staticClass:"parameter-item"},[a("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():a("div",{staticClass:"delete-option"},[a("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:e.$locale.baseText("fixedCollectionParameter.deleteItem")},on:{click:function(l){return e.deleteOption(i.name,s)}}}),e.sortable?a("div",{staticClass:"sort-icon"},[s!==0?a("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-up",title:e.$locale.baseText("fixedCollectionParameter.moveUp")},on:{click:function(l){return e.moveOptionUp(i.name,s)}}}):e._e(),s!==e.mutableValues[i.name].length-1?a("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-down",title:e.$locale.baseText("fixedCollectionParameter.moveDown")},on:{click:function(l){return e.moveOptionDown(i.name,s)}}}):e._e()],1):e._e()],1),a("parameter-input-list",{attrs:{parameters:i.values,nodeValues:e.nodeValues,path:e.getPropertyPath(i.name,s),hideDelete:!0,isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}})],1)])}),0):a("div",{staticClass:"parameter-item"},[a("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():a("div",{staticClass:"delete-option"},[a("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:e.$locale.baseText("fixedCollectionParameter.deleteItem")},on:{click:function(r){return e.deleteOption(i.name)}}})],1),a("parameter-input-list",{staticClass:"parameter-item",attrs:{parameters:i.values,nodeValues:e.nodeValues,path:e.getPropertyPath(i.name),isReadOnly:e.isReadOnly,hideDelete:!0},on:{valueChanged:e.valueChanged}})],1)])],1)}),e.parameterOptions.length>0&&!e.isReadOnly?a("div",[e.parameter.options.length===1?a("n8n-button",{attrs:{type:"tertiary",block:"",label:e.getPlaceholderText},on:{click:function(i){return e.optionSelected(e.parameter.options[0].name)}}}):a("div",{staticClass:"add-option"},[a("n8n-select",{attrs:{placeholder:e.getPlaceholderText,size:"small",filterable:""},on:{change:e.optionSelected},model:{value:e.selectedOption,callback:function(i){e.selectedOption=i},expression:"selectedOption"}},e._l(e.parameterOptions,function(i){return a("n8n-option",{key:i.name,attrs:{label:e.$locale.nodeText().collectionOptionDisplayName(e.parameter,i,e.path),value:i.name}})}),1)],1)],1):e._e()],2)},v=[],f=c(d,h,v,!1,null,"33098f64",null,null),Y=f.exports;export{Y as default};
