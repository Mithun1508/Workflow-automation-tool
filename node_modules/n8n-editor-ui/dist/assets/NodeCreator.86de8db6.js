import{V as d}from"./vendor.a2fafdee.js";import{n as i}from"./n8n-design-system.670325b1.js";import{N as K,C as ee,i as te,g as se,a as O,b as X,R as re,e as x,c as k,T as C,A as f,d as oe,f as ae,W as w,H as ne,h as S,j as ie,S as D,M as P,E as F,O as R}from"./index.9a182bb0.js";import{m as N}from"./vue-typed-mixins.81797ea0.js";import{c as E}from"./lodash-es.e05ea3b9.js";import"./normalize-wheel.53b95207.js";import"./axios.4a974fe3.js";import"./@fortawesome/vue-fontawesome.4443d979.js";import"./@fortawesome/fontawesome-svg-core.2d7f1ae5.js";import"./xss.ffb35cb9.js";import"./@fortawesome/free-solid-svg-icons.4a1e939e.js";import"./@fortawesome/free-regular-svg-icons.9fb25f9a.js";import"./vue2-touch-events.f7c2b344.js";import"./v-click-outside.2a379eae.js";import"./vue-fragment.3d40e27f.js";import"./vue-agile.3c7c1e37.js";import"./prismjs.95406fca.js";import"./n8n-workflow.4d086b10.js";import"./luxon.daa33f39.js";import"./flatted.12ebcbd8.js";import"./uuid.6335a3e0.js";import"./dateformat.a1136387.js";import"./monaco-editor.21485360.js";import"./quill.470e9400.js";import"./quill-autoformat.e2d87442.js";import"./fast-json-stable-stringify.d7c839ef.js";import"./vue-prism-editor.20a215ee.js";import"./esprima.67881ccb.js";import"./vue-i18n.517f429e.js";import"./timeago.js.677063e2.js";import"./file-saver.a22fc8cb.js";import"./jsplumb.1ecfd296.js";import"./vue2-teleport.e42b1fad.js";import"./vue-json-pretty.7b5bff4b.js";var ce=d.extend({name:"SlideTransition"});var le=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("transition",{attrs:{name:"slide"}},[e._t("default")],2)},de=[],ue=i(ce,le,de,!1,null,"2088ddf5",null,null),_e=ue.exports,pe={name:"TriggerIcon"};const ge="_trigger_ij4mg_1";var ye={trigger:ge},he=function(){var e=this,t=e._self._c;return t("span",{class:e.$style.trigger},[t("svg",{attrs:{width:"36px",height:"36px",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("title",[e._v("Trigger node")]),t("g",{attrs:{id:"/integrations-(V1-feature)",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[t("g",{attrs:{id:"Individual-node-view",transform:"translate(-304.000000, -137.000000)","fill-rule":"nonzero"}},[t("g",{attrs:{id:"left-column",transform:"translate(120.000000, 131.000000)"}},[t("g",{attrs:{id:"trigger-badge",transform:"translate(178.000000, 0.000000)"}},[t("g",{attrs:{id:"trigger-icon",transform:"translate(6.857143, 6.857143)"}},[t("g",{attrs:{id:"Icon",transform:"translate(8.571429, 0.000000)",fill:"#FF6150"}},[t("polygon",{attrs:{id:"Icon-Path",points:"7.14285714 21.4285714 0 21.4285714 10 1.42857143 10 12.8571429 17.1428571 12.8571429 7.14285714 32.8571429"}})]),t("rect",{attrs:{id:"ViewBox",x:"0",y:"0",width:"34.2857143",height:"34.2857143"}})])])])])])])])},me=[];const z={$style:ye};function fe(s){for(var e in z)this[e]=z[e]}var ve=i(pe,he,me,!1,fe,null,null,null),be=ve.exports;d.component("node-icon",K);d.component("trigger-icon",be);var $e=d.extend({name:"NodeItem",props:{nodeType:{type:Object},active:{type:Boolean}},data(){return{dragging:!1,draggablePosition:{x:-100,y:-100},COMMUNITY_NODES_INSTALLATION_DOCS_URL:ee}},computed:{shortNodeType(){return this.$locale.shortNodeType(this.nodeType.name)},isTrigger(){return this.nodeType.group.includes("trigger")},draggableStyle(){return{top:`${this.draggablePosition.y}px`,left:`${this.draggablePosition.x}px`}},isCommunityNode(){return te(this.nodeType.name)}},methods:{onDragStart(s){document.body.addEventListener("dragover",this.onDragOver);const{pageX:e,pageY:t}=s;this.$emit("dragstart",s),s.dataTransfer&&(s.dataTransfer.effectAllowed="copy",s.dataTransfer.dropEffect="copy",s.dataTransfer.setData("nodeTypeName",this.nodeType.name),s.dataTransfer.setDragImage(this.$refs.draggableDataTransfer,0,0)),this.dragging=!0,this.draggablePosition={x:e,y:t}},onDragOver(s){if(!this.dragging||s.pageX===0&&s.pageY===0)return;const[e,t]=se([],[s.pageX-O/2,s.pageY-O/2]);this.draggablePosition={x:e,y:t}},onDragEnd(s){document.body.removeEventListener("dragover",this.onDragOver),this.$emit("dragend",s),this.dragging=!1,setTimeout(()=>{this.draggablePosition={x:-100,y:-100}},300)},onCommunityNodeTooltipClick(s){s.target.localName==="a"&&this.$telemetry.track("user clicked cnr docs link",{source:"nodes panel node"})}}});const Te="_details_dvqz9_9",xe="_name_dvqz9_19",Ce="_packageName_dvqz9_26",Ne="_description_dvqz9_30",Ie="_draggable_dvqz9_50";var we={"node-item":"_node-item_dvqz9_1",details:Te,"node-icon":"_node-icon_dvqz9_13",name:xe,packageName:Ce,description:Ne,"trigger-icon":"_trigger-icon_dvqz9_38","community-node-icon":"_community-node-icon_dvqz9_46",draggable:Ie,"draggable-data-transfer":"_draggable-data-transfer_dvqz9_64"};var Se=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{[e.$style["node-item"]]:!0},attrs:{draggable:""},on:{dragstart:e.onDragStart,dragend:e.onDragEnd}},[t("node-icon",{class:e.$style["node-icon"],attrs:{nodeType:e.nodeType}}),t("div",[t("div",{class:e.$style.details},[t("span",{class:e.$style.name},[e._v(" "+e._s(e.$locale.headerText({key:`headers.${e.shortNodeType}.displayName`,fallback:e.nodeType.displayName}))+" ")]),e.isTrigger?t("span",{class:e.$style["trigger-icon"]},[t("trigger-icon")],1):e._e(),e.isCommunityNode?t("n8n-tooltip",{attrs:{placement:"top"}},[t("div",{class:e.$style["community-node-icon"],attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$locale.baseText("generic.communityNode.tooltip",{interpolate:{packageName:e.nodeType.name.split(".")[0],docURL:e.COMMUNITY_NODES_INSTALLATION_DOCS_URL}}))},on:{click:e.onCommunityNodeTooltipClick},slot:"content"}),t("n8n-icon",{attrs:{icon:"cube"}})],1):e._e()],1),t("div",{class:e.$style.description},[e._v(" "+e._s(e.$locale.headerText({key:`headers.${e.shortNodeType}.description`,fallback:e.nodeType.description}))+" ")]),t("div",{ref:"draggableDataTransfer",class:e.$style["draggable-data-transfer"]}),t("transition",{attrs:{name:"node-item-transition"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.dragging,expression:"dragging"}],ref:"draggable",class:e.$style.draggable,style:e.draggableStyle},[t("node-icon",{staticClass:"node-icon",attrs:{nodeType:e.nodeType,size:40,shrink:!1}})],1)])],1)],1)},Re=[];const B={$style:we};function ke(s){for(var e in B)this[e]=B[e]}var Ee=i($e,Se,Re,!1,ke,"60222ae4",null,null),Le=Ee.exports,Ae=d.extend({components:{NodeIcon:K},props:{item:{type:Object,required:!0}},computed:{itemProperties(){return this.item.properties},subcategoryName(){return E(this.itemProperties.subcategory)},hasIcon(){return this.itemProperties.icon!==void 0||this.itemProperties.iconData!==void 0}}});const Oe="_subcategoryIcon_1lvmn_1",De="_subcategory_1lvmn_1",Pe="_subcategoryWithIcon_1lvmn_12",Fe="_details_1lvmn_18",ze="_title_1lvmn_23",Be="_description_1lvmn_30",He="_action_1lvmn_37",Me="_arrow_1lvmn_43";var Ge={subcategoryIcon:Oe,subcategory:De,subcategoryWithIcon:Pe,details:Fe,title:ze,description:Be,action:He,arrow:Me},Ue=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{[e.$style.subcategory]:!0,[e.$style.subcategoryWithIcon]:e.hasIcon}},[e.hasIcon?t("node-icon",{class:e.$style.subcategoryIcon,attrs:{nodeType:e.itemProperties}}):e._e(),t("div",{class:e.$style.details},[t("div",{class:e.$style.title},[e._v(" "+e._s(e.$locale.baseText(`nodeCreator.subcategoryNames.${e.subcategoryName}`))+" ")]),e.item.properties.description?t("div",{class:e.$style.description},[e._v(" "+e._s(e.$locale.baseText(`nodeCreator.subcategoryDescriptions.${e.subcategoryName}`))+" ")]):e._e()]),t("div",{class:e.$style.action},[t("font-awesome-icon",{class:e.$style.arrow,attrs:{icon:"arrow-right"}})],1)],1)},Ye=[];const H={$style:Ge};function qe(s){for(var e in H)this[e]=H[e]}var je=i(Ae,Ue,Ye,!1,qe,null,null,null),We=je.exports,Ke=d.extend({props:{item:{type:Object}},computed:{selectedType(){return this.$store.getters["nodeCreator/selectedType"]},categoriesWithNodes(){return this.$store.getters["nodeTypes/categoriesWithNodes"]},categorizedItems(){return this.$store.getters["nodeTypes/categorizedItems"]},categoryName(){return E(this.item.category)},nodesCount(){const s=this.categoriesWithNodes[this.item.category];return Object.keys(s).reduce((r,o)=>{const a=X[this.selectedType];for(const c of a)r+=s[o][c];return r},0)}},methods:{renderCategoryName(s){const e=`nodeCreator.categoryNames.${s}`;return this.$locale.exists(e)?this.$locale.baseText(e):s}}});const Xe="_category_13tr1_1",Ve="_name_13tr1_14",Qe="_arrow_13tr1_18";var Ze={category:Xe,name:Ve,arrow:Qe},Je=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.category},[t("span",{class:e.$style.name},[e._v(" "+e._s(e.renderCategoryName(e.categoryName))+" ("+e._s(e.nodesCount)+") ")]),e.item.properties.expanded?t("font-awesome-icon",{class:e.$style.arrow,attrs:{icon:"chevron-down"}}):t("font-awesome-icon",{class:e.$style.arrow,attrs:{icon:"chevron-up"}})],1)},et=[];const M={$style:Ze};function tt(s){for(var e in M)this[e]=M[e]}var st=i(Ke,Je,et,!1,tt,null,null,null),rt=st.exports,ot=d.extend({name:"CreatorItem",components:{CategoryItem:rt,SubcategoryItem:We,NodeItem:Le},props:{item:{type:Object},active:{type:Boolean},clickable:{type:Boolean},lastNode:{type:Boolean}}});var at=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",e._g({class:{container:!0,clickable:e.clickable,active:e.active}},e.$listeners),[e.item.type==="category"?t("category-item",{attrs:{item:e.item}}):e.item.type==="subcategory"?t("subcategory-item",{attrs:{item:e.item}}):e.item.type==="node"?t("node-item",{attrs:{nodeType:e.item.properties.nodeType},on:{dragstart:e.$listeners.dragstart,dragend:e.$listeners.dragend}}):e._e()],1)},nt=[],it=i(ot,at,nt,!1,null,"7cc4433f",null,null),ct=it.exports,lt=d.extend({name:"ItemIterator",components:{CreatorItem:ct},props:{elements:{type:Array},activeIndex:{type:Number},disabled:{type:Boolean},transitionsEnabled:{type:Boolean}},methods:{emit(s,e,t){this.$props.disabled||this.$emit(s,{element:e,event:t})},beforeEnter(s){s.style.height="0"},enter(s){s.style.height=`${s.scrollHeight}px`},beforeLeave(s){s.style.height=`${s.scrollHeight}px`},leave(s){s.style.height="0"}}});var dt=function(){var e=this,t=e._self._c;return e._self._setupProxy,t(e.transitionsEnabled?"transition-group":"div",{tag:"div",staticClass:"item-iterator",attrs:{name:"accordion"},on:{"before-enter":e.beforeEnter,enter:e.enter,"before-leave":e.beforeLeave,leave:e.leave}},e._l(e.elements,function(r,o){return t("div",{key:r.key,class:r.type,attrs:{"data-key":r.key}},[t("creator-item",{attrs:{item:r,active:e.activeIndex===o&&!e.disabled,clickable:!e.disabled,lastNode:o===e.elements.length-1||e.elements[o+1].type!=="node"},on:{click:function(a){return e.$emit("selected",r)},dragstart:function(a){return e.emit("dragstart",r,a)},dragend:function(a){return e.emit("dragend",r,a)}}})],1)}),0)},ut=[],_t=i(lt,dt,ut,!1,null,"c80919de",null,null),V=_t.exports;const pt={};var gt=function(){var e=this,t=e._self._c;return t("svg",{attrs:{width:"75px",height:"75px",viewBox:"0 0 75 75",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("title",[e._v("no-nodes-keyart")]),t("g",{attrs:{id:"Nodes-panel-prototype-V2.1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[t("g",{attrs:{id:"nodes-panel-(component)",transform:"translate(-2085.000000, -352.000000)"}},[t("g",{attrs:{id:"nodes_panel",transform:"translate(1880.000000, 151.000000)"}},[t("g",{attrs:{id:"Panel",transform:"translate(50.000000, 0.000000)"}},[t("g",{attrs:{id:"Group-3",transform:"translate(105.000000, 171.000000)"}},[t("g",{attrs:{id:"no-nodes-keyart",transform:"translate(50.000000, 30.000000)"}},[t("rect",{attrs:{id:"Rectangle",x:"0",y:"0",width:"75",height:"75"}}),t("g",{attrs:{id:"Group",transform:"translate(6.562500, 8.164062)",fill:"#C4C8D1","fill-rule":"nonzero"}},[t("polygon",{attrs:{id:"Rectangle",transform:"translate(49.192016, 45.302553) rotate(-45.000000) translate(-49.192016, -45.302553) ",points:"44.5045606 32.0526802 53.8794707 32.0526802 53.8794707 58.5524261 44.5045606 58.5524261"}}),t("path",{attrs:{d:"M48.125,23.0859375 C54.15625,23.0859375 59.0625,18.1796875 59.0625,12.1484375 C59.0625,10.3359375 58.5625,8.6484375 57.78125,7.1484375 L49.34375,15.5859375 L44.6875,10.9296875 L53.125,2.4921875 C51.625,1.7109375 49.9375,1.2109375 48.125,1.2109375 C42.09375,1.2109375 37.1875,6.1171875 37.1875,12.1484375 C37.1875,13.4296875 37.4375,14.6484375 37.84375,15.7734375 L32.0625,21.5546875 L26.5,15.9921875 L28.71875,13.7734375 L24.3125,9.3671875 L30.9375,2.7421875 C27.28125,-0.9140625 21.34375,-0.9140625 17.6875,2.7421875 L6.625,13.8046875 L11.03125,18.2109375 L2.21875,18.2109375 L1.38777878e-15,20.4296875 L11.0625,31.4921875 L13.28125,29.2734375 L13.28125,20.4296875 L17.6875,24.8359375 L19.90625,22.6171875 L25.46875,28.1796875 L2.3125,51.3359375 L8.9375,57.9609375 L44.5,22.4296875 C45.625,22.8359375 46.84375,23.0859375 48.125,23.0859375 Z",id:"Path"}})])])])])])])])])},yt=[],ht=i(pt,gt,yt,!1,null,null,null,null),mt=ht.exports,ft=d.extend({name:"NoResults",props:{showRequest:{type:Boolean},showIcon:{type:Boolean}},components:{NoResultsIcon:mt},data(){return{REQUEST_NODE_FORM_URL:re}}});const vt="_noResults_1f2gw_1",bt="_title_1f2gw_14",$t="_action_1f2gw_23",Tt="_request_1f2gw_23",xt="_icon_1f2gw_39",Ct="_external_1f2gw_45";var Nt={noResults:vt,title:bt,action:$t,request:Tt,icon:xt,external:Ct},It=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.noResults},[e.showIcon?t("div",{class:e.$style.icon},[t("no-results-icon")],1):e._e(),t("div",{class:e.$style.title},[e._t("title"),t("div",{class:e.$style.action},[e._t("action")],2)],2),e.showRequest?t("div",{class:e.$style.request},[t("p",{domProps:{textContent:e._s(e.$locale.baseText("nodeCreator.noResults.wantUsToMakeItFaster"))}}),t("div",[t("n8n-link",{attrs:{to:e.REQUEST_NODE_FORM_URL}},[t("span",[e._v(e._s(e.$locale.baseText("nodeCreator.noResults.requestTheNode")))]),e._v("\xA0 "),t("span",[t("font-awesome-icon",{class:e.$style.external,attrs:{icon:"external-link-alt",title:e.$locale.baseText("nodeCreator.noResults.requestTheNode")}})],1)])],1)]):e._e()])},wt=[];const G={$style:Nt};function St(s){for(var e in G)this[e]=G[e]}var Rt=i(ft,It,wt,!1,St,null,null,null),kt=Rt.exports,Et=N(x).extend({name:"SearchBar",props:{value:{type:String},eventBus:{type:Object}},mounted(){this.eventBus&&this.eventBus.$on("focus",this.focus),setTimeout(this.focus,0),this.$externalHooks().run("nodeCreator_searchBar.mount",{inputRef:this.$refs.input})},methods:{focus(){const s=this.$refs.input;s&&s.focus()},onInput(s){const e=s.target;this.$emit("input",e.value)},clear(){this.$emit("input","")}},beforeDestroy(){this.eventBus&&this.eventBus.$off("focus",this.focus)}});const Lt="_searchContainer_1odij_1",At="_prefix_1odij_17",Ot="_active_1odij_22",Dt="_text_1odij_26",Pt="_suffix_1odij_42",Ft="_clear_1odij_48";var zt={searchContainer:Lt,prefix:At,active:Ot,text:Dt,suffix:Pt,clear:Ft},Bt=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.searchContainer},[t("div",{class:{[e.$style.prefix]:!0,[e.$style.active]:e.value.length>0}},[t("font-awesome-icon",{attrs:{icon:"search",size:"sm"}})],1),t("div",{class:e.$style.text},[t("input",{ref:"input",class:e.$style.input,attrs:{placeholder:e.$locale.baseText("nodeCreator.searchBar.searchNodes")},domProps:{value:e.value},on:{input:e.onInput}})]),e.value.length>0?t("div",{class:e.$style.suffix,on:{click:e.clear}},[t("button",{class:[e.$style.clear,e.$style.clickable]},[t("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)]):e._e()])},Ht=[];const U={$style:zt};function Mt(s){for(var e in U)this[e]=U[e]}var Gt=i(Et,Bt,Ht,!1,Mt,null,null,null),Q=Gt.exports;const T=(s,e)=>e===k&&s.includedByRegular||e===C&&s.includedByTrigger?!0:e===f,Ut=(s,e)=>!s.codex||!s.codex.alias?!1:s.codex.alias.reduce((t,r)=>t||r.toLowerCase().indexOf(e)>-1,!1),Y=(s,e)=>{const t=s.properties.nodeType;return t.displayName.toLowerCase().indexOf(e)!==-1||Ut(t,e)},Yt=30,qt=30,jt=30,Wt=15,Kt=-15,q=-200,Xt=-5;function Vt(s,e){let t=0,r=0;for(;t<s.length&&r<e.length;){const o=s.charAt(t).toLowerCase(),a=e.charAt(r).toLowerCase();o===a&&t++,++r}return s.length!==0&&e.length!==0&&t===s.length}function Qt(s,e){return Z(s,e,0,0,null,[],256,0,0,5)}function Z(s,e,t,r,o,a,c,l,u,p){let n=0;if(++u>=p)return{matched:!1,outScore:n};if(t===s.length||r===e.length)return{matched:!1,outScore:n};let _=!1,v=[],h=0,L=!0;for(;t<s.length&&r<e.length;){if(s[t].toLowerCase()===e[r].toLowerCase()){if(l>=c)return{matched:!1,outScore:n};L&&o&&(a=[...o],L=!1);const y=[],b=Z(s,e,t,r+1,a,y,c,l,u,p),g=b.outScore;b.matched&&((!_||g>h)&&(v=[...y],h=g),_=!0),a[l++]=r,++t}++r}const I=t===s.length;if(I){n=100;let y=Kt*a[0];y=y<q?q:y,n+=y;const b=e.length-l;n+=Xt*b;for(let g=0;g<l;g++){const $=a[g];if(g>0){const m=a[g-1];$===m+1&&(n+=Yt)}if($>0){const m=e[$-1],A=e[$];m!==m.toUpperCase()&&A!==A.toLowerCase()&&(n+=jt),(m==="_"||m===" ")&&(n+=qt)}else n+=Wt}return _&&(!I||h>n)?(a=[...v],n=h,{matched:!0,outScore:n}):I?{matched:!0,outScore:n}:{matched:!1,outScore:n}}return{matched:!1,outScore:n}}function Zt(s,e){if(s.hasOwnProperty(e))return s[e];const t=e.split(".");let r=s,o=0;for(;r&&o<t.length;)r=r[t[o]],o++;return r}function Jt(s,e,t){const r=e.reduce((o,a)=>{let c=[];t.forEach(({key:u,weight:p})=>{const n=Zt(a,u);Array.isArray(n)?c=c.concat(n.map(_=>({value:_,weight:p}))):typeof n=="string"&&c.push({value:n,weight:p})});const l=c.reduce((u,{value:p,weight:n})=>{if(!Vt(s,p))return u;const _=Qt(s,p);_.outScore*=n;const{matched:v,outScore:h}=_;return!u&&v||v&&u&&h>u.outScore?_:u},null);return l&&o.push({score:l.outScore,item:a}),o},[]);return r.sort((o,a)=>a.score-o.score),r}var es=N(x,oe).extend({name:"CategorizedItems",components:{ItemIterator:V,NoResults:kt,SearchBar:Q},props:{searchItems:{type:Array},excludedCategories:{type:Array,default:()=>[]},excludedSubcategories:{type:Array,default:()=>[]},firstLevelItems:{type:Array,default:()=>[]},initialActiveCategories:{type:Array,default:()=>[]},initialActiveIndex:{type:Number,default:1}},data(){return{activeCategory:this.initialActiveCategories||[],activeSubcategoryHistory:[],activeIndex:this.initialActiveIndex,activeSubcategoryIndex:0,searchEventBus:new d,ALL_NODE_FILTER:f,TRIGGER_NODE_FILTER:C,REGULAR_NODE_FILTER:k}},mounted(){this.registerCustomAction("showAllNodeCreatorNodes",this.switchToAllTabAndFilter)},destroyed(){this.$store.commit("nodeCreator/setFilter",""),this.unregisterCustomAction("showAllNodeCreatorNodes")},computed:{activeSubcategory(){return this.activeSubcategoryHistory[this.activeSubcategoryHistory.length-1]||null},nodeFilter(){return this.$store.getters["nodeCreator/itemsFilter"]},selectedType(){return this.$store.getters["nodeCreator/selectedType"]},categoriesWithNodes(){return this.$store.getters["nodeTypes/categoriesWithNodes"]},categorizedItems(){return this.$store.getters["nodeTypes/categorizedItems"]},activeSubcategoryTitle(){if(!this.activeSubcategory||!this.activeSubcategory.properties)return"";const s=E(this.activeSubcategory.properties.subcategory),e=`nodeCreator.subcategoryTitles.${s}`,t=`nodeCreator.subcategoryNames.${s}`,r=this.$locale.baseText(e),o=this.$locale.baseText(t);return r===e?o:r},searchFilter(){return this.nodeFilter.toLowerCase().trim()},defaultLocale(){return this.$store.getters.defaultLocale},filteredNodeTypes(){var o;const s=this.searchFilter,e=this.subcategorizedNodes.length>0&&((o=this.activeSubcategory)==null?void 0:o.key)!=="*"?this.subcategorizedNodes:this.searchItems;let t=[];if(this.defaultLocale!=="en")t=e.filter(a=>s&&T(a,this.selectedType)&&Y(a,s));else{const a=e.filter(l=>T(l,this.selectedType));t=Jt(s,a,[{key:"properties.nodeType.displayName",weight:2},{key:"properties.nodeType.codex.alias",weight:1}]).map(({item:l})=>l)}const r=this.excludedCategories.length===0?t:this.filterOutNodexFromExcludedCategories(t);return setTimeout(()=>{this.$externalHooks().run("nodeCreateList.filteredNodeTypesComputed",{nodeFilter:this.nodeFilter,result:r,selectedType:this.selectedType})},0),r},filteredAllNodeTypes(){return this.filteredNodeTypes.length>0?[]:this.searchItems.filter(e=>this.searchFilter&&Y(e,this.searchFilter))},categorized(){return this.categorizedItems&&this.categorizedItems.reduce((s,e)=>(this.excludedCategories||[]).includes(e.category)||e.type==="subcategory"&&(this.excludedSubcategories||[]).includes(e.properties.subcategory)||e.type!=="category"&&!this.activeCategory.includes(e.category)||!T(e,this.selectedType)?s:e.type==="category"?(s.push({...e,properties:{expanded:this.activeCategory.includes(e.category)}}),s):(s.push(e),s),[])},subcategorizedItems(){const s=this.activeSubcategory;if(!s)return[];const e=s.category,t=s.properties.subcategory;return(e?this.categoriesWithNodes[e][t].nodes:this.categorized).filter(o=>T(o,this.selectedType))},subcategorizedNodes(){return this.subcategorizedItems.filter(s=>s.type==="node")},renderedItems(){return this.firstLevelItems.length>0&&this.activeSubcategory===null?this.firstLevelItems:this.subcategorizedItems.length===0?this.categorized:this.subcategorizedItems},isSearchVisible(){var e;if(this.subcategorizedItems.length===0)return!0;let s=0;for(const t of this.subcategorizedItems){if(t.type==="category"){const r=this.categoriesWithNodes[t.key],o=(e=Object.values(r))==null?void 0:e[0],a=X[this.selectedType];for(const c of a)s+=o[c];continue}s+=1}return s>9}},watch:{isSearchVisible(s){s===!1&&this.$nextTick(()=>{this.$refs.mainPanelContainer.focus()})},nodeFilter(s,e){this.activeIndex=0,this.activeSubcategoryIndex=0,this.$externalHooks().run("nodeCreateList.nodeFilterChanged",{oldValue:e,newValue:s,selectedType:this.selectedType,filteredNodes:this.filteredNodeTypes}),this.$telemetry.trackNodesPanel("nodeCreateList.nodeFilterChanged",{oldValue:e,newValue:s,selectedType:this.selectedType,filteredNodes:this.filteredNodeTypes,workflow_id:this.$store.getters.workflowId})}},methods:{filterOutNodexFromExcludedCategories(s){return s.filter(e=>{var r,o;return ae(this.excludedCategories,((o=(r=e.properties)==null?void 0:r.nodeType.codex)==null?void 0:o.categories)||[]).length===0})},switchToAllTabAndFilter(){const s=this.nodeFilter;this.$store.commit("nodeCreator/setShowTabs",!0),this.$store.commit("nodeCreator/setSelectedType",f),this.activeSubcategoryHistory=[],this.$nextTick(()=>this.$store.commit("nodeCreator/setFilter",s))},onNodeFilterChange(s){this.$store.commit("nodeCreator/setFilter",s)},selectWebhook(){this.$emit("nodeTypeSelected",w)},selectHttpRequest(){this.$emit("nodeTypeSelected",ne)},nodeFilterKeyDown(s){if(["Escape","Tab"].includes(s.key)||s.stopPropagation(),["ArrowUp","ArrowDown"].includes(s.key)&&s.preventDefault(),this.activeSubcategory){const r=this.subcategorizedItems,o=r[this.activeSubcategoryIndex];s.key==="ArrowDown"&&this.activeSubcategory?(this.activeSubcategoryIndex++,this.activeSubcategoryIndex=Math.min(this.activeSubcategoryIndex,r.length-1)):s.key==="ArrowUp"&&this.activeSubcategory?(this.activeSubcategoryIndex--,this.activeSubcategoryIndex=Math.max(this.activeSubcategoryIndex,0)):s.key==="Enter"?this.selected(o):s.key==="ArrowLeft"&&(o==null?void 0:o.type)==="category"&&o.properties.expanded?this.selected(o):s.key==="ArrowLeft"?this.onSubcategoryClose():s.key==="ArrowRight"&&(o==null?void 0:o.type)==="category"&&!o.properties.expanded&&this.selected(o);return}const e=this.searchFilter.length>0?this.filteredNodeTypes:this.renderedItems,t=e[this.activeIndex];s.key==="ArrowDown"?(this.activeIndex++,this.activeIndex=Math.min(this.activeIndex,e.length-1)):s.key==="ArrowUp"?(this.activeIndex--,this.activeIndex=Math.max(this.activeIndex,0)):s.key==="Enter"&&t?this.selected(t):s.key==="ArrowRight"&&(t==null?void 0:t.type)==="subcategory"?this.selected(t):s.key==="ArrowRight"&&(t==null?void 0:t.type)==="category"&&!t.properties.expanded?this.selected(t):s.key==="ArrowLeft"&&(t==null?void 0:t.type)==="category"&&t.properties.expanded&&this.selected(t)},selected(s){({node:()=>this.$emit("nodeTypeSelected",s.properties.nodeType.name),category:()=>this.onCategorySelected(s.category),subcategory:()=>this.onSubcategorySelected(s)})[s.type]()},onCategorySelected(s){this.activeCategory.includes(s)?this.activeCategory=this.activeCategory.filter(e=>e!==s):(this.activeCategory=[...this.activeCategory,s],this.$telemetry.trackNodesPanel("nodeCreateList.onCategoryExpanded",{category_name:s,workflow_id:this.$store.getters.workflowId})),this.activeIndex=this.categorized.findIndex(e=>e.category===s)},onSubcategorySelected(s){this.$emit("onSubcategorySelected",s),this.$store.commit("nodeCreator/setShowTabs",!1),this.activeSubcategoryIndex=0,this.activeSubcategoryHistory.push(s),this.$telemetry.trackNodesPanel("nodeCreateList.onSubcategorySelected",{selected:s,workflow_id:this.$store.getters.workflowId})},onSubcategoryClose(){this.$emit("subcategoryClose",this.activeSubcategory),this.activeSubcategoryHistory.pop(),this.activeSubcategoryIndex=0,this.$store.commit("nodeCreator/setFilter",""),this.$store.getters["nodeCreator/showScrim"]||this.$store.commit("nodeCreator/setShowTabs",!0)},onClickInside(){this.searchEventBus.$emit("focus")}}});const ts="_categorizedItems_w6fnw_23",ss="_subcategoryHeader_w6fnw_37",rs="_subcategoryBackButton_w6fnw_49",os="_subcategoryBackIcon_w6fnw_56",as="_scrollable_w6fnw_63";var ns={categorizedItems:ts,subcategoryHeader:ss,subcategoryBackButton:rs,subcategoryBackIcon:os,scrollable:as},is=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("transition",{attrs:{name:e.activeSubcategoryTitle?"panel-slide-in":"panel-slide-out"}},[t("div",{key:`${e.activeSubcategoryTitle}_transition`,ref:"mainPanelContainer",class:e.$style.categorizedItems,attrs:{tabindex:"0"},on:{click:e.onClickInside,"!keydown":function(r){return e.nodeFilterKeyDown.apply(null,arguments)}}},[e.$slots.header?t("div",{staticClass:"header"},[e._t("header")],2):e._e(),e.activeSubcategory?t("div",{class:e.$style.subcategoryHeader},[t("button",{class:e.$style.subcategoryBackButton,on:{click:e.onSubcategoryClose}},[t("font-awesome-icon",{class:e.$style.subcategoryBackIcon,attrs:{icon:"arrow-left",size:"2x"}})],1),t("span",{domProps:{textContent:e._s(e.activeSubcategoryTitle)}})]):e._e(),e.isSearchVisible?t("search-bar",{attrs:{value:e.nodeFilter,eventBus:e.searchEventBus},on:{input:e.onNodeFilterChange}}):e._e(),e.searchFilter.length===0?t("div",{class:e.$style.scrollable},[t("item-iterator",{attrs:{elements:e.renderedItems,activeIndex:e.activeSubcategory?e.activeSubcategoryIndex:e.activeIndex,transitionsEnabled:!0},on:{selected:e.selected}})],1):e.filteredNodeTypes.length>0?t("div",{class:e.$style.scrollable},[t("item-iterator",{attrs:{elements:e.filteredNodeTypes,activeIndex:e.activeSubcategory?e.activeSubcategoryIndex:e.activeIndex},on:{selected:e.selected}})],1):t("no-results",{attrs:{showRequest:e.filteredAllNodeTypes.length===0,"show-icon":e.filteredAllNodeTypes.length===0}},[e.filteredAllNodeTypes.length>0?[t("p",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.$locale.baseText("nodeCreator.noResults.clickToSeeResults"))},slot:"title"})]:[t("p",{attrs:{slot:"title"},domProps:{textContent:e._s(e.$locale.baseText("nodeCreator.noResults.weDidntMakeThatYet"))},slot:"title"}),t("template",{slot:"action"},[e._v(" "+e._s(e.$locale.baseText("nodeCreator.noResults.dontWorryYouCanProbablyDoItWithThe"))+" "),[e.REGULAR_NODE_FILTER,e.ALL_NODE_FILTER].includes(e.selectedType)?t("n8n-link",{on:{click:e.selectHttpRequest}},[e._v(" "+e._s(e.$locale.baseText("nodeCreator.noResults.httpRequest"))+" ")]):e._e(),e.selectedType===e.ALL_NODE_FILTER?[e._v(" "+e._s(e.$locale.baseText("nodeCreator.noResults.or"))+" ")]:e._e(),[e.TRIGGER_NODE_FILTER,e.ALL_NODE_FILTER].includes(e.selectedType)?t("n8n-link",{on:{click:e.selectWebhook}},[e._v(" "+e._s(e.$locale.baseText("nodeCreator.noResults.webhook"))+" ")]):e._e(),e._v(" "+e._s(e.$locale.baseText("nodeCreator.noResults.node"))+" ")],2)]],2)],1)])},cs=[];const j={$style:ns};function ls(s){for(var e in j)this[e]=j[e]}var ds=i(es,is,cs,!1,ls,null,null,null),J=ds.exports,us=N(x).extend({name:"TriggerHelperPanel",components:{ItemIterator:V,CategorizedItems:J,SearchBar:Q},props:{searchItems:{type:Array}},data(){return{CORE_NODES_CATEGORY:S,COMMUNICATION_CATEGORY:ie,isRoot:!0}},computed:{items(){return[{key:"*",type:"subcategory",title:this.$locale.baseText("nodeCreator.subcategoryNames.appTriggerNodes"),properties:{subcategory:"App Trigger Nodes",description:this.$locale.baseText("nodeCreator.subcategoryDescriptions.appTriggerNodes"),icon:"fa:satellite-dish",defaults:{color:"#7D838F"}}},{key:D,type:"node",properties:{nodeType:{group:[],name:D,displayName:this.$locale.baseText("nodeCreator.triggerHelperPanel.scheduleTriggerDisplayName"),description:this.$locale.baseText("nodeCreator.triggerHelperPanel.scheduleTriggerDescription"),icon:"fa:clock",defaults:{color:"#7D838F"}}}},{key:w,type:"node",properties:{nodeType:{group:[],name:w,displayName:this.$locale.baseText("nodeCreator.triggerHelperPanel.webhookTriggerDisplayName"),description:this.$locale.baseText("nodeCreator.triggerHelperPanel.webhookTriggerDescription"),iconData:{type:"file",icon:"webhook",fileBuffer:"/static/webhook-icon.svg"},defaults:{color:"#7D838F"}}}},{key:P,type:"node",properties:{nodeType:{group:[],name:P,displayName:this.$locale.baseText("nodeCreator.triggerHelperPanel.manualTriggerDisplayName"),description:this.$locale.baseText("nodeCreator.triggerHelperPanel.manualTriggerDescription"),icon:"fa:mouse-pointer",defaults:{color:"#7D838F"}}}},{key:F,type:"node",properties:{nodeType:{group:[],name:F,displayName:this.$locale.baseText("nodeCreator.triggerHelperPanel.workflowTriggerDisplayName"),description:this.$locale.baseText("nodeCreator.triggerHelperPanel.workflowTriggerDescription"),icon:"fa:sign-out-alt",defaults:{color:"#7D838F"}}}},{type:"subcategory",key:R,category:S,properties:{subcategory:R,description:this.$locale.baseText("nodeCreator.subcategoryDescriptions.otherTriggerNodes"),icon:"fa:folder-open",defaults:{color:"#7D838F"}}}]}},methods:{isRootSubcategory(s){return this.items.find(e=>e.key===s.key)!==void 0},onSubcategorySelected(){this.isRoot=!1},onSubcategoryClose(s){this.isRoot=this.isRootSubcategory(s)}}});const _s="_triggerHelperContainer_1k3ro_1",ps="_isRoot_1k3ro_6",gs="_itemCreator_1k3ro_10",ys="_title_1k3ro_20";var hs={triggerHelperContainer:_s,isRoot:ps,itemCreator:gs,title:ys},ms=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{[e.$style.triggerHelperContainer]:!0,[e.$style.isRoot]:e.isRoot}},[t("categorized-items",{ref:"categorizedItems",attrs:{initialActiveIndex:0,searchItems:e.searchItems,firstLevelItems:e.isRoot?e.items:[],excludedCategories:e.isRoot?[]:[e.CORE_NODES_CATEGORY],initialActiveCategories:[e.COMMUNICATION_CATEGORY]},on:{subcategoryClose:e.onSubcategoryClose,onSubcategorySelected:e.onSubcategorySelected,nodeTypeSelected:r=>e.$emit("nodeTypeSelected",r)},scopedSlots:e._u([{key:"header",fn:function(){return[e._t("header"),e.isRoot?t("p",{class:e.$style.title,domProps:{textContent:e._s(e.$locale.baseText("nodeCreator.triggerHelperPanel.title"))}}):e._e()]},proxy:!0}],null,!0)})],1)},fs=[];const W={$style:hs};function vs(s){for(var e in W)this[e]=W[e]}var bs=i(us,ms,fs,!1,vs,null,null,null),$s=bs.exports,Ts=d.extend({name:"NodeCreateTypeSelector",data(){return{REGULAR_NODE_FILTER:k,TRIGGER_NODE_FILTER:C,ALL_NODE_FILTER:f}},methods:{setType(s){this.$store.commit("nodeCreator/setSelectedType",s)}},computed:{showTabs(){return this.$store.getters["nodeCreator/showTabs"]},selectedType(){return this.$store.getters["nodeCreator/selectedType"]}}});var xs=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.showTabs?t("div",{staticClass:"type-selector"},[t("el-tabs",{attrs:{stretch:"",value:e.selectedType},on:{input:e.setType}},[t("el-tab-pane",{attrs:{label:e.$locale.baseText("nodeCreator.mainPanel.all"),name:e.ALL_NODE_FILTER}}),t("el-tab-pane",{attrs:{label:e.$locale.baseText("nodeCreator.mainPanel.regular"),name:e.REGULAR_NODE_FILTER}}),t("el-tab-pane",{attrs:{label:e.$locale.baseText("nodeCreator.mainPanel.trigger"),name:e.TRIGGER_NODE_FILTER}})],1)],1):e._e()},Cs=[],Ns=i(Ts,xs,Cs,!1,null,"0e199cb5",null,null),Is=Ns.exports,ws=N(x).extend({name:"NodeCreateList",components:{TriggerHelperPanel:$s,CategorizedItems:J,TypeSelector:Is},props:{searchItems:{type:Array}},data(){return{CORE_NODES_CATEGORY:S,TRIGGER_NODE_FILTER:C,ALL_NODE_FILTER:f,OTHER_TRIGGER_NODES_SUBCATEGORY:R}},computed:{selectedType(){return this.$store.getters["nodeCreator/selectedType"]}},watch:{selectedType(s,e){this.$externalHooks().run("nodeCreateList.selectedTypeChanged",{oldValue:e,newValue:s}),this.$telemetry.trackNodesPanel("nodeCreateList.selectedTypeChanged",{old_filter:e,new_filter:s,workflow_id:this.$store.getters.workflowId})}},mounted(){this.$externalHooks().run("nodeCreateList.mounted"),this.$store.commit("nodeCreator/setShowTabs",!0)},destroyed(){this.$store.commit("nodeCreator/setSelectedType",f),this.$externalHooks().run("nodeCreateList.destroyed"),this.$telemetry.trackNodesPanel("nodeCreateList.destroyed",{workflow_id:this.$store.getters.workflowId})}});var Ss=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"mainPanelContainer",staticClass:"container"},[t("div",{staticClass:"main-panel"},[e.selectedType===e.TRIGGER_NODE_FILTER?t("trigger-helper-panel",{attrs:{searchItems:e.searchItems},on:{nodeTypeSelected:r=>e.$emit("nodeTypeSelected",r)}},[t("type-selector",{attrs:{slot:"header"},slot:"header"})],1):t("categorized-items",{attrs:{searchItems:e.searchItems,excludedSubcategories:[e.OTHER_TRIGGER_NODES_SUBCATEGORY],initialActiveCategories:[e.CORE_NODES_CATEGORY]},on:{nodeTypeSelected:r=>e.$emit("nodeTypeSelected",r)}},[t("type-selector",{attrs:{slot:"header"},slot:"header"})],1)],1)])},Rs=[],ks=i(ws,Ss,Rs,!1,null,"b3ef98ce",null,null),Es=ks.exports,Ls=d.extend({name:"NodeCreator",components:{MainPanel:Es,SlideTransition:_e},props:{active:{type:Boolean}},computed:{showScrim(){return this.$store.getters["nodeCreator/showScrim"]},sidebarMenuCollapsed(){return this.$store.getters["ui/sidebarMenuCollapsed"]},visibleNodeTypes(){return this.$store.getters["nodeTypes/visibleNodeTypes"]},searchItems(){const s=[...this.visibleNodeTypes];return s.sort((e,t)=>{const r=e.displayName.toLowerCase(),o=t.displayName.toLowerCase();return r<o?-1:r>o?1:0}),s.map(e=>({type:"node",category:"",key:`${e.name}`,properties:{nodeType:e,subcategory:""},includedByTrigger:e.group.includes("trigger"),includedByRegular:!e.group.includes("trigger")}))}},methods:{onClickOutside(s){s.type==="click"&&this.$emit("closeNodeCreator")},nodeTypeSelected(s){this.$emit("nodeTypeSelected",s)},onDragOver(s){s.preventDefault()},onDrop(s){if(!s.dataTransfer)return;const e=s.dataTransfer.getData("nodeTypeName"),t=this.$refs.nodeCreator.getBoundingClientRect();e&&s.pageX>=t.x&&s.pageY>=t.y&&s.stopPropagation()}},watch:{active(s){s===!1&&this.$store.commit("nodeCreator/setShowScrim",!1)}}});var As=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("aside",{class:{"node-creator-scrim":!0,expanded:!e.sidebarMenuCollapsed,active:e.showScrim}}),t("slide-transition",[e.active?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"nodeCreator",staticClass:"node-creator",on:{dragover:e.onDragOver,drop:e.onDrop}},[t("main-panel",{attrs:{searchItems:e.searchItems},on:{nodeTypeSelected:e.nodeTypeSelected}})],1):e._e()])],1)},Os=[],Ds=i(Ls,As,Os,!1,null,"0cbf2208",null,null),mr=Ds.exports;export{mr as default};
