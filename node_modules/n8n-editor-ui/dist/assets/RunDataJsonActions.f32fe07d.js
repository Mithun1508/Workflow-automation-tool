import{m as l}from"./vue-typed-mixins.81797ea0.js";import{j as c}from"./jsonpath.ffbbd05e.js";import{n as m,o as d,p as h,q as u,r as y,s as P,t as i}from"./index.9a182bb0.js";import{n as _}from"./n8n-design-system.670325b1.js";import"./vendor.a2fafdee.js";import"./axios.4a974fe3.js";import"./@fortawesome/fontawesome-svg-core.2d7f1ae5.js";import"./@fortawesome/free-solid-svg-icons.4a1e939e.js";import"./@fortawesome/free-regular-svg-icons.9fb25f9a.js";import"./@fortawesome/vue-fontawesome.4443d979.js";import"./vue2-touch-events.f7c2b344.js";import"./v-click-outside.2a379eae.js";import"./vue-fragment.3d40e27f.js";import"./vue-agile.3c7c1e37.js";import"./lodash-es.e05ea3b9.js";import"./prismjs.95406fca.js";import"./xss.ffb35cb9.js";import"./n8n-workflow.4d086b10.js";import"./luxon.daa33f39.js";import"./flatted.12ebcbd8.js";import"./uuid.6335a3e0.js";import"./dateformat.a1136387.js";import"./monaco-editor.21485360.js";import"./quill.470e9400.js";import"./quill-autoformat.e2d87442.js";import"./fast-json-stable-stringify.d7c839ef.js";import"./vue-prism-editor.20a215ee.js";import"./esprima.67881ccb.js";import"./vue-i18n.517f429e.js";import"./timeago.js.677063e2.js";import"./file-saver.a22fc8cb.js";import"./jsplumb.1ecfd296.js";import"./normalize-wheel.53b95207.js";import"./vue2-teleport.e42b1fad.js";import"./vue-json-pretty.7b5bff4b.js";const r="_!^&*";var f=l(m,d,h,u).extend({name:"run-data-json-actions",props:{node:{type:Object},paneType:{type:String},sessionId:{type:String},currentOutputIndex:{type:Number},runIndex:{type:Number},displayMode:{type:String},distanceFromActive:{type:Number},selectedJsonPath:{type:String,default:r},jsonData:{type:Array,required:!0}},computed:{activeNode(){return this.$store.getters["ndv/activeNode"]},normalisedJsonPath(){return this.selectedJsonPath===r?'[""]':this.selectedJsonPath}},methods:{getJsonValue(){let e=c.query(this.jsonData,`$${this.normalisedJsonPath}`)[0];this.selectedJsonPath===r&&(this.hasPinData?e=y(this.pinData):e=P(this.getNodeInputData(this.node,this.runIndex,this.currentOutputIndex)));let t="";return typeof e=="object"?t=JSON.stringify(e,null,2):t=e.toString(),t},getJsonItemPath(){const e=i(this.normalisedJsonPath);let t="",s="";const a=e.split("]"),o=a[0].slice(1);return s=a.slice(1).join("]"),t=`$item(${o}).$node["${this.node.name}"].json`,{path:s,startPath:t}},getJsonParameterPath(){const t=i(this.normalisedJsonPath).split("]").slice(1).join("]");let s=`$node["${this.node.name}"].json`;return this.distanceFromActive===1&&(s="$json"),{path:t,startPath:s}},handleCopyClick(e){let t;if(e.command==="value")t=this.getJsonValue(),this.$showToast({title:this.$locale.baseText("runData.copyValue.toast"),message:"",type:"success",duration:2e3});else{let a="",o="";if(e.command==="itemPath"){const n=this.getJsonItemPath();a=n.startPath,o=n.path,this.$showToast({title:this.$locale.baseText("runData.copyItemPath.toast"),message:"",type:"success",duration:2e3})}else if(e.command==="parameterPath"){const n=this.getJsonParameterPath();a=n.startPath,o=n.path,this.$showToast({title:this.$locale.baseText("runData.copyParameterPath.toast"),message:"",type:"success",duration:2e3})}!o.startsWith("[")&&!o.startsWith(".")&&o&&(o+="."),t=`{{ ${a+o} }}`}const s={value:"selection",itemPath:"item_path",parameterPath:"parameter_path"}[e.command];this.$telemetry.track("User copied ndv data",{node_type:this.activeNode.type,session_id:this.sessionId,run_index:this.runIndex,view:"json",copy_type:s,workflow_id:this.$store.getters.workflowId,pane:this.paneType,in_execution_log:this.isReadOnly}),this.copyToClipboard(t)}}});const v="_actionsGroup_wlnwy_1";var $={actionsGroup:v},g=function(){var t=this,s=t._self._c;return t._self._setupProxy,s("div",{class:t.$style.actionsGroup},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCopyClick}},[s("span",{staticClass:"el-dropdown-link"},[s("n8n-icon-button",{attrs:{title:t.$locale.baseText("runData.copyToClipboard"),icon:"copy",type:"tertiary",circle:!1}})],1),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{command:"value"}}},[t._v(" "+t._s(t.$locale.baseText("runData.copyValue"))+" ")]),s("el-dropdown-item",{attrs:{command:{command:"itemPath"},divided:""}},[t._v(" "+t._s(t.$locale.baseText("runData.copyItemPath"))+" ")]),s("el-dropdown-item",{attrs:{command:{command:"parameterPath"}}},[t._v(" "+t._s(t.$locale.baseText("runData.copyParameterPath"))+" ")])],1)],1)],1)},x=[];const p={$style:$};function w(e){for(var t in p)this[t]=p[t]}var J=_(f,g,x,!1,w,null,null,null),rt=J.exports;export{rt as default};
