import{V as m,m as F,b as Ip,e as Ap}from"./vendor.a2fafdee.js";import{l as Aw}from"./@fortawesome/fontawesome-svg-core.2d7f1ae5.js";import{f as Rw,a as Mw,b as Ww,c as Lw,d as Qw,e as Bw,g as Uw,h as Vw,i as Fw,j as jw,k as zw,l as Gw,m as Hw,n as qw,o as Xw,p as Yw,q as Zw,r as Kw,s as Jw,t as ey,u as ty,v as sy,w as iy,x as ny,y as oy,z as ry,A as ay,B as ly,C as cy,D as dy,E as uy,F as hy,G as py,H as fy,I as my,J as gy,K as wy,L as yy,M as vy,N as _y,O as Oy,P as by,Q as xy,R as $y,S as Ty,T as ky,U as Sy,V as Ey,W as Cy,X as Ny,Y as Py,Z as Dy,_ as Iy,$ as Ay,a0 as Ry,a1 as My,a2 as Wy,a3 as Ly,a4 as Qy,a5 as By,a6 as Uy,a7 as Vy,a8 as Fy,a9 as jy,aa as zy,ab as Gy,ac as Hy,ad as qy,ae as Xy,af as Yy,ag as Zy,ah as Ky,ai as Jy,aj as ev,ak as tv,al as sv,am as iv,an as nv,ao as ov,ap as rv,aq as av,ar as lv,as as cv,at as dv,au as uv,av as hv,aw as pv,ax as fv,ay as mv,az as gv,aA as wv,aB as yv,aC as vv,aD as _v,aE as Ov,aF as bv,aG as xv,aH as $v,aI as Tv,aJ as kv,aK as Sv,aL as Ev,aM as Cv,aN as Nv,aO as Pv,aP as Dv,aQ as Iv,aR as Av,aS as Rv,aT as Mv,aU as Wv,aV as Lv,aW as Qv}from"./@fortawesome/free-solid-svg-icons.4a1e939e.js";import{f as Bv}from"./@fortawesome/free-regular-svg-icons.9fb25f9a.js";import{F as Uv}from"./@fortawesome/vue-fontawesome.4443d979.js";import{V as Vv}from"./vue2-touch-events.f7c2b344.js";import{v as Fv}from"./v-click-outside.2a379eae.js";import{i as jv}from"./vue-fragment.3d40e27f.js";import{V as Rp}from"./vue-agile.3c7c1e37.js";import{n as _,e as zv,d as Gv,L as Mp,M as Cs,N as Hv,a as qv,u as Wp,i as Xv}from"./n8n-design-system.670325b1.js";import"./prismjs.95406fca.js";import{m as N}from"./vue-typed-mixins.81797ea0.js";import{x as Yv,l as Zv}from"./xss.ffb35cb9.js";import{l as ae,d as Kv,g as rc,m as Jv,W as e_,a as Se,b as Ht,c as t_,j as Lp,e as Qp,f as s_,i as ac,h as lc,k as Pi,n as Bp}from"./n8n-workflow.4d086b10.js";import{p as i_}from"./flatted.12ebcbd8.js";import{d as Up}from"./axios.4a974fe3.js";import{v as st}from"./uuid.6335a3e0.js";import{d as ii}from"./dateformat.a1136387.js";import{e as or,l as rr}from"./monaco-editor.21485360.js";import{Q as ar}from"./quill.470e9400.js";import{A as cc}from"./quill-autoformat.e2d87442.js";import{f as n_}from"./fast-json-stable-stringify.d7c839ef.js";import{P as o_}from"./vue-prism-editor.20a215ee.js";import{e as r_}from"./esprima.67881ccb.js";import{V as Vp}from"./vue-i18n.517f429e.js";import{r as a_,f as l_}from"./timeago.js.677063e2.js";import{F as Fp}from"./file-saver.a22fc8cb.js";import{j as c_}from"./jsplumb.1ecfd296.js";import{a as d_}from"./lodash-es.e05ea3b9.js";import{n as u_}from"./normalize-wheel.53b95207.js";import{_ as h_}from"./vue2-teleport.e42b1fad.js";import{V as jp}from"./vue-json-pretty.7b5bff4b.js";import"./luxon.daa33f39.js";function CX(){import("data:text/javascript,")}const p_=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}};p_();function E(s){Aw.add(s)}E(Rw);E(Mw);E(Ww);E(Lw);E(Qw);E(Bw);E(Uw);E(Vw);E(Fw);E(jw);E(zw);E(Gw);E(Hw);E(qw);E(Xw);E(Yw);E(Zw);E(Kw);E(Jw);E(ey);E(ty);E(sy);E(iy);E(ny);E(oy);E(ry);E(ay);E(ly);E(cy);E(dy);E(uy);E(hy);E(py);E(fy);E(my);E(gy);E(wy);E(yy);E(vy);E(_y);E(Oy);E(by);E(xy);E($y);E(Ty);E(ky);E(Sy);E(Ey);E(Cy);E(Ny);E(Py);E(Dy);E(Iy);E(Ay);E(Ry);E(My);E(Wy);E(Ly);E(Qy);E(By);E(Uy);E(Vy);E(Fy);E(jy);E(zy);E(Gy);E(Hy);E(qy);E(Xy);E(Yy);E(Zy);E(Ky);E(Jy);E(ev);E(tv);E(sv);E(iv);E(nv);E(ov);E(rv);E(av);E(lv);E(cv);E(dv);E(uv);E(hv);E(pv);E(fv);E(mv);E(gv);E(wv);E(yv);E(vv);E(_v);E(Bv);E(Ov);E(bv);E(xv);E($v);E(Tv);E(kv);E(Sv);E(Ev);E(Cv);E(Nv);E(Pv);E(Dv);E(Iv);E(Av);E(Rv);E(Mv);E(Wv);E(Lv);E(Qv);m.component("font-awesome-icon",Uv);m.use(Vv);m.use(Fv);var f_={exports:{}};(function(s){var e=function(t){var i=Object.prototype,n=i.hasOwnProperty,o=Object.defineProperty||function(x,b,C){x[b]=C.value},r,a=typeof Symbol=="function"?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function u(x,b,C){return Object.defineProperty(x,b,{value:C,enumerable:!0,configurable:!0,writable:!0}),x[b]}try{u({},"")}catch{u=function(b,C,W){return b[C]=W}}function h(x,b,C,W){var Q=b&&b.prototype instanceof S?b:S,q=Object.create(Q.prototype),oe=new Y(W||[]);return o(q,"_invoke",{value:Z(x,C,oe)}),q}t.wrap=h;function p(x,b,C){try{return{type:"normal",arg:x.call(b,C)}}catch(W){return{type:"throw",arg:W}}}var f="suspendedStart",w="suspendedYield",g="executing",v="completed",y={};function S(){}function T(){}function $(){}var D={};u(D,l,function(){return this});var P=Object.getPrototypeOf,M=P&&P(P(te([])));M&&M!==i&&n.call(M,l)&&(D=M);var R=$.prototype=S.prototype=Object.create(D);T.prototype=$,o(R,"constructor",{value:$,configurable:!0}),o($,"constructor",{value:T,configurable:!0}),T.displayName=u($,d,"GeneratorFunction");function L(x){["next","throw","return"].forEach(function(b){u(x,b,function(C){return this._invoke(b,C)})})}t.isGeneratorFunction=function(x){var b=typeof x=="function"&&x.constructor;return b?b===T||(b.displayName||b.name)==="GeneratorFunction":!1},t.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,$):(x.__proto__=$,u(x,d,"GeneratorFunction")),x.prototype=Object.create(R),x},t.awrap=function(x){return{__await:x}};function G(x,b){function C(q,oe,ue,me){var ge=p(x[q],x,oe);if(ge.type==="throw")me(ge.arg);else{var ut=ge.arg,yt=ut.value;return yt&&typeof yt=="object"&&n.call(yt,"__await")?b.resolve(yt.__await).then(function(Vt){C("next",Vt,ue,me)},function(Vt){C("throw",Vt,ue,me)}):b.resolve(yt).then(function(Vt){ut.value=Vt,ue(ut)},function(Vt){return C("throw",Vt,ue,me)})}}var W;function Q(q,oe){function ue(){return new b(function(me,ge){C(q,oe,me,ge)})}return W=W?W.then(ue,ue):ue()}o(this,"_invoke",{value:Q})}L(G.prototype),u(G.prototype,c,function(){return this}),t.AsyncIterator=G,t.async=function(x,b,C,W,Q){Q===void 0&&(Q=Promise);var q=new G(h(x,b,C,W),Q);return t.isGeneratorFunction(b)?q:q.next().then(function(oe){return oe.done?oe.value:q.next()})};function Z(x,b,C){var W=f;return function(q,oe){if(W===g)throw new Error("Generator is already running");if(W===v){if(q==="throw")throw oe;return le()}for(C.method=q,C.arg=oe;;){var ue=C.delegate;if(ue){var me=ne(ue,C);if(me){if(me===y)continue;return me}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(W===f)throw W=v,C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);W=g;var ge=p(x,b,C);if(ge.type==="normal"){if(W=C.done?v:w,ge.arg===y)continue;return{value:ge.arg,done:C.done}}else ge.type==="throw"&&(W=v,C.method="throw",C.arg=ge.arg)}}}function ne(x,b){var C=x.iterator[b.method];if(C===r){if(b.delegate=null,b.method==="throw"){if(x.iterator.return&&(b.method="return",b.arg=r,ne(x,b),b.method==="throw"))return y;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var W=p(C,x.iterator,b.arg);if(W.type==="throw")return b.method="throw",b.arg=W.arg,b.delegate=null,y;var Q=W.arg;if(!Q)return b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,y;if(Q.done)b[x.resultName]=Q.value,b.next=x.nextLoc,b.method!=="return"&&(b.method="next",b.arg=r);else return Q;return b.delegate=null,y}L(R),u(R,d,"Generator"),u(R,l,function(){return this}),u(R,"toString",function(){return"[object Generator]"});function he(x){var b={tryLoc:x[0]};1 in x&&(b.catchLoc=x[1]),2 in x&&(b.finallyLoc=x[2],b.afterLoc=x[3]),this.tryEntries.push(b)}function _e(x){var b=x.completion||{};b.type="normal",delete b.arg,x.completion=b}function Y(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(he,this),this.reset(!0)}t.keys=function(x){var b=Object(x),C=[];for(var W in b)C.push(W);return C.reverse(),function Q(){for(;C.length;){var q=C.pop();if(q in b)return Q.value=q,Q.done=!1,Q}return Q.done=!0,Q}};function te(x){if(x){var b=x[l];if(b)return b.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var C=-1,W=function Q(){for(;++C<x.length;)if(n.call(x,C))return Q.value=x[C],Q.done=!1,Q;return Q.value=r,Q.done=!0,Q};return W.next=W}}return{next:le}}t.values=te;function le(){return{value:r,done:!0}}return Y.prototype={constructor:Y,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(_e),!x)for(var b in this)b.charAt(0)==="t"&&n.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=r)},stop:function(){this.done=!0;var x=this.tryEntries[0],b=x.completion;if(b.type==="throw")throw b.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var b=this;function C(me,ge){return q.type="throw",q.arg=x,b.next=me,ge&&(b.method="next",b.arg=r),!!ge}for(var W=this.tryEntries.length-1;W>=0;--W){var Q=this.tryEntries[W],q=Q.completion;if(Q.tryLoc==="root")return C("end");if(Q.tryLoc<=this.prev){var oe=n.call(Q,"catchLoc"),ue=n.call(Q,"finallyLoc");if(oe&&ue){if(this.prev<Q.catchLoc)return C(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return C(Q.finallyLoc)}else if(oe){if(this.prev<Q.catchLoc)return C(Q.catchLoc,!0)}else if(ue){if(this.prev<Q.finallyLoc)return C(Q.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(x,b){for(var C=this.tryEntries.length-1;C>=0;--C){var W=this.tryEntries[C];if(W.tryLoc<=this.prev&&n.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var Q=W;break}}Q&&(x==="break"||x==="continue")&&Q.tryLoc<=b&&b<=Q.finallyLoc&&(Q=null);var q=Q?Q.completion:{};return q.type=x,q.arg=b,Q?(this.method="next",this.next=Q.finallyLoc,y):this.complete(q)},complete:function(x,b){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&b&&(this.next=b),y},finish:function(x){for(var b=this.tryEntries.length-1;b>=0;--b){var C=this.tryEntries[b];if(C.finallyLoc===x)return this.complete(C.completion,C.afterLoc),_e(C),y}},catch:function(x){for(var b=this.tryEntries.length-1;b>=0;--b){var C=this.tryEntries[b];if(C.tryLoc===x){var W=C.completion;if(W.type==="throw"){var Q=W.arg;_e(C)}return Q}}throw new Error("illegal catch attempt")},delegateYield:function(x,b,C){return this.delegate={iterator:te(x),resultName:b,nextLoc:C},this.method==="next"&&(this.arg=r),y}},t}(s.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(f_);var m_=m.extend({name:"EnterpriseEdition",props:{features:{type:Array,default:()=>[]}},computed:{canAccess(){return this.features.reduce((s,e)=>s&&!!this.$store.getters["settings/isEnterpriseFeatureEnabled"](e),!0)}}}),g_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e.canAccess?e._t("default"):e._t("fallback")],2)},w_=[],y_=_(m_,g_,w_,!1,null,null,null,null),v_=y_.exports;m.use(jv.Plugin);m.use(zv);m.use(Gv);m.component("enterprise-edition",v_);m.use(Rp);m.use(Mp.directive);m.prototype.$loading=Mp.service;m.prototype.$msgbox=Cs;m.prototype.$alert=async(s,e,t)=>{let i=t||(typeof e=="object"?e:{});return i={...i,cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm"},typeof e=="string"?await Cs.alert(s,e,i):await Cs.alert(s,i)};m.prototype.$confirm=async(s,e,t)=>{let i=t||(typeof e=="object"?e:{});return i={...i,cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm",distinguishCancelAndClose:!0,showClose:t.showClose||!1,closeOnClickModal:!1},typeof e=="string"?await Cs.confirm(s,e,i):await Cs.confirm(s,i)};m.prototype.$prompt=async(s,e,t)=>{let i=t||(typeof e=="object"?e:{});return i={...i,cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm"},typeof e=="string"?await Cs.prompt(s,e,i):await Cs.prompt(s,i)};m.prototype.$notify=Hv;m.prototype.$message=qv;const __=12582912,zp=204800,O_=250,at="[filled at execution time]",Xs="__CUSTOM_API_CALL__",fe="__EMPTY__",b_=1,x_="My workflow",qa=128,dc=" copy",Ti="_NODE_OUTPUT_DEFAULT_KEY_",Xa="_QUICKSTART_NOTE_",Ya=24,Yi="about",Ao="changePassword",_t="editCredential",Ro="selectCredential",Pn="deleteUser",Mo="inviteUser",Wo="duplicate",Lo="tagsManager",Ns="versions",Lt="settings",Qo="personalization",Za="contactPrompt",Bo="valueSurvey",Zi="executions",Qi="activation",Ki="onboardingCallSignup",Uo="communityPackageInstall",jt="communityPackageManageConfirm",Gt="importCurl",At={UNINSTALL:"uninstall",UPDATE:"update",VIEW_DOCS:"view-documentation"},uc=768,hc=992,pc=1200,fc=1920,Ka="https://api.n8n.io/api/",$_="https://docs.n8n.io/integrations/builtin/",T_="https://docs.n8n.io/integrations/builtin/credentials/",k_="https://docs.n8n.io/data/data-pinning/",S_="https://docs.n8n.io/data/data-editing/",E_="https://api.npms.io/v2/",Gp="https://www.npmjs.com/package/",mc="https://www.npmjs.com/search?q=keywords%3An8n-community-node-package",Ys="https://docs.n8n.io/integrations/community-nodes/installation/",C_="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm",N_="https://docs.n8n.io/integrations/community-nodes/risks/",P_="https://docs.n8n.io/integrations/creating-nodes/code/create-n8n-nodes-module/",D_="n8n-nodes-base.bambooHr",I_="n8n-nodes-base.calendlyTrigger",Vo="n8n-nodes-base.code",A_="n8n-nodes-base.cron",R_="n8n-nodes-base.clearbit",M_="n8n-nodes-base.githubTrigger",W_="n8n-nodes-base.googleSheets",Hp="n8n-nodes-base.errorTrigger",Xr="n8n-nodes-base.elasticSecurity",L_="n8n-nodes-base.emailSend",Q_="n8n-nodes-base.executeCommand",Vs="n8n-nodes-base.httpRequest",B_="n8n-nodes-base.hubspotTrigger",Ja="n8n-nodes-base.if",U_="n8n-nodes-base.interval",qp="n8n-nodes-base.itemLists",gc="n8n-nodes-base.jira",Yr="n8n-nodes-base.jiraTrigger",V_="n8n-nodes-base.microsoftExcel",Fo="n8n-nodes-base.manualTrigger",F_="n8n-nodes-base.microsoftTeams",j_="n8n-nodes-base.noOp",nt="n8n-nodes-base.stickyNote",z_="n8n-nodes-base.notionTrigger",G_="n8n-nodes-base.pagerDuty",Xp="n8n-nodes-base.salesforce",H_="n8n-nodes-base.segment",Yp="n8n-nodes-base.set",Zr="n8n-nodes-base.scheduleTrigger",q_="n8n-nodes-base.serviceNow",Kr="n8n-nodes-base.slack",Zp="n8n-nodes-base.spreadsheetFile",X_="n8n-nodes-base.splitInBatches",di="n8n-nodes-base.start",el="n8n-nodes-base.switch",Y_="n8n-nodes-base.theHiveTrigger",Kp="n8n-nodes-base.quickbooks",xt="n8n-nodes-base.webhook",Z_="n8n-nodes-base.workableTrigger",K_="n8n-nodes-base.executeWorkflowTrigger",J_="n8n-nodes-base.wooCommerceTrigger",eO="n8n-nodes-base.xero",wc="n8n-nodes-base.zendesk",tO="n8n-nodes-base.zendeskTrigger",sO=[Hp,Fo,K_],iO=[Ja,el],nO=[...iO,X_],Jr="Core Nodes",c7="Communication",yc="Custom Nodes",oO={"Core Nodes":{Flow:"Branches, core triggers, merge data",Files:"Work with CSV, XML, text, images etc.","Data Transformation":"Manipulate data fields, run code",Helpers:"HTTP Requests (API calls), date and time, scrape HTML"}},rO="Regular",ea="Trigger",Jp="All",ta="Miscellaneous",lr="Helpers",sa="Suggested Nodes",d7="Other Trigger Nodes",u7="https://n8n-community.typeform.com/to/K1fBVTZ3",aO="n8n-instance-id",ef="3000-01-01T00:00:00.000Z",lO="workArea",cO="finance",cr="IT-Engineering",vc="product",_c="sales-businessDevelopment",Oc="security",gs="companyType",dO="saas",tf="ecommerce",uO="education",hO="msp",pO="digital-agency",fO="systems-integrator",dr="other",Fs="personal",bc="companyIndustryExtended",mO="otherCompanyIndustryExtended",gO="physical-retail-or-services",wO="real-estate-or-construction",yO="government",vO="legal-industry",_O="marketing-industry",OO="media-industry",bO="manufacturing-industry",xO="msp",$O="healthcare",TO="finance-insurance-industry",kO="it-industry",SO="security-industry",EO="telecoms",xc="other",tl="companySize",CO="<20",NO="20-99",PO="100-499",sl="500-999",il="1000+",DO="personalUser",$c="automationGoalSm",IO="lead-generation",AO="customer-communication",RO="actions",MO="ad-campaign",WO="reporting",LO="data-syncing",Tc="other",QO="automationGoalSmOther",Zs="codingSkill",BO="usageModes",UO="connect-internal-db",VO="build-be-services",FO="manipulate-files",Dn="automationGoal",jO="otherAutomationGoal",In="customer-integrations",An="customer-support",zO="engineering",Rn="finance-accounting",Mn="hr",sf="operations",Wn="product",Di="sales-marketing",Ln="security",Jn="other",ia="not-sure-yet",nl="cancel",eo="close",to="confirmed",jo=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,nf="N8N_HIDE_ACTIVATION_ALERT",ur="N8N_PIN_DATA_DISCOVERY_NDV",na="N8N_PIN_DATA_DISCOVERY_CANVAS",js="N8N_MAPPING_ONBOARDED",kc="N8N_MAIN_PANEL_RELATIVE_WIDTH",GO="N8N_THEME",HO="https://n8n-community.typeform.com/to/BvmzxqYv#nodename=",qO=`
                                                                    //////
                                                                 ///////////
                                                               /////      ////
                                               ///////////////////         ////
                                             //////////////////////       ////
     ///////               ///////          ////                /////////////
  ////////////          ////////////       ////                    ///////
 ////       ////       ////       ////    ////
/////        /////////////         //////////
 /////     ////       ////       ////     ////
  ////////////          ////////////       ////           ////////
    ///////                //////           ////        /////////////
                                             /////////////        ////
                                                //////////        ////
                                                       ////      ////
                                                        ///////////
                                                          //////

Love n8n? Help us build the future of automation! https://n8n.io/careers
`,h7={[rO]:["regularCount"],[ea]:["triggerCount"],[Jp]:["triggerCount","regularCount"]},XO=["n8n-nodes-base.start","n8n-nodes-base.respondToWebhook"];var O=(s=>(s.HOMEPAGE="Homepage",s.COLLECTION="TemplatesCollectionView",s.EXECUTION="ExecutionById",s.EXECUTIONS="ExecutionList",s.EXECUTION_PREVIEW="ExecutionPreview",s.EXECUTION_HOME="ExecutionsLandingPage",s.TEMPLATE="TemplatesWorkflowView",s.TEMPLATES="TemplatesSearchView",s.CREDENTIALS="CredentialsView",s.NEW_WORKFLOW="NodeViewNew",s.WORKFLOW="NodeViewExisting",s.DEMO="WorkflowDemo",s.TEMPLATE_IMPORT="WorkflowTemplate",s.SIGNIN="SigninView",s.SIGNUP="SignupView",s.SETUP="SetupView",s.FORGOT_PASSWORD="ForgotMyPasswordView",s.CHANGE_PASSWORD="ChangePasswordView",s.USERS_SETTINGS="UsersSettings",s.PERSONAL_SETTINGS="PersonalSettings",s.API_SETTINGS="APISettings",s.NOT_FOUND="NotFoundView",s.FAKE_DOOR="ComingSoon",s.COMMUNITY_NODES="CommunityNodes",s.WORKFLOWS="WorkflowsView",s))(O||{}),Qn=(s=>(s.ENVIRONMENTS="environments",s.LOGGING="logging",s.SHARING="sharing",s))(Qn||{});const of=14,rf=3e5,YO=[{name:"First item",code:1},{name:"Second item",code:2}],ZO=["$binary","$data","$env","$evaluateExpression","$execution","$input","$item","$jmespath","$json","$node","$now","$parameter","$parameters","$position","$prevNode","$resumeWebhookUrl","$runIndex","$today","$workflow"],p7=160,f7=240;var tt=(s=>(s.DUPLICATE="duplicate",s.DOWNLOAD="download",s.IMPORT_FROM_URL="import-from-url",s.IMPORT_FROM_FILE="import-from-file",s.SETTINGS="settings",s.DELETE="delete",s))(tt||{}),Be=(s=>(s.Sharing="sharing",s))(Be||{});const Us=360;var Le=(s=>(s.WORKFLOW="workflow",s.EXECUTIONS="executions",s.SETTINGS="settings",s))(Le||{});const KO=["ftp","ftps","dict","imap","imaps","ldap","ldaps","mqtt","pop","pop3s","rtmp","rtsp","scp","sftp","smb","smbs","smtp","smtps","telnet","tftp"],Sc={ftp:"FTP",ftps:"FTP",ldap:"LDAP",ldaps:"LDAP",mqtt:"MQTT",imap:"IMAP",imaps:"IMAP"};var JO=m.extend({name:"Modal",props:{name:{type:String},title:{type:String},subtitle:{type:String},eventBus:{type:m},showClose:{type:Boolean,default:!0},loading:{type:Boolean},classic:{type:Boolean},beforeClose:{type:Function},customClass:{type:String},center:{type:Boolean},width:{type:String,default:"50%"},minWidth:{type:String},maxWidth:{type:String},height:{type:String},minHeight:{type:String},maxHeight:{type:String},scrollable:{type:Boolean,default:!1},centerTitle:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}},mounted(){window.addEventListener("keydown",this.onWindowKeydown),this.$props.eventBus&&(this.$props.eventBus.$on("close",()=>{this.closeDialog()}),this.$props.eventBus.$on("closeAll",()=>{this.closeAllDialogs()}));const s=document.activeElement;s&&s.blur()},beforeDestroy(){window.removeEventListener("keydown",this.onWindowKeydown)},methods:{onWindowKeydown(s){!this.isActive||s&&s.keyCode===13&&this.handleEnter()},handleEnter(){this.isActive&&this.$emit("enter")},closeAllDialogs(){this.$store.commit("ui/closeAllModals")},async closeDialog(){this.beforeClose&&await this.beforeClose()===!1||this.$store.commit("ui/closeModal",this.$props.name)},getCustomClass(){let s=this.$props.customClass||"";return this.$props.classic&&(s=`${s} classic`),s}},computed:{isActive(){return this.$store.getters["ui/isModalActive"](this.$props.name)},visible(){return this.$store.getters["ui/isModalOpen"](this.$props.name)},styles(){const s={};return this.height&&(s["--dialog-height"]=this.height),this.minHeight&&(s["--dialog-min-height"]=this.minHeight),this.maxHeight&&(s["--dialog-max-height"]=this.maxHeight),this.maxWidth&&(s["--dialog-max-width"]=this.maxWidth),this.minWidth&&(s["--dialog-min-width"]=this.minWidth),s}}});const eb="_center_6b5jf_1",tb="_loader_6b5jf_7",sb="_centerTitle_6b5jf_16",ib="_subtitle_6b5jf_20",nb="_footer_6b5jf_24";var ob={center:eb,loader:tb,centerTitle:sb,subtitle:ib,footer:nb},rb=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-dialog",{class:{"dialog-wrapper":!0,[e.$style.center]:e.center,scrollable:e.scrollable},style:e.styles,attrs:{visible:e.visible,"before-close":e.closeDialog,width:e.width,"show-close":e.showClose,"custom-class":e.getCustomClass(),"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape,"append-to-body":""},scopedSlots:e._u([e.$scopedSlots.header?{key:"title",fn:function(){return[e.loading?e._e():e._t("header")]},proxy:!0}:e.title?{key:"title",fn:function(){return[t("div",{class:e.centerTitle?e.$style.centerTitle:""},[e.title?t("div",[t("n8n-heading",{attrs:{tag:"h1",size:"xlarge"}},[e._v(e._s(e.title))])],1):e._e(),e.subtitle?t("div",{class:e.$style.subtitle},[t("n8n-heading",{attrs:{tag:"h3",size:"small",color:"text-light"}},[e._v(e._s(e.subtitle))])],1):e._e()])]},proxy:!0}:null],null,!0)},[t("div",{staticClass:"modal-content",on:{keydown:[function(i){i.stopPropagation()},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.handleEnter.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.closeDialog.apply(null,arguments)}]}},[e.loading?t("div",{class:e.$style.loader},[t("n8n-spinner")],1):e._t("content")],2),!e.loading&&e.$scopedSlots.footer?t("div",{class:e.$style.footer},[e._t("footer",null,{close:e.closeDialog})],2):e._e()])},ab=[];const Ec={$style:ob};function lb(s){for(var e in Ec)this[e]=Ec[e]}var cb=_(JO,rb,ab,!1,lb,null,null,null),Me=cb.exports,db=m.extend({name:"About",components:{Modal:Me},data(){return{ABOUT_MODAL_KEY:Yi,modalBus:new m}},computed:{...F("settings",["versionCli"]),...F(["instanceId"])},methods:{closeDialog(){this.modalBus.$emit("close")}}});const ub="_container_1f34v_1";var hb={container:ub},pb=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"540px",title:e.$locale.baseText("about.aboutN8n"),eventBus:e.modalBus,name:e.ABOUT_MODAL_KEY,center:!0}},[t("template",{slot:"content"},[t("div",{class:e.$style.container},[t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.n8nVersion")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-text",[e._v(e._s(e.versionCli))])],1)],1),t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.sourceCode")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-link",{attrs:{to:"https://github.com/n8n-io/n8n"}},[e._v("https://github.com/n8n-io/n8n")])],1)],1),t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.license")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-link",{attrs:{to:"https://github.com/n8n-io/n8n/blob/master/packages/cli/LICENSE.md"}},[e._v(" "+e._s(e.$locale.baseText("about.n8nLicense"))+" ")])],1)],1),t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.instanceID")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-text",[e._v(e._s(e.instanceId))])],1)],1)],1)]),t("template",{slot:"footer"},[t("div",{staticClass:"action-buttons"},[t("n8n-button",{attrs:{float:"right",label:e.$locale.baseText("about.close")},on:{click:e.closeDialog}})],1)])],2)},fb=[];const Cc={$style:hb};function mb(s){for(var e in Cc)this[e]=Cc[e]}var gb=_(db,pb,fb,!1,mb,null,null,null),wb=gb.exports;async function af(s,e,t){if(!window.n8nExternalHooks)return;const[i,n]=s.split(".");if(window.n8nExternalHooks[i]&&window.n8nExternalHooks[i][n]){const o=window.n8nExternalHooks[i][n];for(const r of o)await r(e,t)}}const ve=m.extend({methods:{$externalHooks(){return{run:async(s,e)=>{await af.call(this,s,this.$store,e)}}}}}),yb=(s,{[s]:e,...t})=>t;function lf(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function ol(s){return lf(s)?Object.keys(s).includes("json"):!1}function xs(s){const e=["href","name","target","title","class","id"],t=["p","strong","b","code","a","br","i","em","small"];return Yv(s,{onTagAttr:(n,o,r)=>{if(n==="img"&&o==="src"){const l=r.split("#")[0].match(/\.(jpeg|jpg|gif|png|webp)$/)!==null&&r.startsWith("/static/");if(!r.startsWith("https://")&&!l)return""}if(e.includes(o)||o.startsWith("data-"))return`${o}="${Zv.exports.friendlyAttrValue(r)}"`},onTag:n=>{if(!t.includes(n))return""}})}const oa=s=>!s&&s!==0?!0:Array.isArray(s)?s.length?s.every(oa):!0:typeof s=="object"?Object.values(s).every(oa):!1,vb=(...s)=>{const[e,t,...i]=s,n=e.filter(o=>t.includes(o));return[...new Set(i.length?vb(n,...i):n)]};let hr=[];const V=N(ve).extend({methods:{$showMessage(s,e=!0){s.dangerouslyUseHTMLString=!0,s.message=s.message?xs(s.message):s.message,s.position===void 0&&(s.position="bottom-right");const t=this.$notify(s);return s.duration===0&&hr.push(t),s.type==="error"&&e&&this.$telemetry.track("Instance FE emitted error",{error_title:s.title,error_message:s.message,caused_by_credential:this.causedByCredential(s.message),workflow_id:this.$store.getters.workflowId}),t},$showToast(s){let e;if(s.closeOnClick){const t=s.onClick;s.onClick=()=>{e&&e.close(),t&&t()}}return e=this.$showMessage({title:s.title,message:s.message,onClick:s.onClick,onClose:s.onClose,duration:s.duration,customClass:s.customClass,type:s.type}),e},$showAlert(s){return this.$message(s)},$getExecutionError(s){const e=s.resultData.error;let t;if(s.resultData.lastNodeExecuted&&e)t=e.message;else if(t="There was a problem executing the workflow!",e&&e.message){let i;"node"in e&&(i=typeof e.node=="string"?e.node:e.node.name),t=`There was a problem executing the workflow:<br /><strong>"${i?`${i}: ${e.message}`:e.message}"</strong>`}return t},$showError(s,e,t){const i=s,n=t?`${t}<br/>`:"";this.$showMessage({title:e,message:`
					${n}
					<i>${i.message}</i>
					${this.collapsableDetails(i)}`,type:"error",duration:0},!1),this.$externalHooks().run("showMessage.showError",{title:e,message:t,errorMessage:i.message}),this.$telemetry.track("Instance FE emitted error",{error_title:e,error_description:t,error_message:i.message,caused_by_credential:this.causedByCredential(i.message),workflow_id:this.$store.getters.workflowId})},async confirmMessage(s,e,t="warning",i,n){try{const o={confirmButtonText:i||this.$locale.baseText("showMessage.ok"),cancelButtonText:n||this.$locale.baseText("showMessage.cancel"),dangerouslyUseHTMLString:!0,...t&&{type:t}},r=xs(s);return await this.$confirm(r,e,o),!0}catch{return!1}},async confirmModal(s,e,t="warning",i,n,o=!1){try{const r={confirmButtonText:i||this.$locale.baseText("showMessage.ok"),cancelButtonText:n||this.$locale.baseText("showMessage.cancel"),dangerouslyUseHTMLString:!0,showClose:o,...t&&{type:t}},a=xs(s);return await this.$confirm(a,e,r),"confirmed"}catch(r){return r}},clearAllStickyNotifications(){hr.map(s=>{s&&s.close()}),hr=[]},collapsableDetails({description:s,node:e}){if(!s)return"";const t=s.length>500?`${s.slice(0,500)}...`:s;return`
				<br>
				<br>
				<details>
					<summary
						style="color: #ff6d5a; font-weight: bold; cursor: pointer;"
					>
						${this.$locale.baseText("showMessage.showDetails")}
					</summary>
					<p>${e.name}: ${t}</p>
				</details>
			`},causedByCredential(s){return s?s.includes("Credentials for")&&s.includes("are not set"):!1}}}),_b="_descriptionContainer_4qfwm_1",Ob="_descriptionIcon_4qfwm_6",bb="_descriptionText_4qfwm_11";var xb={descriptionContainer:_b,descriptionIcon:Ob,descriptionText:bb};const $b=N(V).extend({name:"CommunityPackageManageConfirmModal",components:{Modal:Me},props:{modalName:{type:String,required:!0},activePackageName:{type:String,required:!0},mode:{type:String}},data(){return{loading:!1,modalBus:new m,COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY:jt,COMMUNITY_PACKAGE_MANAGE_ACTIONS:At}},computed:{activePackage(){return this.$store.getters["communityNodes/getInstalledPackageByName"](this.activePackageName)},getModalContent(){return this.mode===At.UNINSTALL?{title:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.title"),message:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.message",{interpolate:{packageName:this.activePackageName}}),buttonLabel:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.buttonLabel"),buttonLoadingLabel:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.buttonLoadingLabel")}:{title:this.$locale.baseText("settings.communityNodes.confirmModal.update.title",{interpolate:{packageName:this.activePackageName}}),description:this.$locale.baseText("settings.communityNodes.confirmModal.update.description"),message:this.$locale.baseText("settings.communityNodes.confirmModal.update.message",{interpolate:{packageName:this.activePackageName,version:this.activePackage.updateAvailable}}),buttonLabel:this.$locale.baseText("settings.communityNodes.confirmModal.update.buttonLabel"),buttonLoadingLabel:this.$locale.baseText("settings.communityNodes.confirmModal.update.buttonLoadingLabel")}}},methods:{onModalClose(){return!this.loading},async onConfirmButtonClick(){this.mode===At.UNINSTALL?await this.onUninstall():this.mode===At.UPDATE&&await this.onUpdate()},async onUninstall(){try{this.$telemetry.track("user started cnr package deletion",{package_name:this.activePackage.packageName,package_node_names:this.activePackage.installedNodes.map(s=>s.name),package_version:this.activePackage.installedVersion,package_author:this.activePackage.authorName,package_author_email:this.activePackage.authorEmail}),this.loading=!0,await this.$store.dispatch("communityNodes/uninstallPackage",this.activePackageName),this.$showMessage({title:this.$locale.baseText("settings.communityNodes.messages.uninstall.success.title"),type:"success"})}catch(s){this.$showError(s,this.$locale.baseText("settings.communityNodes.messages.uninstall.error"))}finally{this.loading=!1,this.modalBus.$emit("close")}},async onUpdate(){try{this.$telemetry.track("user started cnr package update",{package_name:this.activePackage.packageName,package_node_names:this.activePackage.installedNodes.map(e=>e.name),package_version_current:this.activePackage.installedVersion,package_version_new:this.activePackage.updateAvailable,package_author:this.activePackage.authorName,package_author_email:this.activePackage.authorEmail}),this.loading=!0;const s=this.activePackage.updateAvailable;await this.$store.dispatch("communityNodes/updatePackage",this.activePackageName),this.$showMessage({title:this.$locale.baseText("settings.communityNodes.messages.update.success.title"),message:this.$locale.baseText("settings.communityNodes.messages.update.success.message",{interpolate:{packageName:this.activePackageName,version:s}}),type:"success"})}catch(s){this.$showError(s,this.$locale.baseText("settings.communityNodes.messages.update.error.title"))}finally{this.loading=!1,this.modalBus.$emit("close")}}}});var Tb=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"540px",name:e.COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY,title:e.getModalContent.title,eventBus:e.modalBus,center:!0,showClose:!e.loading,beforeClose:e.onModalClose}},[t("template",{slot:"content"},[t("n8n-text",[e._v(e._s(e.getModalContent.message))]),this.mode===e.COMMUNITY_PACKAGE_MANAGE_ACTIONS.UPDATE?t("div",{class:e.$style.descriptionContainer},[t("n8n-info-tip",{attrs:{theme:"info",type:"note",bold:!1}},[[t("span",{domProps:{textContent:e._s(e.getModalContent.description)}})]],2)],1):e._e()],1),t("template",{slot:"footer"},[t("n8n-button",{attrs:{loading:e.loading,disabled:e.loading,label:e.loading?e.getModalContent.buttonLoadingLabel:e.getModalContent.buttonLabel,size:"large",float:"right"},on:{click:e.onConfirmButtonClick}})],1)],2)},kb=[];const Nc={$style:xb};function Sb(s){for(var e in Nc)this[e]=Nc[e]}var Eb=_($b,Tb,kb,!1,Sb,null,null,null),Cb=Eb.exports,Nb=N(V).extend({name:"CommunityPackageInstallModal",components:{Modal:Me},data(){return{loading:!1,packageName:"",userAgreed:!1,modalBus:new m,checkboxWarning:!1,infoTextErrorMessage:"",COMMUNITY_PACKAGE_INSTALL_MODAL_KEY:Uo,NPM_KEYWORD_SEARCH_URL:mc,COMMUNITY_NODES_INSTALLATION_DOCS_URL:Ys,COMMUNITY_NODES_RISKS_DOCS_URL:N_}},methods:{openNPMPage(){this.$telemetry.track("user clicked cnr browse button",{source:"cnr install modal"}),window.open(mc,"_blank")},async onInstallClick(){if(!this.userAgreed)this.checkboxWarning=!0;else try{this.$telemetry.track("user started cnr package install",{input_string:this.packageName,source:"cnr settings page"}),this.infoTextErrorMessage="",this.loading=!0,await this.$store.dispatch("communityNodes/installPackage",this.packageName),await this.$store.dispatch("communityNodes/fetchInstalledPackages"),this.loading=!1,this.modalBus.$emit("close"),this.$showMessage({title:this.$locale.baseText("settings.communityNodes.messages.install.success"),type:"success"})}catch(s){s.httpStatusCode&&s.httpStatusCode===400?this.infoTextErrorMessage=s.message:this.$showError(s,this.$locale.baseText("settings.communityNodes.messages.install.error"))}finally{this.loading=!1}},onCheckboxChecked(){this.checkboxWarning=!1},onModalClose(){return!this.loading},onInputBlur(){this.packageName=this.packageName.replaceAll("npm i ","").replaceAll("npm install ","")},onMoreInfoTopClick(){this.$telemetry.track("user clicked cnr docs link",{source:"install package modal top"})},onLearnMoreLinkClick(){this.$telemetry.track("user clicked cnr docs link",{source:"install package modal bottom"})}}});const Pb="_descriptionContainer_cmsy3_1",Db="_formContainer_cmsy3_16",Ib="_checkbox_cmsy3_22",Ab="_error_cmsy3_26";var Rb={descriptionContainer:Pb,formContainer:Db,checkbox:Ib,error:Ab};var Mb=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"540px",name:e.COMMUNITY_PACKAGE_INSTALL_MODAL_KEY,title:e.$locale.baseText("settings.communityNodes.installModal.title"),eventBus:e.modalBus,center:!0,beforeClose:e.onModalClose,showClose:!e.loading}},[t("template",{slot:"content"},[t("div",{class:[e.$style.descriptionContainer,"p-s"]},[t("div",[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.installModal.description"))+" ")]),e._v(" "),t("n8n-link",{attrs:{to:e.COMMUNITY_NODES_INSTALLATION_DOCS_URL},on:{click:e.onMoreInfoTopClick}},[e._v(" "+e._s(e.$locale.baseText("_reusableDynamicText.moreInfo"))+" ")])],1),t("n8n-button",{class:e.$style.browseButton,attrs:{label:e.$locale.baseText("settings.communityNodes.browseButton.label"),icon:"external-link-alt"},on:{click:e.openNPMPage}})],1),t("div",{class:[e.$style.formContainer,"mt-m"]},[t("n8n-input-label",{class:e.$style.labelTooltip,attrs:{label:e.$locale.baseText("settings.communityNodes.installModal.packageName.label"),tooltipText:e.$locale.baseText("settings.communityNodes.installModal.packageName.tooltip",{interpolate:{npmURL:e.NPM_KEYWORD_SEARCH_URL}})}},[t("n8n-input",{attrs:{name:"packageNameInput",type:"text",maxlength:214,placeholder:e.$locale.baseText("settings.communityNodes.installModal.packageName.placeholder"),required:!0,disabled:e.loading},on:{blur:e.onInputBlur},model:{value:e.packageName,callback:function(i){e.packageName=i},expression:"packageName"}})],1),t("div",{class:[e.$style.infoText,"mt-4xs"]},[t("span",{class:[e.$style.infoText,e.infoTextErrorMessage?e.$style.error:""],attrs:{size:"small"},domProps:{textContent:e._s(e.infoTextErrorMessage)}})]),t("el-checkbox",{class:[e.$style.checkbox,e.checkboxWarning?e.$style.error:"","mt-l"],attrs:{disabled:e.loading},on:{change:e.onCheckboxChecked},model:{value:e.userAgreed,callback:function(i){e.userAgreed=i},expression:"userAgreed"}},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.installModal.checkbox.label"))+" ")]),t("br"),t("n8n-link",{attrs:{to:e.COMMUNITY_NODES_RISKS_DOCS_URL},on:{click:e.onLearnMoreLinkClick}},[e._v(e._s(e.$locale.baseText("_reusableDynamicText.moreInfo")))])],1)],1)]),t("template",{slot:"footer"},[t("n8n-button",{attrs:{loading:e.loading,disabled:e.packageName===""||e.loading,label:e.loading?e.$locale.baseText("settings.communityNodes.installModal.installButton.label.loading"):e.$locale.baseText("settings.communityNodes.installModal.installButton.label"),size:"large",float:"right"},on:{click:e.onInstallClick}})],1)],2)},Wb=[];const Pc={$style:Rb};function Lb(s){for(var e in Pc)this[e]=Pc[e]}var Qb=_(Nb,Mb,Wb,!1,Lb,null,null,null),Bb=Qb.exports,Ub=N(V).extend({components:{Modal:Me},name:"ChangePasswordModal",props:{modalName:{type:String}},data(){return{config:null,formBus:new m,modalBus:new m,password:"",loading:!1,CHANGE_PASSWORD_MODAL_KEY:Ao}},mounted(){this.config=[{name:"currentPassword",properties:{label:this.$locale.baseText("auth.changePassword.currentPassword"),type:"password",required:!0,autocomplete:"current-password",capitalize:!0,focusInitially:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.newPassword"),type:"password",required:!0,validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"password2",properties:{label:this.$locale.baseText("auth.changePassword.reenterNewPassword"),type:"password",required:!0,validators:{TWO_PASSWORDS_MATCH:{validate:this.passwordsMatch}},validationRules:[{name:"TWO_PASSWORDS_MATCH"}],autocomplete:"new-password",capitalize:!0}}]},methods:{passwordsMatch(s){return typeof s!="string"?!1:s!==this.password?{messageKey:"auth.changePassword.passwordsMustMatchError"}:!1},onInput(s){s.name==="password"&&(this.password=s.value)},async onSubmit(s){try{this.loading=!0,await this.$store.dispatch("users/updateCurrentUserPassword",s),this.$showMessage({type:"success",title:this.$locale.baseText("auth.changePassword.passwordUpdated"),message:this.$locale.baseText("auth.changePassword.passwordUpdatedMessage")}),this.modalBus.$emit("close")}catch(e){this.$showError(e,this.$locale.baseText("auth.changePassword.error"))}this.loading=!1},onSubmitClick(){this.formBus.$emit("submit")}}}),Vb=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.CHANGE_PASSWORD_MODAL_KEY,title:e.$locale.baseText("auth.changePassword"),center:!0,width:"460px",eventBus:e.modalBus},on:{enter:e.onSubmit}},[t("template",{slot:"content"},[t("n8n-form-inputs",{attrs:{inputs:e.config,eventBus:e.formBus,columnView:!0},on:{input:e.onInput,submit:e.onSubmit}})],1),t("template",{slot:"footer"},[t("n8n-button",{attrs:{loading:e.loading,label:e.$locale.baseText("auth.changePassword"),float:"right"},on:{click:e.onSubmitClick}})],1)],2)},Fb=[],jb=_(Ub,Vb,Fb,!1,null,null,null,null),zb=jb.exports;class Dc extends Error{constructor(e,t={}){super(e),this.name="ResponseError";const{errorCode:i,httpStatusCode:n,stack:o}=t;i&&(this.errorCode=i),n&&(this.httpStatusCode=n),o&&(this.serverStackTrace=o)}}async function rl(s){const{method:e,baseURL:t,endpoint:i,headers:n,data:o}=s,r={method:e,url:i,baseURL:t,headers:n};({}).NODE_ENV!=="production"&&!t.includes("api.n8n.io")&&(r.withCredentials=!0),["POST","PATCH","PUT"].includes(e)?r.data=o:r.params=o;try{return(await Up.request(r)).data}catch(a){if(a.message==="Network Error")throw new Dc("API-Server can not be reached. It is probably down.");const l=a.response.data;throw l!==void 0&&l.message!==void 0?l.name==="NodeApiError"?(l.httpStatusCode=a.response.status,l):new Dc(l.message,{errorCode:l.code,httpStatusCode:a.response.status,stack:l.stack}):a}}async function j(s,e,t,i){return(await rl({method:e,baseURL:s.baseUrl,endpoint:t,headers:{sessionid:s.sessionId},data:i})).data}async function wt(s,e,t,i){return await rl({method:"GET",baseURL:s,endpoint:e,headers:i,data:t})}async function Ji(s,e,t,i){return await rl({method:"POST",baseURL:s,endpoint:e,headers:i,data:t})}function Gb(s){const e={...s,workflowData:s.workflowData,data:i_(s.data)};return e.finished=e.finished?e.finished:!1,s.id&&(e.id=s.id),e}const Ce=m.extend({methods:{restApi(){const s=this;return{async makeRestApiRequest(e,t,i){return j(s.$store.getters.getRestApiContext,e,t,i)},getActiveWorkflows:()=>s.restApi().makeRestApiRequest("GET","/active"),getActivationError:e=>s.restApi().makeRestApiRequest("GET",`/active/error/${e}`),getCurrentExecutions:e=>{let t={};return e&&(t={filter:e}),s.restApi().makeRestApiRequest("GET","/executions-current",t)},stopCurrentExecution:e=>s.restApi().makeRestApiRequest("POST",`/executions-current/${e}/stop`),getCredentialTranslation:e=>s.restApi().makeRestApiRequest("GET","/credential-translation",{credentialType:e}),removeTestWebhook:e=>s.restApi().makeRestApiRequest("DELETE",`/test-webhook/${e}`),runWorkflow:async e=>s.restApi().makeRestApiRequest("POST","/workflows/run",e),createNewWorkflow:e=>s.restApi().makeRestApiRequest("POST","/workflows",e),updateWorkflow:(e,t)=>s.restApi().makeRestApiRequest("PATCH",`/workflows/${e}`,t),deleteWorkflow:e=>s.restApi().makeRestApiRequest("DELETE",`/workflows/${e}`),getWorkflow:e=>s.restApi().makeRestApiRequest("GET",`/workflows/${e}`),getWorkflows:e=>{let t;return e&&(t={filter:e}),s.restApi().makeRestApiRequest("GET","/workflows",t)},getWorkflowFromUrl:e=>s.restApi().makeRestApiRequest("GET","/workflows/from-url",{url:e}),getExecution:async e=>{const t=await s.restApi().makeRestApiRequest("GET",`/executions/${e}`);return t&&Gb(t)},deleteExecutions:e=>s.restApi().makeRestApiRequest("POST","/executions/delete",e),retryExecution:(e,t)=>{let i;return t===!0&&(i={loadWorkflow:!0}),s.restApi().makeRestApiRequest("POST",`/executions/${e}/retry`,i)},getPastExecutions:(e,t,i,n)=>{let o={};return e&&(o={filter:e,firstId:n,lastId:i,limit:t}),s.restApi().makeRestApiRequest("GET","/executions",o)},getTimezones:()=>s.restApi().makeRestApiRequest("GET","/options/timezones"),getBinaryBufferString:e=>s.restApi().makeRestApiRequest("GET",`/data/${e}`)}}}}),cf=(s,e)=>[...[{name:"isInstanceOwner",test:()=>s.isOwner}],...e].reduce((i,n)=>(i[n.name]=Array.isArray(n.test)?n.test.some(o=>i[o]):n.test(i),i),{}),zo=(s,e,t)=>cf(s,[{name:"isOwner",test:()=>!!(e&&e.ownedBy&&e.ownedBy.id===s.id)||!t.getters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)},{name:"isReader",test:()=>!!(e&&e.sharedWith&&e.sharedWith.find(n=>n.id===s.id))},{name:"read",test:["isOwner","isInstanceOwner","isReader"]},{name:"save",test:["isOwner","isInstanceOwner"]},{name:"updateName",test:["isOwner","isInstanceOwner"]},{name:"updateConnection",test:["isOwner"]},{name:"updateSharing",test:["isOwner"]},{name:"updateNodeAccess",test:["isOwner"]},{name:"delete",test:["isOwner","isInstanceOwner"]},{name:"use",test:["isOwner","isReader"]}]),Hb=(s,e,t)=>cf(s,[{name:"isOwner",test:()=>!0},{name:"isReader",test:()=>!0},{name:"read",test:["isOwner","isInstanceOwner","isReader"]},{name:"save",test:["isOwner","isInstanceOwner"]},{name:"updateName",test:["isOwner","isInstanceOwner"]},{name:"updateConnection",test:["isOwner"]},{name:"updateSharing",test:["isOwner"]},{name:"updateNodeAccess",test:["isOwner"]},{name:"delete",test:["isOwner","isInstanceOwner"]},{name:"use",test:["isOwner","isReader"]}]),ct=N(Ce).extend({computed:{...F("credentials",["getCredentialTypeByName","getCredentialsByType"])},methods:{hasProxyAuth(s){return Object.keys(s.parameters).includes("nodeCredentialType")},isCustomApiCallSelected(s){const{parameters:e}=s;return lf(e)?e.resource!==void 0&&e.resource.includes(Xs)||e.operation!==void 0&&e.operation.includes(Xs):!1},getParameterValue(s,e,t){return ae.exports.get(s,t?t+"."+e:e)},displayParameter(s,e,t,i){return Kv(s,e,t,i)},getNodeIssues(s,e,t){const i=Object.keys(this.$store.getters.pinData||{});let n=null;if(t=t||[],e.disabled===!0||i.includes(e.name))return null;if(s===null)t.includes("typeUnknown")||(n={typeUnknown:!0});else if(t.includes("parameters")||(n=rc(s.properties,e)),!t.includes("credentials")){const o=this.getNodeCredentialIssues(e,s);n===null?n=o:Jv(n,o)}return this.hasNodeExecutionIssues(e)===!0&&!t.includes("execution")&&(n===null&&(n={}),n.execution=!0),n},hasNodeExecutionIssues(s){const e=this.$store.getters.getWorkflowRunData;if(e===null||!e.hasOwnProperty(s.name))return!1;for(const t of e[s.name])if(t.error!==void 0)return!0;return!1},reportUnsetCredential(s){return{credentials:{[s.name]:[this.$locale.baseText("nodeHelpers.credentialsUnset",{interpolate:{credentialType:s.displayName}})]}}},updateNodesExecutionIssues(){const s=this.$store.getters.allNodes;for(const e of s)this.$store.commit("setNodeIssue",{node:e.name,type:"execution",value:this.hasNodeExecutionIssues(e)?!0:null})},updateNodeCredentialIssues(s){const e=this.getNodeCredentialIssues(s);let t=null;e!==null&&(t=e.credentials),this.$store.commit("setNodeIssue",{node:s.name,type:"credentials",value:t})},updateNodeParameterIssues(s,e){if(e===void 0&&(e=this.$store.getters["nodeTypes/getNodeType"](s.type,s.typeVersion)),e===null)return;const t=rc(e.properties,s);let i=null;t!==null&&(i=t.parameters),this.$store.commit("setNodeIssue",{node:s.name,type:"parameters",value:i})},getNodeCredentialIssues(s,e){var u;if(s.disabled||(e||(e=this.$store.getters["nodeTypes/getNodeType"](s.type,s.typeVersion)),!(e!=null&&e.credentials)))return null;const t={};let i,n,o,r;const a=this.$store.getters["credentials/allForeignCredentials"];if(a!=null&&a.some(()=>!0))return{credentials:{foreign:[]}};const{authentication:l,genericAuthType:c,nodeCredentialType:d}=s.parameters;if(l==="genericCredentialType"&&c!==""&&Ic(s,c)){const h=this.getCredentialTypeByName(c);return this.reportUnsetCredential(h)}if(this.hasProxyAuth(s)&&l==="predefinedCredentialType"&&d!==""&&s.credentials!==void 0){const h=this.getCredentialsByType(d);if(qb(s,d,h)){const p=this.getCredentialTypeByName(d);return this.reportUnsetCredential(p)}}if(this.hasProxyAuth(s)&&l==="predefinedCredentialType"&&d!==""&&Ic(s,d)){const h=this.getCredentialTypeByName(d);return this.reportUnsetCredential(h)}for(const h of e.credentials)if(!!this.displayParameter(s.parameters,h,"",s))if(n=this.$store.getters["credentials/getCredentialTypeByName"](h.name),n===null?o=h.name:o=n.displayName,!s.credentials||!((u=s.credentials)!=null&&u[h.name]))h.required&&(t[h.name]=[this.$locale.baseText("nodeIssues.credentials.notSet",{interpolate:{type:o}})]);else{if(r=s.credentials[h.name],typeof r=="string"&&(r={id:null,name:r}),i=this.$store.getters["credentials/getCredentialsByType"](h.name).filter(f=>zo(this.$store.getters["users/currentUser"],f,this.$store).use),i===null&&(i=[]),r.id&&i.find(w=>w.id===r.id))continue;const p=i.filter(f=>f.name===r.name);if(p.length>1){t[h.name]=[this.$locale.baseText("nodeIssues.credentials.notIdentified",{interpolate:{name:r.name,type:o}}),this.$locale.baseText("nodeIssues.credentials.notIdentified.hint")];continue}p.length===0&&(this.$store.getters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)?t[h.name]=[this.$locale.baseText("nodeIssues.credentials.notAvailable")]:t[h.name]=[this.$locale.baseText("nodeIssues.credentials.doNotExist",{interpolate:{name:r.name,type:o}}),this.$locale.baseText("nodeIssues.credentials.doNotExist.hint")])}return Object.keys(t).length===0?null:{credentials:t}},updateNodesCredentialsIssues(){const s=this.$store.getters.allNodes;let e;for(const t of s)e=this.getNodeCredentialIssues(t),this.$store.commit("setNodeIssue",{node:t.name,type:"credentials",value:e===null?null:e.credentials})},getNodeInputData(s,e=0,t=0){if(s===null)return[];if(this.$store.getters.getWorkflowExecution===null)return[];const i=this.$store.getters.getWorkflowExecution.data;if(!i||!i.resultData)return[];const n=i.resultData.runData;return n===null||n[s.name]===void 0||!n[s.name][e].data||n[s.name][e].data===void 0?[]:this.getMainInputData(n[s.name][e].data,t)},getMainInputData(s,e){return!s||!s.hasOwnProperty("main")||s.main===void 0||s.main.length<e||s.main[e]===null?[]:s.main[e]},getBinaryData(s,e,t,i){if(e===null)return[];const n=s;if(n===null||!n[e]||!n[e][t]||!n[e][t].data)return[];const o=this.getMainInputData(n[e][t].data,i),r=[];for(let a=0;a<o.length;a++)o[a].hasOwnProperty("binary")&&o[a].binary!==void 0&&r.push(o[a].binary);return r},disableNodes(s){for(const e of s){const t={name:e.name,properties:{disabled:!e.disabled}};this.$telemetry.track("User set node enabled status",{node_type:e.type,is_enabled:e.disabled,workflow_id:this.$store.getters.workflowId}),this.$store.commit("updateNodeProperties",t),this.$store.commit("clearNodeExecutionData",e.name),this.updateNodeParameterIssues(e),this.updateNodeCredentialIssues(e)}},getNodeSubtitle(s,e,t){if(!!s){if(s.notesInFlow)return s.notes;if(e!==null&&e.subtitle!==void 0)return t.expression.getSimpleParameterValue(s,e.subtitle,"internal",at);if(s.parameters.operation!==void 0){const i=s.parameters.operation;if(e===null)return i;const n=e.properties.find(r=>r.name==="operation");if(n===void 0||n.options===void 0)return i;const o=n.options.find(r=>r.value===s.parameters.operation);return o===void 0?i:o.name}}}}});function Ic(s,e){return!s.credentials||!Object.keys(s.credentials).includes(e)}function qb(s,e,t){if(!s.credentials||!t)return!1;const i=s.credentials[e];return i?!t.find(n=>n.id===i.id):!1}function ts(s){return Boolean(typeof s=="object"&&s&&"mode"in s&&"value"in s)}function Xb(s){return s!==null}function so(s,e,t,i){return`${s}_r${e}_o${t}_i${i}`}function Yb(s,e){var l,c,d,u,h,p;if(!((c=(l=s==null?void 0:s.data)==null?void 0:l.resultData)!=null&&c.runData))return[];const i=(d=s.data.resultData.runData[e.nodeName])==null?void 0:d[e.runIndex],n=(i==null?void 0:i.source)||[];if(n.length===0)return[];const o=(p=(h=(u=i==null?void 0:i.data)==null?void 0:u.main)==null?void 0:h[e.outputIndex])==null?void 0:p[e.itemIndex];return!o||o.pairedItem===void 0?[]:(Array.isArray(o.pairedItem)?o.pairedItem:typeof o.pairedItem=="object"?[o.pairedItem]:[{item:o.pairedItem}]).map(f=>{var g,v,y;const w=f.input||0;return{nodeName:(g=n==null?void 0:n[w])==null?void 0:g.previousNode,runIndex:((v=n==null?void 0:n[w])==null?void 0:v.previousNodeRun)||0,itemIndex:f.item,outputIndex:((y=n[w])==null?void 0:y.previousNodeOutput)||0}}).filter(f=>Xb(f))}function pr(s,e,t,i){var c,d,u,h;s[e]=s[e]||[];const n=t.input||0,o=(c=i[n])==null?void 0:c.previousNode;if(!o){s[e].push([e]);return}const r=((d=i[n])==null?void 0:d.previousNodeOutput)||0,a=((u=i[n])==null?void 0:u.previousNodeRun)||0,l=so(o,a,r,t.item);s[l]||(s[l]=[[l]]),(h=s[l])==null||h.forEach(p=>{var f;(f=s==null?void 0:s[e])==null||f.push([...p,e])})}function df(s,e,t,i,n,o){var u;const r=`${s}_r${e}`;if(i.has(r)||(i.add(r),o.has(s)))return;const a=t[s];if(!Array.isArray(a))return;const l=a[e];if(!((u=l==null?void 0:l.data)!=null&&u.main))return;const c=l.source||[];c.forEach(h=>{var p;h!=null&&h.previousNode&&df(h.previousNode,(p=h.previousNodeRun)!=null?p:0,t,i,n,o)}),(l.data.main||[]).forEach((h,p)=>{!h||h.forEach((f,w)=>{const g=so(s,e,p,w);if(!f.pairedItem){n[g]=[];return}const v=f.pairedItem;if(Array.isArray(v)){v.forEach(y=>{pr(n,g,y,c)});return}if(typeof v=="object"){pr(n,g,v,c);return}pr(n,g,{item:v},c)})})}function Zb(s){const e={};return Object.keys(s).forEach(t=>{var i;(i=s==null?void 0:s[t])==null||i.forEach(n=>{n.forEach(o=>{o!==t&&(e[o]=e[o]||new Set,e[o].add(t),e[t]=e[t]||new Set,e[t].add(o))})})}),e}function fr(s){var o,r;if(!((r=(o=s==null?void 0:s.data)==null?void 0:o.resultData)!=null&&r.runData))return{};const e=new Set,t=s.data.resultData.runData,i=new Set(Object.keys(s.data.resultData.pinData||{})),n={};return Object.keys(t).forEach(a=>{t[a].forEach((l,c)=>{df(a,c,t,e,n,i)})}),Zb(n)}let Ac="",ln=null;const ie=N(ve,ct,Ce,V).extend({methods:{executeData(s,e,t,i){const n={node:{},data:{},source:null};if(s.length){const o=s[0],r=this.$store.getters.pinData[o];if(r)return n.data={main:[r]},n.source={main:[{previousNode:o}]},n;const a=this.$store.getters.getWorkflowRunData;if(a===null)return n;!a[o]||a[o].length<=i||!a[o][i]||!a[o][i].hasOwnProperty("data")||a[o][i].data===void 0||!a[o][i].data.hasOwnProperty(t)?n.data={}:(n.data=a[o][i].data,a[e]&&a[e][i]?n.source={[t]:a[e][i].source}:n.source={[t]:[{previousNode:o}]})}return n},connectionInputData(s,e,t,i,n={sourceIndex:0,destinationIndex:0}){let o=null;const r=this.executeData(s,e,t,i);s.length&&(!Object.keys(r.data).length||r.data[t].length<=n.sourceIndex?o=[]:(o=r.data[t][n.sourceIndex],o!==null&&(o=o.map((l,c)=>({...l,pairedItem:{item:c,input:n.destinationIndex}})))));const a=s.reduce((l,c,d)=>{const u=this.$store.getters.pinDataByNodeName(c);return u&&l.push({json:u[0],pairedItem:{item:d,input:1}}),l},[]);return a.length>0&&(o&&o.length>0?a.forEach(l=>{o[0].json={...o[0].json,...l.json}}):o=a),o},getNodes(){const s=this.$store.getters.allNodes,e=[];for(const t of s)e.push(Object.assign({},t));return e},getNodeTypesMaxCount(){const s=this.$store.getters.allNodes,e={},t=this.$store.getters["nodeTypes/allNodeTypes"];for(const i of t)i.maxNodes!==void 0&&(e[i.name]={exist:0,max:i.maxNodes,nodeNames:[]});for(const i of s)e[i.type]!==void 0&&(e[i.type].exist+=1,e[i.type].nodeNames.push(i.name));return e},getNodeTypeCount(s){const e=this.$store.getters.allNodes;let t=0;for(const i of e)i.type===s&&t++;return t},checkReadyForExecution(s,e){let t,i,n=null;const o={};let r=Object.keys(s.nodes);if(e)r=s.getParentNodes(e),r.push(e);else{let a=[];for(const l of Object.keys(s.nodes))s.nodes[l].disabled!==!0&&s.nodes[l].type===xt&&(a=[l,...a,...s.getChildNodes(l)]);if(a.length)r=a;else{const l=s.getStartNode();l!==void 0&&(r=s.getChildNodes(l.name),r.push(l.name))}}for(const a of r)n=null,t=s.nodes[a],t.disabled!==!0&&(i=s.nodeTypes.getByNameAndVersion(t.type,t.typeVersion),i===void 0?n={typeUnknown:!0}:n=this.getNodeIssues(i.description,t,["execution"]),n!==null&&(o[t.name]=n));return Object.keys(o).length===0?null:o},getNodeTypes(){return{nodeTypes:{},init:async e=>{},getAll:()=>[],getByNameAndVersion:(e,t)=>{const i=this.$store.getters["nodeTypes/getNodeType"](e,t);if(i!==null)return{description:i,trigger:![Hp,di].includes(e)&&i.inputs.length===0&&!i.webhooks||void 0}}}},getCurrentWorkflow(s){const e=this.getNodes(),t=this.$store.getters.allConnections,i=JSON.stringify({nodes:e,connections:t});return!s&&ln&&i===Ac?ln:(Ac=i,this.getWorkflow(e,t,s))},getWorkflow(s,e,t){const i=this.getNodeTypes();let n=this.$store.getters.workflowId;n===fe&&(n=void 0);const o=this.$store.getters.workflowName;return ln=new e_({id:n,name:o,nodes:t?Se(s):s,connections:t?Se(e):e,active:!1,nodeTypes:i,settings:this.$store.getters.workflowSettings,pinData:this.$store.getters.pinData}),ln},getWorkflowDataToSave(){const s=this.$store.getters.allNodes,e=this.$store.getters.allConnections;let t;const i=[];for(let r=0;r<s.length;r++){try{t=this.getNodeDataToSave(s[r])}catch(a){return Promise.reject(a)}i.push(t)}const n={name:this.$store.getters.workflowName,nodes:i,pinData:this.$store.getters.pinData,connections:e,active:this.$store.getters.isActive,settings:this.$store.getters.workflowSettings,tags:this.$store.getters.workflowTags,hash:this.$store.getters.workflowHash},o=this.$store.getters.workflowId;return o!==fe&&(n.id=o),Promise.resolve(n)},getNodeDataToSave(s){const e=["color","continueOnFail","credentials","disabled","issues","notes","parameters","status"],t={parameters:{}};for(const n in s)n.charAt(0)!=="_"&&e.indexOf(n)===-1&&(t[n]=s[n]);const i=this.$store.getters["nodeTypes/getNodeType"](s.type,s.typeVersion);if(i!==null){const n=Ht(i.properties,s.parameters,!1,!1,s);if(t.parameters=n!==null?n:{},s.credentials!==void 0&&i.credentials!==void 0){const o={};for(const r of Object.keys(s.credentials)){if(this.hasProxyAuth(s)||Object.keys(s.parameters).includes("genericAuthType")){o[r]=s.credentials[r];continue}const a=i.credentials.filter(l=>this.displayParameter(s.parameters,l,"",s)).find(l=>l.name===r);a!==void 0&&this.displayParameter(s.parameters,a,"",s)!==!1&&(o[r]=s.credentials[r])}Object.keys(o).length!==0&&(t.credentials=o)}}else t.credentials=s.credentials,t.parameters=s.parameters,t.color!==void 0&&(t.color=s.color);return s.disabled===!0&&(t.disabled=!0),s.continueOnFail===!0&&(t.continueOnFail=!0),[void 0,""].includes(s.notes)||(t.notes=s.notes),t},getWebhookExpressionValue(s,e){if(s[e]===void 0)return"empty";try{return this.resolveExpression(s[e])}catch{return this.$locale.baseText("nodeWebhooks.invalidExpression")}},getWebhookUrl(s,e,t){if(s.restartWebhook===!0)return"$execution.resumeUrl";let i=this.$store.getters.getWebhookUrl;t==="test"&&(i=this.$store.getters.getWebhookTestUrl);const n=this.$store.getters.workflowId,o=this.getWebhookExpressionValue(s,"path"),r=this.getWebhookExpressionValue(s,"isFullPath")||!1;return t_(i,n,e,o,r)},resolveParameter(s,e={}){var g,v,y,S,T,$;let t=((g=e==null?void 0:e.targetItem)==null?void 0:g.itemIndex)||0;const i="main",n=this.$store.getters["ndv/activeNode"],o=this.getCurrentWorkflow(),r=this.$store.getters.getWorkflowRunData;let a=o.getParentNodes(n.name,i,1);const l=this.$store.getters.getWorkflowExecution;if((e==null?void 0:e.inputNodeName)&&!a.includes(e.inputNodeName))return null;let c=(v=e==null?void 0:e.inputRunIndex)!=null?v:0;const d=o.getNodeConnectionIndexes(n.name,a[0]);if(e.targetItem&&((y=e==null?void 0:e.targetItem)==null?void 0:y.nodeName)===n.name&&l){const D=Yb(l,e.targetItem);if(!D.length)return null;a=[D[0].nodeName],c=D[0].runIndex,t=D[0].itemIndex,d&&(d.sourceIndex=D[0].outputIndex)}else if(a=e.inputNodeName?[e.inputNodeName]:a,d&&(d.sourceIndex=(S=e.inputBranchIndex)!=null?S:d.sourceIndex),(e==null?void 0:e.inputRunIndex)===void 0&&r!==null&&a.length){const D=a.find(P=>r[P]);D&&(c=r[D].length-1)}let u=this.connectionInputData(a,n.name,i,c,d),h;l===null||!l.data?h={resultData:{runData:{}}}:h=l.data,a.forEach(D=>{const P=this.$store.getters.pinDataByNodeName(D);P&&(h={...h,resultData:{...h.resultData,runData:{...h.resultData.runData,[D]:[{startTime:new Date().valueOf(),executionTime:0,source:[],data:{main:[P.map(M=>({json:M}))]}}]}}})}),u===null&&(u=[]);const p={$execution:{id:at,mode:"test",resumeUrl:at},$executionId:at,$resumeWebhookUrl:at};let f=($=(T=e==null?void 0:e.targetItem)==null?void 0:T.runIndex)!=null?$:0;(e==null?void 0:e.targetItem)===void 0&&r!==null&&r[n.name]&&(f=r[n.name].length-1);const w=this.executeData(a,n.name,i,f);return o.expression.getParameterValue(s,h,f,t,n.name,u,"manual",this.$store.getters.timezone,p,w,!1)},resolveExpression(s,e={},t={}){const i={__xxxxxxx__:s,...e},n=this.resolveParameter(i,t);return n?typeof n.__xxxxxxx__=="object"?this.getCurrentWorkflow().expression.convertObjectValueToString(n.__xxxxxxx__):n.__xxxxxxx__:null},async updateWorkflow({workflowId:s,active:e}){let t={};const i=s===this.$store.getters.workflowId;if(i)t=await this.getWorkflowDataToSave();else{const{hash:o}=await this.restApi().getWorkflow(s);t.hash=o}e!==void 0&&(t.active=e);const n=await this.restApi().updateWorkflow(s,t);this.$store.commit("setWorkflowHash",n.hash),i&&(this.$store.commit("setActive",!!n.active),this.$store.commit("setStateDirty",!1)),n.active?this.$store.commit("setWorkflowActive",s):this.$store.commit("setWorkflowInactive",s)},async saveCurrentWorkflow({id:s,name:e,tags:t}={},i=!0){const n=s||this.$route.params.name;if(!n||["new",fe].includes(n))return this.saveAsNewWorkflow({name:e,tags:t},i);try{this.$store.commit("addActiveAction","workflowSaving");const o=await this.getWorkflowDataToSave();e&&(o.name=e.trim()),t&&(o.tags=t),o.hash=this.$store.getters.workflowHash;const r=await this.restApi().updateWorkflow(n,o);if(this.$store.commit("setWorkflowHash",r.hash),e&&this.$store.commit("setWorkflowName",{newName:r.name}),t){const l=(r.tags||[]).map(c=>c.id);this.$store.commit("setWorkflowTagIds",l)}return this.$store.commit("setStateDirty",!1),this.$store.commit("removeActiveAction","workflowSaving"),this.$externalHooks().run("workflow.afterUpdate",{workflowData:r}),!0}catch(o){return this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:this.$locale.baseText("workflowHelpers.showMessage.title"),message:o.message,type:"error"}),!1}},async saveAsNewWorkflow({name:s,tags:e,resetWebhookUrls:t,resetNodeIds:i,openInNewWindow:n,data:o}={},r=!0){try{this.$store.commit("addActiveAction","workflowSaving");const a=o||await this.getWorkflowDataToSave();a.active=!1;const l={};i&&(a.nodes=a.nodes.map(p=>(p.id=st(),p))),t&&(a.nodes=a.nodes.map(p=>(p.webhookId&&(p.webhookId=st(),l[p.name]=p.webhookId),p))),s&&(a.name=s.trim()),e&&(a.tags=e);const c=await this.restApi().createNewWorkflow(a);if(this.$store.commit("addWorkflow",c),this.$store.commit("setWorkflowHash",c.hash),n){const p=this.$router.resolve({name:O.WORKFLOW,params:{name:c.id}});return window.open(p.href,"_blank"),this.$store.commit("removeActiveAction","workflowSaving"),!0}this.$store.commit("setActive",c.active||!1),this.$store.commit("setWorkflowId",c.id),this.$store.commit("setWorkflowName",{newName:c.name,setStateDirty:!1}),this.$store.commit("setWorkflowSettings",c.settings||{}),this.$store.commit("setStateDirty",!1),Object.keys(l).forEach(p=>{const f={key:"webhookId",value:l[p],name:p};this.$store.commit("setNodeValue",f)});const u=(c.tags||[]).map(p=>p.id);this.$store.commit("setWorkflowTagIds",u);const h=this.$route.query.templateId;return h&&this.$telemetry.track("User saved new workflow from template",{template_id:h,workflow_id:c.id,wf_template_repo_session_id:this.$store.getters["templates/previousSessionId"]}),r&&this.$router.push({name:O.WORKFLOW,params:{name:c.id,action:"workflowSave"}}),this.$store.commit("removeActiveAction","workflowSaving"),this.$store.commit("setStateDirty",!1),this.$externalHooks().run("workflow.afterUpdate",{workflowData:c}),!0}catch(a){return this.$store.commit("removeActiveAction","workflowSaving"),this.$showMessage({title:this.$locale.baseText("workflowHelpers.showMessage.title"),message:a.message,type:"error"}),!1}},updateNodePositions(s,e){if(s.nodes===void 0)return;const t=[99999999,99999999];for(const n of s.nodes)(n.position[1]<t[1]||n.position[1]===t[1]&&n.position[0]<t[0])&&(t[0]=n.position[0],t[1]=n.position[1]);const i=[e[0]-t[0],e[1]-t[1]];for(const n of s.nodes)n.position[0]+=i[0],n.position[1]+=i[1]},async dataHasChanged(s){const e=await this.getWorkflowDataToSave(),t=await this.restApi().getWorkflow(s);if(t!==void 0){const i={nodes:t.nodes,connections:t.connections,settings:t.settings,name:t.name},n={nodes:e.nodes,connections:e.connections,settings:e.settings,name:e.name};return!ae.exports.isEqual(i,n)}return!0}}});var Kb=N(ie).extend({components:{Modal:Me},name:"ContactPromptModal",props:["modalName"],data(){return{email:"",modalBus:new m}},computed:{...F({promptsData:"settings/getPromptsData"}),title(){return this.promptsData&&this.promptsData.title?this.promptsData.title:"You\u2019re a power user \u{1F4AA}"},description(){return this.promptsData&&this.promptsData.message?this.promptsData.message:"Your experience with n8n can help us improve \u2014 for you and our entire community."},isEmailValid(){return jo.test(String(this.email).toLowerCase())}},methods:{closeDialog(){this.isEmailValid||this.$telemetry.track("User closed email modal",{instance_id:this.$store.getters.instanceId,email:null})},async send(){this.isEmailValid&&((await this.$store.dispatch("settings/submitContactInfo",this.email)).updated&&(this.$telemetry.track("User closed email modal",{instance_id:this.$store.getters.instanceId,email:this.email}),this.$showMessage({title:"Thanks!",message:"It's people like you that help make n8n better",type:"success"})),this.modalBus.$emit("close"))}}});const Jb="_description_1bs00_1",ex="_disclaimer_1bs00_5";var tx={description:Jb,disclaimer:ex};var sx=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,eventBus:e.modalBus,center:!0,closeOnPressEscape:!1,beforeClose:e.closeDialog,customClass:"contact-prompt-modal",width:"460px"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.description},[t("n8n-text",{attrs:{size:"medium",color:"text-base"}},[e._v(e._s(e.description))])],1),t("div",{on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.send.apply(null,arguments)}}},[t("n8n-input",{attrs:{placeholder:"Your email address"},model:{value:e.email,callback:function(i){e.email=i},expression:"email"}})],1),t("div",{class:e.$style.disclaimer},[t("n8n-text",{attrs:{size:"small",color:"text-base"}},[e._v("David from our product team will get in touch personally")])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{class:e.$style.footer},[t("n8n-button",{attrs:{label:"Send",float:"right",disabled:!e.isEmailValid},on:{click:e.send}})],1)]},proxy:!0}])},[t("template",{slot:"header"},[t("n8n-heading",{attrs:{tag:"h2",size:"xlarge",color:"text-dark"}},[e._v(e._s(e.title))])],1)],2)},ix=[];const Rc={$style:tx};function nx(s){for(var e in Rc)this[e]=Rc[e]}var ox=_(Kb,sx,ix,!1,nx,null,null,null),rx=ox.exports,ax=m.extend({props:{credentialTypeName:{type:String}},computed:{credentialWithIcon(){return this.credentialTypeName?this.getCredentialWithIcon(this.credentialTypeName):null},filePath(){return!this.credentialWithIcon||!this.credentialWithIcon.icon||!this.credentialWithIcon.icon.startsWith("file:")?null:`${this.$store.getters.getRestUrl}/credential-icon/${this.credentialWithIcon.name}`},relevantNode(){if(this.credentialWithIcon&&this.credentialWithIcon.icon&&this.credentialWithIcon.icon.startsWith("node:")){const e=this.credentialWithIcon.icon.replace("node:","");return this.$store.getters["nodeTypes/getNodeType"](e)}const s=this.$store.getters["credentials/getNodesWithAccess"](this.credentialTypeName);return s.length?s[0]:null}},methods:{getCredentialWithIcon(s){const e=this.$store.getters["credentials/getCredentialTypeByName"](s);return e?e.icon?e:e.extends?e.extends.reduce((t,i)=>t||this.getCredentialWithIcon(i),null):null:null}}});const lx="_credIcon_segkd_1",cx="_fallback_segkd_5";var dx={credIcon:lx,fallback:cx},ux=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e.filePath?t("img",{class:e.$style.credIcon,attrs:{src:e.filePath}}):e.relevantNode?t("NodeIcon",{attrs:{nodeType:e.relevantNode,size:28}}):t("span",{class:e.$style.fallback})],1)},hx=[];const Mc={$style:dx};function px(s){for(var e in Mc)this[e]=Mc[e]}var fx=_(ax,ux,hx,!1,px,null,null,null),uf=fx.exports;const mx=["API","OAuth1","OAuth2"],gx=["Trigger"],wx=["","k","M","G","T","P","E"],Wc=/(@\w+\/)?n8n-nodes-(?!base\b)\b\w+/g;function hf(s){const e=Math.log10(Math.abs(s))/3|0;if(e===0)return s;const t=wx[e],i=Math.pow(10,e*3),n=s/i;return Number(n.toFixed(1))+t}function yx(s){return ii(s,"yyyy-mm-dd HH:MM:ss")}function vx(s){return ii(s,"d mmmm, yyyy @ HH:MM Z")}function pf(s){return s.split(" ").filter(e=>!mx.includes(e)).join(" ")}function _x(s){return s.split(" ").filter(e=>!gx.includes(e)).join(" ")}function Ge(s){return getComputedStyle(document.body).getPropertyValue(s)}function $s(s){return s.displayName.replace(/ trigger/i,"")}function ff(s){return s.filter(e=>!e.disabled&&!sO.includes(e.type))}function al(s){const e=s.filter(i=>!(i.categories||[]).some(n=>n.name===Jr));return(e.length>0?e:s).filter(i=>!XO.includes(i.name))}function Bi(s){window.document.title=s}function ra(s){return typeof s=="string"}function Ox(s){return!isNaN(Number(s))}function zs(s){return typeof s=="number"}function Ii(s){return s===void 0?0:new Blob([typeof s=="string"?s:JSON.stringify(s)]).size}function ll(s){return Wc.lastIndex=0,!!Wc.exec(s)}function cl(s,e,t){if(s.length<=e)return s;const i=s.slice(0,e-t),n=s.slice(s.length-t,s.length);return`${i}...${n}`}function dl(s){return typeof s=="string"&&!!ZO.find(e=>s.includes(e))}function Go(s,e){return s.noDataExpression===!0?!1:!!(typeof e=="string"&&e.charAt(0)==="="||ts(e)&&e.value&&e.value.toString().charAt(0)==="=")}const Bn=s=>s.reduce((e,t)=>ol(t)?e.concat(t.json):e,[]),bx=s=>{const e="*___~#^#~___*";let t=s.match(/\[(.*?)]/g);t===null?t=[]:t=t.map(r=>r.slice(1,-1)).map(r=>r.startsWith('"')&&r.endsWith('"')?r.slice(1,-1):r);const n=s.replace(/\[(.*?)]/g,e).split("."),o=[];return n.forEach(r=>{let a=r.indexOf(e);for(;a!==-1;)a===0?(o.push(t.shift()),r=r.substr(e.length)):(o.push(r.substr(0,a)),r=r.substr(a)),a=r.indexOf(e);r!==""&&o.push(r)}),'["'+o.join('"]["')+'"]'},Lc=s=>{const e=typeof s=="string"?Lp(s):s;return Array.isArray(e)?e.map(t=>ol(t)?t.json:t):e},aa=s=>{const e=s.meta;return e&&e.nodeView===!0?Le.WORKFLOW:[O.EXECUTION.toString(),O.EXECUTION_PREVIEW.toString(),O.EXECUTION_HOME.toString()].includes(s.name||"")?Le.EXECUTIONS:null};var xx=m.extend({name:"Banner",data(){return{expanded:!1}},props:{theme:{type:String,validator:s=>["success","danger"].indexOf(s)!==-1},message:{type:String},buttonLabel:{type:String},buttonLoadingLabel:{type:String},buttonTitle:{type:String},details:{type:String},buttonLoading:{type:Boolean,default:!1}},methods:{expand(){this.expanded=!0},onClick(){this.expanded=!1,this.$emit("click")}}});const $x="_icon_ji44k_1",Tx="_dangerIcon_ji44k_7 _icon_ji44k_1",kx="_container_ji44k_12",Sx="_message_ji44k_19",Ex="_dangerMessage_ji44k_26 _message_ji44k_19",Cx="_banner_ji44k_31",Nx="_content_ji44k_36",Px="_details_ji44k_43 _message_ji44k_19",Dx="_moreDetails_ji44k_50";var Ix={icon:$x,dangerIcon:Tx,container:kx,message:Sx,dangerMessage:Ex,banner:Cx,content:Nx,details:Px,moreDetails:Dx},Ax=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-tag",{class:e.$style.container,attrs:{type:e.theme,size:"medium","disable-transitions":!0}},[t("font-awesome-icon",{class:e.theme==="success"?e.$style.icon:e.$style.dangerIcon,attrs:{icon:e.theme==="success"?"check-circle":"exclamation-triangle"}}),t("div",{class:e.$style.banner},[t("div",{class:e.$style.content},[t("div",[t("span",{class:e.theme==="success"?e.$style.message:e.$style.dangerMessage},[e._v(" "+e._s(e.message)+"\xA0 ")]),e.details&&!e.expanded?t("n8n-link",{attrs:{bold:!0,size:"small"},on:{click:e.expand}},[t("span",{class:e.$style.moreDetails},[e._v("More details")])]):e._e()],1)]),e.buttonLabel?t("n8n-button",{attrs:{label:e.buttonLoading&&e.buttonLoadingLabel?e.buttonLoadingLabel:e.buttonLabel,title:e.buttonTitle,type:e.theme,loading:e.buttonLoading,size:"small",outline:""},on:{click:function(i){return i.stopPropagation(),e.onClick.apply(null,arguments)}}}):e._e()],1),e.expanded?t("div",{class:e.$style.details},[e._v(" "+e._s(e.details)+" ")]):e._e()],1)},Rx=[];const Qc={$style:Ix};function Mx(s){for(var e in Qc)this[e]=Qc[e]}var Wx=_(xx,Ax,Rx,!1,Mx,null,null,null),Lx=Wx.exports;const ui=m.extend({data(){return{copyPasteElementsGotCreated:!1,hiddenInput:null,onPaste:null,onBeforePaste:null}},mounted(){if(this.copyPasteElementsGotCreated===!0)return;this.copyPasteElementsGotCreated=!0;const s=document.createElement("style");s.type="text/css",s.innerHTML=`
			.hidden-copy-paste {
			position: absolute;
			bottom: 0;
			left: 0;
			width: 10px;
			height: 10px;
			display: block;
			font-size: 1px;
			z-index: -1;
			color: transparent;
			background: transparent;
			overflow: hidden;
			border: none;
			padding: 0;
			resize: none;
			outline: none;
			-webkit-user-select: text;
			user-select: text;
		}
		`,document.getElementsByTagName("head")[0].appendChild(s);const e=navigator.appVersion.search("Safari")!==-1&&navigator.appVersion.search("Chrome")===-1&&navigator.appVersion.search("CrMo")===-1&&navigator.appVersion.search("CriOS")===-1,t=navigator.userAgent.toLowerCase().indexOf("msie")!==-1||navigator.userAgent.toLowerCase().indexOf("trident")!==-1,i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","hidden-input-copy-paste"),i.setAttribute("class","hidden-copy-paste"),this.hiddenInput=i,document.body.append(i);let n=null;t&&(n=document.createElement("div"),n.setAttribute("id","hidden-ie-clipboard-copy-paste"),n.setAttribute("class","hidden-copy-paste"),n.setAttribute("contenteditable","true"),document.body.append(n),this.onBeforePaste=()=>{i.is(":focus")&&this.focusIeClipboardDiv(n)},document.addEventListener("beforepaste",this.onBeforePaste,!0)),i.addEventListener("input",o=>{i.value,e?(i.focus(),setTimeout(()=>{this.focusHiddenArea(i)},0)):this.focusHiddenArea(i)}),this.onPaste=ae.exports.debounce(o=>{const r="paste",a=o.path||o.composedPath&&o.composedPath();for(let l=0;l<a.length;l++)if(a[l].className&&typeof a[l].className=="string"&&(a[l].className.includes("el-message-box")||a[l].className.includes("ignore-key-press")))return;n!==null?this.ieClipboardEvent(r,n):(this.standardClipboardEvent(r,o),(!document.activeElement||document.activeElement&&["textarea","text","email","password"].indexOf(document.activeElement.type)===-1)&&(this.focusHiddenArea(i),o.preventDefault()))},1e3,{leading:!0}),document.addEventListener("paste",this.onPaste)},methods:{receivedCopyPasteData(s,e){},standardClipboardEvent(s,e){const t=e.clipboardData;if(t!==null&&s==="paste"){const i=t.getData("text/plain");this.receivedCopyPasteData(i,e)}},ieClipboardEvent(s,e){const t=window.clipboardData;if(s==="paste"){const i=t.getData("Text");e.empty(),this.receivedCopyPasteData(i)}},focusIeClipboardDiv(s){s.focus();const e=document.createRange();e.selectNodeContents(s.get(0));const t=window.getSelection();t!==null&&(t.removeAllRanges(),t.addRange(e))},focusHiddenArea(s){s.value=" ",s.focus(),s.select()},copyToClipboard(s){const e=document.createElement("textarea");e.value=s,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=document.getSelection();if(t===null)return;const i=t.rangeCount>0?t.getRangeAt(0):!1;e.select(),document.execCommand("copy"),document.body.removeChild(e),i&&(t.removeAllRanges(),t.addRange(i))}},beforeDestroy(){this.hiddenInput&&this.hiddenInput.remove(),this.onPaste&&document.removeEventListener("paste",this.onPaste),this.onBeforePaste&&document.removeEventListener("beforepaste",this.onBeforePaste)}});var Qx=N(ui,V).extend({props:{label:{type:String},hint:{type:String},value:{type:String},copyButtonText:{type:String,default(){return this.$locale.baseText("generic.copy")}},toastTitle:{type:String,default(){return this.$locale.baseText("generic.copiedToClipboard")}},toastMessage:{type:String},collapse:{type:Boolean,default:!1},size:{type:String,default:"large"}},methods:{copy(){this.$emit("copy"),this.copyToClipboard(this.value),this.$showMessage({title:this.toastTitle,message:this.toastMessage,type:"success"})}}});const Bx="_copyText_1krlo_1",Ux="_large_1krlo_20",Vx="_medium_1krlo_25",Fx="_collapsed_1krlo_30",jx="_copyButton_1krlo_35",zx="_hint_1krlo_50";var Gx={copyText:Bx,large:Ux,medium:Vx,collapsed:Fx,copyButton:jx,hint:zx},Hx=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("n8n-input-label",{attrs:{label:e.label}},[t("div",{class:{[e.$style.copyText]:!0,[e.$style[e.size]]:!0,[e.$style.collapsed]:e.collapse},on:{click:e.copy}},[t("span",{ref:"copyInputValue"},[e._v(e._s(e.value))]),t("div",{class:e.$style.copyButton},[t("span",[e._v(e._s(e.copyButtonText))])])])]),e.hint?t("div",{class:e.$style.hint},[e._v(e._s(e.hint))]):e._e()],1)},qx=[];const Bc={$style:Gx};function Xx(s){for(var e in Bc)this[e]=Bc[e]}var Yx=_(Qx,Hx,qx,!1,Xx,null,null,null),ul=Yx.exports,Zx=m.extend({name:"parameter-options",props:{parameter:{type:Object},isReadOnly:{type:Boolean},value:{type:[Object,String,Number,Boolean]},showOptions:{type:Boolean,default:!0},showExpressionSelector:{type:Boolean,default:!0}},computed:{isDefault(){return this.parameter.default===this.value},isValueExpression(){return Go(this.parameter,this.value)},shouldShowOptions(){return this.isReadOnly===!0||this.parameter.type==="collection"||this.parameter.type==="credentialsSelect"||this.parameter.typeOptions&&this.parameter.typeOptions.editor&&this.parameter.typeOptions.editor==="codeNodeEditor"?!1:this.showOptions===!0},selectedView(){return this.isValueExpression?"expression":"fixed"},hasRemoteMethod(){return!!this.getArgument("loadOptionsMethod")||!!this.getArgument("loadOptions")},actions(){const s=[{label:this.$locale.baseText("parameterInput.resetValue"),value:"resetValue",disabled:this.isDefault}];return this.hasRemoteMethod||this.parameter.type==="resourceLocator"&&ts(this.value)&&this.value.mode==="list"?[{label:this.$locale.baseText("parameterInput.refreshList"),value:"refreshOptions"},...s]:s}},methods:{onMenuToggle(s){this.$emit("menu-expanded",s)},onViewSelected(s){s==="expression"&&this.$emit("optionSelected",this.isValueExpression?"openExpression":"addExpression"),s==="fixed"&&this.isValueExpression&&this.$emit("optionSelected","removeExpression")},getArgument(s){if(this.parameter.typeOptions!==void 0&&this.parameter.typeOptions[s]!==void 0)return this.parameter.typeOptions[s]}}});const Kx="_container_11i26_1";var Jx={container:Kx},e$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[e.shouldShowOptions?t("n8n-action-toggle",{attrs:{placement:"bottom-end",size:"small",color:"foreground-xdark",iconSize:"small",actions:e.actions},on:{action:i=>e.$emit("optionSelected",i),"visible-change":e.onMenuToggle}}):e._e(),e.parameter.noDataExpression!==!0&&e.showExpressionSelector?t("n8n-radio-buttons",{attrs:{size:"small",value:e.selectedView,disabled:e.isReadOnly,options:[{label:e.$locale.baseText("parameterInput.fixed"),value:"fixed"},{label:e.$locale.baseText("parameterInput.expression"),value:"expression"}]},on:{input:e.onViewSelected}}):e._e()],1)},t$=[];const Uc={$style:Jx};function s$(s){for(var e in Uc)this[e]=Uc[e]}var i$=_(Zx,e$,t$,!1,s$,null,null,null),hl=i$.exports;const be=N(V).extend({data(){return{loadingService:null}},computed:{isReadOnly(){return![O.WORKFLOW,O.NEW_WORKFLOW].includes(this.$route.name)}},methods:{displayTimer(s,e=!1){if(s<6e4)return e?`${s/1e3} ${this.$locale.baseText("genericHelpers.sec")}`:`${Math.floor(s/1e3)} ${this.$locale.baseText("genericHelpers.sec")}`;const t=Math.floor(s/1e3),i=Math.floor(t/60),n=(t-i*60).toString().padStart(2,"0");return`${i}:${n} ${this.$locale.baseText("genericHelpers.min")}`},editAllowedCheck(){return this.isReadOnly?(this.$showMessage({title:this.$locale.baseText("genericHelpers.showMessage.title"),message:this.$locale.baseText("genericHelpers.showMessage.message"),type:"info",duration:0}),!1):!0},startLoading(s){this.loadingService===null&&(this.loadingService=this.$loading({lock:!0,text:s||this.$locale.baseText("genericHelpers.loading"),spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.8)"}))},setLoadingText(s){this.loadingService.text=s},stopLoading(){this.loadingService!==null&&(this.loadingService.close(),this.loadingService=null)}}});var n$=m.extend({props:{type:{type:String,default:"code"},readonly:{type:Boolean,default:!1},value:{type:String,default:""},autocomplete:{type:Function},options:{type:Object,default:()=>({})}},data(){return{monacoInstance:null,monacoLibrary:null}},methods:{loadEditor(){!this.$refs.code||(this.monacoInstance=or.create(this.$refs.code,{automaticLayout:!0,value:this.value,language:this.type==="code"?"javascript":"json",tabSize:2,wordBasedSuggestions:!1,readOnly:this.readonly,padding:{top:16},minimap:{enabled:!1},...this.options}),this.monacoInstance.onDidChangeModelContent(()=>{const s=this.monacoInstance.getModel();s&&this.$emit("input",s.getValue())}),or.defineTheme("n8nCustomTheme",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#f5f2f0"}}),or.setTheme("n8nCustomTheme"),this.type==="code"?(rr.typescript.javascriptDefaults.setCompilerOptions({allowNonTsExtensions:!0}),this.autocomplete&&(this.monacoLibrary=rr.typescript.javascriptDefaults.addExtraLib(this.autocomplete().join(`
`)))):this.type==="json"&&rr.json.jsonDefaults.setDiagnosticsOptions({validate:!0}))},handleResize(){this.monacoInstance&&this.monacoInstance.layout({})}},mounted(){setTimeout(this.loadEditor),window.addEventListener("resize",this.handleResize)},destroyed(){this.monacoLibrary&&this.monacoLibrary.dispose(),window.removeEventListener("resize",this.handleResize)}});var o$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"code",staticClass:"text-editor ph-no-capture",on:{keydown:function(i){i.stopPropagation()}}})},r$=[],a$=_(n$,o$,r$,!1,null,"e7e39740",null,null),mf=a$.exports,l$=N(be,ie).extend({name:"CodeEdit",components:{CodeEditor:mf},props:["codeAutocomplete","parameter","path","type","value","readonly"],methods:{loadAutocompleteData(){if(["function","functionItem"].includes(this.codeAutocomplete)){const e="main",t="manual";let i=0;const n=this.$store.getters.getWorkflowExecution,o=this.getCurrentWorkflow(),r=this.$store.getters["ndv/activeNode"],a=o.getParentNodes(r.name,e,1),l=o.getNodeConnectionIndexes(r.name,a[0])||{sourceIndex:0,destinationIndex:0},c=this.$store.getters.getWorkflowExecution;let d;!c||!c.data?d={resultData:{runData:{}}}:(d=c.data,d.resultData.runData[r.name]&&(i=d.resultData.runData[r.name].length-1));const u=this.connectionInputData(a,r.name,e,i,l),h={$execution:{id:at,mode:"test",resumeUrl:at},$executionId:at,$resumeWebhookUrl:at},f=new Qp(o,d,i,0,r.name,u||[],{},t,this.$store.getters.timezone,h).getDataProxy(),w=["function $evaluateExpression(expression: string, itemIndex?: number): any {};","function getNodeParameter(parameterName: string, itemIndex: number, fallbackValue?: any): any {};","function getWorkflowStaticData(type: string): {};","function $item(itemIndex: number, runIndex?: number): {};","function $items(nodeName?: string, outputIndex?: number, runIndex?: number): {};"],g=["$env","$executionId","$mode","$parameter","$resumeWebhookUrl","$workflow","$now","$today","$thisRunIndex","DateTime","Duration","Interval"],v=["$json","$binary","$position","$thisItem","$thisItemIndex"],y=[];this.codeAutocomplete==="functionItem"&&y.push(...v),n&&u&&u.length?g.push(...y):y.forEach(T=>{w.push(`const ${T} = {}`)});for(const T of g)w.push(`const ${T} = ${JSON.stringify(this.createSimpleRepresentation(f[T]))}`);const S={};for(const[T,$]of Object.entries(o.nodes)){S[T]={json:{},parameter:this.createSimpleRepresentation(f.$node[T].parameter)};try{S[T].json=this.createSimpleRepresentation(f.$node[T].json),S[T].context=this.createSimpleRepresentation(f.$node[T].context),S[T].runIndex=f.$node[T].runIndex,Object.keys(f.$node[T].binary).length&&(S[T].binary=this.createSimpleRepresentation(f.$node[T].binary))}catch{}}return w.push(`const $node = ${JSON.stringify(S)}`),w.push("function $jmespath(jsonDoc: object, query: string): {};"),this.codeAutocomplete==="function"?u?w.push(`const items = ${JSON.stringify(this.createSimpleRepresentation(u))}`):w.push("const items: {json: {[key: string]: any}}[] = []"):this.codeAutocomplete==="functionItem"&&(u?w.push("const item = $json"):w.push("const item: {[key: string]: any} = {}")),w}return[]},closeDialog(){return this.$emit("closeDialog"),!1},createSimpleRepresentation(s){if(s==null)return s;if(typeof s=="string")return"";if(typeof s=="boolean")return!0;if(typeof s=="number")return 1;if(Array.isArray(s))return s.map(e=>this.createSimpleRepresentation(e));if(typeof s=="object"){const e={};return Object.keys(s).forEach(t=>{e[t]=this.createSimpleRepresentation(s[t])}),e}return s}}});var c$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-dialog",{attrs:{visible:"","append-to-body":"","close-on-click-modal":!1,width:"80%",title:`${e.$locale.baseText("codeEdit.edit")} ${e.$locale.nodeText().inputLabelDisplayName(e.parameter,e.path)}`,"before-close":e.closeDialog}},[t("div",{staticClass:"text-editor-wrapper ignore-key-press"},[t("code-editor",{attrs:{value:e.value,autocomplete:e.loadAutocompleteData,readonly:e.readonly},on:{input:function(i){return e.$emit("valueChanged",i)}}})],1)])},d$=[],u$=_(l$,c$,d$,!1,null,"e3fb149c",null,null),h$=u$.exports,p$=m.extend({name:"ScopesNotice",props:["activeCredentialType","scopes"],computed:{...F("credentials",["getCredentialTypeByName"]),scopesShortContent(){return this.$locale.baseText("nodeSettings.scopes.notice",{adjustToNumber:this.scopes.length,interpolate:{activeCredential:this.shortCredentialDisplayName}})},scopesFullContent(){return this.$locale.baseText("nodeSettings.scopes.expandedNoticeWithScopes",{adjustToNumber:this.scopes.length,interpolate:{activeCredential:this.shortCredentialDisplayName,scopes:this.scopes.map(s=>s.includes("/")?s.split("/").pop():s).join("<br>")}})},shortCredentialDisplayName(){const s=this.$locale.baseText("generic.oauth1Api"),e=this.$locale.baseText("generic.oauth2Api");return this.getCredentialTypeByName(this.activeCredentialType).displayName.replace(new RegExp(`${s}|${e}`),"").trim()}}}),f$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-notice",{attrs:{content:e.scopesShortContent,fullContent:e.scopesFullContent}})},m$=[],g$=_(p$,f$,m$,!1,null,null,null,null),gf=g$.exports,w$=m.extend({name:"TitledList",props:{title:{type:String},items:{type:Array,default:()=>[]}}});var y$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"titled-list"},[t("p",{domProps:{textContent:e._s(e.title)}}),t("ul",e._l(e.items,function(i){return t("li",{key:i,staticClass:"titled-list-item",domProps:{textContent:e._s(i)}})}),0)])},v$=[],_$=_(w$,y$,v$,!1,null,"5bfa5374",null,null),pl=_$.exports,O$=N(be,ct,Ce,V).extend({name:"NodeCredentials",props:["node","overrideCredType"],components:{TitledList:pl},data(){return{NEW_CREDENTIALS_TEXT:`- ${this.$locale.baseText("nodeCredentials.createNew")} -`,newCredentialUnsubscribe:null}},computed:{...F("users",["currentUser"]),...F("credentials",{allCredentialsByType:"allCredentialsByType",getCredentialTypeByName:"getCredentialTypeByName"}),credentialTypesNode(){return this.credentialTypesNodeDescription.map(s=>s.name)},credentialTypesNodeDescriptionDisplayed(){return this.credentialTypesNodeDescription.filter(s=>this.displayCredentials(s))},credentialTypesNodeDescription(){const s=this.node,e=this.getCredentialTypeByName(this.overrideCredType);if(e)return[e];const t=this.$store.getters["nodeTypes/getNodeType"](s.type,s.typeVersion);return t&&t.credentials?t.credentials:[]},credentialTypeNames(){const s={};let e;for(const t of this.credentialTypesNode)e=this.$store.getters["credentials/getCredentialTypeByName"](t),s[t]=e!==null?e.displayName:t;return s},selected(){return this.node.credentials||{}}},methods:{getCredentialOptions(s){return this.allCredentialsByType[s].filter(e=>zo(this.currentUser,e,this.$store).use)},getSelectedId(s){if(this.isCredentialExisting(s))return this.selected[s].id},credentialInputWrapperStyle(s){let e=0;const t={width:"100%"};return this.getIssues(s).length&&(e+=20),e!==0&&(t.width=`calc(100% - ${e}px)`),t},listenForNewCredentials(s){this.stopListeningForNewCredentials(),this.newCredentialUnsubscribe=this.$store.subscribe((e,t)=>{(e.type==="credentials/upsertCredential"||e.type==="credentials/enableOAuthCredential")&&this.onCredentialSelected(s,e.payload.id),e.type==="credentials/deleteCredential"&&(this.clearSelectedCredential(s),this.stopListeningForNewCredentials())})},stopListeningForNewCredentials(){this.newCredentialUnsubscribe&&this.newCredentialUnsubscribe()},clearSelectedCredential(s){const t={...this.node.credentials||{}};delete t[s];const i={name:this.node.name,properties:{credentials:t}};this.$emit("credentialSelected",i)},onCredentialSelected(s,e){if(e===this.NEW_CREDENTIALS_TEXT){this.listenForNewCredentials(s),this.$store.dispatch("ui/openNewCredential",{type:s}),this.$telemetry.track("User opened Credential modal",{credential_type:s,source:"node",new_credential:!0,workflow_id:this.$store.getters.workflowId});return}this.$telemetry.track("User selected credential from node modal",{credential_type:s,node_type:this.node.type,...this.hasProxyAuth(this.node)?{is_service_specific:!0}:{},workflow_id:this.$store.getters.workflowId,credential_id:e});const t=this.$store.getters["credentials/getCredentialById"](e),i=this.node.credentials&&this.node.credentials[s]?this.node.credentials[s]:{},n={id:t.id,name:t.name};(i.id===null||i.id&&!this.$store.getters["credentials/getCredentialByIdAndType"](i.id,s))&&(this.$store.commit("replaceInvalidWorkflowCredentials",{credentials:n,invalid:i,type:s}),this.updateNodesCredentialsIssues(),this.$showMessage({title:this.$locale.baseText("nodeCredentials.showMessage.title"),message:this.$locale.baseText("nodeCredentials.showMessage.message",{interpolate:{oldCredentialName:i.name,newCredentialName:n.name}}),type:"success"}));const r={...this.node.credentials||{},[s]:n},a={name:this.node.name,properties:{credentials:r}};this.$emit("credentialSelected",a)},displayCredentials(s){return s.displayOptions===void 0?!0:this.displayParameter(this.node.parameters,s,"",this.node)},getIssues(s){const e=this.node;return e.issues===void 0||e.issues.credentials===void 0?[]:e.issues.credentials.hasOwnProperty(s)?e.issues.credentials[s]:[]},isCredentialExisting(s){if(!this.node.credentials||!this.node.credentials[s]||!this.node.credentials[s].id)return!1;const{id:e}=this.node.credentials[s];return!!this.getCredentialOptions(s).find(i=>i.id===e)},editCredential(s){const{id:e}=this.node.credentials[s];this.$store.dispatch("ui/openExistingCredential",{id:e}),this.$telemetry.track("User opened Credential modal",{credential_type:s,source:"node",new_credential:!1,workflow_id:this.$store.getters.workflowId}),this.listenForNewCredentials(s)}},beforeDestroy(){this.stopListeningForNewCredentials()}});const b$="_container_1fvxj_1",x$="_warning_1fvxj_8",$$="_edit_1fvxj_15",T$="_input_1fvxj_25",k$="_hasIssues_1fvxj_30 _input_1fvxj_25";var S$={container:b$,warning:x$,edit:$$,input:T$,hasIssues:k$},E$=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.credentialTypesNodeDescriptionDisplayed.length?t("div",{class:["node-credentials",e.$style.container]},e._l(e.credentialTypesNodeDescriptionDisplayed,function(i){return t("div",{key:i.name},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("nodeCredentials.credentialFor",{interpolate:{credentialType:e.credentialTypeNames[i.name]}}),bold:!1,set:e.issues=e.getIssues(i.name),size:"small",color:"text-dark"}},[e.isReadOnly?t("div",[t("n8n-input",{attrs:{value:e.selected&&e.selected[i.name]&&e.selected[i.name].name,disabled:"",size:"small"}})],1):t("div",{class:e.issues.length?e.$style.hasIssues:e.$style.input},[t("n8n-select",{attrs:{value:e.getSelectedId(i.name),placeholder:e.$locale.baseText("nodeCredentials.selectCredential"),size:"small"},on:{change:n=>e.onCredentialSelected(i.name,n)}},[e._l(e.getCredentialOptions(i.name),function(n){return t("n8n-option",{key:n.id,attrs:{label:n.name,value:n.id}})}),t("n8n-option",{key:e.NEW_CREDENTIALS_TEXT,attrs:{value:e.NEW_CREDENTIALS_TEXT,label:e.NEW_CREDENTIALS_TEXT}})],2),e.issues.length?t("div",{class:e.$style.warning},[t("n8n-tooltip",{attrs:{placement:"top"}},[t("titled-list",{attrs:{slot:"content",title:`${e.$locale.baseText("nodeCredentials.issues")}:`,items:e.issues},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):e._e(),e.selected[i.name]&&e.isCredentialExisting(i.name)?t("div",{class:e.$style.edit},[t("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"pen",title:e.$locale.baseText("nodeCredentials.updateCredential")},on:{click:function(n){return e.editCredential(i.name)}}})],1):e._e()],1)])],1)}),0):e._e()},C$=[];const Vc={$style:S$};function N$(s){for(var e in Vc)this[e]=Vc[e]}var P$=_(O$,E$,C$,!1,N$,null,null,null),fl=P$.exports,D$=m.extend({name:"CredentialsSelect",components:{ScopesNotice:gf,NodeCredentials:fl},props:["activeCredentialType","node","parameter","inputSize","displayValue","isReadOnly","displayTitle"],computed:{...F("credentials",["allCredentialTypes","getScopesByCredentialType"]),scopes(){return this.activeCredentialType?this.getScopesByCredentialType(this.activeCredentialType):[]},supportedCredentialTypes(){return this.allCredentialTypes.filter(s=>this.isSupported(s.name))}},methods:{focus(){const s=this.$refs.innerSelect;s&&s.focus()},isSupported(s){const e=this.getSupportedSets(this.parameter.credentialTypes),t=this.$store.getters["credentials/getCredentialTypeByName"](s);for(const i of e.has)if(t[i]!==void 0){if(s==="httpHeaderAuth"&&i==="authenticate")continue;return!0}return t.extends&&t.extends.some(i=>e.extends.includes(i))?!0:t.extends&&e.extends.length?t.extends.reduce((i,n)=>i||this.isSupported(n),!1):!1},getSupportedSets(s){return s.reduce((e,t)=>{const i=t.split("extends:");if(i.length===2)return e.extends.push(i[1]),e;const n=t.split("has:");return n.length===2&&e.has.push(n[1]),e},{extends:[],has:[]})}}}),I$={"parameter-value-container":"_parameter-value-container_twz3x_1"},A$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{class:e.$style["parameter-value-container"]},[t("n8n-select",{ref:"innerSelect",attrs:{size:e.inputSize,filterable:"",value:e.displayValue,placeholder:e.parameter.placeholder?e.getPlaceholder():e.$locale.baseText("parameterInput.select"),title:e.displayTitle,disabled:e.isReadOnly},on:{change:i=>e.$emit("valueChanged",i),keydown:function(i){i.stopPropagation()},focus:function(i){return e.$emit("setFocus")},blur:function(i){return e.$emit("onBlur")}}},e._l(e.supportedCredentialTypes,function(i){return t("n8n-option",{key:i.name,attrs:{value:i.name,label:i.displayName}},[t("div",{staticClass:"list-option"},[t("div",{staticClass:"option-headline"},[e._v(" "+e._s(i.displayName)+" ")]),i.description?t("div",{staticClass:"option-description",domProps:{innerHTML:e._s(i.description)}}):e._e()])])}),1),e._t("issues-and-options")],2),e.scopes.length>0?t("scopes-notice",{attrs:{activeCredentialType:e.activeCredentialType,scopes:e.scopes}}):e._e(),t("div",[t("node-credentials",{attrs:{node:e.node,overrideCredType:e.node.parameters[e.parameter.name]},on:{credentialSelected:i=>e.$emit("credentialSelected",i)}})],1)],1)},R$=[];const Fc={$style:I$};function M$(s){for(var e in Fc)this[e]=Fc[e]}var W$=_(D$,A$,R$,!1,M$,null,null,null),L$=W$.exports,Q$=N(V).extend({name:"import-parameter",props:{isReadOnly:{type:Boolean,default:!1}},methods:{onImportCurlClicked(){this.$store.dispatch("ui/openModal",Gt)}}});const B$="_importSection_1yvpj_1";var U$={importSection:B$},V$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.importSection},[t("n8n-button",{attrs:{type:"secondary",label:e.$locale.baseText("importParameter.label"),disabled:e.isReadOnly,size:"mini"},on:{click:e.onImportCurlClicked}})],1)},F$=[];const jc={$style:U$};function j$(s){for(var e in jc)this[e]=jc[e]}var z$=_(Q$,V$,F$,!1,j$,null,null,null),wf=z$.exports;var G$=N(be,ie).extend({name:"ExpressionInput",props:["rows","value","parameter","path","resolvedValue"],data(){return{editor:null}},computed:{editorStyle(){let s=1;return this.rows&&(s=parseInt(this.rows,10)),{height:Math.max(s*26+10,40)+"px"}},workflow(){return this.getCurrentWorkflow()}},watch:{value(){this.resolvedValue&&this.initValue()}},mounted(){const s=this,e=ar.import("blots/inline");class t extends e{static create(n){const o=super.create(n);return o.setAttribute("data-value",n),o.setAttribute("class","variable"),o}static formats(n){let o=n.innerHTML.trim();s.resolvedValue&&(o=n.getAttribute("data-value"));const r=s.getPlaceholderClasses(o);return n.getAttribute("class")!==r&&n.setAttribute("class",r),!0}}t.blotName="variable",t.className="variable",t.tagName="span",cc.DEFAULTS={expression:{trigger:/\B[\w\s]/,find:/\{\{[^\s,;:!?}]+\}\}/i,format:"variable"}},ar.register({"modules/autoformat":cc,"formats/variable":t}),this.editor=new ar(this.$refs["expression-editor"],{readOnly:!!this.resolvedValue||this.isReadOnly,modules:{autoformat:{},keyboard:{bindings:{"list autofill":null}}}}),this.editor.root.addEventListener("blur",i=>{this.$emit("blur",i)}),this.initValue(),this.resolvedValue||(this.setFocus(),this.editor.on("text-change",()=>this.update()))},methods:{customizeVariable(s){const e={classes:[],message:s};let t;try{t=this.resolveExpression(`=${s}`),t!==void 0?e.classes.push("valid"):e.classes.push("invalid")}catch{e.classes.push("invalid")}return e},resolveParameterString(s){let e;try{e=this.resolveExpression(`=${s}`)}catch(t){return`[invalid (${t.message})]`}return e===void 0?"[not found]":e},getPlaceholderClasses(s){const e=this.customizeVariable(s);return"variable "+e.classes.join(" ")},getValue(){if(!this.editor)return"";const s=this.editor.getContents();if(!s||!s.ops)return"";let e="";return s.ops.forEach(t=>{!t.insert||(e+=t.insert)}),"="+e.replace(/\s+$/g,"")},setFocus(){this.editor.focus()},itemSelected(s){this.editor.focus();const e=this.editor.getSelection();let t=null;if(e&&(t=e.index),t)this.editor.insertText(t,`{{${s.variable}}}`,"variable",!0),this.update();else{let i=this.getValue();i==="="||i==="=0"?i=`{{${s.variable}}}
`:i+=` {{${s.variable}}}
`,this.$emit("change",i,!0),this.resolvedValue||m.nextTick(()=>{this.initValue()})}},initValue(){if(!this.value)return;let s=this.value;s.charAt(0)==="="&&(s=s.slice(1));const e=[];s.replace(/\{\{(.*?)\}\}/ig,"*%%#_@^$1*%%#_@").split("*%%#_@").forEach(t=>{if(t&&t.charAt(0)==="^"){let i=`{{${t.slice(1)}}}`;this.resolvedValue&&(i=[null,void 0].includes(i)?"":i,i=this.resolveParameterString(i.toString())),i=[null,void 0].includes(i)?"":i,e.push({attributes:{variable:`{{${t.slice(1)}}}`},insert:i.toString()})}else e.push({insert:t})}),this.editor.setContents(e)},update(){this.$emit("input",this.getValue()),this.$emit("change",this.getValue())}}});var H$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{ref:"expression-editor",staticClass:"ignore-key-press",style:e.editorStyle,on:{keydown:function(i){i.stopPropagation()}}})])},q$=[],X$=_(G$,H$,q$,!1,null,null,null,null),Y$=X$.exports,Z$=N(ve).extend({name:"VariableSelectorItem",props:["allowParentSelect","extendAll","item"],computed:{itemAddOperations(){const s=[{command:"raw",displayName:"Raw value"}];return this.item.dataType==="array"?(s.push({command:"arrayLength",displayName:"Length"}),s.push({command:"arrayValues",displayName:"Values"})):this.item.dataType==="object"&&(s.push({command:"objectKeys",displayName:"Keys"}),s.push({command:"objectValues",displayName:"Values"})),s}},data(){return{extended:!1}},methods:{optionSelected(s,e){let t=e.key;s==="arrayValues"?t=`${e.key}.join(', ')`:s==="arrayLength"?t=`${e.key}.length`:s==="objectKeys"?t=`Object.keys(${e.key}).join(', ')`:s==="objectValues"&&(t=`Object.values(${e.key}).join(', ')`),this.$emit("itemSelected",{variable:t})},selectItem(s){this.$emit("itemSelected",{variable:s.key})},forwardItemSelected(s){this.$emit("itemSelected",s)}}});var K$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"item"},[e.item.options?t("div",{staticClass:"options"},[e.item.options.length?t("div",{staticClass:"headline clickable",on:{click:function(i){e.extended=!e.extended}}},[e.extendAll!==!0?t("div",{staticClass:"options-toggle"},[e.extended?t("font-awesome-icon",{attrs:{icon:"angle-down"}}):t("font-awesome-icon",{attrs:{icon:"angle-right"}})],1):e._e(),t("div",{staticClass:"option-title",attrs:{title:e.item.key}},[e._v(" "+e._s(e.item.name)+" "),e.allowParentSelect===!0?t("el-dropdown",{attrs:{trigger:"click"},on:{click:function(i){i.stopPropagation()},command:function(i){return e.optionSelected(i,e.item)}}},[t("span",{staticClass:"el-dropdown-link clickable",on:{click:function(i){i.stopPropagation()}}},[t("font-awesome-icon",{attrs:{icon:"dot-circle",title:e.$locale.baseText("variableSelectorItem.selectItem")}})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.itemAddOperations,function(i){return t("el-dropdown-item",{key:i.command,attrs:{command:i.command}},[e._v(e._s(i.displayName))])}),1)],1):e._e()],1)]):e._e(),e.item.options&&(e.extended===!0||e.extendAll===!0)?t("div",e._l(e.item.options,function(i){return t("variable-selector-item",{key:i.key,staticClass:"sub-level",attrs:{item:i,extendAll:e.extendAll,allowParentSelect:i.allowParentSelect},on:{itemSelected:e.forwardItemSelected}})}),1):e._e()]):t("div",{staticClass:"value clickable",on:{click:function(i){return e.selectItem(e.item)}}},[t("div",{staticClass:"item-title ph-no-capture",attrs:{title:e.item.key}},[e._v(" "+e._s(e.item.name)+": "),t("font-awesome-icon",{attrs:{icon:"dot-circle",title:"Select Item"}})],1),t("div",{staticClass:"item-value"},[e._v(e._s(e.item.value!==void 0?e.item.value:e.$locale.baseText("variableSelectorItem.empty")))])])])},J$=[],eT=_(Z$,K$,J$,!1,null,"ed878e5e",null,null),tT=eT.exports;const sT=[nt];var iT=N(ie).extend({name:"VariableSelector",components:{VariableSelectorItem:tT},props:["path"],data(){return{variableFilter:"",selectorOpenInputIndex:null}},computed:{extendAll(){return!!this.variableFilter},currentResults(){return this.getFilterResults(this.variableFilter.toLowerCase(),0)},workflow(){return this.getCurrentWorkflow()}},methods:{forwardItemSelected(s){this.$emit("itemSelected",s)},sortOptions(s){return s===null?null:s.sort((e,t)=>{const i=e.hasOwnProperty("options"),n=t.hasOwnProperty("options");return n&&!i?1:!n&&i||e.name<t.name?-1:e.name>t.name?1:0})},removeEmptyEntries(s){if(Array.isArray(s)){const e=[];let t;return s.forEach(i=>{t=this.removeEmptyEntries(i),t!==null&&e.push(t)}),e}if(s&&s.options){const e=this.removeEmptyEntries(s.options);return Array.isArray(e)&&e.length?(s.options=e,s):Array.isArray(e)&&e.length===0?(delete s.options,s):null}else return s},getPathNormalized(s){if(s===void 0)return"";const e=s.split("."),t=[];let i;for(const n of e){const o=n.match(/\[.*?\]/g);if(o===null)t.push(n);else{n.charAt(0)!=="["&&t.push(n.substr(0,n.indexOf("[")));for(i of o)i=i.slice(1,-1),['"',"'"].includes(i.charAt(0))?(i=i.slice(1,-1),t.push(i)):t.push(`[${i}]`)}}return t.join("|")},jsonDataToFilterOption(s,e,t,i,n,o,r){let a=`${e}["${t}"]`;n!==void 0&&(a+=`[${n}]`);const l=[];if(s===null)return l.push({name:t,key:a,value:"[null]"}),l;if(Array.isArray(s)){let c=t,d=e;n!==void 0&&(d+=`["${t}"]`,c=n.toString());const u=[];for(let h=0;h<s.length;h++)u.push.apply(u,this.jsonDataToFilterOption(s[h],d,c,i,h,`[Item: ${h}]`,r));l.push({name:o||t,options:u,key:a,allowParentSelect:!0,dataType:"array"})}else if(typeof s=="object"){const c=[];for(const d of Object.keys(s))c.push.apply(c,this.jsonDataToFilterOption(s[d],a,d,i,void 0,void 0,r));c.length&&l.push({name:o||t,options:this.sortOptions(c),key:a,allowParentSelect:!0,dataType:"object"})}else{if(i!==void 0&&t.toLowerCase().indexOf(i)===-1)return l;this.getPathNormalized(r)!==this.getPathNormalized(a)&&l.push({name:t,key:a,value:s})}return l},getNodeRunDataOutput(s,e,t,i=0,n=0,o="main",r=0,a=!1){if(!e.hasOwnProperty(s)||e[s].length<=n||!e[s][n].hasOwnProperty("data")||e[s][n].data===null||e[s][n].data===void 0||!e[s][n].data.hasOwnProperty(o)||e[s][n].data[o].length<=r||e[s][n].data[o][r]===null||e[s][n].data[o][r].length<=i)return null;const l=e[s][n].data[o][r][i];return this.getNodeOutput(s,l,t,a)},getNodePinDataOutput(s,e,t,i=!1){const n=e.map(o=>({json:o}))[0];return this.getNodeOutput(s,n,t,i)},getNodeOutput(s,e,t,i=!1){const n=[];if(e.hasOwnProperty("json")){const o=i===!0?"$json":`$node["${s}"].json`,r=[];for(const a of Object.keys(e.json))r.push.apply(r,this.jsonDataToFilterOption(e.json[a],o,a,t));r.length&&n.push({name:"JSON",options:this.sortOptions(r)})}if(e.hasOwnProperty("binary")){const o=i===!0?"$binary":`$node["${s}"].binary`,r=[];let a=[];for(const l of Object.keys(e.binary)){a=[];for(const c in e.binary[l])c!=="data"&&(t&&c.toLowerCase().indexOf(t)===-1||a.push({name:c,key:`${o}.${l}.${c}`,value:e.binary[l][c]}));a.length&&r.push({name:l,key:`${o}.${l}`,options:this.sortOptions(a),allowParentSelect:!0})}r.length&&n.push({name:"Binary",key:o,options:this.sortOptions(r),allowParentSelect:!0})}return n},getNodeContext(s,e,t,i,n){const r="main",l=[],c=this.$store.getters["ndv/activeNode"];if(c===null)return l;const d=this.workflow.getNodeConnectionIndexes(c.name,t[0],"main"),u=this.connectionInputData(t,i,r,0,d);if(u===null)return l;const h={$execution:{id:at,mode:"test",resumeUrl:at},$executionId:at,$resumeWebhookUrl:at},w=new Qp(s,e,0,0,i,u,{},"manual",this.$store.getters.timezone,h).getDataProxy().$node[i].context;for(const g of Object.keys(w))n!==void 0&&g.toLowerCase().indexOf(n)===-1||l.push({name:g,key:`$node["${i}"].context["${g}"]`,value:w[g]});return l},getNodeParameters(s,e,t,i){const n=this.workflow.getNode(s);if(n===null)return null;const o=[];for(const r in n.parameters)r!==t&&(i!==void 0&&r.toLowerCase().indexOf(i)===-1||o.push.apply(o,this.jsonDataToFilterOption(n.parameters[r],e,r,i,void 0,void 0,t)));return o},getFilterResults(s,e){const t="main",i=this.$store.getters["ndv/activeNode"];if(i===null)return[];const n=this.$store.getters.getWorkflowExecution;let o=this.workflow.getParentNodes(i.name,t,1),r=this.$store.getters.getWorkflowRunData;r===null&&(r={});let a=[];const l=[];let c;if(n!==null&&n.data!==void 0){const v=n.data;c=this.getNodeContext(this.workflow,v,o,i.name,s),c.length&&l.push({name:"Context",options:this.sortOptions(c)})}let d;if(o.length){const v=this.workflow.getNodeConnectionIndexes(i.name,o[0],"main"),y=v===void 0?0:v.sourceIndex;d=this.getNodeRunDataOutput(o[0],r,s,e,0,"main",y,!0);const S=[{name:"JSON",options:[]}];if(o.forEach(T=>{const $=this.$store.getters.pinDataByNodeName(T);if($){const D=this.getNodePinDataOutput(T,$,s,!0);S[0].options=S[0].options.concat(D&&D[0].options?D[0].options:[])}}),S[0].options.length>0)if(d){const T=d.find($=>$.name==="JSON");T?(T.options||(T.options=[]),(S[0].options||[]).forEach($=>{const D=T.options.findIndex(P=>P.name===$.name);D!==-1?T.options[D]=$:T.options.push($)})):d.push(S[0])}else d=S;d&&(JSON.stringify(d).length<102400?l.push({name:"Input Data",options:this.sortOptions(d)}):l.push({name:"Input Data",options:[{name:"[Data to large]"}]}))}const u="$parameter";let h=this.path;h.startsWith("parameters.")&&(h=u+h.substring(10)),l.push({name:this.$locale.baseText("variableSelector.parameters"),options:this.sortOptions(this.getNodeParameters(i.name,u,h,s))}),a.push({name:this.$locale.baseText("variableSelector.currentNode"),options:this.sortOptions(l)});const p=[];let f;const w=this.workflow.getParentNodes(i.name,t),g=Object.entries(this.workflow.nodes);g.sort((v,y)=>w.indexOf(y[0])-w.indexOf(v[0]));for(const[v,y]of g){if(v===i.name||sT.includes(y.type))continue;if(f=[{name:this.$locale.baseText("variableSelector.parameters"),options:this.sortOptions(this.getNodeParameters(v,`$node["${v}"].parameter`,void 0,s))}],n!==null&&n.data!==void 0){const T=n.data;o=this.workflow.getParentNodes(v,t,1),c=this.getNodeContext(this.workflow,T,o,v,s),c.length&&(f=[{name:this.$locale.baseText("variableSelector.context"),options:this.sortOptions(c)}])}if(w.includes(v)){const T=this.$store.getters.pinDataByNodeName(v);d=T?this.getNodePinDataOutput(v,T,s):this.getNodeRunDataOutput(v,r,s,e),d&&f.push({name:this.$locale.baseText("variableSelector.outputData"),options:this.sortOptions(d)})}const S=this.$locale.shortNodeType(y.type);p.push({name:this.$locale.headerText({key:`headers.${S}.displayName`,fallback:v}),options:this.sortOptions(f)})}return a.push({name:this.$locale.baseText("variableSelector.nodes"),options:p}),a=this.removeEmptyEntries(a),a===null?[]:a}}});var nT=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"variable-selector-wrapper",on:{keydown:function(i){i.stopPropagation()}}},[t("div",{staticClass:"input-wrapper"},[t("n8n-input",{ref:"inputField",attrs:{placeholder:e.$locale.baseText("variableSelector.variableFilter"),size:"small",type:"text"},model:{value:e.variableFilter,callback:function(i){e.variableFilter=i},expression:"variableFilter"}})],1),t("div",{staticClass:"result-wrapper"},e._l(e.currentResults,function(i){return t("variable-selector-item",{key:i.key,attrs:{item:i,extendAll:e.extendAll},on:{itemSelected:e.forwardItemSelected}})}),1)])},oT=[],rT=_(iT,nT,oT,!1,null,"d962e635",null,null),aT=rT.exports;const dt=m.extend({data(){return{debouncedFunctions:[]}},methods:{async callDebounced(...s){const e=s.shift(),{trailing:t,debounceTime:i}=s.shift();this.debouncedFunctions[e]===void 0&&(this.debouncedFunctions[e]=ae.exports.debounce(this[e],i,t?{trailing:t}:{leading:!0})),await this.debouncedFunctions[e].apply(this,s)}}});var lT=N(ve,be,dt).extend({name:"ExpressionEdit",props:["dialogVisible","parameter","path","value","eventSource"],components:{ExpressionInput:Y$,VariableSelector:aT},data(){return{displayValue:"",latestValue:""}},methods:{valueChanged(s,e=!1){this.latestValue=s,e===!0?(this.updateDisplayValue(),this.$emit("valueChanged",this.latestValue)):this.callDebounced("updateDisplayValue",{debounceTime:500})},updateDisplayValue(){this.displayValue=this.latestValue},closeDialog(){return this.latestValue!==this.value&&this.$emit("valueChanged",this.latestValue),this.$emit("closeDialog"),!1},itemSelected(s){this.$refs.inputFieldExpression.itemSelected(s),this.$externalHooks().run("expressionEdit.itemSelected",{parameter:this.parameter,value:this.value,selectedItem:s});const e={event_version:"2",node_type_dest:this.$store.getters["ndv/activeNode"].type,parameter_name_dest:this.parameter.displayName,is_immediate_input:!1,variable_expression:s.variable,node_name:this.$store.getters["ndv/activeNode"].name};if(s.variable){let t=s.variable.split(".");if(s.variable.startsWith("Object.keys")?(t=s.variable.split("(")[1].split(")")[0].split("."),e.variable_type="Keys"):s.variable.startsWith("Object.values")?(t=s.variable.split("(")[1].split(")")[0].split("."),e.variable_type="Values"):e.variable_type="Raw value",t[0].startsWith("$node")){const i=t[0].split('"')[1];e.node_type_source=this.$store.getters.getNodeByName(i).type;const n=this.$store.getters.outgoingConnectionsByNodeName(i).main;e.is_immediate_input=!!(n&&n[0]&&!!n[0].find(({node:o})=>o===this.$store.getters["ndv/activeNode"].name)),t[1].startsWith("parameter")&&(e.parameter_name_source=t[1].split('"')[1])}else e.is_immediate_input=!0,t[0].startsWith("$parameter")&&(e.parameter_name_source=t[0].split('"')[1])}this.$telemetry.track("User inserted item from Expression Editor variable selector",e)}},watch:{dialogVisible(s){this.displayValue=this.value,this.latestValue=this.value;const e=this.$refs.expressionResult&&this.$refs.expressionResult.getValue()||void 0;if(this.$externalHooks().run("expressionEdit.dialogVisibleChanged",{dialogVisible:s,parameter:this.parameter,value:this.value,resolvedExpressionValue:e}),!s){const t={empty_expression:this.value==="="||this.value==="={{}}"||!this.value,workflow_id:this.$store.getters.workflowId,source:this.eventSource,session_id:this.$store.getters["ndv/ndvSessionId"],has_parameter:this.value.includes("$parameter"),has_mapping:dl(this.value)};this.$telemetry.track("User closed Expression Editor",t),this.$externalHooks().run("expressionEdit.closeDialog",t)}}}});var cT=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.dialogVisible?t("div",{on:{keydown:function(i){i.stopPropagation()}}},[t("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"expression-dialog classic","append-to-body":"",width:"80%",title:e.$locale.baseText("expressionEdit.editExpression"),"before-close":e.closeDialog}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"header-side-menu"},[t("div",{staticClass:"headline"},[e._v(" "+e._s(e.$locale.baseText("expressionEdit.editExpression"))+" ")]),t("div",{staticClass:"sub-headline"},[e._v(" "+e._s(e.$locale.baseText("expressionEdit.variableSelector"))+" ")])]),t("div",{staticClass:"variable-selector"},[t("variable-selector",{attrs:{path:e.path},on:{itemSelected:e.itemSelected}})],1)]),t("el-col",{staticClass:"right-side",attrs:{span:16}},[t("div",{staticClass:"expression-editor-wrapper"},[t("div",{staticClass:"editor-description"},[e._v(" "+e._s(e.$locale.baseText("expressionEdit.expression"))+" ")]),t("div",{staticClass:"expression-editor ph-no-capture"},[t("expression-input",{ref:"inputFieldExpression",attrs:{parameter:e.parameter,rows:"8",value:e.value,path:e.path},on:{change:e.valueChanged,keydown:function(i){return i.stopPropagation(),e.noOp.apply(null,arguments)}}})],1)]),t("div",{staticClass:"expression-result-wrapper"},[t("div",{staticClass:"editor-description"},[e._v(" "+e._s(e.$locale.baseText("expressionEdit.result"))+" ")]),t("div",{staticClass:"ph-no-capture"},[t("expression-input",{ref:"expressionResult",attrs:{parameter:e.parameter,resolvedValue:"true",rows:"8",value:e.displayValue,path:e.path}})],1)])])],1)],1)],1):e._e()},dT=[],uT=_(lT,cT,dT,!1,null,"a0e6d423",null,null),yf=uT.exports,hT=m.extend({name:"ParameterIssues",components:{TitledList:pl},props:["issues"]}),pT={"parameter-issues":"_parameter-issues_osri7_1"},fT=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.issues.length?t("div",{class:e.$style["parameter-issues"]},[t("n8n-tooltip",{attrs:{placement:"top"}},[t("titled-list",{attrs:{slot:"content",title:`${e.$locale.baseText("parameterInput.issues")}:`,items:e.issues},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):e._e()},mT=[];const zc={$style:pT};function gT(s){for(var e in zc)this[e]=zc[e]}var wT=_(hT,fT,mT,!1,gT,null,null,null),vf=wT.exports;const _f=s=>s.modes!==void 0&&s.modes.length===1&&s.modes[0].name==="list";var yT=m.extend({props:{type:{type:String},disabled:{type:Boolean},sticky:{type:Boolean},stickyOffset:{type:Number,default:0}},data(){return{hovering:!1}},mounted(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)},destroyed(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)},computed:{isDragging(){return this.$store.getters["ndv/isDraggableDragging"]},draggableType(){return this.$store.getters["ndv/draggableType"]},droppable(){return!this.disabled&&this.isDragging&&this.draggableType===this.type},activeDrop(){return this.droppable&&this.hovering}},methods:{onMouseMove(s){const e=this.$refs.target;if(e&&this.isDragging){const t=e.getBoundingClientRect();this.hovering=s.clientX>=t.left&&s.clientX<=t.right&&s.clientY>=t.top&&s.clientY<=t.bottom,!this.disabled&&this.sticky&&this.hovering&&this.$store.commit("ndv/setDraggableStickyPos",[t.left+this.stickyOffset,t.top+this.stickyOffset])}},onMouseUp(s){if(this.activeDrop){const e=this.$store.getters["ndv/draggableData"];this.$emit("drop",e)}}},watch:{activeDrop(s){this.$store.commit("ndv/setDraggableCanDrop",s)}}}),vT=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"target"},[e._t("default",null,{droppable:e.droppable,activeDrop:e.activeDrop})],2)},_T=[],OT=_(yT,vT,_T,!1,null,null,null,null),Of=OT.exports;const bT=40,Gc=10;var xT=m.extend({name:"resource-locator-dropdown",props:{value:{type:[String,Number]},show:{type:Boolean,default:!1},resources:{type:Array},filterable:{type:Boolean},loading:{type:Boolean},filter:{type:String},hasMore:{type:Boolean},errorView:{type:Boolean},filterRequired:{type:Boolean},width:{type:Number}},data(){return{hoverIndex:0,showHoverUrl:!1}},mounted(){this.$on("keyDown",this.onKeyDown)},computed:{sortedResources(){const s=new Set,{selected:e,notSelected:t}=this.resources.reduce((i,n)=>(s.has(n.value)||(s.add(n.value),this.value&&n.value===this.value?i.selected=n:i.notSelected.push(n)),i),{selected:null,notSelected:[]});return e?[e,...t]:t}},methods:{openUrl(s,e){s.preventDefault(),s.stopPropagation(),window.open(e,"_blank")},onKeyDown(s){const e=this.$refs.resultsContainer;if(s.key==="ArrowDown"){if(this.hoverIndex<this.sortedResources.length-1){this.hoverIndex++;const t=this.$refs[`item-${this.hoverIndex}`];if(e&&Array.isArray(t)&&t.length===1){const i=t[0];if(i.offsetTop+i.clientHeight>e.scrollTop+e.offsetHeight){const n=i.offsetTop-e.offsetHeight+i.clientHeight;e.scrollTo({top:n})}}}}else if(s.key==="ArrowUp"){if(this.hoverIndex>0){this.hoverIndex--;const t=this.filterable?bT:0,i=this.$refs[`item-${this.hoverIndex}`];if(e&&Array.isArray(i)&&i.length===1){const n=i[0];n.offsetTop<=e.scrollTop+t&&e.scrollTo({top:n.offsetTop-t})}}}else s.key==="Enter"&&this.$emit("input",this.sortedResources[this.hoverIndex].value)},onFilterInput(s){this.$emit("filter",s)},onSearchBlur(){this.$emit("hide")},onItemClick(s){this.$emit("input",s)},onItemHover(s){this.hoverIndex=s,setTimeout(()=>{this.hoverIndex===s&&(this.showHoverUrl=!0)},250)},onItemHoverLeave(){this.showHoverUrl=!1},onResultsEnd(){if(this.loading||!this.hasMore)return;const s=this.$refs.resultsContainer;if(s){const e=s.offsetHeight-(s.scrollHeight-s.scrollTop);e>-Gc&&e<Gc&&this.$emit("loadMore")}}},watch:{show(s){s&&(this.hoverIndex=0,this.showHoverUrl=!1),setTimeout(()=>{s&&this.filterable&&this.$refs.search&&this.$refs.search.focus()},0)},loading(){setTimeout(this.onResultsEnd,0)}}});const $T="_popover_1vy2d_1",TT="_pushDownResults_1vy2d_6",kT="_container_1vy2d_10",ST="_messageContainer_1vy2d_16",ET="_searchInput_1vy2d_23",CT="_selected_1vy2d_33",NT="_resourceItem_1vy2d_37",PT="_loadingItem_1vy2d_48",DT="_loader_1vy2d_52",IT="_hovering_1vy2d_60",AT="_searchRequired_1vy2d_64",RT="_urlLink_1vy2d_74",MT="_resourceNameContainer_1vy2d_85",WT="_searchIcon_1vy2d_93";var LT={popover:$T,pushDownResults:TT,container:kT,messageContainer:ST,searchInput:ET,selected:CT,resourceItem:NT,loadingItem:PT,loader:DT,hovering:IT,searchRequired:AT,urlLink:RT,resourceNameContainer:MT,searchIcon:WT},QT=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-popover",{attrs:{placement:"bottom",width:e.width,"popper-class":e.$style.popover,value:e.show,trigger:"manual"}},[e.errorView?t("div",{class:e.$style.messageContainer},[e._t("error")],2):e._e(),e.filterable&&!e.errorView?t("div",{class:e.$style.searchInput,on:{keydown:e.onKeyDown}},[t("n8n-input",{ref:"search",attrs:{size:"medium",value:e.filter,clearable:!0,placeholder:e.$locale.baseText("resourceLocator.search.placeholder")},on:{input:e.onFilterInput,blur:e.onSearchBlur}},[t("font-awesome-icon",{class:e.$style.searchIcon,attrs:{slot:"prefix",icon:"search"},slot:"prefix"})],1)],1):e._e(),e.filterRequired&&!e.filter&&!e.errorView&&!e.loading?t("div",{class:e.$style.searchRequired},[e._v(" "+e._s(e.$locale.baseText("resourceLocator.mode.list.searchRequired"))+" ")]):!e.errorView&&e.sortedResources.length===0&&!e.loading?t("div",{class:e.$style.messageContainer},[e._v(" "+e._s(e.$locale.baseText("resourceLocator.mode.list.noResults"))+" ")]):e.errorView?e._e():t("div",{ref:"resultsContainer",class:{[e.$style.container]:!0,[e.$style.pushDownResults]:e.filterable},on:{scroll:e.onResultsEnd}},[e._l(e.sortedResources,function(i,n){return t("div",{key:i.value,ref:`item-${n}`,refInFor:!0,class:{[e.$style.resourceItem]:!0,[e.$style.selected]:i.value===e.value,[e.$style.hovering]:e.hoverIndex===n},on:{click:()=>e.onItemClick(i.value),mouseenter:()=>e.onItemHover(n),mouseleave:()=>e.onItemHoverLeave()}},[t("div",{class:e.$style.resourceNameContainer},[t("span",[e._v(e._s(i.name))])]),t("div",{class:e.$style.urlLink},[e.showHoverUrl&&i.url&&e.hoverIndex===n?t("font-awesome-icon",{attrs:{icon:"external-link-alt",title:i.linkAlt||e.$locale.baseText("resourceLocator.mode.list.openUrl")},on:{click:function(o){return e.openUrl(o,i.url)}}}):e._e()],1)])}),e.loading&&!e.errorView?t("div",e._l(3,function(i,n){return t("div",{key:n,class:e.$style.loadingItem},[t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}})],1)}),0):e._e()],2),e._t("default",null,{slot:"reference"})],2)},BT=[];const Hc={$style:LT};function UT(s){for(var e in Hc)this[e]=Hc[e]}var VT=_(xT,QT,BT,!1,UT,null,null,null),FT=VT.exports,jT=N(dt,ie,ct).extend({name:"resource-locator",components:{DraggableTarget:Of,ExpressionEdit:yf,ParameterIssues:vf,ResourceLocatorDropdown:FT},props:{parameter:{type:Object,required:!0},value:{type:[Object,String]},inputSize:{type:String,default:"small",validator:s=>["mini","small","medium","large","xlarge"].includes(s)},parameterIssues:{type:Array,default(){return[]}},displayTitle:{type:String,default:""},expressionComputedValue:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},expressionDisplayValue:{type:String},forceShowExpression:{type:Boolean,default:!1},isValueExpression:{type:Boolean,default:!1},expressionEditDialogVisible:{type:Boolean,default:!1},node:{type:Object},path:{type:String},loadOptionsMethod:{type:String}},data(){return{mainPanelMutationSubscription:()=>{},showResourceDropdown:!1,searchFilter:"",cachedResponses:{},hasCompletedASearch:!1,width:0}},computed:{appName(){if(!this.node)return"";const s=this.$store.getters["nodeTypes/getNodeType"](this.node.type);return _x(s.displayName)},selectedMode(){return typeof this.value!="object"?"":this.value?this.value.mode:this.parameter.modes?this.parameter.modes[0].name:""},isListMode(){return this.selectedMode==="list"},hasCredential(){const s=this.$store.getters["ndv/activeNode"];return s?!!(s&&s.credentials&&Object.keys(s.credentials).length===1):!1},inputPlaceholder(){return this.currentMode.placeholder?this.currentMode.placeholder:{list:this.$locale.baseText("resourceLocator.mode.list.placeholder"),id:this.$locale.baseText("resourceLocator.id.placeholder"),url:this.$locale.baseText("resourceLocator.url.placeholder")}[this.selectedMode]||""},currentMode(){return this.findModeByName(this.selectedMode)||{}},hasMultipleModes(){return!!(this.parameter.modes&&this.parameter.modes.length>1)},hasOnlyListMode(){return _f(this.parameter)},valueToDisplay(){return typeof this.value!="object"?this.value:this.isListMode?this.value?this.value.cachedResultName||this.value.value:"":this.value?this.value.value:""},urlValue(){if(this.isListMode&&typeof this.value=="object")return this.value&&this.value.cachedResultUrl||null;if(this.selectedMode==="url"){if(this.isValueExpression&&typeof this.expressionComputedValue=="string"&&this.expressionComputedValue.startsWith("http"))return this.expressionComputedValue;if(typeof this.valueToDisplay=="string"&&this.valueToDisplay.startsWith("http"))return this.valueToDisplay}if(this.currentMode.url){const s=this.isValueExpression?this.expressionComputedValue:this.valueToDisplay;if(typeof s=="string"){const e=this.currentMode.url.replace(/\{\{\$value\}\}/g,s),t=this.resolveExpression(e);return typeof t=="string"?t:null}}return null},currentRequestParams(){return{parameters:this.node.parameters,credentials:this.node.credentials,filter:this.searchFilter}},currentRequestKey(){const s={...this.currentRequestParams};return s.parameters=Object.keys(this.node?this.node.parameters:{}).reduce((e,t)=>(t!==this.parameter.name&&this.node&&this.node.parameters&&(e[t]=this.node.parameters[t]),e),{}),n_(s)},currentResponse(){return this.cachedResponses[this.currentRequestKey]||null},currentQueryResults(){return(this.currentResponse?this.currentResponse.results:[]).map(e=>({...e,...e.name&&e.url?{linkAlt:this.getLinkAlt(e.name)}:{}}))},currentQueryHasMore(){return!!(this.currentResponse&&this.currentResponse.nextPageToken)},currentQueryLoading(){return this.requiresSearchFilter&&this.searchFilter===""?!1:this.currentResponse?!!(this.currentResponse&&this.currentResponse.loading):!0},currentQueryError(){return!!(this.currentResponse&&this.currentResponse.error)},isSearchable(){return!!this.getPropertyArgument(this.currentMode,"searchable")},requiresSearchFilter(){return!!this.getPropertyArgument(this.currentMode,"searchFilterRequired")}},watch:{currentQueryError(s,e){if(this.showResourceDropdown&&s&&!e){const t=this.$refs.input;t&&t.focus()}},isValueExpression(s){s===!0&&this.switchFromListMode()},currentMode(s){s.extractValue&&s.extractValue.regex&&ts(this.value)&&this.value.__regex!==s.extractValue.regex&&this.$emit("input",{...this.value,__regex:s.extractValue.regex})}},mounted(){this.$on("refreshList",this.refreshList),window.addEventListener("resize",this.setWidth),this.mainPanelMutationSubscription=this.$store.subscribe(this.setWidthOnMainPanelResize),setTimeout(()=>{this.setWidth()},0)},beforeDestroy(){this.mainPanelMutationSubscription(),window.removeEventListener("resize",this.setWidth)},methods:{setWidth(){this.width=this.$refs.container.offsetWidth},setWidthOnMainPanelResize(s){s.type==="ndv/setMainPanelDimensions"&&this.setWidth()},getLinkAlt(s){return this.selectedMode==="list"&&s?this.$locale.baseText("resourceLocator.openSpecificResource",{interpolate:{entity:s,appName:this.appName}}):this.$locale.baseText("resourceLocator.openResource",{interpolate:{appName:this.appName}})},refreshList(){this.cachedResponses={},this.trackEvent("User refreshed resource locator list")},onKeyDown(s){const e=this.$refs.dropdown;e&&this.showResourceDropdown&&!this.isSearchable&&e.$emit("keyDown",s)},openResource(s){window.open(s,"_blank"),this.trackEvent("User clicked resource locator link")},getPropertyArgument(s,e){if(s.typeOptions!==void 0&&s.typeOptions[e]!==void 0)return s.typeOptions[e]},openCredential(){const s=this.$store.getters["ndv/activeNode"];if(!s||!s.credentials)return;const e=Object.keys(s.credentials)[0];if(!e)return;const t=s.credentials[e].id;this.$store.dispatch("ui/openExistingCredential",{id:t})},findModeByName(s){return this.parameter.modes&&this.parameter.modes.find(e=>e.name===s)||null},getModeLabel(s){return s==="id"||s==="url"||s==="list"?this.$locale.baseText(`resourceLocator.mode.${s}`):null},onInputChange(s){const e={__rl:!0,value:s,mode:this.selectedMode};if(this.isListMode){const t=this.currentQueryResults.find(i=>i.value===s);t&&t.name&&(e.cachedResultName=t.name),t&&t.url&&(e.cachedResultUrl=t.url)}this.$emit("input",e)},onModeSelected(s){typeof this.value!="object"?this.$emit("input",{__rl:!0,value:this.value,mode:s}):s==="url"&&this.value&&this.value.cachedResultUrl?this.$emit("input",{__rl:!0,mode:s,value:this.value.cachedResultUrl}):s==="id"&&this.selectedMode==="list"&&this.value&&this.value.value?this.$emit("input",{__rl:!0,mode:s,value:this.value.value}):this.$emit("input",{__rl:!0,mode:s,value:""}),this.trackEvent("User changed resource locator mode",{mode:s})},trackEvent(s,e){this.$telemetry.track(s,{instance_id:this.$store.getters.instanceId,workflow_id:this.$store.getters.workflowId,node_type:this.node&&this.node.type,resource:this.node&&this.node.parameters&&this.node.parameters.resource,operation:this.node&&this.node.parameters&&this.node.parameters.operation,field_name:this.parameter.name,...e})},onDrop(s){this.switchFromListMode(),this.$emit("drop",s)},onSearchFilter(s){this.searchFilter=s,this.loadResourcesDebounced()},async loadInitialResources(){(!this.currentResponse||this.currentResponse&&this.currentResponse.error)&&(this.searchFilter="",this.loadResources())},loadResourcesDebounced(){this.callDebounced("loadResources",{debounceTime:1e3,trailing:!0})},setResponse(s,e){this.cachedResponses={...this.cachedResponses,[s]:{...this.cachedResponses[s],...e}}},async loadResources(){const s=this.currentRequestParams,e=this.currentRequestKey,t=this.cachedResponses[e];if(this.requiresSearchFilter&&!s.filter)return;let i=null;try{if(t){const c=t.nextPageToken;if(c)i=c,this.setResponse(e,{loading:!0});else if(t.error)this.setResponse(e,{error:!1,loading:!0});else return}else this.setResponse(e,{loading:!0,error:!1,results:[],nextPageToken:null});const n=this.resolveParameter(s.parameters),o=this.getPropertyArgument(this.currentMode,"searchListMethod"),r=this.getPropertyArgument(this.currentMode,"searchList"),a={nodeTypeAndVersion:{name:this.node.type,version:this.node.typeVersion},path:this.path,methodName:o,searchList:r,currentNodeParameters:n,credentials:this.node.credentials,...s.filter?{filter:s.filter}:{},...i?{paginationToken:i}:{}},l=await this.$store.dispatch("nodeTypes/getResourceLocatorResults",a);this.setResponse(e,{results:(t?t.results:[]).concat(l.results),nextPageToken:l.paginationToken||null,loading:!1,error:!1}),s.filter&&!this.hasCompletedASearch&&(this.hasCompletedASearch=!0,this.trackEvent("User searched resource locator list"))}catch{this.setResponse(e,{loading:!1,error:!0})}},onInputFocus(){!this.isListMode||this.showResourceDropdown||(this.loadInitialResources(),this.showResourceDropdown=!0)},switchFromListMode(){if(this.isListMode&&this.parameter.modes&&this.parameter.modes.length>1){let s=this.findModeByName("id");s||(s=this.parameter.modes.filter(e=>e.name!=="list")[0]),s&&this.$emit("input",{__rl:!0,value:this.value&&typeof this.value=="object"?this.value.value:"",mode:s.name})}},onDropdownHide(){this.currentQueryError||(this.showResourceDropdown=!1)},onListItemSelected(s){this.onInputChange(s),this.showResourceDropdown=!1},onInputBlur(){(!this.isSearchable||this.currentQueryError)&&(this.showResourceDropdown=!1)}}});const zT="_modeSelector_8ejwv_1",GT="_resourceLocator_8ejwv_19",HT="_inputContainer_8ejwv_23",qT="_multipleModes_8ejwv_32",XT="_droppable_8ejwv_42",YT="_activeDrop_8ejwv_48",ZT="_selectInput_8ejwv_58",KT="_selectIcon_8ejwv_64",JT="_isReverse_8ejwv_71",ek="_listModeInputContainer_8ejwv_76",tk="_error_8ejwv_80",sk="_openResourceLink_8ejwv_86";var ik={modeSelector:zT,resourceLocator:GT,inputContainer:HT,multipleModes:qT,droppable:XT,activeDrop:YT,selectInput:ZT,selectIcon:KT,isReverse:JT,listModeInputContainer:ek,error:tk,openResourceLink:sk},nk=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"container",staticClass:"resource-locator"},[t("resource-locator-dropdown",{ref:"dropdown",attrs:{value:e.value?e.value.value:"",show:e.showResourceDropdown,filterable:e.isSearchable,filterRequired:e.requiresSearchFilter,resources:e.currentQueryResults,loading:e.currentQueryLoading,filter:e.searchFilter,hasMore:e.currentQueryHasMore,errorView:e.currentQueryError,width:e.width},on:{input:e.onListItemSelected,hide:e.onDropdownHide,filter:e.onSearchFilter,loadMore:e.loadResourcesDebounced},scopedSlots:e._u([{key:"error",fn:function(){return[t("div",{class:e.$style.error},[t("n8n-text",{attrs:{color:"text-dark",align:"center",tag:"div"}},[e._v(" "+e._s(e.$locale.baseText("resourceLocator.mode.list.error.title"))+" ")]),e.hasCredential?t("n8n-text",{attrs:{size:"small",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("resourceLocator.mode.list.error.description.part1"))+" "),t("a",{on:{click:e.openCredential}},[e._v(e._s(e.$locale.baseText("resourceLocator.mode.list.error.description.part2")))])]):e._e()],1)]},proxy:!0}])},[t("div",{class:{[e.$style.resourceLocator]:!0,[e.$style.multipleModes]:e.hasMultipleModes}},[e.hasMultipleModes?t("div",{class:e.$style.modeSelector},[t("n8n-select",{attrs:{value:e.selectedMode,filterable:"",size:e.inputSize,disabled:e.isReadOnly,placeholder:e.$locale.baseText("resourceLocator.modeSelector.placeholder")},on:{change:e.onModeSelected}},e._l(e.parameter.modes,function(i){return t("n8n-option",{key:i.name,attrs:{label:e.$locale.baseText(e.getModeLabel(i.name))||i.displayName,value:i.name,disabled:e.isValueExpression&&i.name==="list",title:e.isValueExpression&&i.name==="list"?e.$locale.baseText("resourceLocator.mode.list.disabled.title"):""}})}),1)],1):e._e(),t("div",{class:e.$style.inputContainer},[t("draggable-target",{attrs:{type:"mapping",disabled:e.hasOnlyListMode,sticky:!0,stickyOffset:4},on:{drop:e.onDrop},scopedSlots:e._u([{key:"default",fn:function({droppable:i,activeDrop:n}){return[t("div",{class:{[e.$style.listModeInputContainer]:e.isListMode,[e.$style.droppable]:i,[e.$style.activeDrop]:n},on:{keydown:function(o){return o.stopPropagation(),e.onKeyDown.apply(null,arguments)}}},[e.isValueExpression||i||e.forceShowExpression?t("n8n-input",{ref:"input",attrs:{type:"text",size:e.inputSize,value:e.expressionDisplayValue,title:e.displayTitle,disabled:e.isReadOnly},on:{keydown:function(o){o.stopPropagation()}}}):t("n8n-input",{ref:"input",class:{[e.$style.selectInput]:e.isListMode},attrs:{size:e.inputSize,value:e.valueToDisplay,disabled:e.isReadOnly,readonly:e.isListMode,title:e.displayTitle,placeholder:e.inputPlaceholder,type:"text"},on:{input:e.onInputChange,focus:e.onInputFocus,blur:e.onInputBlur}},[e.isListMode?t("div",{attrs:{slot:"suffix"},slot:"suffix"},[t("i",{class:{["el-input__icon"]:!0,["el-icon-arrow-down"]:!0,[e.$style.selectIcon]:!0,[e.$style.isReverse]:e.showResourceDropdown}})]):e._e()])],1)]}}])}),e.parameterIssues&&e.parameterIssues.length?t("parameter-issues",{attrs:{issues:e.parameterIssues}}):e.urlValue?t("div",{class:e.$style.openResourceLink},[t("n8n-link",{attrs:{theme:"text"},on:{click:function(i){return i.stopPropagation(),e.openResource(e.urlValue)}}},[t("font-awesome-icon",{attrs:{icon:"external-link-alt",title:e.getLinkAlt(e.valueToDisplay)}})],1)],1):e._e()],1)])])],1)},ok=[];const qc={$style:ik};function rk(s){for(var e in qc)this[e]=qc[e]}var ak=_(jT,nk,ok,!1,rk,null,null,null),lk=ak.exports,ck=m.extend({name:"TextEdit",props:["dialogVisible","parameter","path","value","isReadOnly"],data(){return{tempValue:""}},methods:{valueChanged(s){this.$emit("valueChanged",s)},onKeyDownEsc(){this.tempValue=this.value,this.closeDialog()},closeDialog(){return this.$emit("closeDialog"),!1}},mounted(){this.tempValue=this.value},watch:{dialogVisible(){this.dialogVisible===!0&&m.nextTick(()=>{this.$refs.inputField.focus()})},value(){this.tempValue=this.value}}}),dk=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.dialogVisible?t("div",[t("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",width:"80%",title:`${e.$locale.baseText("textEdit.edit")} ${e.$locale.nodeText().inputLabelDisplayName(e.parameter,e.path)}`,"before-close":e.closeDialog}},[t("div",{staticClass:"ignore-key-press"},[t("n8n-input-label",{attrs:{label:e.$locale.nodeText().inputLabelDisplayName(e.parameter,e.path)}},[t("div",{on:{keydown:[function(i){i.stopPropagation()},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.onKeyDownEsc()}]}},[t("n8n-input",{ref:"inputField",attrs:{type:"textarea",value:e.value,placeholder:e.$locale.nodeText().placeholder(e.parameter,e.path),readOnly:e.isReadOnly,rows:15},on:{change:e.valueChanged},model:{value:e.tempValue,callback:function(i){e.tempValue=i},expression:"tempValue"}})],1)])],1)])],1):e._e()},uk=[],hk=_(ck,dk,uk,!1,null,null,null,null),pk=hk.exports;class se{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),Dt.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Dt.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Ai(this),o=new Ai(e);for(let r=t,a=t;;){if(n.next(r),o.next(r),r=0,n.lineBreak!=o.lineBreak||n.done!=o.done||n.value!=o.value)return!1;if(a+=n.value.length,n.done||a>=i)return!0}}iter(e=1){return new Ai(this,e)}iterRange(e,t=this.length){return new bf(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new xf(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?se.empty:e.length<=32?new we(e):Dt.from(we.split(e,[]))}}class we extends se{constructor(e,t=fk(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let o=0;;o++){let r=this.text[o],a=n+r.length;if((t?i:a)>=e)return new mk(n,a,i,r);n=a+1,i++}}decompose(e,t,i,n){let o=e<=0&&t>=this.length?this:new we(Xc(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let r=i.pop(),a=Un(o.text,r.text.slice(),0,o.length);if(a.length<=32)i.push(new we(a,r.length+o.length));else{let l=a.length>>1;i.push(new we(a.slice(0,l)),new we(a.slice(l)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof we))return super.replace(e,t,i);let n=Un(this.text,Un(i.text,Xc(this.text,0,e)),t),o=this.length+i.length-(t-e);return n.length<=32?new we(n,o):Dt.from(we.split(n,[]),o)}sliceString(e,t=this.length,i=`
`){let n="";for(let o=0,r=0;o<=t&&r<this.text.length;r++){let a=this.text[r],l=o+a.length;o>e&&r&&(n+=i),e<l&&t>o&&(n+=a.slice(Math.max(0,e-o),t-o)),o=l+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let o of e)i.push(o),n+=o.length+1,i.length==32&&(t.push(new we(i,n)),i=[],n=-1);return n>-1&&t.push(new we(i,n)),t}}class Dt extends se{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let o=0;;o++){let r=this.children[o],a=n+r.length,l=i+r.lines-1;if((t?l:a)>=e)return r.lineInner(e,t,i,n);n=a+1,i=l+1}}decompose(e,t,i,n){for(let o=0,r=0;r<=t&&o<this.children.length;o++){let a=this.children[o],l=r+a.length;if(e<=l&&t>=r){let c=n&((r<=e?1:0)|(l>=t?2:0));r>=e&&l<=t&&!c?i.push(a):a.decompose(e-r,t-r,i,c)}r=l+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,o=0;n<this.children.length;n++){let r=this.children[n],a=o+r.length;if(e>=o&&t<=a){let l=r.replace(e-o,t-o,i),c=this.lines-r.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let d=this.children.slice();return d[n]=l,new Dt(d,this.length-(t-e)+i.length)}return super.replace(o,a,l)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let o=0,r=0;o<this.children.length&&r<=t;o++){let a=this.children[o],l=r+a.length;r>e&&o&&(n+=i),e<l&&t>r&&(n+=a.sliceString(e-r,t-r,i)),r=l+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Dt))return 0;let i=0,[n,o,r,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,o+=t){if(n==r||o==a)return i;let l=this.children[n],c=e.children[o];if(l!=c)return i+l.scanIdentical(c,t);i+=l.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let f of e)f.flatten(p);return new we(p,t)}let n=Math.max(32,i>>5),o=n<<1,r=n>>1,a=[],l=0,c=-1,d=[];function u(p){let f;if(p.lines>o&&p instanceof Dt)for(let w of p.children)u(w);else p.lines>r&&(l>r||!l)?(h(),a.push(p)):p instanceof we&&l&&(f=d[d.length-1])instanceof we&&p.lines+f.lines<=32?(l+=p.lines,c+=p.length+1,d[d.length-1]=new we(f.text.concat(p.text),f.length+1+p.length)):(l+p.lines>n&&h(),l+=p.lines,c+=p.length+1,d.push(p))}function h(){l!=0&&(a.push(d.length==1?d[0]:Dt.from(d,c)),c=-1,l=d.length=0)}for(let p of e)u(p);return h(),a.length==1?a[0]:new Dt(a,t)}}se.empty=new we([""],0);function fk(s){let e=-1;for(let t of s)e+=t.length+1;return e}function Un(s,e,t=0,i=1e9){for(let n=0,o=0,r=!0;o<s.length&&n<=i;o++){let a=s[o],l=n+a.length;l>=t&&(l>i&&(a=a.slice(0,i-n)),n<t&&(a=a.slice(t-n)),r?(e[e.length-1]+=a,r=!1):e.push(a)),n=l+1}return e}function Xc(s,e,t){return Un(s,[""],e,t)}class Ai{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof we?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],o=this.offsets[i],r=o>>1,a=n instanceof we?n.text.length:n.children.length;if(r==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof we){let l=n.text[r+(t<0?-1:0)];if(this.offsets[i]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=n.children[r+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof we?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class bf{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Ai(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class xf{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(se.prototype[Symbol.iterator]=function(){return this.iter()},Ai.prototype[Symbol.iterator]=bf.prototype[Symbol.iterator]=xf.prototype[Symbol.iterator]=function(){return this});class mk{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}let Ks="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<Ks.length;s++)Ks[s]+=Ks[s-1];function gk(s){for(let e=1;e<Ks.length;e+=2)if(Ks[e]>s)return Ks[e-1]<=s;return!1}function Yc(s){return s>=127462&&s<=127487}const Zc=8205;function qt(s,e,t=!0,i=!0){return(t?$f:wk)(s,e,i)}function $f(s,e,t){if(e==s.length)return e;e&&Tf(s.charCodeAt(e))&&kf(s.charCodeAt(e-1))&&e--;let i=je(s,e);for(e+=ht(i);e<s.length;){let n=je(s,e);if(i==Zc||n==Zc||t&&gk(n))e+=ht(n),i=n;else if(Yc(n)){let o=0,r=e-2;for(;r>=0&&Yc(je(s,r));)o++,r-=2;if(o%2==0)break;e+=2}else break}return e}function wk(s,e,t){for(;e>0;){let i=$f(s,e-2,t);if(i<e)return i;e--}return 0}function Tf(s){return s>=56320&&s<57344}function kf(s){return s>=55296&&s<56320}function je(s,e){let t=s.charCodeAt(e);if(!kf(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return Tf(i)?(t-55296<<10)+(i-56320)+65536:t}function Sf(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function ht(s){return s<65536?1:2}const la=/\r\n?|\n/;var Ae=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(Ae||(Ae={}));class Qt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let o=this.sections[t++],r=this.sections[t++];r<0?(e(i,n,o),n+=o):n+=r,i+=o}}iterChangedRanges(e,t=!1){ca(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new Qt(e)}composeDesc(e){return this.empty?e:e.empty?this:Ef(this,e)}mapDesc(e,t=!1){return e.empty?this:da(this,e,t)}mapPos(e,t=-1,i=Ae.Simple){let n=0,o=0;for(let r=0;r<this.sections.length;){let a=this.sections[r++],l=this.sections[r++],c=n+a;if(l<0){if(c>e)return o+(e-n);o+=a}else{if(i!=Ae.Simple&&c>=e&&(i==Ae.TrackDel&&n<e&&c>e||i==Ae.TrackBefore&&n<e||i==Ae.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==n||t<0?o:o+l;o+=l}n=c}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return o}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let o=this.sections[i++],r=this.sections[i++],a=n+o;if(r>=0&&n<=t&&a>=e)return n<e&&a>t?"cover":!0;n=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Qt(e)}static create(e){return new Qt(e)}}class xe extends Qt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ca(this,(t,i,n,o,r)=>e=e.replace(n,n+(i-t),r),!1),e}mapDesc(e,t=!1){return da(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,o=0;n<t.length;n+=2){let r=t[n],a=t[n+1];if(a>=0){t[n]=a,t[n+1]=r;let l=n>>1;for(;i.length<l;)i.push(se.empty);i.push(r?e.slice(o,o+r):se.empty)}o+=r}return new xe(t,i)}compose(e){return this.empty?e:e.empty?this:Ef(this,e,!0)}map(e,t=!1){return e.empty?this:da(this,e,t,!0)}iterChanges(e,t=!1){ca(this,e,t)}get desc(){return Qt.create(this.sections)}filter(e){let t=[],i=[],n=[],o=new Ui(this);e:for(let r=0,a=0;;){let l=r==e.length?1e9:e[r++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let d=Math.min(o.len,l-a);Qe(n,d,-1);let u=o.ins==-1?-1:o.off==0?o.ins:0;Qe(t,d,u),u>0&&ss(i,t,o.text),o.forward(d),a+=d}let c=e[r++];for(;a<c;){if(o.done)break e;let d=Math.min(o.len,c-a);Qe(t,d,-1),Qe(n,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),a+=d}}return{changes:new xe(t,i),filtered:Qt.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],o=[],r=0,a=null;function l(d=!1){if(!d&&!n.length)return;r<t&&Qe(n,t-r,-1);let u=new xe(n,o);a=a?a.compose(u.map(a)):u,n=[],o=[],r=0}function c(d){if(Array.isArray(d))for(let u of d)c(u);else if(d instanceof xe){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);l(),a=a?a.compose(d.map(a)):d}else{let{from:u,to:h=u,insert:p}=d;if(u>h||u<0||h>t)throw new RangeError(`Invalid change range ${u} to ${h} (in doc of length ${t})`);let f=p?typeof p=="string"?se.of(p.split(i||la)):p:se.empty,w=f.length;if(u==h&&w==0)return;u<r&&l(),u>r&&Qe(n,u-r,-1),Qe(n,h-u,w),ss(o,n,f),r=h}}return c(e),l(!a),a}static empty(e){return new xe(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let o=e[n];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((r,a)=>a&&typeof r!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<n;)i.push(se.empty);i[n]=se.of(o.slice(1)),t.push(o[0],i[n].length)}}}return new xe(t,i)}static createSet(e,t){return new xe(e,t)}}function Qe(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function ss(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(se.empty);s.push(t)}}function ca(s,e,t){let i=s.inserted;for(let n=0,o=0,r=0;r<s.sections.length;){let a=s.sections[r++],l=s.sections[r++];if(l<0)n+=a,o+=a;else{let c=n,d=o,u=se.empty;for(;c+=a,d+=l,l&&i&&(u=u.append(i[r-2>>1])),!(t||r==s.sections.length||s.sections[r+1]<0);)a=s.sections[r++],l=s.sections[r++];e(n,c,o,d,u),n=c,o=d}}}function da(s,e,t,i=!1){let n=[],o=i?[]:null,r=new Ui(s),a=new Ui(e);for(let l=-1;;)if(r.ins==-1&&a.ins==-1){let c=Math.min(r.len,a.len);Qe(n,c,-1),r.forward(c),a.forward(c)}else if(a.ins>=0&&(r.ins<0||l==r.i||r.off==0&&(a.len<r.len||a.len==r.len&&!t))){let c=a.len;for(Qe(n,a.ins,-1);c;){let d=Math.min(r.len,c);r.ins>=0&&l<r.i&&r.len<=d&&(Qe(n,0,r.ins),o&&ss(o,n,r.text),l=r.i),r.forward(d),c-=d}a.next()}else if(r.ins>=0){let c=0,d=r.len;for(;d;)if(a.ins==-1){let u=Math.min(d,a.len);c+=u,d-=u,a.forward(u)}else if(a.ins==0&&a.len<d)d-=a.len,a.next();else break;Qe(n,c,l<r.i?r.ins:0),o&&l<r.i&&ss(o,n,r.text),l=r.i,r.forward(r.len-d)}else{if(r.done&&a.done)return o?xe.createSet(n,o):Qt.create(n);throw new Error("Mismatched change set lengths")}}function Ef(s,e,t=!1){let i=[],n=t?[]:null,o=new Ui(s),r=new Ui(e);for(let a=!1;;){if(o.done&&r.done)return n?xe.createSet(i,n):Qt.create(i);if(o.ins==0)Qe(i,o.len,0,a),o.next();else if(r.len==0&&!r.done)Qe(i,0,r.ins,a),n&&ss(n,i,r.text),r.next();else{if(o.done||r.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,r.len),c=i.length;if(o.ins==-1){let d=r.ins==-1?-1:r.off?0:r.ins;Qe(i,l,d,a),n&&d&&ss(n,i,r.text)}else r.ins==-1?(Qe(i,o.off?0:o.len,l,a),n&&ss(n,i,o.textBit(l))):(Qe(i,o.off?0:o.len,r.off?0:r.ins,a),n&&!r.off&&ss(n,i,r.text));a=(o.ins>l||r.ins>=0&&r.len>l)&&(a||i.length>c),o.forward2(l),r.forward(l)}}}}class Ui{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?se.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?se.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class vs{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new vs(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return A.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return A.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return A.range(e.anchor,e.head)}static create(e,t,i){return new vs(e,t,i)}}class A{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:A.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new A([this.main],0)}addRange(e,t=!0){return A.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,A.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new A(e.ranges.map(t=>vs.fromJSON(t)),e.main)}static single(e,t=e){return new A([A.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let o=e[n];if(o.empty?o.from<=i:o.from<i)return A.normalized(e.slice(),t);i=o.to}return new A(e,t)}static cursor(e,t=0,i,n){return vs.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?vs.create(t,e,16|n|8):vs.create(e,t,n|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((n,o)=>n.from-o.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let o=e[n],r=e[n-1];if(o.empty?o.from<=r.to:o.from<r.to){let a=r.from,l=Math.max(o.to,r.to);n<=t&&t--,e.splice(--n,2,o.anchor>o.head?A.range(l,a):A.range(a,l))}}return new A(e,t)}}function Cf(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let ml=0;class U{constructor(e,t,i,n,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=ml++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new U(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:gl),!!e.static,e.enables)}of(e){return new Vn([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vn(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Vn(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function gl(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}class Vn{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=ml++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,o=this.id,r=e[o]>>1,a=this.type==2,l=!1,c=!1,d=[];for(let u of this.dependencies)u=="doc"?l=!0:u=="selection"?c=!0:(((t=e[u.id])!==null&&t!==void 0?t:1)&1)==0&&d.push(e[u.id]);return{create(u){return u.values[r]=i(u),1},update(u,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||ua(u,d)){let p=i(u);if(a?!Kc(p,u.values[r],n):!n(p,u.values[r]))return u.values[r]=p,1}return 0},reconfigure:(u,h)=>{let p=i(u),f=h.config.address[o];if(f!=null){let w=no(h,f);if(this.dependencies.every(g=>g instanceof U?h.facet(g)===u.facet(g):g instanceof Ne?h.field(g,!1)==u.field(g,!1):!0)||(a?Kc(p,w,n):n(p,w)))return u.values[r]=w,0}return u.values[r]=p,1}}}}function Kc(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function ua(s,e){let t=!1;for(let i of e)Ri(s,i)&1&&(t=!0);return t}function yk(s,e,t){let i=t.map(l=>s[l.id]),n=t.map(l=>l.type),o=i.filter(l=>!(l&1)),r=s[e.id]>>1;function a(l){let c=[];for(let d=0;d<i.length;d++){let u=no(l,i[d]);if(n[d]==2)for(let h of u)c.push(h);else c.push(u)}return e.combine(c)}return{create(l){for(let c of i)Ri(l,c);return l.values[r]=a(l),1},update(l,c){if(!ua(l,o))return 0;let d=a(l);return e.compare(d,l.values[r])?0:(l.values[r]=d,1)},reconfigure(l,c){let d=ua(l,i),u=c.config.facets[e.id],h=c.facet(e);if(u&&!d&&gl(t,u))return l.values[r]=h,0;let p=a(l);return e.compare(p,h)?(l.values[r]=h,0):(l.values[r]=p,1)}}}const Jc=U.define({static:!0});class Ne{constructor(e,t,i,n,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=o,this.provides=void 0}static define(e){let t=new Ne(ml++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Jc).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let o=i.values[t],r=this.updateF(o,n);return this.compareF(o,r)?0:(i.values[t]=r,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,Jc.of({field:this,create:e})]}get extension(){return this}}const ws={lowest:4,low:3,default:2,high:1,highest:0};function gi(s){return e=>new Nf(e,s)}const en={highest:gi(ws.highest),high:gi(ws.high),default:gi(ws.default),low:gi(ws.low),lowest:gi(ws.lowest)};class Nf{constructor(e,t){this.inner=e,this.prec=t}}class tn{of(e){return new ha(this,e)}reconfigure(e){return tn.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ha{constructor(e,t){this.compartment=e,this.inner=t}}class io{constructor(e,t,i,n,o,r){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=o,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],o=Object.create(null),r=new Map;for(let h of vk(e,t,r))h instanceof Ne?n.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of n)a[h.id]=c.length<<1,c.push(p=>h.slot(p));let d=i==null?void 0:i.config.facets;for(let h in o){let p=o[h],f=p[0].facet,w=d&&d[h]||[];if(p.every(g=>g.type==0))if(a[f.id]=l.length<<1|1,gl(w,p))l.push(i.facet(f));else{let g=f.combine(p.map(v=>v.value));l.push(i&&f.compare(g,i.facet(f))?i.facet(f):g)}else{for(let g of p)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=c.length<<1,c.push(v=>g.dynamicSlot(v)));a[f.id]=c.length<<1,c.push(g=>yk(g,f,p))}}let u=c.map(h=>h(a));return new io(e,r,u,a,l,o)}}function vk(s,e,t){let i=[[],[],[],[],[]],n=new Map;function o(r,a){let l=n.get(r);if(l!=null){if(l<=a)return;let c=i[l].indexOf(r);c>-1&&i[l].splice(c,1),r instanceof ha&&t.delete(r.compartment)}if(n.set(r,a),Array.isArray(r))for(let c of r)o(c,a);else if(r instanceof ha){if(t.has(r.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(r.compartment)||r.inner;t.set(r.compartment,c),o(c,a)}else if(r instanceof Nf)o(r.inner,r.prec);else if(r instanceof Ne)i[a].push(r),r.provides&&o(r.provides,a);else if(r instanceof Vn)i[a].push(r),r.facet.extensions&&o(r.facet.extensions,ws.default);else{let c=r.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${r}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,a)}}return o(s,ws.default),i.reduce((r,a)=>r.concat(a))}function Ri(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|n}function no(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const Pf=U.define(),Df=U.define({combine:s=>s.some(e=>e),static:!0}),If=U.define({combine:s=>s.length?s[0]:void 0,static:!0}),Af=U.define(),Rf=U.define(),Mf=U.define(),Wf=U.define({combine:s=>s.length?s[0]:!1});class Rs{constructor(e,t){this.type=e,this.value=t}static define(){return new _k}}class _k{of(e){return new Rs(this,e)}}class Ok{constructor(e){this.map=e}of(e){return new X(this,e)}}class X{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new X(this.type,t)}is(e){return this.type==e}static define(e={}){return new Ok(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let o=n.map(t);o&&i.push(o)}return i}}X.reconfigure=X.define();X.appendConfig=X.define();class $e{constructor(e,t,i,n,o,r){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=o,this.scrollIntoView=r,this._doc=null,this._state=null,i&&Cf(i,t.newLength),o.some(a=>a.type==$e.time)||(this.annotations=o.concat($e.time.of(Date.now())))}static create(e,t,i,n,o,r){return new $e(e,t,i,n,o,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation($e.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}$e.time=Rs.define();$e.userEvent=Rs.define();$e.addToHistory=Rs.define();$e.remote=Rs.define();function bk(s,e){let t=[];for(let i=0,n=0;;){let o,r;if(i<s.length&&(n==e.length||e[n]>=s[i]))o=s[i++],r=s[i++];else if(n<e.length)o=e[n++],r=e[n++];else return t;!t.length||t[t.length-1]<o?t.push(o,r):t[t.length-1]<r&&(t[t.length-1]=r)}}function Lf(s,e,t){var i;let n,o,r;return t?(n=e.changes,o=xe.empty(e.changes.length),r=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),o=s.changes.mapDesc(e.changes,!0),r=s.changes.compose(n)),{changes:r,selection:e.selection?e.selection.map(o):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:X.mapEffects(s.effects,n).concat(X.mapEffects(e.effects,o)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function pa(s,e,t){let i=e.selection,n=Js(e.annotations);return e.userEvent&&(n=n.concat($e.userEvent.of(e.userEvent))),{changes:e.changes instanceof xe?e.changes:xe.of(e.changes||[],t,s.facet(If)),selection:i&&(i instanceof A?i:A.single(i.anchor,i.head)),effects:Js(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function Qf(s,e,t){let i=pa(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let r=!!e[o].sequential;i=Lf(i,pa(s,e[o],r?i.changes.newLength:s.doc.length),r)}let n=$e.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return $k(t?xk(n):n)}function xk(s){let e=s.startState,t=!0;for(let n of e.facet(Af)){let o=n(s);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:bk(t,o))}if(t!==!0){let n,o;if(t===!1)o=s.changes.invertedDesc,n=xe.empty(e.doc.length);else{let r=s.changes.filter(t);n=r.changes,o=r.filtered.mapDesc(r.changes).invertedDesc}s=$e.create(e,n,s.selection&&s.selection.map(o),X.mapEffects(s.effects,o),s.annotations,s.scrollIntoView)}let i=e.facet(Rf);for(let n=i.length-1;n>=0;n--){let o=i[n](s);o instanceof $e?s=o:Array.isArray(o)&&o.length==1&&o[0]instanceof $e?s=o[0]:s=Qf(e,Js(o),!1)}return s}function $k(s){let e=s.startState,t=e.facet(Mf),i=s;for(let n=t.length-1;n>=0;n--){let o=t[n](s);o&&Object.keys(o).length&&(i=Lf(i,pa(e,o,s.changes.newLength),!0))}return i==s?s:$e.create(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const Tk=[];function Js(s){return s==null?Tk:Array.isArray(s)?s:[s]}var pt=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(pt||(pt={}));const kk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let fa;try{fa=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Sk(s){if(fa)return fa.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||kk.test(t)))return!0}return!1}function Ek(s){return e=>{if(!/\S/.test(e))return pt.Space;if(Sk(e))return pt.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return pt.Word;return pt.Other}}class J{constructor(e,t,i,n,o,r){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=o,r&&(r._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ri(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Ri(this,i),no(this,i)}update(...e){return Qf(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let r of e.effects)r.is(tn.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,l)=>n.set(l,a)),t=null),n.set(r.value.compartment,r.value.extension)):r.is(X.reconfigure)?(t=null,i=r.value):r.is(X.appendConfig)&&(t=null,i=Js(i).concat(r.value));let o;t?o=e.startState.values.slice():(t=io.resolve(i,n,this),o=new J(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new J(t,e.newDoc,e.newSelection,o,(r,a)=>a.update(r,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:A.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),o=[i.range],r=Js(i.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),d=c.map(n);for(let h=0;h<a;h++)o[h]=o[h].map(d);let u=n.mapDesc(c,!0);o.push(l.range.map(u)),n=n.compose(d),r=X.mapEffects(r,d).concat(X.mapEffects(Js(l.effects),u))}return{changes:n,selection:A.create(o,t.mainIndex),effects:r}}changes(e=[]){return e instanceof xe?e:xe.of(e,this.doc.length,this.facet(J.lineSeparator))}toText(e){return se.of(e.split(this.facet(J.lineSeparator)||la))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Ri(this,t),no(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Ne&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let r=i[o],a=e[o];n.push(r.init(l=>r.spec.fromJSON(a,l)))}}return J.create({doc:e.doc,selection:A.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=io.resolve(e.extensions||[],new Map),i=e.doc instanceof se?e.doc:se.of((e.doc||"").split(t.staticFacet(J.lineSeparator)||la)),n=e.selection?e.selection instanceof A?e.selection:A.single(e.selection.anchor,e.selection.head):A.single(0);return Cf(n,i.length),t.staticFacet(Df)||(n=n.asSingle()),new J(t,i,n,t.dynamicSlots.map(()=>null),(o,r)=>r.create(o),null)}get tabSize(){return this.facet(J.tabSize)}get lineBreak(){return this.facet(J.lineSeparator)||`
`}get readOnly(){return this.facet(Wf)}phrase(e,...t){for(let i of this.facet(J.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let o=+(n||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let o of this.facet(Pf))for(let r of o(this,t,i))Object.prototype.hasOwnProperty.call(r,e)&&n.push(r[e]);return n}charCategorizer(e){return Ek(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),o=this.charCategorizer(e),r=e-i,a=e-i;for(;r>0;){let l=qt(t,r,!1);if(o(t.slice(l,r))!=pt.Word)break;r=l}for(;a<n;){let l=qt(t,a);if(o(t.slice(a,l))!=pt.Word)break;a=l}return r==a?null:A.range(r+i,a+i)}}J.allowMultipleSelections=Df;J.tabSize=U.define({combine:s=>s.length?s[0]:4});J.lineSeparator=If;J.readOnly=Wf;J.phrases=U.define({compare(s,e){let t=Object.keys(s),i=Object.keys(e);return t.length==i.length&&t.every(n=>s[n]==e[n])}});J.languageData=Pf;J.changeFilter=Af;J.transactionFilter=Rf;J.transactionExtender=Mf;tn.reconfigure=X.define();function ps(s,e,t={}){let i={};for(let n of s)for(let o of Object.keys(n)){let r=n[o],a=i[o];if(a===void 0)i[o]=r;else if(!(a===r||r===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,r);else throw new Error("Config merge conflict for field "+o)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Ps{eq(e){return this==e}range(e,t=e){return Vi.create(e,t,this)}}Ps.prototype.startSide=Ps.prototype.endSide=0;Ps.prototype.point=!1;Ps.prototype.mapMode=Ae.TrackDel;class Vi{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Vi(e,t,i)}}function ma(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class wl{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let o=i?this.to:this.from;for(let r=n,a=o.length;;){if(r==a)return r;let l=r+a>>1,c=o[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-t;if(l==r)return c>=0?r:a;c>=0?a=l:r=l+1}}between(e,t,i,n){for(let o=this.findIndex(t,-1e9,!0),r=this.findIndex(i,1e9,!1,o);o<r;o++)if(n(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],n=[],o=[],r=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],d=this.from[l]+e,u=this.to[l]+e,h,p;if(d==u){let f=t.mapPos(d,c.startSide,c.mapMode);if(f==null||(h=p=f,c.startSide!=c.endSide&&(p=t.mapPos(d,c.endSide),p<h)))continue}else if(h=t.mapPos(d,c.startSide),p=t.mapPos(u,c.endSide),h>p||h==p&&c.startSide>0&&c.endSide<=0)continue;(p-h||c.endSide-c.startSide)<0||(r<0&&(r=h),c.point&&(a=Math.max(a,p-h)),i.push(c),n.push(h-r),o.push(p-r))}return{mapped:i.length?new wl(n,o,i,a):null,pos:r}}}class ee{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new ee(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:o=this.length}=e,r=e.filter;if(t.length==0&&!r)return this;if(i&&(t=t.slice().sort(ma)),this.isEmpty)return t.length?ee.of(t):this;let a=new Bf(this,null,-1).goto(0),l=0,c=[],d=new Ds;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let u=t[l++];d.addInner(u.from,u.to,u.value)||c.push(u)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!r||n>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&d.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!r||n>a.to||o<a.from||r(a.from,a.to,a.value))&&(d.addInner(a.from,a.to,a.value)||c.push(Vi.create(a.from,a.to,a.value))),a.next());return d.finishInner(this.nextLayer.isEmpty&&!c.length?ee.empty:this.nextLayer.update({add:c,filter:r,filterFrom:n,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let r=0;r<this.chunk.length;r++){let a=this.chunkPos[r],l=this.chunk[r],c=e.touchesRange(a,a+l.length);if(c===!1)n=Math.max(n,l.maxPoint),t.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:d,pos:u}=l.map(a,e);d&&(n=Math.max(n,d.maxPoint),t.push(d),i.push(u))}}let o=this.nextLayer.map(e);return t.length==0?o:new ee(i,t,o||ee.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],r=this.chunk[n];if(t>=o&&e<=o+r.length&&r.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Fi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Fi.from(e).goto(t)}static compare(e,t,i,n,o=-1){let r=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),a=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),l=ed(r,a,i),c=new wi(r,l,o),d=new wi(a,l,o);i.iterGaps((u,h,p)=>td(c,u,d,h,p,n)),i.empty&&i.length==0&&td(c,0,d,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=1e9);let o=e.filter(d=>!d.isEmpty&&t.indexOf(d)<0),r=t.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(o.length!=r.length)return!1;if(!o.length)return!0;let a=ed(o,r),l=new wi(o,a,0).goto(i),c=new wi(r,a,0).goto(i);for(;;){if(l.to!=c.to||!ga(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>n)return!0;l.next(),c.next()}}static spans(e,t,i,n,o=-1){let r=new wi(e,null,o).goto(t),a=t,l=r.openStart;for(;;){let c=Math.min(r.to,i);if(r.point?(n.point(a,c,r.point,r.activeForPoint(r.to),l,r.pointRank),l=r.openEnd(c)+(r.to>c?1:0)):c>a&&(n.span(a,c,r.active,l),l=r.openEnd(c)),r.to>i)break;a=r.to,r.next()}return l}static of(e,t=!1){let i=new Ds;for(let n of e instanceof Vi?[e]:t?Ck(e):e)i.add(n.from,n.to,n.value);return i.finish()}}ee.empty=new ee([],[],null,-1);function Ck(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(ma(e,i)>0)return s.slice().sort(ma);e=i}return s}ee.empty.nextLayer=ee.empty;class Ds{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new wl(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ds)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ee.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ee.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ed(s,e,t){let i=new Map;for(let o of s)for(let r=0;r<o.chunk.length;r++)o.chunk[r].maxPoint<=0&&i.set(o.chunk[r],o.chunkPos[r]);let n=new Set;for(let o of e)for(let r=0;r<o.chunk.length;r++){let a=i.get(o.chunk[r]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[r]&&!(t!=null&&t.touchesRange(a,a+o.chunk[r].length))&&n.add(o.chunk[r])}return n}class Bf{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Fi{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let o=0;o<e.length;o++)for(let r=e[o];!r.isEmpty;r=r.nextLayer)r.maxPoint>=i&&n.push(new Bf(r,t,i,o));return n.length==1?n[0]:new Fi(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)mr(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)mr(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),mr(this.heap,0)}}}function mr(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}class wi{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Fi.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){cn(this.active,e),cn(this.activeTo,e),cn(this.activeRank,e),this.minActive=sd(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;dn(this.active,t,i),dn(this.activeTo,t,n),dn(this.activeRank,t,o),e&&dn(e,t,this.cursor.from),this.minActive=sd(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,n=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&cn(i,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.from<e&&this.cursor.to>e&&n++,this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.from<e&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let o=0;for(;o<i.length&&i[o]<e;)o++;this.openStart=o+n}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function td(s,e,t,i,n,o){s.goto(e),t.goto(i);let r=i+n,a=i,l=i-e;for(;;){let c=s.to+l-t.to||s.endSide-t.endSide,d=c<0?s.to+l:t.to,u=Math.min(d,r);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&ga(s.activeForPoint(s.to+l),t.activeForPoint(t.to))||o.comparePoint(a,u,s.point,t.point):u>a&&!ga(s.active,t.active)&&o.compareRange(a,u,s.active,t.active),d>r)break;a=d,c<=0&&s.next(),c>=0&&t.next()}}function ga(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function cn(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function dn(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function sd(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}function yl(s,e,t=s.length){let i=0;for(let n=0;n<t;)s.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=qt(s,n));return i}function Nk(s,e,t,i){for(let n=0,o=0;;){if(o>=e)return n;if(n==s.length)break;o+=s.charCodeAt(n)==9?t-o%t:1,n=qt(s,n)}return i===!0?-1:s.length}const wa="\u037C",id=typeof Symbol=="undefined"?"__"+wa:Symbol.for(wa),ya=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),nd=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class cs{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(r){return/^@/.test(r)?[r]:r.split(/,\s*/)}function o(r,a,l,c){let d=[],u=/^@(\w+)\b/.exec(r[0]),h=u&&u[1]=="keyframes";if(u&&a==null)return l.push(r[0]+";");for(let p in a){let f=a[p];if(/&/.test(p))o(p.split(/,\s*/).map(w=>r.map(g=>w.replace(/&/,g))).reduce((w,g)=>w.concat(g)),f,l);else if(f&&typeof f=="object"){if(!u)throw new RangeError("The value of a property ("+p+") should be a primitive value.");o(n(p),f,d,h)}else f!=null&&d.push(p.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+f+";")}(d.length||h)&&l.push((i&&!u&&!c?r.map(i):r).join(", ")+" {"+d.join(" ")+"}")}for(let r in e)o(n(r),e[r],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=nd[id]||1;return nd[id]=e+1,wa+e.toString(36)}static mount(e,t){(e[ya]||new Pk(e)).mount(Array.isArray(t)?t:[t])}}let un=null;class Pk{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(un)return e.adoptedStyleSheets=[un.sheet].concat(e.adoptedStyleSheets),e[ya]=un;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),un=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[ya]=this}mount(e){let t=this.sheet,i=0,n=0;for(let o=0;o<e.length;o++){let r=e[o],a=this.modules.indexOf(r);if(a<n&&a>-1&&(this.modules.splice(a,1),n--,a=-1),a==-1){if(this.modules.splice(n++,0,r),t)for(let l=0;l<r.rules.length;l++)t.insertRule(r.rules[l],i++)}else{for(;n<a;)i+=this.modules[n++].rules.length;i+=r.rules.length,n++}}if(!t){let o="";for(let r=0;r<this.modules.length;r++)o+=this.modules[r].getRules()+`
`;this.styleTag.textContent=o}}}var ds={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ji={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},od=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent);var Dk=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),Ik=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ak=Dk||od&&+od[1]<57;for(var Ie=0;Ie<10;Ie++)ds[48+Ie]=ds[96+Ie]=String(Ie);for(var Ie=1;Ie<=24;Ie++)ds[Ie+111]="F"+Ie;for(var Ie=65;Ie<=90;Ie++)ds[Ie]=String.fromCharCode(Ie+32),ji[Ie]=String.fromCharCode(Ie);for(var gr in ds)ji.hasOwnProperty(gr)||(ji[gr]=ds[gr]);function Rk(s){var e=Ak&&(s.ctrlKey||s.altKey||s.metaKey)||Ik&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?ji:ds)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function oo(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function ni(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function Mk(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Fn(s,e){if(!e.anchorNode)return!1;try{return ni(s,e.anchorNode)}catch{return!1}}function zi(s){return s.nodeType==3?oi(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function ro(s,e,t,i){return t?rd(s,e,t,i,-1)||rd(s,e,t,i,1):!1}function ao(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function rd(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:Gi(s))){if(s.nodeName=="DIV")return!1;let o=s.parentNode;if(!o||o.nodeType!=1)return!1;e=ao(s)+(n<0?0:1),s=o}else if(s.nodeType==1){if(s=s.childNodes[e+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=n<0?Gi(s):0}else return!1}}function Gi(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}const Uf={left:0,right:0,top:0,bottom:0};function vl(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function Wk(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function Lk(s,e,t,i,n,o,r,a){let l=s.ownerDocument,c=l.defaultView||window;for(let d=s;d;)if(d.nodeType==1){let u,h=d==l.body;if(h)u=Wk(c);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let w=d.getBoundingClientRect();u={left:w.left,right:w.left+d.clientWidth,top:w.top,bottom:w.top+d.clientHeight}}let p=0,f=0;if(n=="nearest")e.top<u.top?(f=-(u.top-e.top+r),t>0&&e.bottom>u.bottom+f&&(f=e.bottom-u.bottom+f+r)):e.bottom>u.bottom&&(f=e.bottom-u.bottom+r,t<0&&e.top-f<u.top&&(f=-(u.top+f-e.top+r)));else{let w=e.bottom-e.top,g=u.bottom-u.top;f=(n=="center"&&w<=g?e.top+w/2-g/2:n=="start"||n=="center"&&t<0?e.top-r:e.bottom-g+r)-u.top}if(i=="nearest"?e.left<u.left?(p=-(u.left-e.left+o),t>0&&e.right>u.right+p&&(p=e.right-u.right+p+o)):e.right>u.right&&(p=e.right-u.right+o,t<0&&e.left<u.left+p&&(p=-(u.left+p-e.left+o))):p=(i=="center"?e.left+(e.right-e.left)/2-(u.right-u.left)/2:i=="start"==a?e.left-o:e.right-(u.right-u.left)+o)-u.left,p||f)if(h)c.scrollBy(p,f);else{let w=0,g=0;if(f){let v=d.scrollTop;d.scrollTop+=f,g=d.scrollTop-v}if(p){let v=d.scrollLeft;d.scrollLeft+=p,w=d.scrollLeft-v}e={left:e.left-w,top:e.top-g,right:e.right-w,bottom:e.bottom-g},w&&Math.abs(w-p)<1&&(i="nearest"),g&&Math.abs(g-f)<1&&(n="nearest")}if(h)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}class Qk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Ls=null;function Vf(s){if(s.setActive)return s.setActive();if(Ls)return s.focus(Ls);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(Ls==null?{get preventScroll(){return Ls={preventScroll:!0},!0}}:void 0),!Ls){Ls=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],o=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let ad;function oi(s,e,t=e){let i=ad||(ad=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function ei(s,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,s.dispatchEvent(n);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,s.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function Bk(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function Ff(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function Uk(s,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(;;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=Gi(t))}else{if(t==s)return!0;i=ao(t),t=t.parentNode}}class Ue{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Ue(e.parentNode,ao(e),t)}static after(e,t){return new Ue(e.parentNode,ao(e)+1,t)}}const _l=[];class de{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let o of this.children){if(o.dirty){if(!o.dom&&(n=i?i.nextSibling:t.firstChild)){let r=de.get(n);(!r||!r.parent&&r.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e),o.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=o.dom&&(e.written=!0),o.dom.parentNode==t)for(;n&&n!=o.dom;)n=ld(n);else t.insertBefore(o.dom,n);i=o.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=ld(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=Gi(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;n==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?n=-1:n=1),e=o}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!de.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,o=0;;n++){let r=this.children[n];if(r.dom==i)return o;o+=r.length+r.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,o=-1,r=-1,a=-1;for(let l=0,c=i,d=i;l<this.children.length;l++){let u=this.children[l],h=c+u.length;if(c<e&&h>t)return u.domBoundsAround(e,t,c);if(h>=e&&n==-1&&(n=l,o=c),c>t&&u.dom.parentNode==this.dom){r=l,a=d;break}d=h,c=h+u.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=_l){this.markDirty();for(let n=e;n<t;n++){let o=this.children[n];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new jf(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,o,r){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}de.prototype.breakAfter=0;function ld(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class jf{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function zf(s,e,t,i,n,o,r,a,l){let{children:c}=s,d=c.length?c[e]:null,u=o.length?o[o.length-1]:null,h=u?u.breakAfter:r;if(!(e==i&&d&&!r&&!h&&o.length<2&&d.merge(t,n,o.length?u:null,t==0,a,l))){if(i<c.length){let p=c[i];p&&n<p.length?(e==i&&(p=p.split(n),n=0),!h&&u&&p.merge(0,n,u,!0,0,l)?o[o.length-1]=p:(n&&p.merge(0,n,null,!1,0,l),o.push(p))):p!=null&&p.breakAfter&&(u?u.breakAfter=1:r=1),i++}for(d&&(d.breakAfter=r,t>0&&(!r&&o.length&&d.merge(t,d.length,o[0],!1,a,0)?d.breakAfter=o.shift().breakAfter:(t<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(t,d.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else if(c[e].become(o[0]))e++,o.shift(),a=o.length?0:l;else break;!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&s.replaceChildren(e,i,o)}}function Gf(s,e,t,i,n,o){let r=s.childCursor(),{i:a,off:l}=r.findPos(t,1),{i:c,off:d}=r.findPos(e,-1),u=e-t;for(let h of i)u+=h.length;s.length+=u,zf(s,c,d,a,l,i,0,n,o)}let rt=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},va=typeof document!="undefined"?document:{documentElement:{style:{}}};const _a=/Edge\/(\d+)/.exec(rt.userAgent),Hf=/MSIE \d/.test(rt.userAgent),Oa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rt.userAgent),Ho=!!(Hf||Oa||_a),cd=!Ho&&/gecko\/(\d+)/i.test(rt.userAgent),wr=!Ho&&/Chrome\/(\d+)/.exec(rt.userAgent),dd="webkitFontSmoothing"in va.documentElement.style,qf=!Ho&&/Apple Computer/.test(rt.vendor),ud=qf&&(/Mobile\/\w+/.test(rt.userAgent)||rt.maxTouchPoints>2);var B={mac:ud||/Mac/.test(rt.platform),windows:/Win/.test(rt.platform),linux:/Linux|X11/.test(rt.platform),ie:Ho,ie_version:Hf?va.documentMode||6:Oa?+Oa[1]:_a?+_a[1]:0,gecko:cd,gecko_version:cd?+(/Firefox\/(\d+)/.exec(rt.userAgent)||[0,0])[1]:0,chrome:!!wr,chrome_version:wr?+wr[1]:0,ios:ud,android:/Android\b/.test(rt.userAgent),webkit:dd,safari:qf,webkit_version:dd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:va.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Vk=256;class us extends de{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof us)||this.length-(t-e)+i.length>Vk)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new us(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ue(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return ba(this.dom,e,t)}}class Bt extends de{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(Ff(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,o,r){return i&&(!(i instanceof Bt&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&r<=0)?!1:(Gf(this,e,t,i?i.children:[],o-1,r-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,o=0;for(let a of this.children){let l=i+a.length;l>e&&t.push(i<e?a.split(e-i):a),n<0&&i>=e&&(n=o),i=l,o++}let r=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Bt(this.mark,t,r)}domAtPos(e){return Zf(this,e)}coordsAt(e,t){return Jf(this,e,t)}}function ba(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,o=e,r=0;e==0&&t<0||e==i&&t>=0?B.chrome||B.gecko||(e?(n--,r=1):o<i&&(o++,r=-1)):t<0?n--:o<i&&o++;let a=oi(s,n,o).getClientRects();if(!a.length)return Uf;let l=a[(r?r<0:t>=0)?0:a.length-1];return B.safari&&!r&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),r?vl(l,r<0):l||null}class is extends de{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||is)(e,t,i)}split(e){let t=is.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,o,r){return i&&(!(i instanceof is)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof is&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return se.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):se.empty}domAtPos(e){return e==0?Ue.before(this.dom):Ue.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return Uf;for(let o=e>0?i.length-1:0;n=i[o],!(e>0?o==0:o==i.length-1||n.top<n.bottom);o+=e>0?-1:1);return vl(n,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Xf extends is{domAtPos(e){let{topView:t,text:i}=this.widget;return t?xa(e,0,t,i,(n,o)=>n.domAtPos(o),n=>new Ue(i,Math.min(n,i.nodeValue.length))):new Ue(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?Yf(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?xa(e,t,i,n,(o,r,a)=>o.coordsAt(r,a),(o,r)=>ba(n,o,r)):ba(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function xa(s,e,t,i,n,o){if(t instanceof Bt){for(let r=t.dom.firstChild;r;r=r.nextSibling){let a=de.get(r);if(!a)return o(s,e);let l=ni(r,i),c=a.length+(l?i.nodeValue.length:0);if(s<c||s==c&&a.getSide()<=0)return l?xa(s,e,a,i,n,o):n(a,s,e);s-=c}return n(t,t.length,-1)}else return t.dom==i?o(s,e):n(t,s,e)}function Yf(s,e,t,i){if(t instanceof Bt)for(let n of t.children){let o=0,r=ni(n.dom,i);if(ni(n.dom,s))return o+(r?Yf(s,e,n,i):n.localPosFromDOM(s,e));o+=r?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(s,e)}class ri extends de{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ri&&e.side==this.side}split(){return new ri(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Ue.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=Fk(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return se.empty}}us.prototype.children=is.prototype.children=ri.prototype.children=_l;function Fk(s,e){let t=s.parent,i=t?t.children.indexOf(s):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof us){let o=n.coordsAt(e<0?n.length:0,e);if(o)return o}i+=e}else if(t instanceof Bt&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function Zf(s,e){let t=s.dom,{children:i}=s,n=0;for(let o=0;n<i.length;n++){let r=i[n],a=o+r.length;if(!(a==o&&r.getSide()<=0)){if(e>o&&e<a&&r.dom.parentNode==t)return r.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=n;o>0;o--){let r=i[o-1];if(r.dom.parentNode==t)return r.domAtPos(r.length)}for(let o=n;o<i.length;o++){let r=i[o];if(r.dom.parentNode==t)return r.domAtPos(0)}return new Ue(t,0)}function Kf(s,e,t){let i,{children:n}=s;t>0&&e instanceof Bt&&n.length&&(i=n[n.length-1])instanceof Bt&&i.mark.eq(e.mark)?Kf(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function Jf(s,e,t){let i=null,n=-1,o=null,r=-1;function a(c,d){for(let u=0,h=0;u<c.children.length&&h<=d;u++){let p=c.children[u],f=h+p.length;f>=d&&(p.children.length?a(p,d-h):!o&&(f>d||h==f&&p.getSide()>0)?(o=p,r=d-h):(h<d||h==f&&p.getSide()<0)&&(i=p,n=d-h)),h=f}}a(s,e);let l=(t<0?i:o)||i||o;return l?l.coordsAt(Math.max(0,l==i?n:r),t):jk(s)}function jk(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=zi(e);return t[t.length-1]||null}function $a(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}function Ol(s,e){if(s==e)return!0;if(!s||!e)return!1;let t=Object.keys(s),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||s[n]!==e[n])return!1;return!0}function Ta(s,e,t){let i=null;if(e)for(let n in e)t&&n in t||s.removeAttribute(i=n);if(t)for(let n in t)e&&e[n]==t[n]||s.setAttribute(i=n,t[n]);return!!i}class Yt{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var ye=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(ye||(ye={}));class H extends Ps{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new qo(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Is(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:o,end:r}=em(e,t);i=(o?t?-3e8:-1:5e8)-1,n=(r?t?2e8:1:-6e8)+1}return new Is(e,i,n,t,e.widget||null,!0)}static line(e){return new sn(e)}static set(e,t=!1){return ee.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}H.none=ee.empty;class qo extends H{constructor(e){let{start:t,end:i}=em(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof qo&&this.tagName==e.tagName&&this.class==e.class&&Ol(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}qo.prototype.point=!1;class sn extends H{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sn&&Ol(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}sn.prototype.mapMode=Ae.TrackBefore;sn.prototype.point=!0;class Is extends H{constructor(e,t,i,n,o,r){super(t,i,o,e),this.block=n,this.isReplace=r,this.mapMode=n?t<=0?Ae.TrackBefore:Ae.TrackAfter:Ae.TrackDel}get type(){return this.startSide<this.endSide?ye.WidgetRange:this.startSide<=0?ye.WidgetBefore:ye.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Is&&zk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Is.prototype.point=!0;function em(s,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=s;return t==null&&(t=s.inclusive),i==null&&(i=s.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function zk(s,e){return s==e||!!(s&&e&&s.compare(e))}function ka(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=s?t[n]=Math.max(t[n],e):t.push(s,e)}class He extends de{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,o,r){if(i){if(!(i instanceof He))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),Gf(this,e,t,i?i.children:[],o,r),!0}split(e){let t=new He;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ol(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Kf(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=$a(t,this.attrs||{})),i&&(this.attrs=$a({class:i},this.attrs||{}))}domAtPos(e){return Zf(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(Ff(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Ta(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&de.get(i)instanceof Bt;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=de.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!B.ios||!this.children.some(n=>n instanceof us))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof us)||/[^ -~]/.test(t.text))return null;let i=zi(t.dom);if(i.length!=1)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return Jf(this,e,t)}become(e){return!1}get type(){return ye.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let o=e.children[i],r=n+o.length;if(r>=t){if(o instanceof He)return o;if(r>t)break}n=r+o.breakAfter}return null}}class Ts extends de{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,o,r){return i&&(!(i instanceof Ts)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Ue.before(this.dom):Ue.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ts(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return _l}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):se.empty}domBoundsAround(){return null}become(e){return e instanceof Ts&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class bl{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ts&&e.type==ye.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new He),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(hn(new ri(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:r,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(r){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(hn(new us(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,o,r){if(this.disallowBlockEffectsFor[r]&&i instanceof Is){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof Is)if(i.block){let{type:l}=i;l==ye.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ts(i.widget||new hd("div"),a,l))}else{let l=is.create(i.widget||new hd("span"),a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&o<=n.length&&(e<t||i.startSide>0),d=!l.isEditable&&(e<t||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(n),c&&(u.append(hn(new ri(1),n),o),o=n.length+Math.max(0,o-n.length)),u.append(hn(l,n),o),this.atCursorPos=d,this.pendingBuffer=d?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,n,o){let r=new bl(e,t,i,o);return r.openEnd=ee.spans(n,t,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function hn(s,e){for(let t of e)s=new Bt(t,[s],s.length);return s}class hd extends Yt{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const tm=U.define(),sm=U.define(),im=U.define(),nm=U.define(),Sa=U.define(),om=U.define(),rm=U.define({combine:s=>s.some(e=>e)});class lo{constructor(e,t="nearest",i="nearest",n=5,o=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=o}map(e){return e.empty?this:new lo(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const pd=X.define({map:(s,e)=>s.map(e)});function lt(s,e,t){let i=s.facet(nm);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Xo=U.define({combine:s=>s.length?s[0]:!0});let Gk=0;const ki=U.define();class Ve{constructor(e,t,i,n){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=n(this)}static define(e,t){const{eventHandlers:i,provide:n,decorations:o}=t||{};return new Ve(Gk++,e,i,r=>{let a=[ki.of(r)];return o&&a.push(Hi.of(l=>{let c=l.plugin(r);return c?o(c):H.none})),n&&a.push(n(r)),a})}static fromClass(e,t){return Ve.define(i=>new e(i),t)}}class yr{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(lt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){lt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){lt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const am=U.define(),lm=U.define(),Hi=U.define(),cm=U.define(),dm=U.define(),Si=U.define();class Xt{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Xt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,o=0,r=0,a=0;;n++){let l=n==e.length?null:e[n],c=r-a,d=l?l.fromB:1e9;for(;o<t.length&&t[o]<d;){let u=t[o],h=t[o+1],p=Math.max(a,u),f=Math.min(d,h);if(p<=f&&new Xt(p+c,f+c,p,f).addToSet(i),h>d)break;o+=2}if(!l)return i;new Xt(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),r=l.toA,a=l.toB}}}class co{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=xe.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,a,l,c)=>n.push(new Xt(r,a,l,c))),this.changedRanges=n;let o=e.hasFocus;o!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=o,this.flags|=1)}static create(e,t,i){return new co(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Te=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Te||(Te={}));const Ea=Te.LTR,Hk=Te.RTL;function um(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const qk=um("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Xk=um("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ca=Object.create(null),Tt=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);Ca[e]=t,Ca[t]=-e}function Yk(s){return s<=247?qk[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?Xk[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203?256:64336<=s&&s<=65023?4:s==8204?256:1}const Zk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ti{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?Hk:Ea}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let o=-1;for(let r=0;r<e.length;r++){let a=e[r];if(a.from<=t&&a.to>=t){if(a.level==i)return r;(o<0||(n!=0?n<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=r)}}if(o<0)throw new RangeError("Index out of range");return o}}const pe=[];function Kk(s,e){let t=s.length,i=e==Ea?1:2,n=e==Ea?2:1;if(!s||i==1&&!Zk.test(s))return hm(t);for(let r=0,a=i,l=i;r<t;r++){let c=Yk(s.charCodeAt(r));c==512?c=a:c==8&&l==4&&(c=16),pe[r]=c==4?2:c,c&7&&(l=c),a=c}for(let r=0,a=i,l=i;r<t;r++){let c=pe[r];if(c==128)r<t-1&&a==pe[r+1]&&a&24?c=pe[r]=a:pe[r]=256;else if(c==64){let d=r+1;for(;d<t&&pe[d]==64;)d++;let u=r&&a==8||d<t&&pe[d]==8?l==1?1:8:256;for(let h=r;h<d;h++)pe[h]=u;r=d-1}else c==8&&l==1&&(pe[r]=1);a=c,c&7&&(l=c)}for(let r=0,a=0,l=0,c,d,u;r<t;r++)if(d=Ca[c=s.charCodeAt(r)])if(d<0){for(let h=a-3;h>=0;h-=3)if(Tt[h+1]==-d){let p=Tt[h+2],f=p&2?i:p&4?p&1?n:i:0;f&&(pe[r]=pe[Tt[h]]=f),a=h;break}}else{if(Tt.length==189)break;Tt[a++]=r,Tt[a++]=c,Tt[a++]=l}else if((u=pe[r])==2||u==1){let h=u==i;l=h?0:1;for(let p=a-3;p>=0;p-=3){let f=Tt[p+2];if(f&2)break;if(h)Tt[p+2]|=2;else{if(f&4)break;Tt[p+2]|=4}}}for(let r=0;r<t;r++)if(pe[r]==256){let a=r+1;for(;a<t&&pe[a]==256;)a++;let l=(r?pe[r-1]:i)==1,c=(a<t?pe[a]:i)==1,d=l==c?l?1:2:i;for(let u=r;u<a;u++)pe[u]=d;r=a-1}let o=[];if(i==1)for(let r=0;r<t;){let a=r,l=pe[r++]!=1;for(;r<t&&l==(pe[r]!=1);)r++;if(l)for(let c=r;c>a;){let d=c,u=pe[--c]!=2;for(;c>a&&u==(pe[c-1]!=2);)c--;o.push(new ti(c,d,u?2:1))}else o.push(new ti(a,r,0))}else for(let r=0;r<t;){let a=r,l=pe[r++]==2;for(;r<t&&l==(pe[r]==2);)r++;o.push(new ti(a,r,l?1:2))}return o}function hm(s){return[new ti(0,s,0)]}let pm="";function Jk(s,e,t,i,n){var o;let r=i.head-s.from,a=-1;if(r==0){if(!n||!s.length)return null;e[0].level!=t&&(r=e[0].side(!1,t),a=0)}else if(r==s.length){if(n)return null;let h=e[e.length-1];h.level!=t&&(r=h.side(!0,t),a=e.length-1)}a<0&&(a=ti.find(e,r,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc));let l=e[a];r==l.side(n,t)&&(l=e[a+=n?1:-1],r=l.side(!n,t));let c=n==(l.dir==t),d=qt(s.text,r,c);if(pm=s.text.slice(Math.min(r,d),Math.max(r,d)),d!=l.side(n,t))return A.cursor(d+s.from,c?-1:1,l.level);let u=a==(n?e.length-1:0)?null:e[a+(n?1:-1)];return!u&&l.level!=t?A.cursor(n?s.to:s.from,n?-1:1,t):u&&u.level<l.level?A.cursor(u.side(!n,t)+s.from,n?1:-1,u.level):A.cursor(d+s.from,n?-1:1,l.level)}const ns="\uFFFF";class fm{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(J.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ns}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let o=n.nextSibling;if(o==t)break;let r=de.get(n),a=de.get(o);(r&&a?r.breakAfter:(r?r.breakAfter:fd(n))||fd(o)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,r=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),r=this.lineSeparator.length):(a=n.exec(t))&&(o=a.index,r=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),r>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=r-1);i=o+r}}readNode(e){if(e.cmIgnore)return;let t=de.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function fd(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}class md{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class gd extends de{constructor(e){super(),this.view=e,this.compositionDeco=H.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new He],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Xt(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:r,toA:a})=>a<this.minWidthFrom||r>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=H.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=tS(this.view,e.changes)),(B.ie||B.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),o=oS(i,n,e.changes);return t=Xt.extendWithRanges(t,o),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=B.chrome||B.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ts&&o.widget instanceof wd&&n.push(o.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let o=n>=0?e[n]:null;if(!o)break;let{fromA:r,toA:a,fromB:l,toB:c}=o,{content:d,breakAtStart:u,openStart:h,openEnd:p}=bl.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:f,off:w}=i.findPos(a,1),{i:g,off:v}=i.findPos(r,-1);zf(this,g,v,f,w,d,u,h,p)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,o=this.domAtPos(n.anchor),r=n.empty?o:this.domAtPos(n.head);if(B.gecko&&n.empty&&eS(o)){let l=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(l,o.node.childNodes[o.offset]||null)),o=r=new Ue(l,0),i=!0}let a=this.view.observer.selectionRange;(i||!a.focusNode||!ro(o.node,o.offset,a.anchorNode,a.anchorOffset)||!ro(r.node,r.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{B.android&&B.chrome&&this.dom.contains(a.focusNode)&&rS(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=oo(this.view.root);if(l)if(n.empty){if(B.gecko){let c=iS(o.node,o.offset);if(c&&c!=3){let d=gm(o.node,o.offset,c==1?1:-1);d&&(o=new Ue(d,c==1?0:d.nodeValue.length))}}l.collapse(o.node,o.offset),n.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=n.bidiLevel)}else if(l.extend){l.collapse(o.node,o.offset);try{l.extend(r.node,r.offset)}catch{}}else{let c=document.createRange();n.anchor>n.head&&([o,r]=[r,o]),c.setEnd(r.node,r.offset),c.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(o,r)),this.impreciseAnchor=o.precise?null:new Ue(a.anchorNode,a.anchorOffset),this.impreciseHead=r.precise?null:new Ue(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=oo(this.view.root);if(!t||!e.empty||!e.assoc||!t.modify)return;let i=He.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let o=this.coordsAt(e.head,-1),r=this.coordsAt(e.head,1);if(!o||!r||o.bottom>r.top)return;let a=this.domAtPos(e.head+e.assoc);t.collapse(a.node,a.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Fn(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=de.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof He)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let o=this.children[n],r=i-o.breakAfter-o.length;if(e>r||e==r&&o.type!=ye.WidgetBefore&&o.type!=ye.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==ye.WidgetBefore&&t>-2))return o.coordsAt(e-r,t);i=r}}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,o=this.view.contentDOM.clientWidth,r=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Te.LTR;for(let c=0,d=0;d<this.children.length;d++){let u=this.children[d],h=c+u.length;if(h>n)break;if(c>=i){let p=u.dom.getBoundingClientRect();if(t.push(p.height),r){let f=u.dom.lastChild,w=f?zi(f):[];if(w.length){let g=w[w.length-1],v=l?g.right-p.left:p.right-g.left;v>a&&(a=v,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Te.RTL:Te.LTR}measureTextSize(){for(let n of this.children)if(n instanceof He){let o=n.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=zi(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new jf(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let o=n==t.viewports.length?null:t.viewports[n],r=o?o.from-1:this.length;if(r>i){let a=t.lineBlockAt(r).bottom-t.lineBlockAt(i).top;e.push(H.replace({widget:new wd(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,r))}if(!o)break;i=o.to+1}return H.set(e)}updateDeco(){let e=this.view.state.facet(Hi).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let o=0,r=0,a=0,l=0;for(let d of this.view.state.facet(dm).map(u=>u(this.view)))if(d){let{left:u,right:h,top:p,bottom:f}=d;u!=null&&(o=Math.max(o,u)),h!=null&&(r=Math.max(r,h)),p!=null&&(a=Math.max(a,p)),f!=null&&(l=Math.max(l,f))}let c={left:i.left-o,top:i.top-a,right:i.right+r,bottom:i.bottom+l};Lk(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Te.LTR)}}function eS(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class wd extends Yt{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function mm(s){let e=s.observer.selectionRange,t=e.focusNode&&gm(e.focusNode,e.focusOffset,0);if(!t)return null;let i=s.docView.nearest(t);if(!i)return null;if(i instanceof He){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let o=n.previousSibling;for(;o&&!de.get(o);)o=o.previousSibling;let r=o?de.get(o).posAtEnd:i.posAtStart;return{from:r,to:r,node:n,text:t}}else{for(;;){let{parent:o}=i;if(!o)return null;if(o instanceof He)break;i=o}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function tS(s,e){let t=mm(s);if(!t)return H.none;let{from:i,to:n,node:o,text:r}=t,a=e.mapPos(i,1),l=Math.max(a,e.mapPos(n,-1)),{state:c}=s,d=o.nodeType==3?o.nodeValue:new fm([],c).readRange(o.firstChild,null).text;if(l-a<d.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+d.length),ns)==d)l=a+d.length;else if(c.doc.sliceString(Math.max(0,l-d.length),l,ns)==d)a=l-d.length;else return H.none;else if(c.doc.sliceString(a,l,ns)!=d)return H.none;let u=de.get(o);return u instanceof Xf?u=u.widget.topView:u&&(u.parent=null),H.set(H.replace({widget:new sS(o,r,u),inclusive:!0}).range(a,l))}class sS extends Yt{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Xf}}function gm(s,e,t){for(;;){if(s.nodeType==3)return s;if(s.nodeType==1&&e>0&&t<=0)s=s.childNodes[e-1],e=Gi(s);else if(s.nodeType==1&&e<s.childNodes.length&&t>=0)s=s.childNodes[e],e=0;else return null}}function iS(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}class nS{constructor(){this.changes=[]}compareRange(e,t){ka(e,t,this.changes)}comparePoint(e,t){ka(e,t,this.changes)}}function oS(s,e,t){let i=new nS;return ee.compare(s,e,t,i),i.changes}function rS(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function aS(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),o=e-n.from;if(n.length==0)return A.cursor(e);o==0?t=1:o==n.length&&(t=-1);let r=o,a=o;t<0?r=qt(n.text,o,!1):a=qt(n.text,o);let l=i(n.text.slice(r,a));for(;r>0;){let c=qt(n.text,r,!1);if(i(n.text.slice(c,r))!=l)break;r=c}for(;a<n.length;){let c=qt(n.text,a);if(i(n.text.slice(a,c))!=l)break;a=c}return A.range(r+n.from,a+n.from)}function lS(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function cS(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function vr(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function yd(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function vd(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Na(s,e,t){let i,n,o,r,a=!1,l,c,d,u;for(let f=s.firstChild;f;f=f.nextSibling){let w=zi(f);for(let g=0;g<w.length;g++){let v=w[g];n&&vr(n,v)&&(v=yd(vd(v,n.bottom),n.top));let y=lS(e,v),S=cS(t,v);if(y==0&&S==0)return f.nodeType==3?_d(f,e,t):Na(f,e,t);(!i||r>S||r==S&&o>y)&&(i=f,n=v,o=y,r=S,a=!y||(y>0?g<w.length-1:g>0)),y==0?t>v.bottom&&(!d||d.bottom<v.bottom)?(l=f,d=v):t<v.top&&(!u||u.top>v.top)&&(c=f,u=v):d&&vr(d,v)?d=vd(d,v.bottom):u&&vr(u,v)&&(u=yd(u,v.top))}}if(d&&d.bottom>=t?(i=l,n=d):u&&u.top<=t&&(i=c,n=u),!i)return{node:s,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return _d(i,h,t);if(a&&i.contentEditable!="false")return Na(i,h,t);let p=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:p}}function _d(s,e,t){let i=s.nodeValue.length,n=-1,o=1e9,r=0;for(let a=0;a<i;a++){let l=oi(s,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(d.top==d.bottom)continue;r||(r=e-d.left);let u=(d.top>t?d.top-t:t-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&u<o){let h=e>=(d.left+d.right)/2,p=h;if((B.chrome||B.gecko)&&oi(s,a).getBoundingClientRect().left==d.right&&(p=!h),u<=0)return{node:s,offset:a+(p?1:0)};n=a+(p?1:0),o=u}}}return{node:s,offset:n>-1?n:r>0?s.nodeValue.length:0}}function wm(s,{x:e,y:t},i,n=-1){var o;let r=s.contentDOM.getBoundingClientRect(),a=r.top+s.viewState.paddingTop,l,{docHeight:c}=s.viewState,d=t-a;if(d<0)return 0;if(d>c)return s.state.doc.length;for(let v=s.defaultLineHeight/2,y=!1;l=s.elementAtHeight(d),l.type!=ye.Text;)for(;d=n>0?l.bottom+v:l.top-v,!(d>=0&&d<=c);){if(y)return i?null:0;y=!0,n=-n}t=a+d;let u=l.from;if(u<s.viewport.from)return s.viewport.from==0?0:i?null:Od(s,r,l,e,t);if(u>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:i?null:Od(s,r,l,e,t);let h=s.dom.ownerDocument,p=s.root.elementFromPoint?s.root:h,f=p.elementFromPoint(e,t);f&&!s.contentDOM.contains(f)&&(f=null),f||(e=Math.max(r.left+1,Math.min(r.right-1,e)),f=p.elementFromPoint(e,t),f&&!s.contentDOM.contains(f)&&(f=null));let w,g=-1;if(f&&((o=s.docView.nearest(f))===null||o===void 0?void 0:o.isEditable)!=!1){if(h.caretPositionFromPoint){let v=h.caretPositionFromPoint(e,t);v&&({offsetNode:w,offset:g}=v)}else if(h.caretRangeFromPoint){let v=h.caretRangeFromPoint(e,t);v&&({startContainer:w,startOffset:g}=v,(!s.contentDOM.contains(w)||B.safari&&dS(w,g,e)||B.chrome&&uS(w,g,e))&&(w=void 0))}}if(!w||!s.docView.dom.contains(w)){let v=He.find(s.docView,u);if(!v)return d>l.top+l.height/2?l.to:l.from;({node:w,offset:g}=Na(v.dom,e,t))}return s.docView.posFromDOM(w,g)}function Od(s,e,t,i,n){let o=Math.round((i-e.left)*s.defaultCharacterWidth);s.lineWrapping&&t.height>s.defaultLineHeight*1.5&&(o+=Math.floor((n-t.top)/s.defaultLineHeight)*s.viewState.heightOracle.lineLength);let r=s.state.sliceDoc(t.from,t.to);return t.from+Nk(r,o,s.state.tabSize)}function dS(s,e,t){let i;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(let n=s.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return oi(s,i-1,i).getBoundingClientRect().left>t}function uS(s,e,t){if(e!=0)return!1;for(let n=s;;){let o=n.parentNode;if(!o||o.nodeType!=1||o.firstChild!=n)return!1;if(o.classList.contains("cm-line"))break;n=o}let i=s.nodeType==1?s.getBoundingClientRect():oi(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function hS(s,e,t,i){let n=s.state.doc.lineAt(e.head),o=!i||!s.lineWrapping?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(o){let l=s.dom.getBoundingClientRect(),c=s.textDirectionAt(n.from),d=s.posAtCoords({x:t==(c==Te.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(d!=null)return A.cursor(d,t?-1:1)}let r=He.find(s.docView,e.head),a=r?t?r.posAtEnd:r.posAtStart:t?n.to:n.from;return A.cursor(a,t?-1:1)}function bd(s,e,t,i){let n=s.state.doc.lineAt(e.head),o=s.bidiSpans(n),r=s.textDirectionAt(n.from);for(let a=e,l=null;;){let c=Jk(n,o,r,a,t),d=pm;if(!c){if(n.number==(t?s.state.doc.lines:1))return a;d=`
`,n=s.state.doc.line(n.number+(t?1:-1)),o=s.bidiSpans(n),c=A.cursor(t?n.from:n.to)}if(l){if(!l(d))return a}else{if(!i)return c;l=i(d)}a=c}}function pS(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return o=>{let r=i(o);return n==pt.Space&&(n=r),n==r}}function fS(s,e,t,i){let n=e.head,o=t?1:-1;if(n==(t?s.state.doc.length:0))return A.cursor(n,e.assoc);let r=e.goalColumn,a,l=s.contentDOM.getBoundingClientRect(),c=s.coordsAtPos(n),d=s.documentTop;if(c)r==null&&(r=c.left-l.left),a=o<0?c.top:c.bottom;else{let p=s.viewState.lineBlockAt(n);r==null&&(r=Math.min(l.right-l.left,s.defaultCharacterWidth*(n-p.from))),a=(o<0?p.top:p.bottom)+d}let u=l.left+r,h=i!=null?i:s.defaultLineHeight>>1;for(let p=0;;p+=10){let f=a+(h+p)*o,w=wm(s,{x:u,y:f},!1,o);if(f<l.top||f>l.bottom||(o<0?w<n:w>n))return A.cursor(w,e.assoc,void 0,r)}}function _r(s,e,t){let i=s.state.facet(cm).map(n=>n(s));for(;;){let n=!1;for(let o of i)o.between(t.from-1,t.from+1,(r,a,l)=>{t.from>r&&t.from<a&&(t=e.head>t.from?A.cursor(r,1):A.cursor(a,-1),n=!0)});if(!n)return t}}class mS{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in Ee){let i=Ee[t];e.contentDOM.addEventListener(t,n=>{!xd(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))},Pa[t]),this.registeredEvents.push(t)}B.chrome&&B.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,B.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let n;this.customHandlers=[];for(let o of t)if(n=(i=o.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:n});for(let r in n)this.registeredEvents.indexOf(r)<0&&r!="scroll"&&(this.registeredEvents.push(r),e.contentDOM.addEventListener(r,a=>{!xd(e,a)||this.runCustomHandlers(r,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let o=n.handlers[e];if(o)try{if(o.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(r){lt(t.state,r)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(o){lt(e.state,o)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(B.android&&B.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return B.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=ym.find(n=>n.keyCode==t.keyCode))&&!t.ctrlKey||gS.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,ei(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:B.safari&&!B.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ym=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gS="dthko",vm=[16,17,18,20,91,92,224,225];class wS{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(J.allowMultipleSelections)&&yS(e,t),this.dragMove=vS(e,t),this.dragging=_S(e,t)&&xm(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function yS(s,e){let t=s.state.facet(tm);return t.length?t[0](e):B.mac?e.metaKey:e.ctrlKey}function vS(s,e){let t=s.state.facet(sm);return t.length?t[0](e):B.mac?!e.altKey:!e.ctrlKey}function _S(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=oo(s.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let o=0;o<n.length;o++){let r=n[o];if(r.left<=e.clientX&&r.right>=e.clientX&&r.top<=e.clientY&&r.bottom>=e.clientY)return!0}return!1}function xd(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=de.get(t))&&i.ignoreEvent(e))return!1;return!0}const Ee=Object.create(null),Pa=Object.create(null),_m=B.ie&&B.ie_version<15||B.ios&&B.webkit_version<604;function OS(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),Om(s,t.value)},50)}function Om(s,e){let{state:t}=s,i,n=1,o=t.toText(e),r=o.lines==t.selection.ranges.length;if(Da!=null&&t.selection.ranges.every(l=>l.empty)&&Da==o.toString()){let l=-1;i=t.changeByRange(c=>{let d=t.doc.lineAt(c.from);if(d.from==l)return{range:c};l=d.from;let u=t.toText((r?o.line(n++).text:e)+t.lineBreak);return{changes:{from:d.from,insert:u},range:A.cursor(c.from+u.length)}})}else r?i=t.changeByRange(l=>{let c=o.line(n++);return{changes:{from:l.from,to:l.to,insert:c.text},range:A.cursor(l.from+c.length)}}):i=t.replaceSelection(o);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ee.keydown=(s,e)=>{s.inputState.setSelectionOrigin("select"),e.keyCode==27?s.inputState.lastEscPress=Date.now():vm.indexOf(e.keyCode)<0&&(s.inputState.lastEscPress=0)};Ee.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};Ee.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};Pa.touchstart=Pa.touchmove={passive:!0};Ee.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of s.state.facet(im))if(t=i(s,e),t)break;if(!t&&e.button==0&&(t=$S(s,e)),t){let i=s.root.activeElement!=s.contentDOM;i&&s.observer.ignore(()=>Vf(s.contentDOM)),s.inputState.startMouseSelection(new wS(s,e,t,i))}};function $d(s,e,t,i){if(i==1)return A.cursor(e,t);if(i==2)return aS(s.state,e,t);{let n=He.find(s.docView,e),o=s.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:o.from,a=n?n.posAtEnd:o.to;return a<s.state.doc.length&&a==o.to&&a++,A.range(r,a)}}let bm=(s,e)=>s>=e.top&&s<=e.bottom,Td=(s,e,t)=>bm(e,t)&&s>=t.left&&s<=t.right;function bS(s,e,t,i){let n=He.find(s.docView,e);if(!n)return 1;let o=e-n.posAtStart;if(o==0)return 1;if(o==n.length)return-1;let r=n.coordsAt(o,-1);if(r&&Td(t,i,r))return-1;let a=n.coordsAt(o,1);return a&&Td(t,i,a)?1:r&&bm(i,r)?-1:1}function kd(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:bS(s,t,e.clientX,e.clientY)}}const xS=B.ie&&B.ie_version<=11;let Sd=null,Ed=0,Cd=0;function xm(s){if(!xS)return s.detail;let e=Sd,t=Cd;return Sd=s,Cd=Date.now(),Ed=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Ed+1)%3:1}function $S(s,e){let t=kd(s,e),i=xm(e),n=s.state.selection,o=t,r=e;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),n=n.map(a.changes),r=null)},get(a,l,c){let d;r&&a.clientX==r.clientX&&a.clientY==r.clientY?d=o:(d=o=kd(s,a),r=a);let u=$d(s,d.pos,d.bias,i);if(t.pos!=d.pos&&!l){let h=$d(s,t.pos,t.bias,i),p=Math.min(h.from,u.from),f=Math.max(h.to,u.to);u=p<u.from?A.range(p,f):A.range(f,p)}return l?n.replaceRange(n.main.extend(u.from,u.to)):c&&n.ranges.length>1&&n.ranges.some(h=>h.eq(u))?TS(n,u):c?n.addRange(u):A.create([u])}}}function TS(s,e){for(let t=0;;t++)if(s.ranges[t].eq(e))return A.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}Ee.dragstart=(s,e)=>{let{selection:{main:t}}=s.state,{mouseSelection:i}=s.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Nd(s,e,t,i){if(!t)return;let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=s.inputState,r=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:n,insert:t},l=s.state.changes(r?[r,a]:a);s.focus(),s.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},userEvent:r?"move.drop":"input.drop"})}Ee.drop=(s,e)=>{if(!e.dataTransfer)return;if(s.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,o=()=>{++n==t.length&&Nd(s,e,i.filter(r=>r!=null).join(s.state.lineBreak),!1)};for(let r=0;r<t.length;r++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[r]=a.result),o()},a.readAsText(t[r])}}else Nd(s,e,e.dataTransfer.getData("Text"),!0)};Ee.paste=(s,e)=>{if(s.state.readOnly)return e.preventDefault();s.observer.flush();let t=_m?null:e.clipboardData;t?(Om(s,t.getData("text/plain")),e.preventDefault()):OS(s)};function kS(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function SS(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:o}of s.selection.ranges){let r=s.doc.lineAt(o);r.number>n&&(e.push(r.text),t.push({from:r.from,to:Math.min(s.doc.length,r.to+1)})),n=r.number}i=!0}return{text:e.join(s.lineBreak),ranges:t,linewise:i}}let Da=null;Ee.copy=Ee.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=SS(s.state);if(!t&&!n)return;Da=n?t:null;let o=_m?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",t)):kS(s,t),e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function $m(s){setTimeout(()=>{s.hasFocus!=s.inputState.notifiedFocused&&s.update([])},10)}Ee.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),$m(s)};Ee.blur=s=>{s.observer.clearSelectionRange(),$m(s)};Ee.compositionstart=Ee.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0)};Ee.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionFirstChange=null,B.chrome&&B.android&&s.observer.flushSoon(),setTimeout(()=>{s.inputState.composing<0&&s.docView.compositionDeco.size&&s.update([])},50)};Ee.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};Ee.beforeinput=(s,e)=>{var t;let i;if(B.chrome&&B.android&&(i=ym.find(n=>n.inputType==e.inputType))&&(s.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>n+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}};const Pd=["pre-wrap","normal","pre-line","break-spaces"];class ES{constructor(){this.doc=se.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Pd.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,o){let r=Pd.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=r;if(this.lineWrapping=r,this.lineHeight=t,this.charWidth=i,this.lineLength=n,a){this.heightSamples={};for(let l=0;l<o.length;l++){let c=o[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class CS{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class os{constructor(e,t,i,n,o){this.from=e,this.length=t,this.top=i,this.height=n,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new os(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ce=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(ce||(ce={}));const jn=.001;class Ke{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>jn&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Ke.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let o=this;for(let r=n.length-1;r>=0;r--){let{fromA:a,toA:l,fromB:c,toB:d}=n[r],u=o.lineAt(a,ce.ByPosNoHeight,t,0,0),h=u.to>=l?u:o.lineAt(l,ce.ByPosNoHeight,t,0,0);for(d+=h.to-l,l=h.to;r>0&&u.from<=n[r-1].toA;)a=n[r-1].fromA,c=n[r-1].fromB,r--,a<u.from&&(u=o.lineAt(a,ce.ByPosNoHeight,t,0,0));c+=u.from-a,a=u.from;let p=xl.build(i,e,c,d);o=o.replace(a,l,p)}return o.updateHeight(i,0)}static empty(){return new it(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,o=0;for(;;)if(t==i)if(n>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,n-=a.size}else if(o>n*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(n<o){let a=e[t++];a&&(n+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let r=0;return e[t-1]==null?(r=1,t--):e[t]==null&&(r=1,i++),new NS(Ke.of(e.slice(0,t)),r,Ke.of(e.slice(i)))}}Ke.prototype.size=1;class Tm extends Ke{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new os(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,o){return this.blockAt(0,i,n,o)}forEachLine(e,t,i,n,o,r){e<=o+this.length&&t>=o&&r(this.blockAt(0,i,n,o))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class it extends Tm{constructor(e,t){super(e,t,ye.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof it||n instanceof Pe&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Pe?n=new it(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Ke.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Pe extends Ke{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:o,lastLine:r,lineHeight:a}=this.lines(t,n),l=Math.max(0,Math.min(r-o,Math.floor((e-i)/a))),{from:c,length:d}=t.line(o+l);return new os(c,d,i+a*l,a,ye.Text)}lineAt(e,t,i,n,o){if(t==ce.ByHeight)return this.blockAt(e,i,n,o);if(t==ce.ByPosNoHeight){let{from:u,to:h}=i.lineAt(e);return new os(u,h-u,0,0,ye.Text)}let{firstLine:r,lineHeight:a}=this.lines(i,o),{from:l,length:c,number:d}=i.lineAt(e);return new os(l,c,n+a*(d-r),a,ye.Text)}forEachLine(e,t,i,n,o,r){let{firstLine:a,lineHeight:l}=this.lines(i,o);for(let c=Math.max(e,o),d=Math.min(o+this.length,t);c<=d;){let u=i.lineAt(c);c==e&&(n+=l*(u.number-a)),r(new os(u.from,u.length,n,l,ye.Text)),n+=l,c=u.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let o=i[i.length-1];o instanceof Pe?i[i.length-1]=new Pe(o.length+n):i.push(null,new Pe(n-1))}if(e>0){let o=i[0];o instanceof Pe?i[0]=new Pe(e+o.length):i.unshift(new Pe(e-1),null)}return Ke.of(i)}decomposeLeft(e,t){t.push(new Pe(e-1),null)}decomposeRight(e,t){t.push(null,new Pe(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let o=t+this.length;if(n&&n.from<=t+this.length&&n.more){let r=[],a=Math.max(t,n.from),l=-1,c=e.heightChanged;for(n.from>t&&r.push(new Pe(n.from-t-1).updateHeight(e,t));a<=o&&n.more;){let u=e.doc.lineAt(a).length;r.length&&r.push(null);let h=n.heights[n.index++];l==-1?l=h:Math.abs(h-l)>=jn&&(l=-2);let p=new it(u,h);p.outdated=!1,r.push(p),a+=u+1}a<=o&&r.push(null,new Pe(o-a).updateHeight(e,a));let d=Ke.of(r);return e.heightChanged=c||l<0||Math.abs(d.height-this.height)>=jn||Math.abs(l-this.lines(e.doc,t).lineHeight)>=jn,d}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class NS extends Ke{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,o,n+this.left.length+this.break)}lineAt(e,t,i,n,o){let r=n+this.left.height,a=o+this.left.length+this.break,l=t==ce.ByHeight?e<r:e<a,c=l?this.left.lineAt(e,t,i,n,o):this.right.lineAt(e,t,i,r,a);if(this.break||(l?c.to<a:c.from>a))return c;let d=t==ce.ByPosNoHeight?ce.ByPosNoHeight:ce.ByPos;return l?c.join(this.right.lineAt(a,d,i,r,a)):this.left.lineAt(a,d,i,n,o).join(c)}forEachLine(e,t,i,n,o,r){let a=n+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,n,o,r),t>=l&&this.right.forEachLine(e,t,i,a,l,r);else{let c=this.lineAt(l,ce.ByPos,i,n,o);e<c.from&&this.left.forEachLine(e,c.from-1,i,n,o,r),c.to>=e&&c.from<=t&&r(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,a,l,r)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let o=[];e>0&&this.decomposeLeft(e,o);let r=o.length;for(let a of i)o.push(a);if(e>0&&Dd(o,r-1),t<this.length){let a=o.length;this.decomposeRight(t,o),Dd(o,a)}return Ke.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ke.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:o,right:r}=this,a=t+o.length+this.break,l=null;return n&&n.from<=t+o.length&&n.more?l=o=o.updateHeight(e,t,i,n):o.updateHeight(e,t,i),n&&n.from<=a+r.length&&n.more?l=r=r.updateHeight(e,a,i,n):r.updateHeight(e,a,i),l?this.balanced(o,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Dd(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof Pe&&(i=s[e+1])instanceof Pe&&s.splice(e-1,3,new Pe(t.length+1+i.length))}const PS=5;class xl{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof it?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new it(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Tm(o,n,i.type)):(o||n>=PS)&&this.addLineDeco(n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new it(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Pe(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof it)return e;let t=new it(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==ye.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=ye.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof it)&&!this.isCovered?this.nodes.push(new it(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof it&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let o=new xl(i,e);return ee.spans(t,i,n,o,0),o.finish(i)}}function DS(s,e,t){let i=new IS;return ee.compare(s,e,t,i,0),i.changes}class IS{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&ka(e,t,this.changes,5)}}function AS(s,e){let t=s.getBoundingClientRect(),i=s.ownerDocument,n=i.defaultView||window,o=Math.max(0,t.left),r=Math.min(n.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(n.innerHeight,t.bottom);for(let c=s.parentNode;c&&c!=i.body;)if(c.nodeType==1){let d=c,u=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&u.overflow!="visible"){let h=d.getBoundingClientRect();o=Math.max(o,h.left),r=Math.min(r,h.right),a=Math.max(a,h.top),l=c==s.parentNode?h.bottom:Math.min(l,h.bottom)}c=u.position=="absolute"||u.position=="fixed"?d.offsetParent:d.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-t.left,right:Math.max(o,r)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function RS(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Or{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],o=t[i];if(n.from!=o.from||n.to!=o.to||n.size!=o.size)return!1}return!0}draw(e){return H.replace({widget:new MS(this.size,e)}).range(this.from,this.to)}}class MS extends Yt{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Id{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new ES,this.scaler=Ad,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Te.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Hi).filter(t=>typeof t!="function"),this.heightMap=Ke.empty().applyChanges(this.stateDeco,se.empty,this.heightOracle.setDoc(e.doc),[new Xt(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=H.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:o,to:r})=>n>=o&&n<=r)){let{from:o,to:r}=this.lineBlockAt(n);e.push(new pn(o,r))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?Ad:new QS(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ei(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Hi).filter(c=>typeof c!="function");let n=e.changedRanges,o=Xt.extendWithRanges(n,DS(i,this.stateDeco,e?e.changes:xe.empty(this.state.doc.length))),r=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=r&&(e.flags|=2);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Te.RTL:Te.LTR;let r=this.heightOracle.mustRefreshForWrapping(o),a=r||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let l=0,c=0,d=parseInt(i.paddingTop)||0,u=parseInt(i.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=u)&&(this.paddingTop=d,this.paddingBottom=u,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let h=(this.printing?RS:AS)(t,this.paddingTop),p=h.top-this.pixelViewport.top,f=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let w=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(w!=this.inView&&(this.inView=w,w&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let g=t.clientWidth;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=g,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let y=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(y)&&(r=!0),r||n.lineWrapping&&Math.abs(g-this.contentDOMWidth)>n.charWidth){let{lineHeight:S,charWidth:T}=e.docView.measureTextSize();r=S>0&&n.refresh(o,S,T,g/T,y),r&&(e.docView.minWidth=0,l|=8)}p>0&&f>0?c=Math.max(p,f):p<0&&f<0&&(c=Math.min(p,f)),n.heightChanged=!1;for(let S of this.viewports){let T=S.from==this.viewport.from?y:e.docView.measureVisibleLineHeights(S);this.heightMap=this.heightMap.updateHeight(n,0,r,new CS(S.from,T))}n.heightChanged&&(l|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(l&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(r?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,o=this.state.doc,{visibleTop:r,visibleBottom:a}=this,l=new pn(n.lineAt(r-i*1e3,ce.ByHeight,o,0,0).from,n.lineAt(a+(1-i)*1e3,ce.ByHeight,o,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=n.lineAt(c,ce.ByPos,o,0,0),h;t.y=="center"?h=(u.top+u.bottom)/2-d/2:t.y=="start"||t.y=="nearest"&&c<l.from?h=u.top:h=u.bottom-d,l=new pn(n.lineAt(h-1e3/2,ce.ByHeight,o,0,0).from,n.lineAt(h+d+1e3/2,ce.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new pn(this.heightMap.lineAt(i,ce.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,ce.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,ce.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(t,ce.ByPos,this.state.doc,0,0),{visibleTop:r,visibleBottom:a}=this;return(e==0||n<=r-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&n>r-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Or(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,o=n>>1,r=n<<1;if(this.defaultTextDirection!=Te.LTR&&!i)return[];let a=[],l=(c,d,u,h)=>{if(d-c<o)return;let p=this.state.selection.main,f=[p.from];p.empty||f.push(p.to);for(let g of f)if(g>c&&g<d){l(c,g-10,u,h),l(g+10,d,u,h);return}let w=LS(e,g=>g.from>=u.from&&g.to<=u.to&&Math.abs(g.from-c)<o&&Math.abs(g.to-d)<o&&!f.some(v=>g.from<v&&g.to>v));if(!w){if(d<u.to&&t&&i&&t.visibleRanges.some(g=>g.from<=d&&g.to>=d)){let g=t.moveToLineBoundary(A.cursor(d),!1,!0).head;g>c&&(d=g)}w=new Or(c,d,this.gapSize(u,c,d,h))}a.push(w)};for(let c of this.viewportLines){if(c.length<r)continue;let d=WS(c.from,c.to,this.stateDeco);if(d.total<r)continue;let u=this.scrollTarget?this.scrollTarget.range.head:null,h,p;if(i){let f=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,g;if(u!=null){let v=mn(d,u),y=((this.visibleBottom-this.visibleTop)/2+f)/c.height;w=v-y,g=v+y}else w=(this.visibleTop-c.top-f)/c.height,g=(this.visibleBottom-c.top+f)/c.height;h=fn(d,w),p=fn(d,g)}else{let f=d.total*this.heightOracle.charWidth,w=n*this.heightOracle.charWidth,g,v;if(u!=null){let y=mn(d,u),S=((this.pixelViewport.right-this.pixelViewport.left)/2+w)/f;g=y-S,v=y+S}else g=(this.pixelViewport.left-w)/f,v=(this.pixelViewport.right+w)/f;h=fn(d,g),p=fn(d,v)}h>c.from&&l(c.from,h,c,d),p<c.to&&l(p,c.to,c,d)}return a}gapSize(e,t,i,n){let o=mn(n,i)-mn(n,t);return this.heightOracle.lineWrapping?e.height*o:n.total*this.heightOracle.charWidth*o}updateLineGaps(e){Or.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=H.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];ee.spans(e,this.viewport.from,this.viewport.to,{span(n,o){t.push({from:n,to:o})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,o)=>n.from!=t[o].from||n.to!=t[o].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ei(this.heightMap.lineAt(e,ce.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Ei(this.heightMap.lineAt(this.scaler.fromDOM(e),ce.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Ei(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class pn{constructor(e,t){this.from=e,this.to=t}}function WS(s,e,t){let i=[],n=s,o=0;return ee.spans(t,s,e,{span(){},point(r,a){r>n&&(i.push({from:n,to:r}),o+=r-n),n=a}},20),n<e&&(i.push({from:n,to:e}),o+=e-n),{total:o,ranges:i}}function fn({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:o,to:r}=e[n],a=r-o;if(i<=a)return o+i;i-=a}}function mn(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function LS(s,e){for(let t of s)if(e(t))return t}const Ad={toDOM(s){return s},fromDOM(s){return s},scale:1};class QS{constructor(e,t,i){let n=0,o=0,r=0;this.viewports=i.map(({from:a,to:l})=>{let c=t.lineAt(a,ce.ByPos,e,0,0).top,d=t.lineAt(l,ce.ByPos,e,0,0).bottom;return n+=d-c,{from:a,to:l,top:c,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let a of this.viewports)a.domTop=r+(a.top-o)*this.scale,r=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return n+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,n=o.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-n)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,n=o.domBottom}}}function Ei(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),i=e.toDOM(s.bottom);return new os(s.from,s.length,t,i-t,Array.isArray(s.type)?s.type.map(n=>Ei(n,e)):s.type)}const gn=U.define({combine:s=>s.join(" ")}),Ia=U.define({combine:s=>s.indexOf(!0)>-1}),Aa=cs.newName(),km=cs.newName(),Sm=cs.newName(),Em={"&light":"."+km,"&dark":"."+Sm};function Ra(s,e,t){return new cs(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):s+" "+i}})}const BS=Ra("."+Aa,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Em);class US{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="";let{impreciseHead:o,impreciseAnchor:r}=e.docView;if(t>-1&&!e.state.readOnly&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||r?[]:FS(e),l=new fm(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=jS(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!ni(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=r&&r.node==a.anchorNode&&r.offset==a.anchorOffset||!ni(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=A.single(c,l)}}}function Cm(s,e){let t,{newSel:i}=e,n=s.state.selection.main;if(e.bounds){let{from:o,to:r}=e.bounds,a=n.from,l=null;(s.inputState.lastKeyCode===8&&s.inputState.lastKeyTime>Date.now()-100||B.android&&e.text.length<r-o)&&(a=n.to,l="end");let c=VS(s.state.doc.sliceString(o,r,ns),e.text,a-o,l);c&&(B.chrome&&s.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ns+ns&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:se.of(e.text.slice(c.from,c.toB).split(ns))})}else i&&(!s.hasFocus||!s.state.facet(Xo)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,n.to)}:t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,n.to))}:(B.mac||B.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())?(i&&t.insert.length==2&&(i=A.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:se.of([" "])}):B.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=A.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:se.of([" "])}),t){let o=s.state;if(B.ios&&s.inputState.flushIOSKey(s)||B.android&&(t.from==n.from&&t.to==n.to&&t.insert.length==1&&t.insert.lines==2&&ei(s.contentDOM,"Enter",13)||t.from==n.from-1&&t.to==n.to&&t.insert.length==0&&ei(s.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&t.insert.length==0&&ei(s.contentDOM,"Delete",46)))return!0;let r=t.insert.toString();if(s.state.facet(om).some(c=>c(s,t.from,t.to,r)))return!0;s.inputState.composing>=0&&s.inputState.composing++;let a;if(t.from>=n.from&&t.to<=n.to&&t.to-t.from>=(n.to-n.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&s.inputState.composing<0){let c=n.from<t.from?o.sliceDoc(n.from,t.from):"",d=n.to>t.to?o.sliceDoc(t.to,n.to):"";a=o.replaceSelection(s.state.toText(c+t.insert.sliceString(0,void 0,s.state.lineBreak)+d))}else{let c=o.changes(t),d=i&&!o.selection.main.eq(i.main)&&i.main.to<=c.newLength?i.main:void 0;if(o.selection.ranges.length>1&&s.inputState.composing>=0&&t.to<=n.to&&t.to>=n.to-10){let u=s.state.sliceDoc(t.from,t.to),h=mm(s)||s.state.doc.lineAt(n.head),p=n.to-t.to,f=n.to-n.from;a=o.changeByRange(w=>{if(w.from==n.from&&w.to==n.to)return{changes:c,range:d||w.map(c)};let g=w.to-p,v=g-u.length;if(w.to-w.from!=f||s.state.sliceDoc(v,g)!=u||h&&w.to>=h.from&&w.from<=h.to)return{range:w};let y=o.changes({from:v,to:g,insert:t.insert}),S=w.to-n.to;return{changes:y,range:d?A.range(Math.max(0,d.anchor+S),Math.max(0,d.head+S)):w.map(y)}})}else a={changes:c,selection:d&&o.selection.replaceRange(d)}}let l="input.type";return s.composing&&(l+=".compose",s.inputState.compositionFirstChange&&(l+=".start",s.inputState.compositionFirstChange=!1)),s.dispatch(a,{scrollIntoView:!0,userEvent:l}),!0}else if(i&&!i.main.eq(n)){let o=!1,r="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),r=s.inputState.lastSelectionOrigin),s.dispatch({selection:i,scrollIntoView:o,userEvent:r}),!0}else return!1}function VS(s,e,t,i){let n=Math.min(s.length,e.length),o=0;for(;o<n&&s.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==n&&s.length==e.length)return null;let r=s.length,a=e.length;for(;r>0&&a>0&&s.charCodeAt(r-1)==e.charCodeAt(a-1);)r--,a--;if(i=="end"){let l=Math.max(0,o-Math.min(r,a));t-=r+l-o}return r<o&&s.length<e.length?(o-=t<=o&&t>=r?o-t:0,a=o+(a-r),r=o):a<o&&(o-=t<=o&&t>=a?o-t:0,r=o+(r-a),a=o),{from:o,toA:r,toB:a}}function FS(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:o}=s.observer.selectionRange;return t&&(e.push(new md(t,i)),(n!=t||o!=i)&&e.push(new md(n,o))),e}function jS(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?A.single(t+e,i+e):null}const zS={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},br=B.ie&&B.ie_version<=11;class GS{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Qk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(B.ie&&B.ie_version<=11||B.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),br&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Xo)?i.root.activeElement!=this.dom:!Fn(i.dom,n))return;let o=n.anchorNode&&i.docView.nearest(n.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(B.ie&&B.ie_version<=11||B.android&&B.chrome)&&!i.state.selection.main.empty&&n.focusNode&&ro(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=B.safari&&e.root.nodeType==11&&Mk(this.dom.ownerDocument)==this.dom&&HS(this.view)||oo(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=Fn(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Uk(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,zS),br&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),br&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),!this.flush()&&o.force&&ei(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let o of this.observer.takeRecords())e.push(o);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let o of e){let r=this.readMutation(o);!r||(r.typeOver&&(n=!0),t==-1?{from:t,to:i}=r:(t=Math.min(r.from,t),i=Math.max(r.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Fn(this.dom,this.selectionRange);return e<0&&!n?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new US(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,n=Cm(this.view,t);return this.view.state==i&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=Rd(t,e.previousSibling||e.target.previousSibling,-1),n=Rd(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Rd(s,e,t){for(;e;){let i=de.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function HS(s){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",t,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset,a=s.docView.domAtPos(s.state.selection.main.anchor);return ro(a.node,a.offset,o,r)&&([i,n,o,r]=[o,r,i,n]),{anchorNode:i,anchorOffset:n,focusNode:o,focusOffset:r}}class z{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||Bk(e.parent)||document,this.viewState=new Id(e.state||J.create(e)),this.plugins=this.state.facet(ki).map(t=>new yr(t));for(let t of this.plugins)t.update(this);this.observer=new GS(this),this.inputState=new mS(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new gd(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof $e?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,o=this.state;for(let c of e){if(c.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=c.state}if(this.destroyed){this.viewState.state=o;return}let r=this.observer.delayedAndroidKey,a=null;if(r?(this.observer.clearDelayedAndroidKey(),a=this.observer.readChange(),(a&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(a=null)):this.observer.clear(),o.facet(J.phrases)!=this.state.facet(J.phrases))return this.setState(o);n=co.create(this,o,e);let l=this.viewState.scrollTarget;try{this.updateState=2;for(let c of e){if(l&&(l=l.map(c.changes)),c.scrollIntoView){let{main:d}=c.state.selection;l=new lo(d.empty?d:A.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of c.effects)d.is(pd)&&(l=d.value)}this.viewState.update(n,l),this.bidiCache=uo.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Si)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(gn)!=n.state.facet(gn)&&(this.viewState.mustMeasureContent=!0),(t||i||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let c of this.state.facet(Sa))c(n);a&&!Cm(this,a)&&r.force&&ei(this.contentDOM,r.key,r.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Id(e),this.plugins=e.facet(ki).map(i=>new yr(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new gd(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ki),i=e.state.facet(ki);if(t!=i){let n=[];for(let o of i){let r=t.indexOf(o);if(r<0)n.push(new yr(o));else{let a=this.plugins[r];a.mustUpdate=e,n.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:n,clientHeight:o}=this.scrollDOM,r=n>i-o-4?i:n;try{for(let a=0;;a++){this.updateState=1;let l=this.viewport,c=this.viewState.lineBlockAtHeight(r),d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];d&4||([this.measureRequests,u]=[u,this.measureRequests]);let h=u.map(g=>{try{return g.read(this)}catch(v){return lt(this.state,v),Md}}),p=co.create(this,this.state,[]),f=!1,w=!1;p.flags|=d,t?t.flags|=d:t=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),f=this.docView.update(p));for(let g=0;g<u.length;g++)if(h[g]!=Md)try{let v=u[g];v.write&&v.write(h[g],this)}catch(v){lt(this.state,v)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,w=!0;else{let g=this.viewState.lineBlockAt(c.from).top-c.top;(g>1||g<-1)&&(this.scrollDOM.scrollTop+=g,w=!0)}if(f&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!w&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Sa))a(t)}get themeClasses(){return Aa+" "+(this.state.facet(Ia)?Sm:km)+" "+this.state.facet(gn)}updateAttrs(){let e=Wd(this,am,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Xo)?"true":"false",class:"cm-content",style:`${B.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Wd(this,lm,t);let i=this.observer.ignore(()=>{let n=Ta(this.contentDOM,this.contentAttrs,t),o=Ta(this.dom,this.editorAttrs,e);return n||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(z.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Si),cs.mount(this.root,this.styleModules.concat(BS).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return _r(this,e,bd(this,e,t,i))}moveByGroup(e,t){return _r(this,e,bd(this,e,t,i=>pS(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return hS(this,e,t,i)}moveVertically(e,t,i){return _r(this,e,fS(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),wm(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),o=this.bidiSpans(n),r=o[ti.find(o,e-n.from,-1,t)];return vl(i,r.dir==Te.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(rm)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>qS)return hm(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=Kk(e.text,t);return this.bidiCache.push(new uo(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||B.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Vf(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return pd.of(new lo(typeof e=="number"?A.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Ve.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=cs.newName(),n=[gn.of(i),Si.of(Ra(`.${i}`,e))];return t&&t.dark&&n.push(Ia.of(!0)),n}static baseTheme(e){return en.lowest(Si.of(Ra("."+Aa,e,Em)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&de.get(i)||de.get(e);return((t=n==null?void 0:n.rootView)===null||t===void 0?void 0:t.view)||null}}z.styleModule=Si;z.inputHandler=om;z.perLineTextDirection=rm;z.exceptionSink=nm;z.updateListener=Sa;z.editable=Xo;z.mouseSelectionStyle=im;z.dragMovesSelection=sm;z.clickAddsSelectionRange=tm;z.decorations=Hi;z.atomicRanges=cm;z.scrollMargins=dm;z.darkTheme=Ia;z.contentAttributes=lm;z.editorAttributes=am;z.lineWrapping=z.contentAttributes.of({class:"cm-lineWrapping"});z.announce=X.define();const qS=4096,Md={};class uo{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Te.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let r=e[o];r.dir==n&&!t.touchesRange(r.from,r.to)&&i.push(new uo(t.mapPos(r.from,1),t.mapPos(r.to,-1),r.dir,r.order))}return i}}function Wd(s,e,t){for(let i=s.state.facet(e),n=i.length-1;n>=0;n--){let o=i[n],r=typeof o=="function"?o(s):o;r&&$a(r,t)}return t}const XS=B.mac?"mac":B.windows?"win":B.linux?"linux":"key";function YS(s,e){const t=s.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,o,r,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))r=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),r&&(i="Shift-"+i),i}function wn(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const ZS=en.default(z.domEventHandlers({keydown(s,e){return tE(KS(e.state),s,e,"editor")}})),Yo=U.define({enables:ZS}),Ld=new WeakMap;function KS(s){let e=s.facet(Yo),t=Ld.get(e);return t||Ld.set(e,t=eE(e.reduce((i,n)=>i.concat(n),[]))),t}let es=null;const JS=4e3;function eE(s,e=XS){let t=Object.create(null),i=Object.create(null),n=(r,a)=>{let l=i[r];if(l==null)i[r]=a;else if(l!=a)throw new Error("Key binding "+r+" is used both as a regular binding and as a multi-stroke prefix")},o=(r,a,l,c)=>{var d,u;let h=t[r]||(t[r]=Object.create(null)),p=a.split(/ (?!$)/).map(g=>YS(g,e));for(let g=1;g<p.length;g++){let v=p.slice(0,g).join(" ");n(v,!0),h[v]||(h[v]={preventDefault:!0,run:[y=>{let S=es={view:y,prefix:v,scope:r};return setTimeout(()=>{es==S&&(es=null)},JS),!0}]})}let f=p.join(" ");n(f,!1);let w=h[f]||(h[f]={preventDefault:!1,run:((u=(d=h._any)===null||d===void 0?void 0:d.run)===null||u===void 0?void 0:u.slice())||[]});l&&w.run.push(l),c&&(w.preventDefault=!0)};for(let r of s){let a=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let c of a){let d=t[c]||(t[c]=Object.create(null));d._any||(d._any={preventDefault:!1,run:[]});for(let u in d)d[u].run.push(r.any)}let l=r[e]||r.key;if(!!l)for(let c of a)o(c,l,r.run,r.preventDefault),r.shift&&o(c,"Shift-"+l,r.shift,r.preventDefault)}return t}function tE(s,e,t,i){let n=Rk(e),o=je(n,0),r=ht(o)==n.length&&n!=" ",a="",l=!1;es&&es.view==t&&es.scope==i&&(a=es.prefix+" ",(l=vm.indexOf(e.keyCode)<0)&&(es=null));let c=new Set,d=f=>{if(f){for(let w of f.run)if(!c.has(w)&&(c.add(w),w(t,e)))return!0;f.preventDefault&&(l=!0)}return!1},u=s[i],h,p;if(u){if(d(u[a+wn(n,e,!r)]))return!0;if(r&&(e.shiftKey||e.altKey||e.metaKey||o>127)&&(h=ds[e.keyCode])&&h!=n){if(d(u[a+wn(h,e,!0)]))return!0;if(e.shiftKey&&(p=ji[e.keyCode])!=n&&p!=h&&d(u[a+wn(p,e,!1)]))return!0}else if(r&&e.shiftKey&&d(u[a+wn(n,e,!0)]))return!0;if(d(u._any))return!0}return l}const sE=!B.ios,iE={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};sE&&(iE[".cm-line"].caretColor="transparent !important");const Nm=X.define({map(s,e){return s==null?null:e.mapPos(s)}}),Ci=Ne.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,i)=>i.is(Nm)?i.value:t,s)}}),nE=Ve.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(Ci);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(Ci)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let s=this.view.state.field(Ci),e=s!=null&&this.view.coordsAtPos(s);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(s){this.cursor&&(s?(this.cursor.style.left=s.left+"px",this.cursor.style.top=s.top+"px",this.cursor.style.height=s.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(Ci)!=s&&this.view.dispatch({effects:Nm.of(s)})}},{eventHandlers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function oE(){return[Ci,nE]}function Qd(s,e,t,i,n){e.lastIndex=0;for(let o=s.iterRange(t,i),r=t,a;!o.next().done;r+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)n(r+a.index,a)}function rE(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let i=[];for(let{from:n,to:o}of t)n=Math.max(s.state.doc.lineAt(n).from,n-e),o=Math.min(s.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=o:i.push({from:n,to:o});return i}class aE{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:o,maxLength:r=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(a,l,c,d)=>n(d,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,d)=>{let u=i(a,l,c);u&&d(c,c+a[0].length,u)};else if(i)this.addMatch=(a,l,c,d)=>d(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=r}createDeco(e){let t=new Ds,i=t.add.bind(t);for(let{from:n,to:o}of rE(e,this.maxLength))Qd(e.state.doc,this.regexp,n,o,(r,a)=>this.addMatch(a,e,r,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((o,r,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),n=Math.max(l,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let o of e.visibleRanges){let r=Math.max(o.from,i),a=Math.min(o.to,n);if(a>r){let l=e.state.doc.lineAt(r),c=l.to<a?e.state.doc.lineAt(a):l,d=Math.max(o.from,l.from),u=Math.min(o.to,c.to);if(this.boundary){for(;r>l.from;r--)if(this.boundary.test(l.text[r-1-l.from])){d=r;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){u=a;break}}let h=[],p,f=(w,g,v)=>h.push(v.range(w,g));if(l==c)for(this.regexp.lastIndex=d-l.from;(p=this.regexp.exec(l.text))&&p.index<u-l.from;)this.addMatch(p,e,p.index+l.from,f);else Qd(e.state.doc,this.regexp,d,u,(w,g)=>this.addMatch(g,e,w,f));t=t.update({filterFrom:d,filterTo:u,filter:(w,g)=>w<d||g>u,add:h})}}return t}}const Ma=/x/.unicode!=null?"gu":"g",lE=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Ma),cE={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xr=null;function dE(){var s;if(xr==null&&typeof document!="undefined"&&document.body){let e=document.body.style;xr=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return xr||!1}const zn=U.define({combine(s){let e=ps(s,{render:null,specialChars:lE,addSpecialChars:null});return(e.replaceTabs=!dE())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Ma)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Ma)),e}});function uE(s={}){return[zn.of(s),hE()]}let Bd=null;function hE(){return Bd||(Bd=Ve.fromClass(class{constructor(s){this.view=s,this.decorations=H.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(zn)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new aE({regexp:s.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,o=je(e[0],0);if(o==9){let r=n.lineAt(i),a=t.state.tabSize,l=yl(r.text,a,i-r.from);return H.replace({widget:new gE((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=H.replace({widget:new mE(s,o)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(zn);s.startState.facet(zn)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const pE="\u2022";function fE(s){return s>=32?pE:s==10?"\u2424":String.fromCharCode(9216+s)}class mE extends Yt{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=fE(this.code),i=e.state.phrase("Control character")+" "+(cE[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class gE extends Yt{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function wE(){return vE}const yE=H.line({class:"cm-activeLine"}),vE=Ve.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){let n=s.lineBlockAt(i.head);n.from>e&&(t.push(yE.range(n.from)),e=n.from)}return H.set(t)}},{decorations:s=>s.decorations}),$r="-10000px";class Pm{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(n=>n),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),n=i.filter(r=>r);if(i===this.input){for(let r of this.tooltipViews)r.update&&r.update(e);return!1}let o=[];for(let r=0;r<n.length;r++){let a=n[r],l=-1;if(!!a){for(let c=0;c<this.tooltips.length;c++){let d=this.tooltips[c];d&&d.create==a.create&&(l=c)}if(l<0)o[r]=this.createTooltipView(a);else{let c=o[r]=this.tooltipViews[l];c.update&&c.update(e)}}}for(let r of this.tooltipViews)o.indexOf(r)<0&&(r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r));return this.input=i,this.tooltips=n,this.tooltipViews=o,!0}}function _E(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Tr=U.define({combine:s=>{var e,t,i;return{position:B.ios?"absolute":((e=s.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=s.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||_E}}}),Dm=Ve.fromClass(class{constructor(s){this.view=s,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(Tr);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Pm(s,Zo,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s);e&&this.observeIntersection();let t=e||s.geometryChanged,i=s.state.facet(Tr);if(i.position!=this.position){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s){let e=s.create(this.view);if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=$r,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var s,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(s=t.destroy)===null||s===void 0||s.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect();return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Tr).tooltipSpace(this.view)}}writeMeasure(s){let{editor:e,space:t}=s,i=[];for(let n=0;n<this.manager.tooltips.length;n++){let o=this.manager.tooltips[n],r=this.manager.tooltipViews[n],{dom:a}=r,l=s.pos[n],c=s.size[n];if(!l||l.bottom<=Math.max(e.top,t.top)||l.top>=Math.min(e.bottom,t.bottom)||l.right<Math.max(e.left,t.left)-.1||l.left>Math.min(e.right,t.right)+.1){a.style.top=$r;continue}let d=o.arrow?r.dom.querySelector(".cm-tooltip-arrow"):null,u=d?7:0,h=c.right-c.left,p=c.bottom-c.top,f=r.offset||bE,w=this.view.textDirection==Te.LTR,g=c.width>t.right-t.left?w?t.left:t.right-c.width:w?Math.min(l.left-(d?14:0)+f.x,t.right-h):Math.max(t.left,l.left-h+(d?14:0)-f.x),v=!!o.above;!o.strictSide&&(v?l.top-(c.bottom-c.top)-f.y<t.top:l.bottom+(c.bottom-c.top)+f.y>t.bottom)&&v==t.bottom-l.bottom>l.top-t.top&&(v=!v);let y=v?l.top-p-u-f.y:l.bottom+u+f.y,S=g+h;if(r.overlap!==!0)for(let T of i)T.left<S&&T.right>g&&T.top<y+p&&T.bottom>y&&(y=v?T.top-p-2-u:T.bottom+u+2);this.position=="absolute"?(a.style.top=y-s.parent.top+"px",a.style.left=g-s.parent.left+"px"):(a.style.top=y+"px",a.style.left=g+"px"),d&&(d.style.left=`${l.left+(w?f.x:-f.x)-(g+14-7)}px`),r.overlap!==!0&&i.push({left:g,top:y,right:S,bottom:y+p}),a.classList.toggle("cm-tooltip-above",v),a.classList.toggle("cm-tooltip-below",!v),r.positioned&&r.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=$r}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),OE=z.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),bE={x:0,y:0},Zo=U.define({enables:[Dm,OE]}),ho=U.define();class $l{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Pm(e,ho,t=>this.createHostedView(t))}static create(e){return new $l(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const xE=Zo.compute([ho],s=>{let e=s.facet(ho).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:$l.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class $E{constructor(e,t,i,n,o){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let n=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(a=>a.from<=t&&a.to>=t),o=n&&n.dir==Te.RTL?-1:1,r=this.source(this.view,t,e.x<i.left?-o:o);if(r!=null&&r.then){let a=this.pending={pos:t};r.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>lt(this.view.state,l,"hover tooltip"))}else r&&this.view.dispatch({effects:this.setHover.of(r)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!TE(this.lastMove.target)||this.pending){let{pos:n}=i||this.pending,o=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:n;(n==o?this.view.posAtCoords(this.lastMove)!=n:!kE(this.view,n,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function TE(s){for(let e=s;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function kE(s,e,t,i,n,o){let r=document.createRange(),a=s.domAtPos(e),l=s.domAtPos(t);r.setEnd(l.node,l.offset),r.setStart(a.node,a.offset);let c=r.getClientRects();r.detach();for(let d=0;d<c.length;d++){let u=c[d];if(Math.max(u.top-n,n-u.bottom,u.left-i,i-u.right)<=o)return!0}return!1}function SE(s,e={}){let t=X.define(),i=Ne.define({create(){return null},update(n,o){if(n&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,n)))return null;if(n&&o.docChanged){let r=o.changes.mapPos(n.pos,-1,Ae.TrackDel);if(r==null)return null;let a=Object.assign(Object.create(null),n);a.pos=r,n.end!=null&&(a.end=o.changes.mapPos(n.end)),n=a}for(let r of o.effects)r.is(t)&&(n=r.value),r.is(CE)&&(n=null);return n},provide:n=>ho.from(n)});return[i,Ve.define(n=>new $E(n,s,i,t,e.hoverTime||300)),xE]}function EE(s,e){let t=s.plugin(Dm);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const CE=X.define(),Ud=U.define({combine(s){let e,t;for(let i of s)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}}),NE=Ve.fromClass(class{constructor(s){this.input=s.state.facet(Wa),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(Ud);this.top=new yn(s,!0,e.topContainer),this.bottom=new yn(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(Ud);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new yn(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new yn(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(Wa);if(t!=this.input){let i=t.filter(l=>l),n=[],o=[],r=[],a=[];for(let l of i){let c=this.specs.indexOf(l),d;c<0?(d=l(s.view),a.push(d)):(d=this.panels[c],d.update&&d.update(s)),n.push(d),(d.top?o:r).push(d)}this.specs=i,this.panels=n,this.top.sync(o),this.bottom.sync(r);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>z.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class yn{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Vd(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Vd(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Vd(s){let e=s.nextSibling;return s.remove(),e}const Wa=U.define({enables:NE});class Ut extends Ps{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ut.prototype.elementClass="";Ut.prototype.toDOM=void 0;Ut.prototype.mapMode=Ae.TrackBefore;Ut.prototype.startSide=Ut.prototype.endSide=-1;Ut.prototype.point=!0;const Gn=U.define(),PE={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ee.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Mi=U.define();function Im(s){return[Am(),Mi.of(Object.assign(Object.assign({},PE),s))]}const La=U.define({combine:s=>s.some(e=>e)});function Am(s){let e=[DE];return s&&s.fixed===!1&&e.push(La.of(!0)),e}const DE=Ve.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=s.state.facet(Mi).map(e=>new jd(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(La),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(La)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let t=ee.iter(this.view.state.facet(Gn),this.view.viewport.from),i=[],n=this.gutters.map(o=>new IE(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let r;if(Array.isArray(o.type)){for(let a of o.type)if(a.type==ye.Text){r=a;break}}else r=o.type==ye.Text?o:void 0;if(!!r){i.length&&(i=[]),Rm(t,i,o.from);for(let a of n)a.line(this.view,r,i)}}for(let o of n)o.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(Mi),t=s.state.facet(Mi),i=s.docChanged||s.heightChanged||s.viewportChanged||!ee.eq(s.startState.facet(Gn),s.state.facet(Gn),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let o of t){let r=e.indexOf(o);r<0?n.push(new jd(this.view,o)):(this.gutters[r].update(s),n.push(this.gutters[r]))}for(let o of this.gutters)o.dom.remove(),n.indexOf(o)<0&&o.destroy();for(let o of n)this.dom.appendChild(o.dom);this.gutters=n}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>z.scrollMargins.of(e=>{let t=e.plugin(s);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Te.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function Fd(s){return Array.isArray(s)?s:[s]}function Rm(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class IE{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=ee.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),Rm(this.cursor,this.localMarkers,t.from);let n=i.length?this.localMarkers.concat(i):this.localMarkers,o=this.gutter.config.lineMarker(e,t,n);o&&n.unshift(o);let r=this.gutter;if(n.length==0&&!r.config.renderEmptyElements)return;let a=t.top-this.height;if(this.i==r.elements.length){let l=new Mm(e,t.height,a,n);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,t.height,a,n);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class jd{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let o=e.lineBlockAtHeight(n.clientY-e.documentTop);t.domEventHandlers[i](e,o,n)&&n.preventDefault()});this.markers=Fd(t.markers(e)),t.initialSpacer&&(this.spacer=new Mm(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Fd(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!ee.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Mm{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),AE(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let o=0,r=0;;){let a=r,l=o<t.length?t[o++]:null,c=!1;if(l){let d=l.elementClass;d&&(i+=" "+d);for(let u=r;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;r<a;){let d=this.markers[r++];if(d.toDOM){d.destroy(n);let u=n.nextSibling;n.remove(),n=u}}if(!l)break;l.toDOM&&(c?n=n.nextSibling:this.dom.insertBefore(l.toDOM(e),n)),c&&r++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function AE(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const RE=U.define(),Gs=U.define({combine(s){return ps(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let o=i[n],r=t[n];i[n]=o?(a,l,c)=>o(a,l,c)||r(a,l,c):r}return i}})}});class kr extends Ut{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Sr(s,e){return s.state.facet(Gs).formatNumber(e,s.state)}const ME=Mi.compute([Gs],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(RE)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new kr(Sr(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Gs)!=e.state.facet(Gs),initialSpacer(e){return new kr(Sr(e,zd(e.state.doc.lines)))},updateSpacer(e,t){let i=Sr(t.view,zd(t.view.state.doc.lines));return i==e.number?e:new kr(i)},domEventHandlers:s.facet(Gs).domEventHandlers}));function WE(s={}){return[Gs.of(s),Am(),ME]}function zd(s){let e=9;for(;e<s;)e=e*10+9;return e}const LE=new class extends Ut{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},QE=Gn.compute(["selection"],s=>{let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.head).from;n>t&&(t=n,e.push(LE.range(n)))}return ee.of(e)});function BE(){return QE}const Wm=1024;let UE=0;class Er{constructor(e,t){this.from=e,this.to=t}}class K{constructor(e={}){this.id=UE++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Je.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}K.closedBy=new K({deserialize:s=>s.split(" ")});K.openedBy=new K({deserialize:s=>s.split(" ")});K.group=new K({deserialize:s=>s.split(" ")});K.contextHash=new K({perNode:!0});K.lookAhead=new K({perNode:!0});K.mounted=new K({perNode:!0});const VE=Object.create(null);class Je{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):VE,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Je(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(n)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(K.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(K.group),o=-1;o<(n?n.length:0);o++){let r=t[o<0?i.name:n[o]];if(r)return r}}}}Je.none=new Je("",Object.create(null),0,8);class Tl{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let o of e){let r=o(i);r&&(n||(n=Object.assign({},i.props)),n[r[0].id]=r[1])}t.push(n?new Je(i.name,n,i.id,i.flags):i)}return new Tl(t)}}const vn=new WeakMap,Gd=new WeakMap;var ke;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(ke||(ke={}));class Oe{constructor(e,t,i,n,o){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,o&&o.length){this.props=Object.create(null);for(let[r,a]of o)this.props[typeof r=="number"?r:r.id]=a}}toString(){let e=this.prop(K.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new mo(this.topNode,e)}cursorAt(e,t=0,i=0){let n=vn.get(this)||this.topNode,o=new mo(n);return o.moveTo(e,t),vn.set(this,o._tree),o}get topNode(){return new $t(this,0,0,null)}resolve(e,t=0){let i=ai(vn.get(this)||this.topNode,e,t,!1);return vn.set(this,i),i}resolveInner(e,t=0){let i=ai(Gd.get(this)||this.topNode,e,t,!0);return Gd.set(this,i),i}iterate(e){let{enter:t,leave:i,from:n=0,to:o=this.length}=e;for(let r=this.cursor((e.mode||0)|ke.IncludeAnonymous);;){let a=!1;if(r.from<=o&&r.to>=n&&(r.type.isAnonymous||t(r)!==!1)){if(r.firstChild())continue;a=!0}for(;a&&i&&!r.type.isAnonymous&&i(r),!r.nextSibling();){if(!r.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:El(Je.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Oe(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Oe(Je.none,t,i,n)))}static build(e){return jE(e)}}Oe.empty=new Oe(Je.none,[],[],0);class kl{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new kl(this.buffer,this.index)}}class Ms{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Je.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],o=n.name;if(/\W/.test(o)&&!n.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let r=[];for(;e<i;)r.push(this.childString(e)),e=this.buffer[e+3];return o+"("+r.join(",")+")"}findChild(e,t,i,n,o){let{buffer:r}=this,a=-1;for(let l=e;l!=t&&!(Lm(o,n,r[l+1],r[l+2])&&(a=l,i>0));l=r[l+3]);return a}slice(e,t,i,n){let o=this.buffer,r=new Uint16Array(t-e);for(let a=e,l=0;a<t;)r[l++]=o[a++],r[l++]=o[a++]-i,r[l++]=o[a++]-i,r[l++]=o[a++]-e;return new Ms(r,n-i,this.set)}}function Lm(s,e,t,i){switch(s){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Qm(s,e){let t=s.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(s=t,t=i.prevSibling):t=i}return s}function ai(s,e,t,i){for(var n;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let r=!i&&s instanceof $t&&s.index<0?null:s.parent;if(!r)return s;s=r}let o=i?0:ke.IgnoreOverlays;if(i)for(let r=s,a=r.parent;a;r=a,a=r.parent)r instanceof $t&&r.index<0&&((n=a.enter(e,t,o))===null||n===void 0?void 0:n.from)!=r.from&&(s=a);for(;;){let r=s.enter(e,t,o);if(!r)return s;s=r}}class $t{constructor(e,t,i,n){this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,o=0){for(let r=this;;){for(let{children:a,positions:l}=r._tree,c=t>0?a.length:-1;e!=c;e+=t){let d=a[e],u=l[e]+r.from;if(!!Lm(n,i,u,u+d.length)){if(d instanceof Ms){if(o&ke.ExcludeBuffers)continue;let h=d.findChild(0,d.buffer.length,t,i-u,n);if(h>-1)return new Rt(new FE(r,d,e,u),null,h)}else if(o&ke.IncludeAnonymous||!d.type.isAnonymous||Sl(d)){let h;if(!(o&ke.IgnoreMounts)&&d.props&&(h=d.prop(K.mounted))&&!h.overlay)return new $t(h.tree,u,e,r);let p=new $t(d,u,e,r);return o&ke.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?d.children.length-1:0,t,i,n)}}}if(o&ke.IncludeAnonymous||!r.type.isAnonymous||(r.index>=0?e=r.index+t:e=t<0?-1:r._parent._tree.children.length,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&ke.IgnoreOverlays)&&(n=this._tree.prop(K.mounted))&&n.overlay){let o=e-this.from;for(let{from:r,to:a}of n.overlay)if((t>0?r<=o:r<o)&&(t<0?a>=o:a>o))return new $t(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new mo(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ai(this,e,t,!1)}resolveInner(e,t=0){return ai(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Qm(this,e)}getChild(e,t=null,i=null){let n=po(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return po(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return fo(this,e)}}function po(s,e,t,i){let n=s.cursor(),o=[];if(!n.firstChild())return o;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return o}for(;;){if(i!=null&&n.type.is(i))return o;if(n.type.is(e)&&o.push(n.node),!n.nextSibling())return i==null?o:[]}}function fo(s,e,t=e.length-1){for(let i=s.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class FE{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Rt{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new Rt(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&ke.ExcludeBuffers)return null;let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Rt(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Rt(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Rt(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new mo(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,o=i.buffer[this.index+3];if(o>n){let r=i.buffer[this.index+1],a=i.buffer[this.index+2];e.push(i.slice(n,o,r,a)),t.push(0)}return new Oe(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ai(this,e,t,!1)}resolveInner(e,t=0){return ai(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Qm(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=po(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return po(this,e,t,i)}get node(){return this}matchContext(e){return fo(this,e)}}class mo{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof $t)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof $t?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,o=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&ke.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ke.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ke.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(n.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,r=e<0?-1:i._tree.children.length;o!=r;o+=e){let a=i._tree.children[o];if(this.mode&ke.IncludeAnonymous||a instanceof Ms||!a.type.isAnonymous||Sl(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,o=this.stack.length;o>=0;){for(let r=e;r;r=r._parent)if(r.index==n){if(n==this.index)return r;t=r,i=o+1;break e}n=this.stack[--o]}}for(let n=i;n<this.stack.length;n++)t=new Rt(this.buffer,t,this.stack[n]);return this.bufferNode=new Rt(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;n&&t&&t(this),n=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return fo(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,o=this.stack.length-1;n>=0;o--){if(o<0)return fo(this.node,e,n);let r=i[t.buffer[this.stack[o]]];if(!r.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}}function Sl(s){return s.children.some(e=>e instanceof Ms||!e.type.isAnonymous||Sl(e))}function jE(s){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=Wm,reused:o=[],minRepeatType:r=i.types.length}=s,a=Array.isArray(t)?new kl(t,t.length):t,l=i.types,c=0,d=0;function u(T,$,D,P,M){let{id:R,start:L,end:G,size:Z}=a,ne=d;for(;Z<0;)if(a.next(),Z==-1){let le=o[R];D.push(le),P.push(L-T);return}else if(Z==-3){c=R;return}else if(Z==-4){d=R;return}else throw new RangeError(`Unrecognized record size: ${Z}`);let he=l[R],_e,Y,te=L-T;if(G-L<=n&&(Y=w(a.pos-$,M))){let le=new Uint16Array(Y.size-Y.skip),x=a.pos-Y.size,b=le.length;for(;a.pos>x;)b=g(Y.start,le,b);_e=new Ms(le,G-Y.start,i),te=Y.start-T}else{let le=a.pos-Z;a.next();let x=[],b=[],C=R>=r?R:-1,W=0,Q=G;for(;a.pos>le;)C>=0&&a.id==C&&a.size>=0?(a.end<=Q-n&&(p(x,b,L,W,a.end,Q,C,ne),W=x.length,Q=a.end),a.next()):u(L,le,x,b,C);if(C>=0&&W>0&&W<x.length&&p(x,b,L,W,L,Q,C,ne),x.reverse(),b.reverse(),C>-1&&W>0){let q=h(he);_e=El(he,x,b,0,x.length,0,G-L,q,q)}else _e=f(he,x,b,G-L,ne-G)}D.push(_e),P.push(te)}function h(T){return($,D,P)=>{let M=0,R=$.length-1,L,G;if(R>=0&&(L=$[R])instanceof Oe){if(!R&&L.type==T&&L.length==P)return L;(G=L.prop(K.lookAhead))&&(M=D[R]+L.length+G)}return f(T,$,D,P,M)}}function p(T,$,D,P,M,R,L,G){let Z=[],ne=[];for(;T.length>P;)Z.push(T.pop()),ne.push($.pop()+D-M);T.push(f(i.types[L],Z,ne,R-M,G-R)),$.push(M-D)}function f(T,$,D,P,M=0,R){if(c){let L=[K.contextHash,c];R=R?[L].concat(R):[L]}if(M>25){let L=[K.lookAhead,M];R=R?[L].concat(R):[L]}return new Oe(T,$,D,P,R)}function w(T,$){let D=a.fork(),P=0,M=0,R=0,L=D.end-n,G={size:0,start:0,skip:0};e:for(let Z=D.pos-T;D.pos>Z;){let ne=D.size;if(D.id==$&&ne>=0){G.size=P,G.start=M,G.skip=R,R+=4,P+=4,D.next();continue}let he=D.pos-ne;if(ne<0||he<Z||D.start<L)break;let _e=D.id>=r?4:0,Y=D.start;for(D.next();D.pos>he;){if(D.size<0)if(D.size==-3)_e+=4;else break e;else D.id>=r&&(_e+=4);D.next()}M=Y,P+=ne,R+=_e}return($<0||P==T)&&(G.size=P,G.start=M,G.skip=R),G.size>4?G:void 0}function g(T,$,D){let{id:P,start:M,end:R,size:L}=a;if(a.next(),L>=0&&P<r){let G=D;if(L>4){let Z=a.pos-(L-4);for(;a.pos>Z;)D=g(T,$,D)}$[--D]=G,$[--D]=R-T,$[--D]=M-T,$[--D]=P}else L==-3?c=P:L==-4&&(d=P);return D}let v=[],y=[];for(;a.pos>0;)u(s.start||0,s.bufferStart||0,v,y,-1);let S=(e=s.length)!==null&&e!==void 0?e:v.length?y[0]+v[0].length:0;return new Oe(l[s.topID],v.reverse(),y.reverse(),S)}const Hd=new WeakMap;function Hn(s,e){if(!s.isAnonymous||e instanceof Ms||e.type!=s)return 1;let t=Hd.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=s||!(i instanceof Oe)){t=1;break}t+=Hn(s,i)}Hd.set(e,t)}return t}function El(s,e,t,i,n,o,r,a,l){let c=0;for(let f=i;f<n;f++)c+=Hn(s,e[f]);let d=Math.ceil(c*1.5/8),u=[],h=[];function p(f,w,g,v,y){for(let S=g;S<v;){let T=S,$=w[S],D=Hn(s,f[S]);for(S++;S<v;S++){let P=Hn(s,f[S]);if(D+P>=d)break;D+=P}if(S==T+1){if(D>d){let P=f[T];p(P.children,P.positions,0,P.children.length,w[T]+y);continue}u.push(f[T])}else{let P=w[S-1]+f[S-1].length-$;u.push(El(s,f,w,T,S,$,P,null,l))}h.push($+y-o)}}return p(e,t,i,n,0),(a||l)(u,h,r)}class zE{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let n=this.map.get(e);n||this.map.set(e,n=new Map),n.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof Rt?this.setBuffer(e.context.buffer,e.index,t):e instanceof $t&&this.map.set(e.tree,t)}get(e){return e instanceof Rt?this.getBuffer(e.context.buffer,e.index):e instanceof $t?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ks{constructor(e,t,i,n,o=!1,r=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(o?1:0)|(r?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new ks(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&n.push(o);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],o=1,r=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let d=a<t.length?t[a]:null,u=d?d.fromA:1e9;if(u-l>=i)for(;r&&r.from<u;){let h=r;if(l>=h.from||u<=h.to||c){let p=Math.max(h.from,l)-c,f=Math.min(h.to,u)-c;h=p>=f?null:new ks(p,f,h.tree,h.offset+c,a>0,!!d)}if(h&&n.push(h),r.to>u)break;r=o<e.length?e[o++]:null}if(!d)break;l=d.toA,c=d.toA-d.toB}return n}}class Bm{startParse(e,t,i){return typeof e=="string"&&(e=new GE(e)),i=i?i.length?i.map(n=>new Er(n.from,n.to)):[new Er(0,0)]:[new Er(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let o=n.advance();if(o)return o}}}class GE{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new K({perNode:!0});class go{constructor(e,t,i,n,o,r,a,l,c,d=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=o,this.score=r,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=d,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new go(e,[],t,i,i,0,[],0,n?new qd(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.p,o=n.dynamicPrecedence(i);if(o&&(this.score+=o),t==0){this.pushState(n.getGoto(this.state,i,!0),this.reducePos),i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let r=this.stack.length-(t-1)*3-(e&262144?6:0),a=this.stack[r-2],l=this.stack[r-1],c=this.bufferBase+this.buffer.length-l;if(i<n.minRepeatTerm||e&131072){let d=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,a,d,c+4,!0)}if(e&262144)this.state=this.stack[r];else{let d=this.stack[r-3];this.state=n.getGoto(d,i,!0)}for(;this.stack.length>r;)this.stack.pop();this.reduceContext(i,a)}storeNode(e,t,i,n=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let r=this,a=this.buffer.length;if(a==0&&r.parent&&(a=r.bufferBase-r.parent.bufferBase,r=r.parent),a>0&&r.buffer[a-4]==0&&r.buffer[a-1]>-1){if(t==i)return;if(r.buffer[a-2]>=t){r.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,n);else{let r=this.buffer.length;if(r>0&&this.buffer[r-4]!=0)for(;r>0&&this.buffer[r-2]>i;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,n>4&&(n-=4);this.buffer[r]=e,this.buffer[r+1]=t,this.buffer[r+2]=i,this.buffer[r+3]=n}}shift(e,t,i){let n=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:r}=this.p;(i>this.pos||t<=r.maxNode)&&(this.pos=i,r.stateFlag(o,1)||(this.reducePos=i)),this.pushState(o,n),this.shiftContext(t,n),t<=r.maxNode&&this.buffer.push(t,n,i,4)}else this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new go(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new HE(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let n=[];for(let o=0,r;o<t.length;o+=2)(r=t[o+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[o],r);if(this.stack.length<120)for(let o=0;n.length<4<<1&&o<t.length;o+=2){let r=t[o+1];n.some((a,l)=>l&1&&a==r)||n.push(t[o],r)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let o=t[n+1];if(o==this.state)continue;let r=this.split();r.pushState(o,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(t[n],this.pos),r.score-=200,i.push(r)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,o=this.stack.length-i*3;if(o<0||t.getGoto(this.stack[o],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new qd(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class qd{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Xd;(function(s){s[s.Insert=200]="Insert",s[s.Delete=190]="Delete",s[s.Reduce=100]="Reduce",s[s.MaxNext=4]="MaxNext",s[s.MaxInsertStackDepth=300]="MaxInsertStackDepth",s[s.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(Xd||(Xd={}));class HE{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class wo{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new wo(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new wo(this.stack,this.pos,this.index)}}class qn{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Yd=new qn;class qE{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Yd,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!n)return null;let r=this.ranges[--n];o-=i.from-r.to,i=r}for(;t<0?o>i.to:o>=i.to;){if(n==this.ranges.length-1)return null;let r=this.ranges[++n];o+=r.from-i.to,i=r}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let r=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++r];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Yd,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Xn{constructor(e,t){this.data=e,this.id=t}token(e,t){XE(this.data,e,t,this.id)}}Xn.prototype.contextual=Xn.prototype.fallback=Xn.prototype.extend=!1;class nn{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function XE(s,e,t,i){let n=0,o=1<<i,{parser:r}=t.p,{dialect:a}=r;e:for(;(o&s[n])!=0;){let l=s[n+1];for(let h=n+3;h<l;h+=2)if((s[h+1]&o)>0){let p=s[h];if(a.allows(p)&&(e.token.value==-1||e.token.value==p||r.overrides(p,e.token.value))){e.acceptToken(p);break}}let c=e.next,d=0,u=s[n+2];if(e.next<0&&u>d&&s[l+u*3-3]==65535){n=s[l+u*3-1];continue e}for(;d<u;){let h=d+u>>1,p=l+h+(h<<1),f=s[p],w=s[p+1];if(c<f)u=h;else if(c>=w)d=h+1;else{n=s[p+2],e.advance();continue e}}break}}function _n(s,e=Uint16Array){if(typeof s!="string")return s;let t=null;for(let i=0,n=0;i<s.length;){let o=0;for(;;){let r=s.charCodeAt(i++),a=!1;if(r==126){o=65535;break}r>=92&&r--,r>=34&&r--;let l=r-32;if(l>=46&&(l-=46,a=!0),o+=l,a)break;o*=46}t?t[n++]=o:t=new e(o)}return t}const vt=typeof process!="undefined"&&process.env&&/\bparse\b/.test({}.LOG);let Cr=null;var Zd;(function(s){s[s.Margin=25]="Margin"})(Zd||(Zd={}));function Kd(s,e,t){let i=s.cursor(ke.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(s.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:s.length}}class YE{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Kd(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Kd(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[n],r=this.start[t]+i.positions[n];if(r>e)return this.nextStart=r,null;if(o instanceof Oe){if(r==e){if(r<this.safeFrom)return null;let a=r+o.length;if(a<=this.safeTo){let l=o.prop(K.lookAhead);if(!l||a+l<this.fragment.to)return o}}this.index[t]++,r+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(r),this.index.push(0))}else this.index[t]++,this.nextStart=r+o.length}}}class ZE{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new qn)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:o}=n,r=n.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<o.length;c++){if((1<<c&r)==0)continue;let d=o[c],u=this.tokens[c];if(!(i&&!d.fallback)&&((d.contextual||u.start!=e.pos||u.mask!=r||u.context!=a)&&(this.updateCachedToken(u,d,e),u.mask=r,u.context=a),u.lookAhead>u.end+25&&(l=Math.max(u.lookAhead,l)),u.value!=0)){let h=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!d.extend&&(i=u,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!i&&e.pos==this.stream.end&&(i=new qn,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new qn,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){let n=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(n,e),i),e.value>-1){let{parser:o}=i.p;for(let r=0;r<o.specialized.length;r++)if(o.specialized[r]==e.value){let a=o.specializers[r](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,i,n){for(let o=0;o<n;o+=3)if(this.actions[o]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:o}=e,{parser:r}=e.p,{data:a}=r;for(let l=0;l<2;l++)for(let c=r.stateSlot(o,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=zt(a,c+2);else{n==0&&a[c+1]==2&&(n=this.putAction(zt(a,c+2),t,i,n));break}a[c]==t&&(n=this.putAction(zt(a,c+1),t,i,n))}return n}}var Jd;(function(s){s[s.Distance=5]="Distance",s[s.MaxRemainingPerStep=3]="MaxRemainingPerStep",s[s.MinBufferLengthPrune=500]="MinBufferLengthPrune",s[s.ForceReduceLimit=10]="ForceReduceLimit",s[s.CutDepth=15e3]="CutDepth",s[s.CutTo=9e3]="CutTo"})(Jd||(Jd={}));class KE{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new qE(t,n),this.tokens=new ZE(e,this.stream),this.topTerm=e.top[1];let{from:o}=n[0];this.stacks=[go.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new YE(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,o;for(let r=0;r<e.length;r++){let a=e[r];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{n||(n=[],o=[]),n.push(a);let l=this.tokens.getMainToken(a);o.push(l.value,l.end)}}break}}if(!i.length){let r=n&&tC(n);if(r)return this.stackToTree(r);if(this.parser.strict)throw vt&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let r=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,o,i);if(r)return this.stackToTree(r.forceAll())}if(this.recovering){let r=this.recovering==1?1:this.recovering*3;if(i.length>r)for(i.sort((a,l)=>l.score-a.score);i.length>r;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let r=0;r<i.length-1;r++){let a=i[r];for(let l=r+1;l<i.length;l++){let c=i[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)i.splice(l--,1);else{i.splice(r--,1);continue e}}}}this.minStackPos=i[0].pos;for(let r=1;r<i.length;r++)i[r].pos<this.minStackPos&&(this.minStackPos=i[r].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:o}=this,r=vt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,d=c?e.curContext.hash:0;for(let u=this.fragments.nodeAt(n);u;){let h=this.parser.nodeSet.types[u.type.id]==u.type?o.getGoto(e.state,u.type.id):-1;if(h>-1&&u.length&&(!c||(u.prop(K.contextHash)||0)==d))return e.useNode(u,h),vt&&console.log(r+this.stackID(e)+` (via reuse of ${o.getName(u.type.id)})`),!0;if(!(u instanceof Oe)||u.children.length==0||u.positions[0]>0)break;let p=u.children[0];if(p instanceof Oe&&u.positions[0]==0)u=p;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),vt&&console.log(r+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let d=l[c++],u=l[c++],h=l[c++],p=c==l.length||!i,f=p?e:e.split();if(f.apply(d,u,h),vt&&console.log(r+this.stackID(f)+` (via ${(d&65536)==0?"shift":`reduce of ${o.getName(d&65535)}`} for ${o.getName(u)} @ ${n}${f==e?"":", split"})`),p)return!0;f.pos>n?t.push(f):i.push(f)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return eu(e,t),!0}}runRecovery(e,t,i){let n=null,o=!1;for(let r=0;r<e.length;r++){let a=e[r],l=t[r<<1],c=t[(r<<1)+1],d=vt?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),vt&&console.log(d+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let u=a.split(),h=d;for(let p=0;u.forceReduce()&&p<10&&(vt&&console.log(h+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));p++)vt&&(h=this.stackID(u)+" -> ");for(let p of a.recoverByInsert(l))vt&&console.log(d+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,i);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),vt&&console.log(d+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),eu(a,i)):(!n||n.score<a.score)&&(n=a)}return n}stackToTree(e){return e.close(),Oe.build({buffer:wo.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Cr||(Cr=new WeakMap)).get(e);return t||Cr.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function eu(s,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==s.pos&&i.sameState(s)){e[t].score<s.score&&(e[t]=s);return}}e.push(s)}class JE{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Nr=s=>s;class eC{constructor(e){this.start=e.start,this.shift=e.shift||Nr,this.reduce=e.reduce||Nr,this.reuse=e.reuse||Nr,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class yo extends Bm{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),n=[];for(let a=0;a<t.length;a++)n.push([]);function o(a,l,c){n[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=K[l]);for(let c=1;c<a.length;){let d=a[c++];if(d>=0)o(d,l,a[c++]);else{let u=a[c+-d];for(let h=-d;h>0;h--)o(a[c++],l,u);c++}}}this.nodeSet=new Tl(t.map((a,l)=>Je.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:n[l],top:i.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Wm;let r=_n(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(su),this.states=_n(e.states,Uint32Array),this.data=_n(e.stateData),this.goto=_n(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Xn(r,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new KE(this,e,t,i);for(let o of this.wrappers)n=o(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let o=n[t+1];;){let r=n[o++],a=r&1,l=n[o++];if(a&&i)return l;for(let c=o+(r>>1);o<c;o++)if(n[o]==e)return l;if(a)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let o=this.stateSlot(e,n?2:1),r;;o+=3){if((r=i[o])==65535)if(i[o+1]==1)r=i[o=zt(i,o+2)];else{if(i[o+1]==2)return zt(i,o+2);break}if(r==t||r==0)return zt(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=zt(this.data,i+2);else return!1;if(t==zt(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=zt(this.data,i+2);else break;if((this.data[i+2]&1)==0){let n=this.data[i+1];t.some((o,r)=>r&1&&o==n)||t.push(this.data[i],n)}}return t}overrides(e,t){let i=tu(this.data,this.tokenPrecTable,t);return i<0||tu(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(yo.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(o=>o.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,n)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let r=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[n]=su(r),r})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let r=t.indexOf(o);r>=0&&(i[r]=!0)}let n=null;for(let o=0;o<t.length;o++)if(!i[o])for(let r=this.dialects[t[o]],a;(a=this.data[r++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[a]=1;return new JE(e,i,n)}static deserialize(e){return new yo(e)}}function zt(s,e){return s[e]|s[e+1]<<16}function tu(s,e,t){for(let i=e,n;(n=s[i])!=65535;i++)if(n==t)return i-e;return-1}function tC(s){let e=null;for(let t of s){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function su(s){if(s.external){let e=s.extend?1:0;return(t,i)=>s.external(t,i)<<1|e}return s.get}let sC=0;class Pt{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=sC++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Pt([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new vo;return t=>t.modified.indexOf(e)>-1?t:vo.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}}let iC=0;class vo{constructor(){this.instances=[],this.id=iC++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&nC(t,a.modified));if(i)return i;let n=[],o=new Pt(n,e,t);for(let a of t)a.instances.push(o);let r=oC(t);for(let a of e.set)if(!a.modified.length)for(let l of r)n.push(vo.get(a,l));return o}}function nC(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function oC(s){let e=[[]];for(let t=0;t<s.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(s[t]));return e.sort((t,i)=>i.length-t.length)}function Um(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let o=[],r=2,a=n;for(let u=0;;){if(a=="..."&&u>0&&u+3==n.length){r=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+n);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),u+=h[0].length,u==n.length)break;let p=n[u++];if(u==n.length&&p=="!"){r=0;break}if(p!="/")throw new RangeError("Invalid path: "+n);a=n.slice(u)}let l=o.length-1,c=o[l];if(!c)throw new RangeError("Invalid path: "+n);let d=new _o(i,r,l>0?o.slice(0,l):null);e[c]=d.sort(e[c])}}return Vm.add(e)}const Vm=new K;class _o{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_o.empty=new _o([],2,null);function Fm(s,e){let t=Object.create(null);for(let o of s)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let r of o.tag)t[r.id]=o.class;let{scope:i,all:n=null}=e||{};return{style:o=>{let r=n;for(let a of o)for(let l of a.set){let c=t[l.id];if(c){r=r?r+" "+c:c;break}}return r},scope:i}}function rC(s,e){let t=null;for(let i of s){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function aC(s,e,t,i=0,n=s.length){let o=new lC(i,Array.isArray(e)?e:[e],t);o.highlightRange(s.cursor(),i,n,"",o.highlighters),o.flush(n)}class lC{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,o){let{type:r,from:a,to:l}=e;if(a>=i||l<=t)return;r.isTop&&(o=this.highlighters.filter(p=>!p.scope||p.scope(r)));let c=n,d=cC(e)||_o.empty,u=rC(o,d.tags);if(u&&(c&&(c+=" "),c+=u,d.mode==1&&(n+=(n?" ":"")+u)),this.startSpan(e.from,c),d.opaque)return;let h=e.tree&&e.tree.prop(K.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+a,1),f=this.highlighters.filter(g=>!g.scope||g.scope(h.tree.type)),w=e.firstChild();for(let g=0,v=a;;g++){let y=g<h.overlay.length?h.overlay[g]:null,S=y?y.from+a:l,T=Math.max(t,v),$=Math.min(i,S);if(T<$&&w)for(;e.from<$&&(this.highlightRange(e,T,$,n,o),this.startSpan(Math.min(i,e.to),c),!(e.to>=S||!e.nextSibling())););if(!y||S>i)break;v=y.to+a,v>t&&(this.highlightRange(p.cursor(),Math.max(t,y.from+a),Math.min(i,v),n,f),this.startSpan(v,c))}w&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,o),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function cC(s){let e=s.type.prop(Vm);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const I=Pt.define,On=I(),Kt=I(),iu=I(Kt),nu=I(Kt),Jt=I(),bn=I(Jt),Pr=I(Jt),Nt=I(),fs=I(Nt),kt=I(),St=I(),Qa=I(),yi=I(Qa),xn=I(),k={comment:On,lineComment:I(On),blockComment:I(On),docComment:I(On),name:Kt,variableName:I(Kt),typeName:iu,tagName:I(iu),propertyName:nu,attributeName:I(nu),className:I(Kt),labelName:I(Kt),namespace:I(Kt),macroName:I(Kt),literal:Jt,string:bn,docString:I(bn),character:I(bn),attributeValue:I(bn),number:Pr,integer:I(Pr),float:I(Pr),bool:I(Jt),regexp:I(Jt),escape:I(Jt),color:I(Jt),url:I(Jt),keyword:kt,self:I(kt),null:I(kt),atom:I(kt),unit:I(kt),modifier:I(kt),operatorKeyword:I(kt),controlKeyword:I(kt),definitionKeyword:I(kt),moduleKeyword:I(kt),operator:St,derefOperator:I(St),arithmeticOperator:I(St),logicOperator:I(St),bitwiseOperator:I(St),compareOperator:I(St),updateOperator:I(St),definitionOperator:I(St),typeOperator:I(St),controlOperator:I(St),punctuation:Qa,separator:I(Qa),bracket:yi,angleBracket:I(yi),squareBracket:I(yi),paren:I(yi),brace:I(yi),content:Nt,heading:fs,heading1:I(fs),heading2:I(fs),heading3:I(fs),heading4:I(fs),heading5:I(fs),heading6:I(fs),contentSeparator:I(Nt),list:I(Nt),quote:I(Nt),emphasis:I(Nt),strong:I(Nt),link:I(Nt),monospace:I(Nt),strikethrough:I(Nt),inserted:I(),deleted:I(),changed:I(),invalid:I(),meta:xn,documentMeta:I(xn),annotation:I(xn),processingInstruction:I(xn),definition:Pt.defineModifier(),constant:Pt.defineModifier(),function:Pt.defineModifier(),standard:Pt.defineModifier(),local:Pt.defineModifier(),special:Pt.defineModifier()};Fm([{tag:k.link,class:"tok-link"},{tag:k.heading,class:"tok-heading"},{tag:k.emphasis,class:"tok-emphasis"},{tag:k.strong,class:"tok-strong"},{tag:k.keyword,class:"tok-keyword"},{tag:k.atom,class:"tok-atom"},{tag:k.bool,class:"tok-bool"},{tag:k.url,class:"tok-url"},{tag:k.labelName,class:"tok-labelName"},{tag:k.inserted,class:"tok-inserted"},{tag:k.deleted,class:"tok-deleted"},{tag:k.literal,class:"tok-literal"},{tag:k.string,class:"tok-string"},{tag:k.number,class:"tok-number"},{tag:[k.regexp,k.escape,k.special(k.string)],class:"tok-string2"},{tag:k.variableName,class:"tok-variableName"},{tag:k.local(k.variableName),class:"tok-variableName tok-local"},{tag:k.definition(k.variableName),class:"tok-variableName tok-definition"},{tag:k.special(k.variableName),class:"tok-variableName2"},{tag:k.definition(k.propertyName),class:"tok-propertyName tok-definition"},{tag:k.typeName,class:"tok-typeName"},{tag:k.namespace,class:"tok-namespace"},{tag:k.className,class:"tok-className"},{tag:k.macroName,class:"tok-macroName"},{tag:k.propertyName,class:"tok-propertyName"},{tag:k.operator,class:"tok-operator"},{tag:k.comment,class:"tok-comment"},{tag:k.meta,class:"tok-meta"},{tag:k.invalid,class:"tok-invalid"},{tag:k.punctuation,class:"tok-punctuation"}]);const dC=1,ou=281,ru=2,uC=3,$n=282,hC=4,pC=283,au=284,fC=286,mC=287,gC=5,wC=6,yC=1,vC=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],jm=125,_C=123,OC=59,lu=47,bC=42,xC=43,$C=45,TC=36,kC=96,SC=92,EC=new eC({start:!1,shift(s,e){return e==gC||e==wC||e==fC?s:e==mC},strict:!1}),CC=new nn((s,e)=>{let{next:t}=s;(t==jm||t==-1||e.context)&&e.canShift(au)&&s.acceptToken(au)},{contextual:!0,fallback:!0}),NC=new nn((s,e)=>{let{next:t}=s,i;vC.indexOf(t)>-1||t==lu&&((i=s.peek(1))==lu||i==bC)||t!=jm&&t!=OC&&t!=-1&&!e.context&&e.canShift(ou)&&s.acceptToken(ou)},{contextual:!0}),PC=new nn((s,e)=>{let{next:t}=s;if((t==xC||t==$C)&&(s.advance(),t==s.next)){s.advance();let i=!e.context&&e.canShift(ru);s.acceptToken(i?ru:uC)}},{contextual:!0}),DC=new nn(s=>{for(let e=!1,t=0;;t++){let{next:i}=s;if(i<0){t&&s.acceptToken($n);break}else if(i==kC){t?s.acceptToken($n):s.acceptToken(pC,1);break}else if(i==_C&&e){t==1?s.acceptToken(hC,1):s.acceptToken($n,-1);break}else if(i==10&&t){s.advance(),s.acceptToken($n);break}else i==SC&&s.advance();e=i==TC,s.advance()}}),IC=new nn((s,e)=>{if(!(s.next!=101||!e.dialectEnabled(yC))){s.advance();for(let t=0;t<6;t++){if(s.next!="xtends".charCodeAt(t))return;s.advance()}s.next>=57&&s.next<=65||s.next>=48&&s.next<=90||s.next==95||s.next>=97&&s.next<=122||s.next>160||s.acceptToken(dC)}}),AC=Um({"get set async static":k.modifier,"for while do if else switch try catch finally return throw break continue default case":k.controlKeyword,"in of await yield void typeof delete instanceof":k.operatorKeyword,"let var const function class extends":k.definitionKeyword,"import export from":k.moduleKeyword,"with debugger as new":k.keyword,TemplateString:k.special(k.string),super:k.atom,BooleanLiteral:k.bool,this:k.self,null:k.null,Star:k.modifier,VariableName:k.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":k.function(k.variableName),VariableDefinition:k.definition(k.variableName),Label:k.labelName,PropertyName:k.propertyName,PrivatePropertyName:k.special(k.propertyName),"CallExpression/MemberExpression/PropertyName":k.function(k.propertyName),"FunctionDeclaration/VariableDefinition":k.function(k.definition(k.variableName)),"ClassDeclaration/VariableDefinition":k.definition(k.className),PropertyDefinition:k.definition(k.propertyName),PrivatePropertyDefinition:k.definition(k.special(k.propertyName)),UpdateOp:k.updateOperator,LineComment:k.lineComment,BlockComment:k.blockComment,Number:k.number,String:k.string,ArithOp:k.arithmeticOperator,LogicOp:k.logicOperator,BitOp:k.bitwiseOperator,CompareOp:k.compareOperator,RegExp:k.regexp,Equals:k.definitionOperator,Arrow:k.function(k.punctuation),": Spread":k.punctuation,"( )":k.paren,"[ ]":k.squareBracket,"{ }":k.brace,"InterpolationStart InterpolationEnd":k.special(k.brace),".":k.derefOperator,", ;":k.separator,TypeName:k.typeName,TypeDefinition:k.definition(k.typeName),"type enum interface implements namespace module declare":k.definitionKeyword,"abstract global Privacy readonly override":k.modifier,"is keyof unique infer":k.operatorKeyword,JSXAttributeValue:k.attributeValue,JSXText:k.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":k.angleBracket,"JSXIdentifier JSXNameSpacedName":k.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":k.attributeName}),RC={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},MC={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},WC={__proto__:null,"<":129},LC=yo.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:EC,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[AC],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[IC,NC,PC,DC,0,1,2,3,4,5,6,7,8,9,CC],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:s=>RC[s]||-1},{term:299,get:s=>MC[s]||-1},{term:63,get:s=>WC[s]||-1}],tokenPrec:12130});var Dr;const qi=new K;function QC(s){return U.define({combine:s?e=>e.concat(s):void 0})}class Ot{constructor(e,t,i=[],n=""){this.data=e,this.name=n,J.prototype.hasOwnProperty("tree")||Object.defineProperty(J.prototype,"tree",{get(){return Re(this)}}),this.parser=t,this.extension=[hs.of(this),J.languageData.of((o,r,a)=>o.facet(cu(o,r,a)))].concat(i)}isActiveAt(e,t,i=-1){return cu(e,t,i)==this.data}findRegions(e){let t=e.facet(hs);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(o,r)=>{if(o.prop(qi)==this.data){i.push({from:r,to:r+o.length});return}let a=o.prop(K.mounted);if(a){if(a.tree.prop(qi)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+r,to:l.to+r});else i.push({from:r,to:r+o.length});return}else if(a.overlay){let l=i.length;if(n(a.tree,a.overlay[0].from+r),i.length>l)return}}for(let l=0;l<o.children.length;l++){let c=o.children[l];c instanceof Oe&&n(c,o.positions[l]+r)}};return n(Re(e),0),i}get allowsNesting(){return!0}}Ot.setState=X.define();function cu(s,e,t){let i=s.facet(hs);if(!i)return null;let n=i.data;if(i.allowsNesting)for(let o=Re(s).topNode;o;o=o.enter(e,t,ke.ExcludeBuffers))n=o.type.prop(qi)||n;return n}class Oo extends Ot{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=QC(e.languageData);return new Oo(t,e.parser.configure({props:[qi.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Oo(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Re(s){let e=s.field(Ot.state,!1);return e?e.tree:Oe.empty}class BC{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let vi=null;class bo{constructor(e,t,i=[],n,o,r,a,l){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=o,this.viewport=r,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new bo(e,t,[],Oe.empty,0,i,[],null)}startParse(){return this.parser.startParse(new BC(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Oe.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(ks.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ks.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=vi;vi=this;try{return e()}finally{vi=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=du(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:o,viewport:r,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,d,u,h)=>l.push({fromA:c,toA:d,fromB:u,toB:h})),i=ks.applyChanges(i,l),n=Oe.empty,o=0,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let d=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);d<u&&a.push({from:d,to:u})}}}return new bo(this.parser,t,i,n,o,r,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:o}=this.skipped[i];n<e.to&&o>e.from&&(this.fragments=du(this.fragments,n,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Bm{createParse(t,i,n){let o=n[0].from,r=n[n.length-1].to;return{parsedPos:o,advance(){let l=vi;if(l){for(let c of n)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=r,new Oe(Je.none,[],[],r-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return vi}}function du(s,e,t){return ks.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class li{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new li(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=bo.create(e.facet(hs).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new li(i)}}Ot.state=Ne.define({create:li.init,update(s,e){for(let t of e.effects)if(t.is(Ot.setState))return t.value;return e.startState.facet(hs)!=e.state.facet(hs)?li.init(e.state):s.apply(e)}});let zm=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(zm=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Ir=typeof navigator!="undefined"&&((Dr=navigator.scheduling)===null||Dr===void 0?void 0:Dr.isInputPending)?()=>navigator.scheduling.isInputPending():null,UC=Ve.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ot.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ot.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=zm(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,o=i.field(Ot.state);if(o.tree==o.context.tree&&o.context.isDone(n+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,e&&!Ir?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<n&&i.doc.length>n+1e3,l=o.context.work(()=>Ir&&Ir()||Date.now()>r,n+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Ot.setState.of(new li(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>lt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hs=U.define({combine(s){return s.length?s[0]:null},enables:s=>[Ot.state,UC,z.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]});class VC{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const FC=U.define(),Ko=U.define({combine:s=>{if(!s.length)return"  ";if(!/^(?: +|\t+)$/.test(s[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return s[0]}});function Gm(s){let e=s.facet(Ko);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function xo(s,e){let t="",i=s.tabSize;if(s.facet(Ko).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let n=0;n<e;n++)t+=" ";return t}function Hm(s,e){s instanceof J&&(s=new Cl(s));for(let i of s.state.facet(FC)){let n=i(s,e);if(n!=null)return n}let t=Re(s.state);return t?jC(s,t,e):null}class Cl{constructor(e,t={}){this.state=e,this.options=t,this.unit=Gm(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:o}=this.options;return n!=null&&n>=i.from&&n<=i.to?o&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),o=this.countColumn(i,e-n),r=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return r>-1&&(o+=r-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return yl(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let r=o(n);if(r>-1)return r}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const qm=new K;function jC(s,e,t){return Xm(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,s)}function zC(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function GC(s){let e=s.type.prop(qm);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop(K.closedBy))){let n=s.lastChild,o=n&&i.indexOf(n.name)>-1;return r=>Ym(r,!0,1,void 0,o&&!zC(r)?n.from:void 0)}return s.parent==null?HC:null}function Xm(s,e,t){for(;s;s=s.parent){let i=GC(s);if(i)return i(Nl.create(t,e,s))}return null}function HC(){return 0}class Nl extends Cl{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new Nl(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(qC(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Xm(e,this.pos,this.base):0}}function qC(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function XC(s){let e=s.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=s.options.simulateBreak,o=s.state.doc.lineAt(t.from),r=n==null||n<=o.from?o.to:Math.min(o.to,n);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<r?t:null;a=l.to}}function YC({closing:s,align:e=!0,units:t=1}){return i=>Ym(i,e,t,s)}function Ym(s,e,t,i,n){let o=s.textAfter,r=o.match(/^\s*/)[0].length,a=i&&o.slice(r,r+i.length)==i||n==s.pos+r,l=e?XC(s):null;return l?a?s.column(l.from):s.column(l.to):s.baseIndent+(a?0:s.unit*t)}const ZC=s=>s.baseIndent;function Ar({except:s,units:e=1}={}){return t=>{let i=s&&s.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const KC=200;function JC(){return J.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:i}=s.newSelection.main,n=t.lineAt(i);if(i>n.from+KC)return s;let o=t.sliceString(n.from,i);if(!e.some(c=>c.test(o)))return s;let{state:r}=s,a=-1,l=[];for(let{head:c}of r.selection.ranges){let d=r.doc.lineAt(c);if(d.from==a)continue;a=d.from;let u=Hm(r,d.from);if(u==null)continue;let h=/^\s*/.exec(d.text)[0],p=xo(r,u);h!=p&&l.push({from:d.from,to:d.from+h.length,insert:p})}return l.length?[s,{changes:l,sequential:!0}]:s})}const e0=U.define(),Zm=new K;function t0(s){let e=s.firstChild,t=s.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?s.to:t.from}:null}function s0(s,e,t){let i=Re(s);if(i.length<t)return null;let n=i.resolveInner(t),o=null;for(let r=n;r;r=r.parent){if(r.to<=t||r.from>t)continue;if(o&&r.from<e)break;let a=r.type.prop(Zm);if(a&&(r.to<i.length-50||i.length==s.doc.length||!i0(r))){let l=a(r,s);l&&l.from<=t&&l.from>=e&&l.to>t&&(o=l)}}return o}function i0(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function uu(s,e,t){for(let i of s.facet(e0)){let n=i(s,e,t);if(n)return n}return s0(s,e,t)}function Km(s,e){let t=e.mapPos(s.from,1),i=e.mapPos(s.to,-1);return t>=i?void 0:{from:t,to:i}}const Jm=X.define({map:Km}),Pl=X.define({map:Km}),$o=Ne.define({create(){return H.none},update(s,e){s=s.map(e.changes);for(let t of e.effects)t.is(Jm)&&!n0(s,t.value.from,t.value.to)?s=s.update({add:[hu.range(t.value.from,t.value.to)]}):t.is(Pl)&&(s=s.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;s.between(i,i,(n,o)=>{n<i&&o>i&&(t=!0)}),t&&(s=s.update({filterFrom:i,filterTo:i,filter:(n,o)=>o<=i||n>=i}))}return s},provide:s=>z.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let i=s[t++],n=s[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(hu.range(i,n))}return H.set(e,!0)}});function Ba(s,e,t){var i;let n=null;return(i=s.field($o,!1))===null||i===void 0||i.between(e,t,(o,r)=>{(!n||n.from>o)&&(n={from:o,to:r})}),n}function n0(s,e,t){let i=!1;return s.between(e,e,(n,o)=>{n==e&&o==t&&(i=!0)}),i}const o0={placeholderDOM:null,placeholderText:"\u2026"},eg=U.define({combine(s){return ps(s,o0)}});function r0(s){let e=[$o,c0];return s&&e.push(eg.of(s)),e}const hu=H.replace({widget:new class extends Yt{toDOM(s){let{state:e}=s,t=e.facet(eg),i=o=>{let r=s.lineBlockAt(s.posAtDOM(o.target)),a=Ba(s.state,r.from,r.to);a&&s.dispatch({effects:Pl.of(a)}),o.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(s,i);let n=document.createElement("span");return n.textContent=t.placeholderText,n.setAttribute("aria-label",e.phrase("folded code")),n.title=e.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=i,n}}}),a0={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Rr extends Ut{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function l0(s={}){let e=Object.assign(Object.assign({},a0),s),t=new Rr(e,!0),i=new Rr(e,!1),n=Ve.fromClass(class{constructor(r){this.from=r.viewport.from,this.markers=this.buildMarkers(r)}update(r){(r.docChanged||r.viewportChanged||r.startState.facet(hs)!=r.state.facet(hs)||r.startState.field($o,!1)!=r.state.field($o,!1)||Re(r.startState)!=Re(r.state)||e.foldingChanged(r))&&(this.markers=this.buildMarkers(r.view))}buildMarkers(r){let a=new Ds;for(let l of r.viewportLineBlocks){let c=Ba(r.state,l.from,l.to)?i:uu(r.state,l.from,l.to)?t:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:o}=e;return[n,Im({class:"cm-foldGutter",markers(r){var a;return((a=r.plugin(n))===null||a===void 0?void 0:a.markers)||ee.empty},initialSpacer(){return new Rr(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(r,a,l)=>{if(o.click&&o.click(r,a,l))return!0;let c=Ba(r.state,a.from,a.to);if(c)return r.dispatch({effects:Pl.of(c)}),!0;let d=uu(r.state,a.from,a.to);return d?(r.dispatch({effects:Jm.of(d)}),!0):!1}})}),r0()]}const c0=z.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Jo{constructor(e,t){this.specs=e;let i;function n(a){let l=cs.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const o=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,r=t.scope;this.scope=r instanceof Ot?a=>a.prop(qi)==r.data:r?a=>a==r:void 0,this.style=Fm(e.map(a=>({tag:a.tag,class:a.class||n(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new cs(i):null,this.themeType=t.themeType}static define(e,t){return new Jo(e,t||{})}}const Ua=U.define(),tg=U.define({combine(s){return s.length?[s[0]]:null}});function Mr(s){let e=s.facet(Ua);return e.length?e:s.facet(tg)}function d0(s,e){let t=[h0],i;return s instanceof Jo&&(s.module&&t.push(z.styleModule.of(s.module)),i=s.themeType),e!=null&&e.fallback?t.push(tg.of(s)):i?t.push(Ua.computeN([z.darkTheme],n=>n.facet(z.darkTheme)==(i=="dark")?[s]:[])):t.push(Ua.of(s)),t}class u0{constructor(e){this.markCache=Object.create(null),this.tree=Re(e.state),this.decorations=this.buildDeco(e,Mr(e.state))}update(e){let t=Re(e.state),i=Mr(e.state),n=i!=Mr(e.startState);t.length<e.view.viewport.to&&!n&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return H.none;let i=new Ds;for(let{from:n,to:o}of e.visibleRanges)aC(this.tree,t,(r,a,l)=>{i.add(r,a,this.markCache[l]||(this.markCache[l]=H.mark({class:l})))},n,o);return i.finish()}}const h0=en.high(Ve.fromClass(u0,{decorations:s=>s.decorations})),p0=z.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),sg=1e4,ig="()[]{}",ng=U.define({combine(s){return ps(s,{afterCursor:!0,brackets:ig,maxScanDistance:sg,renderMatch:g0})}}),f0=H.mark({class:"cm-matchingBracket"}),m0=H.mark({class:"cm-nonmatchingBracket"});function g0(s){let e=[],t=s.matched?f0:m0;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const w0=Ne.define({create(){return H.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(ng);for(let n of e.state.selection.ranges){if(!n.empty)continue;let o=Tn(e.state,n.head,-1,i)||n.head>0&&Tn(e.state,n.head-1,1,i)||i.afterCursor&&(Tn(e.state,n.head,1,i)||n.head<e.state.doc.length&&Tn(e.state,n.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return H.set(t,!0)},provide:s=>z.decorations.from(s)}),y0=[w0,p0];function v0(s={}){return[ng.of(s),y0]}function Va(s,e,t){let i=s.prop(e<0?K.openedBy:K.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function Tn(s,e,t,i={}){let n=i.maxScanDistance||sg,o=i.brackets||ig,r=Re(s),a=r.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=Va(l.type,t,o);if(c&&l.from<l.to)return _0(s,e,t,l,c,o)}return O0(s,e,t,r,a.type,n,o)}function _0(s,e,t,i,n,o){let r=i.parent,a={from:i.from,to:i.to},l=0,c=r==null?void 0:r.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(l==0&&n.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Va(c.type,t,o))l++;else if(Va(c.type,-t,o)){if(l==0)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};l--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function O0(s,e,t,i,n,o,r){let a=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),l=r.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},d=s.doc.iterRange(e,t>0?s.doc.length:0),u=0;for(let h=0;!d.next().done&&h<=o;){let p=d.value;t<0&&(h+=p.length);let f=e+h*t;for(let w=t>0?0:p.length-1,g=t>0?p.length:-1;w!=g;w+=t){let v=r.indexOf(p[w]);if(!(v<0||i.resolveInner(f+w,1).type!=n))if(v%2==0==t>0)u++;else{if(u==1)return{start:c,end:{from:f+w,to:f+w+1},matched:v>>1==l>>1};u--}}t>0&&(h+=p.length)}return d.done?{start:c,matched:!1}:null}const b0=Object.create(null),pu=[Je.none],fu=[],x0=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])x0[s]=$0(b0,e);function Wr(s,e){fu.indexOf(s)>-1||(fu.push(s),console.warn(e))}function $0(s,e){let t=null;for(let o of e.split(".")){let r=s[o]||k[o];r?typeof r=="function"?t?t=r(t):Wr(o,`Modifier ${o} used at start of tag`):t?Wr(o,`Tag ${o} used as modifier`):t=r:Wr(o,`Unknown highlighting tag ${o}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),n=Je.define({id:pu.length,name:i,props:[Um({[i]:t})]});return pu.push(n),n.id}class og{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=Re(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),o=n.search(rg(e,!1));return o<0?null:{from:i+o,to:this.pos,text:n.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function mu(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function T0(s){let e=Object.create(null),t=Object.create(null);for(let{label:n}of s){e[n[0]]=!0;for(let o=1;o<n.length;o++)t[n[o]]=!0}let i=mu(e)+mu(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Dl(s){let e=s.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:T0(e);return n=>{let o=n.matchBefore(i);return o||n.explicit?{from:o?o.from:n.pos,options:e,validFor:t}:null}}function k0(s,e){return t=>{for(let i=Re(t.state).resolveInner(t.pos,-1);i;i=i.parent)if(s.indexOf(i.name)>-1)return null;return e(t)}}class gu{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function rs(s){return s.selection.main.head}function rg(s,e){var t;let{source:i}=s,n=e&&i[0]!="^",o=i[i.length-1]!="$";return!n&&!o?s:new RegExp(`${n?"^":""}(?:${i})${o?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}function S0(s,e,t,i){return Object.assign(Object.assign({},s.changeByRange(n=>{if(n==s.selection.main)return{changes:{from:t,to:i,insert:e},range:A.cursor(t+e.length)};let o=i-t;return!n.empty||o&&s.sliceDoc(n.from-o,n.from)!=s.sliceDoc(t,i)?{range:n}:{changes:{from:n.from-o,to:n.from,insert:e},range:A.cursor(n.from-o+e.length)}})),{userEvent:"input.complete"})}function ag(s,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?s.dispatch(S0(s.state,t,i.from,i.to)):t(s,e.completion,i.from,i.to)}const wu=new WeakMap;function E0(s){if(!Array.isArray(s))return s;let e=wu.get(s);return e||wu.set(s,e=Dl(s)),e}class C0{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=je(e,t),n=ht(i);this.chars.push(i);let o=e.slice(t,t+n),r=o.toUpperCase();this.folded.push(je(r==o?o.toLowerCase():r,0)),t+=n}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:o,byWord:r}=this;if(t.length==1){let y=je(e,0);return y==t[0]?[0,0,ht(y)]:y==i[0]?[-200,0,ht(y)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=t.length,c=0;if(a<0){for(let y=0,S=Math.min(e.length,200);y<S&&c<l;){let T=je(e,y);(T==t[c]||T==i[c])&&(n[c++]=y),y+=ht(T)}if(c<l)return null}let d=0,u=0,h=!1,p=0,f=-1,w=-1,g=/[a-z]/.test(e),v=!0;for(let y=0,S=Math.min(e.length,200),T=0;y<S&&u<l;){let $=je(e,y);a<0&&(d<l&&$==t[d]&&(o[d++]=y),p<l&&($==t[p]||$==i[p]?(p==0&&(f=y),w=y+1,p++):p=0));let D,P=$<255?$>=48&&$<=57||$>=97&&$<=122?2:$>=65&&$<=90?1:0:(D=Sf($))!=D.toLowerCase()?1:D!=D.toUpperCase()?2:0;(!y||P==1&&g||T==0&&P!=0)&&(t[u]==$||i[u]==$&&(h=!0)?r[u++]=y:r.length&&(v=!1)),T=P,y+=ht($)}return u==l&&r[0]==0&&v?this.result(-100+(h?-200:0),r,e):p==l&&f==0?[-200-e.length,0,w]:a>-1?[-700-e.length,a,a+this.pattern.length]:p==l?[-200+-700-e.length,f,w]:u==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),r,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[e-i.length],o=1;for(let r of t){let a=r+(this.astral?ht(je(i,r)):1);o>1&&n[o-1]==r?n[o-1]=a:(n[o++]=r,n[o++]=a)}return n}}const mt=U.define({combine(s){return ps(s,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>N0(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function N0(s,e){return s?e?s+" "+e:s:e}function P0(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n){let o=document.createElement("span");o.className="cm-completionLabel";let{label:r}=t,a=0;for(let l=1;l<n.length;){let c=n[l++],d=n[l++];c>a&&o.appendChild(document.createTextNode(r.slice(a,c)));let u=o.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(r.slice(c,d))),u.className="cm-completionMatchedText",a=d}return a<r.length&&o.appendChild(document.createTextNode(r.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function yu(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((s-e)/t);return{from:s-(i+1)*t,to:s-i*t}}class D0{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let i=e.state.field(t),{options:n,selected:o}=i.open,r=e.state.facet(mt);this.optionContent=P0(r),this.optionClass=r.optionClass,this.range=yu(n.length,o,r.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<n.length){ag(e,n[+c[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(n,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=yu(t.options.length,t.selected,this.view.state.facet(mt).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let o=typeof n=="string"?document.createTextNode(n):n(i);if(!o)return;"then"in o?o.then(r=>{r&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(r)}).catch(r=>lt(this.view.state,r,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&A0(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.ownerDocument.defaultView||window,i=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=e.getBoundingClientRect();if(o.top>Math.min(t.innerHeight,i.bottom)-10||o.bottom<Math.max(0,i.top)+10)return null;let r=this.view.textDirection==Te.RTL,a=r,l=!1,c,d="",u="",h=i.left,p=t.innerWidth-i.right;if(a&&h<Math.min(n.width,p)?a=!1:!a&&p<Math.min(n.width,h)&&(a=!0),n.width<=(a?h:p))d=Math.max(0,Math.min(o.top,t.innerHeight-n.height))-i.top+"px",c=Math.min(400,a?h:p)+"px";else{l=!0,c=Math.min(400,(r?i.right:t.innerWidth-i.left)-30)+"px";let f=t.innerHeight-i.bottom;f>=n.height||f>i.top?d=o.bottom-i.top+"px":u=i.bottom-o.top+"px"}return{top:d,bottom:u,maxWidth:c,class:l?r?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=i.from;o<i.to;o++){let{completion:r,match:a}=e[o];const l=n.appendChild(document.createElement("li"));l.id=t+"-"+o,l.setAttribute("role","option");let c=this.optionClass(r);c&&(l.className=c);for(let d of this.optionContent){let u=d(r,this.view.state,a);u&&l.appendChild(u)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}}function I0(s){return e=>new D0(e,s)}function A0(s,e){let t=s.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?s.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(s.scrollTop+=i.bottom-t.bottom)}function vu(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function R0(s,e){let t=[],i=0;for(let a of s)if(a.hasResult())if(a.result.filter===!1){let l=a.result.getMatch;for(let c of a.result.options){let d=[1e9-i++];if(l)for(let u of l(c))d.push(u);t.push(new gu(c,a,d))}}else{let l=new C0(e.sliceDoc(a.from,a.to)),c;for(let d of a.result.options)(c=l.match(d.label))&&(d.boost!=null&&(c[0]+=d.boost),t.push(new gu(d,a,c)))}let n=[],o=null,r=e.facet(mt).compareCompletions;for(let a of t.sort((l,c)=>c.match[0]-l.match[0]||r(l.completion,c.completion)))!o||o.label!=a.completion.label||o.detail!=a.completion.detail||o.type!=null&&a.completion.type!=null&&o.type!=a.completion.type||o.apply!=a.completion.apply?n.push(a):vu(a.completion)>vu(o)&&(n[n.length-1]=a),o=a.completion;return n}class Wi{constructor(e,t,i,n,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Wi(this.options,_u(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,n,o){let r=R0(e,t);if(!r.length)return null;let a=t.facet(mt).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let l=n.options[n.selected].completion;for(let c=0;c<r.length;c++)if(r[c].completion==l){a=c;break}}return new Wi(r,_u(i,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:I0(ot),above:o.aboveCursor},n?n.timestamp:Date.now(),a)}map(e){return new Wi(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class To{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new To(L0,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(mt),o=(i.override||t.languageDataAt("autocomplete",rs(t)).map(E0)).map(a=>(this.active.find(c=>c.source==a)||new Xe(a,this.active.some(c=>c.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((a,l)=>a==this.active[l])&&(o=this.active);let r=e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!M0(o,this.active)?Wi.build(o,t,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!r&&o.every(a=>a.state!=1)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new Xe(a.source,0):a));for(let a of e.effects)a.is(cg)&&(r=r&&r.setSelected(a.value,this.id));return o==this.active&&r==this.open?this:new To(o,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:W0}}function M0(s,e){if(s==e)return!0;for(let t=0,i=0;;){for(;t<s.length&&!s[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==s.length,o=i==e.length;if(n||o)return n==o;if(s[t++].result!=e[i++].result)return!1}}const W0={"aria-autocomplete":"list"};function _u(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const L0=[];function Fa(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class Xe{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=Fa(e),n=this;i?n=n.handleUserEvent(e,i,t):e.docChanged?n=n.handleChange(e):e.selection&&n.state!=0&&(n=new Xe(n.source,0));for(let o of e.effects)if(o.is(Il))n=new Xe(n.source,1,o.value?rs(e.state):-1);else if(o.is(ko))n=new Xe(n.source,0);else if(o.is(lg))for(let r of o.value)r.source==n.source&&(n=r);return n}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Xe(this.source,1)}handleChange(e){return e.changes.touchesRange(rs(e.startState))?new Xe(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Xe(this.source,this.state,e.mapPos(this.explicitPos))}}class Li extends Xe{constructor(e,t,i,n,o){super(e,2,t),this.result=i,this.from=n,this.to=o}hasResult(){return!0}handleUserEvent(e,t,i){var n;let o=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),a=rs(e.state);if((this.explicitPos<0?a<=o:a<this.from)||a>r||t=="delete"&&rs(e.startState)==this.from)return new Xe(this.source,t=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return Q0(this.result.validFor,e.state,o,r)?new Li(this.source,l,this.result,o,r):this.result.update&&(c=this.result.update(this.result,o,r,new og(e.state,a,l>=0)))?new Li(this.source,l,c,c.from,(n=c.to)!==null&&n!==void 0?n:rs(e.state)):new Xe(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Xe(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Li(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function Q0(s,e,t,i){if(!s)return!1;let n=e.sliceDoc(t,i);return typeof s=="function"?s(n,t,i,e):rg(s,!0).test(n)}const Il=X.define(),ko=X.define(),lg=X.define({map(s,e){return s.map(t=>t.map(e))}}),cg=X.define(),ot=Ne.define({create(){return To.start()},update(s,e){return s.update(e)},provide:s=>[Zo.from(s,e=>e.tooltip),z.contentAttributes.from(s,e=>e.attrs)]});function kn(s,e="option"){return t=>{let i=t.state.field(ot,!1);if(!i||!i.open||Date.now()-i.open.timestamp<t.state.facet(mt).interactionDelay)return!1;let n=1,o;e=="page"&&(o=EE(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:r}=i.open.options,a=i.open.selected>-1?i.open.selected+n*(s?1:-1):s?0:r-1;return a<0?a=e=="page"?0:r-1:a>=r&&(a=e=="page"?r-1:0),t.dispatch({effects:cg.of(a)}),!0}}const ja=s=>{let e=s.state.field(ot,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<s.state.facet(mt).interactionDelay?!1:(ag(s,e.open.options[e.open.selected]),!0)},B0=s=>s.state.field(ot,!1)?(s.dispatch({effects:Il.of(!0)}),!0):!1,U0=s=>{let e=s.state.field(ot,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:ko.of(null)}),!0)};class V0{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Ou=50,F0=50,j0=1e3,z0=Ve.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of s.state.field(ot).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(ot);if(!s.selectionSet&&!s.docChanged&&s.startState.field(ot)==e)return;let t=s.transactions.some(i=>(i.selection||i.docChanged)&&!Fa(i));for(let i=0;i<this.running.length;i++){let n=this.running[i];if(t||n.updates.length+s.transactions.length>F0&&Date.now()-n.time>j0){for(let o of n.context.abortListeners)try{o()}catch(r){lt(this.view.state,r)}n.context.abortListeners=null,this.running.splice(i--,1)}else n.updates.push(...s.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(n=>n.active.source==i.source))?setTimeout(()=>this.startUpdate(),Ou):-1,this.composing!=0)for(let i of s.transactions)Fa(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:s}=this.view,e=s.field(ot);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(s){let{state:e}=this.view,t=rs(e),i=new og(e,t,s.explicitPos==t),n=new V0(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(o=>{n.context.aborted||(n.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:ko.of(null)}),lt(this.view.state,o)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Ou))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(mt);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let r=new Li(n.active.source,n.active.explicitPos,n.done,n.done.from,(s=n.done.to)!==null&&s!==void 0?s:rs(n.updates.length?n.updates[0].startState:this.view.state));for(let a of n.updates)r=r.update(a,t);if(r.hasResult()){e.push(r);continue}}let o=this.view.state.field(ot).active.find(r=>r.source==n.active.source);if(o&&o.state==1)if(n.done==null){let r=new Xe(n.active.source,0);for(let a of n.updates)r=r.update(a,t);r.state!=1&&e.push(r)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:lg.of(e)})}},{eventHandlers:{blur(){let s=this.view.state.field(ot,!1);s&&s.tooltip&&this.view.state.facet(mt).closeOnBlur&&this.view.dispatch({effects:ko.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Il.of(!1)}),20),this.composing=0}}}),dg=z.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class G0{constructor(e,t,i,n){this.field=e,this.line=t,this.from=i,this.to=n}}class Al{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,Ae.TrackDel),i=e.mapPos(this.to,1,Ae.TrackDel);return t==null||i==null?null:new Al(this.field,t,i)}}class Rl{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],n=[t],o=e.doc.lineAt(t),r=/^\s*/.exec(o.text)[0];for(let l of this.lines){if(i.length){let c=r,d=/^\t*/.exec(l)[0].length;for(let u=0;u<d;u++)c+=e.facet(Ko);n.push(t+c.length-d),l=c+l.slice(d)}i.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new Al(l.field,n[l.line]+l.from,n[l.line]+l.to));return{text:i,ranges:a}}static parse(e){let t=[],i=[],n=[],o;for(let r of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(r);){let a=o[1]?+o[1]:null,l=o[2]||o[3]||"",c=-1;for(let d=0;d<t.length;d++)(a!=null?t[d].seq==a:l?t[d].name==l:!1)&&(c=d);if(c<0){let d=0;for(;d<t.length&&(a==null||t[d].seq!=null&&t[d].seq<a);)d++;t.splice(d,0,{seq:a,name:l}),c=d;for(let u of n)u.field>=c&&u.field++}n.push(new G0(c,i.length,o.index,o.index+l.length)),r=r.slice(0,o.index)+l+r.slice(o.index+o[0].length)}for(let a;a=/([$#])\\{/.exec(r);){r=r.slice(0,a.index)+a[1]+"{"+r.slice(a.index+a[0].length);for(let l of n)l.line==i.length&&l.from>a.index&&(l.from--,l.to--)}i.push(r)}return new Rl(i,n)}}let H0=H.widget({widget:new class extends Yt{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),q0=H.mark({class:"cm-snippetField"});class hi{constructor(e,t){this.ranges=e,this.active=t,this.deco=H.set(e.map(i=>(i.from==i.to?H0:q0).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let n=i.map(e);if(!n)return null;t.push(n)}return new hi(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const on=X.define({map(s,e){return s&&s.map(e)}}),X0=X.define(),Xi=Ne.define({create(){return null},update(s,e){for(let t of e.effects){if(t.is(on))return t.value;if(t.is(X0)&&s)return new hi(s.ranges,t.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>z.decorations.from(s,e=>e?e.deco:H.none)});function Ml(s,e){return A.create(s.filter(t=>t.field==e).map(t=>A.range(t.from,t.to)))}function Y0(s){let e=Rl.parse(s);return(t,i,n,o)=>{let{text:r,ranges:a}=e.instantiate(t.state,n),l={changes:{from:n,to:o,insert:se.of(r)},scrollIntoView:!0};if(a.length&&(l.selection=Ml(a,0)),a.length>1){let c=new hi(a,0),d=l.effects=[on.of(c)];t.state.field(Xi,!1)===void 0&&d.push(X.appendConfig.of([Xi,t1,s1,dg]))}t.dispatch(t.state.update(l))}}function ug(s){return({state:e,dispatch:t})=>{let i=e.field(Xi,!1);if(!i||s<0&&i.active==0)return!1;let n=i.active+s,o=s>0&&!i.ranges.some(r=>r.field==n+s);return t(e.update({selection:Ml(i.ranges,n),effects:on.of(o?null:new hi(i.ranges,n))})),!0}}const Z0=({state:s,dispatch:e})=>s.field(Xi,!1)?(e(s.update({effects:on.of(null)})),!0):!1,K0=ug(1),J0=ug(-1),e1=[{key:"Tab",run:K0,shift:J0},{key:"Escape",run:Z0}],bu=U.define({combine(s){return s.length?s[0]:e1}}),t1=en.highest(Yo.compute([bu],s=>s.facet(bu)));function Fe(s,e){return Object.assign(Object.assign({},e),{apply:Y0(s)})}const s1=z.domEventHandlers({mousedown(s,e){let t=e.state.field(Xi,!1),i;if(!t||(i=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let n=t.ranges.find(o=>o.from<=i&&o.to>=i);return!n||n.field==t.active?!1:(e.dispatch({selection:Ml(t.ranges,n.field),effects:on.of(t.ranges.some(o=>o.field>n.field)?new hi(t.ranges,n.field):null)}),!0)}}),So={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},_s=X.define({map(s,e){let t=e.mapPos(s,-1,Ae.TrackAfter);return t==null?void 0:t}}),Wl=X.define({map(s,e){return e.mapPos(s)}}),Ll=new class extends Ps{};Ll.startSide=1;Ll.endSide=-1;const hg=Ne.define({create(){return ee.empty},update(s,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(s=ee.empty)}s=s.map(e.changes);for(let t of e.effects)t.is(_s)?s=s.update({add:[Ll.range(t.value,t.value+1)]}):t.is(Wl)&&(s=s.update({filter:i=>i!=t.value}));return s}});function i1(){return[a1,hg]}const Lr="()[]{}<>";function n1(s){for(let e=0;e<Lr.length;e+=2)if(Lr.charCodeAt(e)==s)return Lr.charAt(e+1);return Sf(s<128?s:s+1)}function o1(s,e){return s.languageDataAt("closeBrackets",e)[0]||So}const r1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),a1=z.inputHandler.of((s,e,t,i)=>{if((r1?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&ht(je(i,0))==1||e!=n.from||t!=n.to)return!1;let o=pg(s.state,i);return o?(s.dispatch(o),!0):!1});function pg(s,e){let t=o1(s,s.selection.main.head),i=t.brackets||So.brackets;for(let n of i){let o=n1(je(n,0));if(e==n)return o==n?d1(s,n,i.indexOf(n+n+n)>-1,t):l1(s,n,o,t.before||So.before);if(e==o&&fg(s,s.selection.main.from))return c1(s,n,o)}return null}function fg(s,e){let t=!1;return s.field(hg).between(0,s.doc.length,i=>{i==e&&(t=!0)}),t}function Ql(s,e){let t=s.sliceString(e,e+2);return t.slice(0,ht(je(t,0)))}function l1(s,e,t,i){let n=null,o=s.changeByRange(r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:t,from:r.to}],effects:_s.of(r.to+e.length),range:A.range(r.anchor+e.length,r.head+e.length)};let a=Ql(s.doc,r.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:r.head},effects:_s.of(r.head+e.length),range:A.cursor(r.head+e.length)}:{range:n=r}});return n?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function c1(s,e,t){let i=null,n=s.selection.ranges.map(o=>o.empty&&Ql(s.doc,o.head)==t?A.cursor(o.head+t.length):i=o);return i?null:s.update({selection:A.create(n,s.selection.mainIndex),scrollIntoView:!0,effects:s.selection.ranges.map(({from:o})=>Wl.of(o))})}function d1(s,e,t,i){let n=i.stringPrefixes||So.stringPrefixes,o=null,r=s.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:_s.of(a.to+e.length),range:A.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=Ql(s.doc,l),d;if(c==e){if(xu(s,l))return{changes:{insert:e+e,from:l},effects:_s.of(l+e.length),range:A.cursor(l+e.length)};if(fg(s,l)){let u=t&&s.sliceDoc(l,l+e.length*3)==e+e+e;return{range:A.cursor(l+e.length*(u?3:1)),effects:Wl.of(l)}}}else{if(t&&s.sliceDoc(l-2*e.length,l)==e+e&&(d=$u(s,l-2*e.length,n))>-1&&xu(s,d))return{changes:{insert:e+e+e+e,from:l},effects:_s.of(l+e.length),range:A.cursor(l+e.length)};if(s.charCategorizer(l)(c)!=pt.Word&&$u(s,l,n)>-1&&!u1(s,l,e,n))return{changes:{insert:e+e,from:l},effects:_s.of(l+e.length),range:A.cursor(l+e.length)}}return{range:o=a}});return o?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function xu(s,e){let t=Re(s).resolveInner(e+1);return t.parent&&t.from==e}function u1(s,e,t,i){let n=Re(s).resolveInner(e,-1),o=i.reduce((r,a)=>Math.max(r,a.length),0);for(let r=0;r<5;r++){let a=s.sliceDoc(n.from,Math.min(n.to,n.from+t.length+o)),l=a.indexOf(t);if(!l||l>-1&&i.indexOf(a.slice(0,l))>-1){let d=n.firstChild;for(;d&&d.from==n.from&&d.to-d.from>t.length+l;){if(s.sliceDoc(d.to-t.length,d.to)==t)return!1;d=d.firstChild}return!0}let c=n.to==e&&n.parent;if(!c)break;n=c}return!1}function $u(s,e,t){let i=s.charCategorizer(e);if(i(s.sliceDoc(e-1,e))!=pt.Word)return e;for(let n of t){let o=e-n.length;if(s.sliceDoc(o,e)==n&&i(s.sliceDoc(o-1,o))!=pt.Word)return o}return-1}function h1(s={}){return[ot,mt.of(s),z0,f1,dg]}const p1=[{key:"Ctrl-Space",run:B0},{key:"Escape",run:U0},{key:"ArrowDown",run:kn(!0)},{key:"ArrowUp",run:kn(!1)},{key:"PageDown",run:kn(!0,"page")},{key:"PageUp",run:kn(!1,"page")},{key:"Enter",run:ja}],f1=en.highest(Yo.computeN([mt],s=>s.facet(mt).defaultKeymap?[p1]:[]));function m1(s){let e=s.field(ot,!1);return e&&e.active.some(t=>t.state==1)?"pending":e&&e.active.some(t=>t.state!=0)?"active":null}const mg=[Fe("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Fe("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Fe("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Fe("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Fe("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Fe(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Fe("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Fe(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Fe(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Fe('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Fe('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Tu=new zE,gg=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function _i(s){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,s),!0}}const g1=["FunctionDeclaration"],w1={FunctionDeclaration:_i("function"),ClassDeclaration:_i("class"),ClassExpression:()=>!0,EnumDeclaration:_i("constant"),TypeAliasDeclaration:_i("type"),NamespaceDeclaration:_i("namespace"),VariableDefinition(s,e){s.matchContext(g1)||e(s,"variable")},TypeDefinition(s,e){e(s,"type")},__proto__:null};function wg(s,e){let t=Tu.get(e);if(t)return t;let i=[],n=!0;function o(r,a){let l=s.sliceString(r.from,r.to);i.push({label:l,type:a})}return e.cursor(ke.IncludeAnonymous).iterate(r=>{if(n)n=!1;else if(r.name){let a=w1[r.name];if(a&&a(r,o)||gg.has(r.name))return!1}else if(r.to-r.from>8192){for(let a of wg(s,r.node))i.push(a);return!1}}),Tu.set(e,i),i}const ku=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,yg=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function vg(s){let e=Re(s.state).resolveInner(s.pos,-1);if(yg.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&ku.test(s.state.sliceDoc(e.from,e.to));if(!t&&!s.explicit)return null;let i=[];for(let n=e;n;n=n.parent)gg.has(n.name)&&(i=i.concat(wg(s.state.doc,n)));return{options:i,from:t?e.from:s.pos,validFor:ku}}const Ss=Oo.define({name:"javascript",parser:LC.configure({props:[qm.add({IfStatement:Ar({except:/^\s*({|else\b)/}),TryStatement:Ar({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:ZC,SwitchBody:s=>{let e=s.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return s.baseIndent+(t?0:i?1:2)*s.unit},Block:YC({closing:"}"}),ArrowFunction:s=>s.baseIndent+s.unit,"TemplateString BlockComment":()=>null,"Statement Property":Ar({except:/^{/}),JSXElement(s){let e=/^\s*<\//.test(s.textAfter);return s.lineIndent(s.node.from)+(e?0:s.unit)},JSXEscape(s){let e=/\s*\}/.test(s.textAfter);return s.lineIndent(s.node.from)+(e?0:s.unit)},"JSXOpenTag JSXSelfClosingTag"(s){return s.column(s.node.from)+s.unit}}),Zm.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":t0,BlockComment(s){return{from:s.from+2,to:s.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),y1=Ss.configure({dialect:"ts"},"typescript"),v1=Ss.configure({dialect:"jsx"}),_1=Ss.configure({dialect:"jsx ts"},"typescript"),O1="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(s=>({label:s,type:"keyword"}));function b1(s={}){let e=s.jsx?s.typescript?_1:v1:s.typescript?y1:Ss;return new VC(e,[Ss.data.of({autocomplete:k0(yg,Dl(mg.concat(O1)))}),Ss.data.of({autocomplete:vg}),s.jsx?$1:[]])}function Su(s,e,t=s.length){if(!e)return"";let i=e.getChild("JSXIdentifier");return i?s.sliceString(i.from,Math.min(i.to,t)):""}const x1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$1=z.inputHandler.of((s,e,t,i)=>{if((x1?s.composing:s.compositionStarted)||s.state.readOnly||e!=t||i!=">"&&i!="/"||!Ss.isActiveAt(s.state,e,-1))return!1;let{state:n}=s,o=n.changeByRange(r=>{var a,l,c;let{head:d}=r,u=Re(n).resolveInner(d,-1),h;if(u.name=="JSXStartTag"&&(u=u.parent),i==">"&&u.name=="JSXFragmentTag")return{range:A.cursor(d+1),changes:{from:d,insert:"><>"}};if(i==">"&&u.name=="JSXIdentifier"){if(((l=(a=u.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="JSXEndTag"&&(h=Su(n.doc,u.parent,d)))return{range:A.cursor(d+1),changes:{from:d,insert:`></${h}>`}}}else if(i=="/"&&u.name=="JSXFragmentTag"){let p=u.parent,f=p==null?void 0:p.parent;if(p.from==d-1&&((c=f.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(h=Su(n.doc,f==null?void 0:f.firstChild,d))){let w=`/${h}>`;return{range:A.cursor(d+w.length),changes:{from:d,insert:w}}}}return{range:r}});return o.changes.empty?!1:(s.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)}),T1=s=>{let e=Bl(s.state);return e.line?k1(s):e.block?S1(s):!1};function _g(s,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=s(e,t);return n?(i(t.update(n)),!0):!1}}const k1=_g(P1,0),S1=_g((s,e)=>N1(s,e,C1(e)),0);function Bl(s,e=s.selection.main.head){let t=s.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Oi=50;function E1(s,{open:e,close:t},i,n){let o=s.sliceDoc(i-Oi,i),r=s.sliceDoc(n,n+Oi),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(r)[0].length,c=o.length-a;if(o.slice(c-e.length,c)==e&&r.slice(l,l+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:n+l,margin:l&&1}};let d,u;n-i<=2*Oi?d=u=s.sliceDoc(i,n):(d=s.sliceDoc(i,i+Oi),u=s.sliceDoc(n-Oi,n));let h=/^\s*/.exec(d)[0].length,p=/\s*$/.exec(u)[0].length,f=u.length-p-t.length;return d.slice(h,h+e.length)==e&&u.slice(f,f+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(d.charAt(h+e.length))?1:0},close:{pos:n-p-t.length,margin:/\s/.test(u.charAt(f-1))?1:0}}:null}function C1(s){let e=[];for(let t of s.selection.ranges){let i=s.doc.lineAt(t.from),n=t.to<=i.to?i:s.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=n.to:e.push({from:i.from,to:n.to})}return e}function N1(s,e,t=e.selection.ranges){let i=t.map(o=>Bl(e,o.from).block);if(!i.every(o=>o))return null;let n=t.map((o,r)=>E1(e,i[r],o.from,o.to));if(s!=2&&!n.every(o=>o))return{changes:e.changes(t.map((o,r)=>n[r]?[]:[{from:o.from,insert:i[r].open+" "},{from:o.to,insert:" "+i[r].close}]))};if(s!=1&&n.some(o=>o)){let o=[];for(let r=0,a;r<n.length;r++)if(a=n[r]){let l=i[r],{open:c,close:d}=a;o.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:d.pos-d.margin,to:d.pos+l.close.length})}return{changes:o}}return null}function P1(s,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:o,to:r}of t){let a=i.length,l=1e9;for(let c=o;c<=r;){let d=e.doc.lineAt(c);if(d.from>n&&(o==r||r>d.from)){n=d.from;let u=Bl(e,c).line;if(!u)continue;let h=/^\s*/.exec(d.text)[0].length,p=h==d.length,f=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:f,token:u,indent:h,empty:p,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}if(s!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:c,empty:d,single:u}of i)(u||!d)&&o.push({from:a.from+c,insert:l+" "});let r=e.changes(o);return{changes:r,selection:e.selection.map(r,1)}}else if(s!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:r,comment:a,token:l}of i)if(a>=0){let c=r.from+a,d=c+l.length;r.text[d-r.from]==" "&&d++,o.push({from:c,to:d})}return{changes:o}}return null}const za=Rs.define(),D1=Rs.define(),I1=U.define(),Og=U.define({combine(s){return ps(s,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function A1(s){let e=0;return s.iterChangedRanges((t,i)=>e=i),e}const bg=Ne.define({create(){return Mt.empty},update(s,e){let t=e.state.facet(Og),i=e.annotation(za);if(i){let l=e.docChanged?A.single(A1(e.changes)):void 0,c=Ye.fromTransaction(e,l),d=i.side,u=d==0?s.undone:s.done;return c?u=Eo(u,u.length,t.minDepth,c):u=Tg(u,e.startState.selection),new Mt(d==0?i.rest:u,d==0?u:i.rest)}let n=e.annotation(D1);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation($e.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let o=Ye.fromTransaction(e),r=e.annotation($e.time),a=e.annotation($e.userEvent);return o?s=s.addChanges(o,r,a,t.newGroupDelay,t.minDepth):e.selection&&(s=s.addSelection(e.startState.selection,r,a,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new Mt(s.done.map(Ye.fromJSON),s.undone.map(Ye.fromJSON))}});function R1(s={}){return[bg,Og.of(s),z.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?M1:e.inputType=="historyRedo"?W1:null;return i?(e.preventDefault(),i(t)):!1}})]}function xg(s,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(bg,!1);if(!n)return!1;let o=n.pop(s,t,e);return o?(i(o),!0):!1}}const M1=xg(0,!1),W1=xg(1,!1);class Ye{constructor(e,t,i,n,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=o}setSelAfter(e){return new Ye(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Ye(e.changes&&xe.fromJSON(e.changes),[],e.mapped&&Qt.fromJSON(e.mapped),e.startSelection&&A.fromJSON(e.startSelection),e.selectionsAfter.map(A.fromJSON))}static fromTransaction(e,t){let i=ft;for(let n of e.startState.facet(I1)){let o=n(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Ye(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,ft)}static selection(e){return new Ye(void 0,ft,void 0,void 0,e)}}function Eo(s,e,t,i){let n=e+1>t+20?e-t-1:0,o=s.slice(n,e);return o.push(i),o}function L1(s,e){let t=[],i=!1;return s.iterChangedRanges((n,o)=>t.push(n,o)),e.iterChangedRanges((n,o,r,a)=>{for(let l=0;l<t.length;){let c=t[l++],d=t[l++];a>=c&&r<=d&&(i=!0)}}),i}function Q1(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function $g(s,e){return s.length?e.length?s.concat(e):s:e}const ft=[],B1=200;function Tg(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-B1));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),Eo(s,s.length-1,1e9,t.setSelAfter(i)))}else return[Ye.selection([e])]}function U1(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Qr(s,e){if(!s.length)return s;let t=s.length,i=ft;for(;t;){let n=V1(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let o=s.slice(0,t);return o[t-1]=n,o}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Ye.selection(i)]:ft}function V1(s,e,t){let i=$g(s.selectionsAfter.length?s.selectionsAfter.map(a=>a.map(e)):ft,t);if(!s.changes)return Ye.selection(i);let n=s.changes.map(e),o=e.mapDesc(s.changes,!0),r=s.mapped?s.mapped.composeDesc(o):o;return new Ye(n,X.mapEffects(s.effects,e),r,s.startSelection.map(o),i)}const F1=/^(input\.type|delete)($|\.)/;class Mt{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new Mt(this.done,this.undone):this}addChanges(e,t,i,n,o){let r=this.done,a=r[r.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||F1.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<n&&L1(a.changes,e.changes)||i=="input.type.compose")?r=Eo(r,r.length-1,o,new Ye(e.changes.compose(a.changes),$g(e.effects,a.effects),a.mapped,a.startSelection,ft)):r=Eo(r,r.length,o,e),new Mt(r,ft,t,i)}addSelection(e,t,i,n){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ft;return o.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Q1(o[o.length-1],e)?this:new Mt(Tg(this.done,e),this.undone,t,i)}addMapping(e){return new Mt(Qr(this.done,e),Qr(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let o=n[n.length-1];if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:za.of({side:e,rest:U1(n)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let r=n.length==1?ft:n.slice(0,n.length-1);return o.mapped&&(r=Qr(r,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:za.of({side:e,rest:r}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Mt.empty=new Mt(ft,ft);function j1(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Re(s).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),o;return i&&n&&i.to<=e&&n.from>=e&&(o=i.type.prop(K.closedBy))&&o.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from?{from:i.to,to:n.from}:null}const z1=G1(!1);function G1(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:o,to:r}=n,a=e.doc.lineAt(o),l=!s&&o==r&&j1(e,o);s&&(o=r=(r<=a.to?a:e.doc.lineAt(r)).to);let c=new Cl(e,{simulateBreak:o,simulateDoubleBreak:!!l}),d=Hm(c,o);for(d==null&&(d=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);r<a.to&&/\s/.test(a.text[r-a.from]);)r++;l?{from:o,to:r}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let u=["",xo(e,d)];return l&&u.push(xo(e,c.lineIndent(a.from,-1))),{changes:{from:o,to:r,insert:se.of(u)},range:A.cursor(o+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function kg(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let r=i.from;r<=i.to;){let a=s.doc.lineAt(r);a.number>t&&(i.empty||i.to>a.from)&&(e(a,n,i),t=a.number),r=a.to+1}let o=s.changes(n);return{changes:n,range:A.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const H1=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(kg(s,(t,i)=>{i.push({from:t.from,insert:s.facet(Ko)})}),{userEvent:"input.indent"})),!0),q1=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(kg(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let o=yl(n,s.tabSize),r=0,a=xo(s,Math.max(0,o-Gm(s)));for(;r<n.length&&r<a.length&&n.charCodeAt(r)==a.charCodeAt(r);)r++;i.push({from:t.from+r,to:t.from+n.length,insert:a.slice(r)})}),{userEvent:"delete.dedent"})),!0),X1={key:"Tab",run:H1,shift:q1};function It(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?s.setAttribute(i,n):n!=null&&(s[i]=n)}e++}for(;e<arguments.length;e++)Sg(s,arguments[e]);return s}function Sg(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Sg(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}class Y1{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class ys{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,o=i.facet(Os).markerFilter;o&&(n=o(n));let r=H.set(n.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?H.widget({widget:new iN(a),diagnostic:a}).range(a.from):H.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new ys(r,t,ci(r))}}function ci(s,e=null,t=0){let i=null;return s.between(t,1e9,(n,o,{spec:r})=>{if(!(e&&r.diagnostic!=e))return i=new Y1(n,o,r.diagnostic),!1}),i}function Eg(s,e){return!!(s.effects.some(t=>t.is(er))||s.changes.touchesRange(e.pos))}function Z1(s,e){return s.field(bt,!1)?e:e.concat(X.appendConfig.of([bt,z.decorations.compute([bt],t=>{let{selected:i,panel:n}=t.field(bt);return!i||!n||i.from==i.to?H.none:H.set([J1.range(i.from,i.to)])}),SE(eN,{hideOn:Eg}),nN]))}function K1(s,e){return{effects:Z1(s,[er.of(e)])}}const er=X.define(),Cg=X.define(),Ng=X.define(),bt=Ne.define({create(){return new ys(H.none,null,null)},update(s,e){if(e.docChanged){let t=s.diagnostics.map(e.changes),i=null;if(s.selected){let n=e.changes.mapPos(s.selected.from,1);i=ci(t,s.selected.diagnostic,n)||ci(t,null,n)}s=new ys(t,s.panel,i)}for(let t of e.effects)t.is(er)?s=ys.init(t.value,s.panel,e.state):t.is(Cg)?s=new ys(s.diagnostics,t.value?Ul.open:null,s.selected):t.is(Ng)&&(s=new ys(s.diagnostics,s.panel,t.value));return s},provide:s=>[Wa.from(s,e=>e.panel),z.decorations.from(s,e=>e.diagnostics)]}),J1=H.mark({class:"cm-lintRange cm-lintRange-active"});function eN(s,e,t){let{diagnostics:i}=s.state.field(bt),n=[],o=2e8,r=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:d})=>{e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0))&&(n.push(d.diagnostic),o=Math.min(l,o),r=Math.max(c,r))});let a=s.state.facet(Os).tooltipFilter;return a&&(n=a(n)),n.length?{pos:o,end:r,above:s.state.doc.lineAt(o).to<r,create(){return{dom:Pg(s,n)}}}:null}function Pg(s,e){return It("ul",{class:"cm-tooltip-lint"},e.map(t=>Ig(s,t,!1)))}const Eu=s=>{let e=s.state.field(bt,!1);return!e||!e.panel?!1:(s.dispatch({effects:Cg.of(!1)}),!0)},tN=Ve.fromClass(class{constructor(s){this.view=s,this.timeout=-1,this.set=!0;let{delay:e}=s.state.facet(Os);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let s=Date.now();if(s<this.lintTime-10)setTimeout(this.run,this.lintTime-s);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Os);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let n=i.reduce((o,r)=>o.concat(r));this.view.state.doc==e.doc&&this.view.dispatch(K1(this.view.state,n))},i=>{lt(this.view.state,i)})}}update(s){let e=s.state.facet(Os);(s.docChanged||e!=s.startState.facet(Os))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Os=U.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},ps(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:tN});function sN(s,e={}){return Os.of({source:s,config:e})}function Dg(s){let e=[];if(s)e:for(let{name:t}of s){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(o=>o.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function Ig(s,e,t){var i;let n=t?Dg(e.actions):[];return It("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},It("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,r)=>{let a=u=>{u.preventDefault();let h=ci(s.state.field(bt).diagnostics,e);h&&o.apply(s,h.from,h.to)},{name:l}=o,c=n[r]?l.indexOf(n[r]):-1,d=c<0?l:[l.slice(0,c),It("u",l.slice(c,c+1)),l.slice(c+1)];return It("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${c<0?"":` (access key "${n[r]})"`}.`},d)}),e.source&&It("div",{class:"cm-diagnosticSource"},e.source))}class iN extends Yt{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return It("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Cu{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Ig(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ul{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)Eu(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],r=Dg(o.actions);for(let a=0;a<r.length;a++)if(r[a].toUpperCase().charCodeAt(0)==n.keyCode){let l=ci(this.view.state.field(bt).diagnostics,o);l&&o.actions[a].apply(e,l.from,l.to)}}else return;n.preventDefault()},i=n=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(n.target)&&this.moveSelection(o)};this.list=It("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=It("div",{class:"cm-panel-lint"},this.list,It("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Eu(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(bt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(bt),i=0,n=!1,o=null;for(e.between(0,this.view.state.doc.length,(r,a,{spec:l})=>{let c=-1,d;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==l.diagnostic){c=u;break}c<0?(d=new Cu(this.view,l.diagnostic),this.items.splice(i,0,d),n=!0):(d=this.items[c],c>i&&(this.items.splice(i,c-i),n=!0)),t&&d.diagnostic==t.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),o=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Cu(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:r,panel:a})=>{r.top<a.top?this.list.scrollTop-=a.top-r.top:r.bottom>a.bottom&&(this.list.scrollTop+=r.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(bt),i=ci(t.diagnostics,this.items[e].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ng.of(i)})}static open(e){return new Ul(e)}}function Yn(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Br(s){return Yn(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const nN=z.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Br("#d11")},".cm-lintRange-warning":{backgroundImage:Br("orange")},".cm-lintRange-info":{backgroundImage:Br("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class oN extends Ut{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>{let n=i.severity;return n=="error"||n=="warning"&&t=="info"?n:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,n=e.state.facet(tr).tooltipFilter;return n&&(i=n(i)),i.length&&(t.onmouseover=()=>aN(e,t,i)),t}}function rN(s,e){let t=i=>{let n=e.getBoundingClientRect();if(!(i.clientX>n.left-10&&i.clientX<n.right+10&&i.clientY>n.top-10&&i.clientY<n.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),s.state.field(Rg)&&s.dispatch({effects:Vl.of(null)})}};window.addEventListener("mousemove",t)}function aN(s,e,t){function i(){let r=s.elementAtHeight(e.getBoundingClientRect().top+5-s.documentTop);s.coordsAtPos(r.from)&&s.dispatch({effects:Vl.of({pos:r.from,above:!1,create(){return{dom:Pg(s,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,rN(s,e)}let{hoverTime:n}=s.state.facet(tr),o=setTimeout(i,n);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,n)}}function lN(s,e){let t=Object.create(null);for(let n of e){let o=s.lineAt(n.from);(t[o.from]||(t[o.from]=[])).push(n)}let i=[];for(let n in t)i.push(new oN(t[n]).range(+n));return ee.of(i,!0)}const cN=Im({class:"cm-gutter-lint",markers:s=>s.state.field(Ag)}),Ag=Ne.define({create(){return ee.empty},update(s,e){s=s.map(e.changes);let t=e.state.facet(tr).markerFilter;for(let i of e.effects)if(i.is(er)){let n=i.value;t&&(n=t(n||[])),s=lN(e.state.doc,n.slice(0))}return s}}),Vl=X.define(),Rg=Ne.define({create(){return null},update(s,e){return s&&e.docChanged&&(s=Eg(e,s)?null:Object.assign(Object.assign({},s),{pos:e.changes.mapPos(s.pos)})),e.effects.reduce((t,i)=>i.is(Vl)?i.value:t,s)},provide:s=>Zo.from(s)}),dN=z.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Yn('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Yn('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:Yn('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),tr=U.define({combine(s){return ps(s,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function uN(s={}){return[tr.of(s),Ag,cN,dN,Rg]}const hN=z.inputHandler.of((s,e,t,i)=>{if(s.composing||s.state.readOnly||m1(s.state)!==null)return!1;const n=s.state.selection.main;if(i==="["&&s.state.doc.toString().slice(n.from-5,n.to)===".json"||i.length>2||i.length===2&&ht(je(i,0))===1||e!==n.from||t!==n.to)return!1;const o=pg(s.state,i);return o?(s.dispatch(o),!0):!1}),[g7,pN]=i1(),fN=[WE(),BE(),uE(),R1(),l0(),uN(),[hN,pN],oE(),JC(),v0(),wE(),Yo.of([{key:"Enter",run:z1},{key:"Tab",run:ja},{key:"Enter",run:ja},{key:"Mod-/",run:T1},X1]),z.lineWrapping],mN=[nt],gN=["console","constants","crypto","dns","dns/promises","fs","fs/promises","http","http2","https","inspector","module","os","path","process","readline","url","util","zlib"],et="error",wN=300,Nu=35,Pu=`
// Loop over input items and add a new field
// called 'myNewField' to the JSON of each one
for (const item of $input.all()) {
  item.json.myNewField = 1;
}

return $input.all();
`.trim(),Du=`
// Add a new field called 'myNewField' to the
// JSON of the item
$input.item.json.myNewField = 1;

return $input.item;
`.trim();function We(s,e,t=[]){e(s)&&t.push(s);for(const i in s){if(!(i in s))continue;const n=s[i];n===null||typeof n!="object"||(Array.isArray(n)?n.forEach(o=>We(o,e,t)):We(n,e,t))}return t}const yN=s=>!/^(\d)|[\\ `!@#$%^&*()_+\-=[\]{};':"\\|,.<>?~]/g.test(s),Es=s=>s.replace("$","\\$").replace("(","\\(").replace(")","\\)").replace("[","\\[").replace("]","\\]"),vN=s=>({label:s,type:"variable"}),as=s=>({...s,type:"variable"}),_N=m.extend({methods:{linterExtension(){return sN(this.lintSource,{delay:wN})},lintSource(s){const t=`module.exports = async function() {${s.state.doc.toString()}
}()`;let i=null;try{i=r_.exports.parseScript(t,{range:!0})}catch(l){let c;try{return c=s.state.doc.line(l.lineNumber),[{from:c.from,to:c.to,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.bothModes.syntaxError")}]}catch{return[]}}const n=[];this.mode==="runOnceForEachItem"&&We(i,c=>c.type==="CallExpression"&&c.callee.type==="MemberExpression"&&c.callee.property.type==="Identifier"&&c.callee.property.name==="item").forEach(c=>{const[d,u]=this.getRange(c);n.push({from:d,to:u,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.allItems.itemCall"),actions:[{name:"Fix",apply(h,p,f){h.dispatch({changes:{from:u-2,to:f}})}}]})}),this.mode==="runOnceForAllItems"&&We(i,c=>c.type==="Identifier"&&["$json","$binary","$itemIndex"].includes(c.name)).forEach(c=>{const[d,u]=this.getRange(c),h=this.getText(c);if(!h)return;const p=[`\`${h}\``,this.$locale.baseText("codeNodeEditor.linter.allItems.unavailableVar")].join(" ");n.push({from:d,to:u,severity:et,message:p,actions:[{name:"Remove",apply(f,w,g){f.dispatch({changes:{from:w,to:g}})}}]})}),this.mode==="runOnceForAllItems"&&We(i,c=>c.type==="MemberExpression"&&c.computed===!1&&c.property.type==="Identifier"&&c.property.name==="item").forEach(c=>{const[d,u]=this.getRange(c.property);n.push({from:d,to:u,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.allItems.unavailableProperty"),actions:[{name:"Remove",apply(h){h.dispatch({changes:{from:d-1,to:u}})}}]})}),this.mode==="runOnceForEachItem"&&!/(let|const|var) item =/.test(t)&&We(i,c=>c.type==="MemberExpression"&&c.computed===!1&&c.object.type==="Identifier"&&c.object.name==="item").forEach(c=>{const[d,u]=this.getRange(c.object);n.push({from:d,to:u,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.eachItem.legacyItemAccess"),actions:[{name:"Fix",apply(h,p,f){h.state.doc.toString().slice(p,f).includes("$input.item.json")||(h.dispatch({changes:{from:d,to:u}}),h.dispatch({changes:{from:p,insert:"$input.item.json"}}))}}]})}),this.mode==="runOnceForEachItem"&&We(i,c=>c.type==="MemberExpression"&&c.computed===!1&&c.object.type==="Identifier"&&c.object.name==="$input"&&c.property.type==="Identifier"&&["first","last","all","itemMatching"].includes(c.property.name)).forEach(c=>{const[d,u]=this.getRange(c.property),h=this.getText(c.property);!h||n.push({from:d,to:u,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.eachItem.unavailableMethod",{interpolate:{method:h}})})}),this.mode==="runOnceForAllItems"&&We(i,c=>c.type==="CallExpression"&&c.callee.type==="MemberExpression"&&c.callee.property.type==="Identifier"&&c.callee.property.name==="itemMatching"&&c.arguments.length===0).forEach(c=>{const[d,u]=this.getRange(c.callee.property);n.push({from:d,to:u+2,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.allItems.itemMatchingNoArg")})}),this.mode==="runOnceForAllItems"&&We(i,c=>c.type==="CallExpression"&&c.callee.type==="MemberExpression"&&c.callee.property.type==="Identifier"&&["first","last"].includes(c.callee.property.name)&&c.arguments.length!==0).forEach(c=>{const[d,u]=this.getRange(c.callee.property),h=[`\`.${c.callee.property.name}()\``,this.$locale.baseText("codeNodeEditor.linter.allItems.firstOrLastCalledWithArg")].join(" ");n.push({from:d,to:u+2,severity:et,message:h})});const o=l=>l.type==="ReturnStatement"&&l.argument===null,r=this.mode==="runOnceForAllItems"?this.$locale.baseText("codeNodeEditor.linter.allItems.emptyReturn"):this.$locale.baseText("codeNodeEditor.linter.eachItem.emptyReturn");if(We(i,o).forEach(l=>{const[c,d]=l.range.map(u=>u-Nu);n.push({from:c,to:d,severity:et,message:r})}),this.mode==="runOnceForEachItem"&&We(i,c=>c.type==="ReturnStatement"&&c.argument!==null&&c.argument!==void 0&&c.argument.type==="ArrayExpression").forEach(c=>{const[d,u]=this.getRange(c);n.push({from:d,to:u,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.eachItem.returnArray")})}),this.mode==="runOnceForAllItems"){const c=We(i,d=>d.type==="ForOfStatement"&&d.left.type==="VariableDeclaration"&&d.left.declarations.length===1&&d.left.declarations[0].type==="VariableDeclarator"&&d.left.declarations[0].id.type==="Identifier");if(c.length===1){const d=c[0].left.declarations[0].id.name,h=We(i,w=>w.type==="VariableDeclarator"&&w.id.type==="Identifier"&&w.id.name==="item"&&w.init!==null);let p;if(h.length>0){const[w]=h,[g]=this.getRange(w);p=g}We(i,w=>w.type==="MemberExpression"&&w.object.type==="Identifier"&&w.object.name===d&&w.property.type==="Identifier"&&!["json","binary"].includes(w.property.name)).forEach(w=>{const[g,v]=this.getRange(w);p&&g>p||!this.getText(w)||n.push({from:g,to:v,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.bothModes.directAccess.itemProperty"),actions:[{name:"Fix",apply(S,T,$){S.state.doc.toString().slice(T,$).includes(".json")||S.dispatch({changes:{from:T+d.length,insert:".json"}})}}]})})}}return this.mode==="runOnceForEachItem"&&We(i,c=>c.type==="MemberExpression"&&c.object.type==="MemberExpression"&&c.object.property.type==="Identifier"&&c.object.property.name==="item"&&c.property.type==="Identifier"&&!["json","binary"].includes(c.property.name)).forEach(c=>{if(!this.getText(c))return;const[u,h]=this.getRange(c),[p,f]=this.getRange(c.object.property);n.push({from:u,to:h,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.bothModes.directAccess.itemProperty"),actions:[{name:"Fix",apply(w,g,v){w.state.doc.toString().slice(g,v).includes(".json")||w.dispatch({changes:{from:f,insert:".json"}})}}]})}),We(i,l=>l.type==="MemberExpression"&&l.property.type==="Identifier"&&!["json","binary"].includes(l.property.name)&&l.object.type==="CallExpression"&&l.object.arguments.length===0&&l.object.callee.type==="MemberExpression"&&l.object.callee.property.type==="Identifier"&&["first","last"].includes(l.object.callee.property.name)).forEach(l=>{const[c,d]=this.getRange(l),[u,h]=this.getRange(l.object);n.push({from:c,to:d,severity:et,message:this.$locale.baseText("codeNodeEditor.linter.bothModes.directAccess.firstOrLastCall"),actions:[{name:"Fix",apply(p,f,w){p.state.doc.toString().slice(f,w).includes(".json")||p.dispatch({changes:{from:h,insert:".json"}})}}]})}),n},getText(s){if(!this.editor)return null;const[e,t]=this.getRange(s);return this.editor.state.doc.toString().slice(e,t)},getRange(s){return s.range.map(e=>e-Nu)}}});function Iu(s){return s.filter(e=>!mN.includes(e.type)).map(e=>e.name)}const ON=m.extend({methods:{baseCompletions(s){const e=s.matchBefore(/\$\w*/);if(!e||e.from===e.to&&!s.explicit)return null;const i=[{label:"$execution",info:this.$locale.baseText("codeNodeEditor.completer.$execution")},{label:"$input",info:this.$locale.baseText("codeNodeEditor.completer.$input")},{label:"$prevNode",info:this.$locale.baseText("codeNodeEditor.completer.$prevNode")},{label:"$workflow",info:this.$locale.baseText("codeNodeEditor.completer.$workflow")},{label:"$now",info:this.$locale.baseText("codeNodeEditor.completer.$now")},{label:"$today",info:this.$locale.baseText("codeNodeEditor.completer.$today")},{label:"$jmespath()",info:this.$locale.baseText("codeNodeEditor.completer.$jmespath")},{label:"$runIndex",info:this.$locale.baseText("codeNodeEditor.completer.$runIndex")}].map(as);if(i.push(...Iu(this.$store.getters.allNodes).map(n=>({label:`$('${n}')`,type:"variable",info:this.$locale.baseText("codeNodeEditor.completer.$()",{interpolate:{nodeName:n}})}))),this.mode==="runOnceForEachItem"){const n=[{label:"$json"},{label:"$binary"},{label:"$itemIndex",info:this.$locale.baseText("codeNodeEditor.completer.$itemIndex")}];i.push(...n.map(as))}return{from:e.from,options:i}},nodeSelectorCompletions(s){const e=s.matchBefore(/\$\(.*/);if(!e||e.from===e.to&&!s.explicit)return null;const t=Iu(this.$store.getters.allNodes).map(i=>({label:`$('${i}')`,type:"variable",info:this.$locale.baseText("codeNodeEditor.completer.$()",{interpolate:{nodeName:i}})}));return{from:e.from,options:t}}}}),bN=Dl([...mg.filter(s=>s.label!=="class"),Fe("console.log(${arg})",{label:"console.log()"}),Fe("DateTime",{label:"DateTime"}),Fe("Interval",{label:"Interval"}),Fe("Duration",{label:"Duration"})]),xN=m.extend({methods:{requireCompletions(s){var o,r,a;const e=s.matchBefore(/req.*/);if(!e||e.from===e.to&&!s.explicit)return null;const t=[],i=this.$store.getters["settings/allowedModules"],n=l=>({label:`require('${l}');`,type:"variable"});return(o=i==null?void 0:i.builtIn)!=null&&o.includes("*")?t.push(...gN.map(n)):((r=i==null?void 0:i.builtIn)==null?void 0:r.length)>0&&t.push(...i.builtIn.map(n)),((a=i==null?void 0:i.external)==null?void 0:a.length)>0&&t.push(...i.external.map(n)),{from:e.from,options:t}}}}),$N=m.extend({methods:{executionCompletions(s,e="$execution"){const t=new RegExp(`${Es(e)}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=[{label:`${e}.id`,info:this.$locale.baseText("codeNodeEditor.completer.$execution.id")},{label:`${e}.mode`,info:this.$locale.baseText("codeNodeEditor.completer.$execution.mode")},{label:`${e}.resumeUrl`,info:this.$locale.baseText("codeNodeEditor.completer.$execution.resumeUrl")}];return{from:i.from,options:n.map(as)}}}}),TN=s=>s.replace("$","\\$"),kN=m.extend({methods:{workflowCompletions(s,e="$workflow"){const t=new RegExp(`${TN(e)}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=[{label:`${e}.id`,info:this.$locale.baseText("codeNodeEditor.completer.$workflow.id")},{label:`${e}.name`,info:this.$locale.baseText("codeNodeEditor.completer.$workflow.name")},{label:`${e}.active`,info:this.$locale.baseText("codeNodeEditor.completer.$workflow.active")}];return{from:i.from,options:n.map(as)}}}}),SN="$prevNode",EN=s=>s.replace("$","\\$"),CN=m.extend({methods:{prevNodeCompletions(s,e=SN){const t=new RegExp(`${EN(e)}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=[{label:`${e}.name`,info:this.$locale.baseText("codeNodeEditor.completer.$prevNode.name")},{label:`${e}.outputIndex`,info:this.$locale.baseText("codeNodeEditor.completer.$prevNode.outputIndex")},{label:`${e}.runIndex`,info:this.$locale.baseText("codeNodeEditor.completer.$prevNode.runIndex")}];return{from:i.from,options:n.map(as)}}}}),NN=m.extend({methods:{todayCompletions(s,e="$today"){const t=new RegExp(`${Es(e)}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=this.luxonInstanceGetters().map(([o,r])=>({label:`${e}.${o}`,type:"function",info:r}));return n.push(...this.luxonInstanceMethods().map(([o,r])=>({label:`${e}.${o}()`,type:"function",info:r}))),{from:i.from,options:n}},nowCompletions(s,e="$now"){const t=new RegExp(`${Es(e)}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=this.luxonInstanceGetters().map(([o,r])=>({label:`${e}.${o}`,type:"function",info:r}));return n.push(...this.luxonInstanceMethods().map(([o,r])=>({label:`${e}.${o}()`,type:"function",info:r}))),{from:i.from,options:n}},dateTimeCompltions(s,e="DateTime"){const t=new RegExp(`${Es(e)}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=this.luxonDateTimeStaticMethods().map(([o,r])=>({label:`DateTime.${o}()`,type:"function",info:r}));return{from:i.from,options:n}},luxonDateTimeStaticMethods(){return Object.entries({now:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.now"),local:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.local"),utc:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.utc"),fromJSDate:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromJSDate"),fromMillis:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromMillis"),fromSeconds:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromSeconds"),fromObject:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromObject"),fromISO:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromISO"),fromRFC2822:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromRFC2822"),fromHTTP:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromHTTP"),fromFormat:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromFormat"),fromSQL:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromSQL"),invalid:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.invalid"),isDateTime:this.$locale.baseText("codeNodeEditor.completer.luxon.dateTimeStaticMethods.isDateTime")})},luxonInstanceGetters(){return Object.entries({isValid:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.isValid"),invalidReason:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.invalidReason"),invalidExplanation:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.invalidExplanation"),locale:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.locale"),numberingSystem:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.numberingSystem"),outputCalendar:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.outputCalendar"),zone:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.zone"),zoneName:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.zoneName"),year:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.year"),quarter:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.quarter"),month:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.month"),day:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.day"),hour:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.hour"),minute:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.minute"),second:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.second"),millisecond:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.millisecond"),weekYear:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.weekYear"),weekNumber:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.weekNumber"),weekday:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.weekday"),ordinal:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.ordinal"),monthShort:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.monthShort"),monthLong:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.monthLong"),weekdayShort:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.weekdayShort"),weekdayLong:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.weekdayLong"),offset:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.offset"),offsetNumber:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.offsetNumber"),offsetNameShort:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.offsetNameShort"),offsetNameLong:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.offsetNameLong"),isOffsetFixed:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.isOffsetFixed"),isInDST:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.isInDST"),isInLeapYear:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.isInLeapYear"),daysInMonth:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.daysInMonth"),daysInYear:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.daysInYear"),weeksInWeekYear:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.weeksInWeekYear")})},luxonInstanceMethods(){return Object.entries({toUTC:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toUTC"),toLocal:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toLocal"),setZone:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.setZone"),setLocale:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.setLocale"),set:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.set"),plus:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.plus"),minus:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.minus"),startOf:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.startOf"),endOf:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.endOf"),toFormat:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toFormat"),toLocaleString:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toLocaleString"),toLocaleParts:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toLocaleParts"),toISO:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toISO"),toISODate:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toISODate"),toISOWeekDate:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toISOWeekDate"),toISOTime:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toISOTime"),toRFC2822:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toRFC2822"),toHTTP:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toHTTP"),toSQLDate:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toSQLDate"),toSQLTime:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toSQLTime"),toSQL:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toSQL"),toString:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toString"),valueOf:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.valueOf"),toMillis:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toMillis"),toSeconds:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toSeconds"),toUnixInteger:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toUnixInteger"),toJSON:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toJSON"),toBSON:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toBSON"),toObject:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toObject"),toJsDate:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toJsDate"),diff:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.diff"),diffNow:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.diffNow"),until:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.until"),hasSame:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.hasSame"),equals:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.equals"),toRelative:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toRelative"),toRelativeCalendar:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.toRelativeCalendar"),min:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.min"),max:this.$locale.baseText("codeNodeEditor.completer.luxon.instanceMethods.max")})}}}),PN=m.extend({methods:{inputCompletions(s,e="$input"){const t=new RegExp(`${Es(e)}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=[];return this.mode==="runOnceForAllItems"&&n.push({label:`${e}.first()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.$input.first")},{label:`${e}.last()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.$input.last")},{label:`${e}.all()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.$input.all")},{label:`${e}.itemMatching()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.$input.itemMatching")}),this.mode==="runOnceForEachItem"&&n.push({label:`${e}.item`,type:"variable",info:this.$locale.baseText("codeNodeEditor.completer.$input.item")}),{from:i.from,options:n}},selectorCompletions(s,e=null){var a;const t=e===null?/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\..*/:new RegExp(`${e}..*`),i=s.matchBefore(t);if(!i||i.from===i.to&&!s.explicit)return null;const n=i.text.match(t);let o="";e===null&&((a=n==null?void 0:n.groups)==null?void 0:a.quotedNodeName)?o=`$(${n.groups.quotedNodeName})`:e&&(o=e);const r=[{label:`${o}.params`,type:"variable",info:this.$locale.baseText("codeNodeEditor.completer.selector.params")},{label:`${o}.context`,type:"variable",info:this.$locale.baseText("codeNodeEditor.completer.selector.context")}];return this.mode==="runOnceForAllItems"&&r.push({label:`${o}.first()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.$input.first")},{label:`${o}.last()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.$input.last")},{label:`${o}.all()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.$input.all")},{label:`${o}.itemMatching()`,type:"function",info:this.$locale.baseText("codeNodeEditor.completer.selector.itemMatching")}),this.mode==="runOnceForEachItem"&&r.push({label:`${o}.item`,type:"variable",info:this.$locale.baseText("codeNodeEditor.completer.selector.item")}),{from:i.from,options:r}}}}),DN=m.extend({methods:{matcherItemFieldCompletions(s,e,t){const i=s.matchBefore(new RegExp(`${Es(e)}..*`));if(!i)return null;const[n]=i.text.split(".");if(!t[n])return null;const r=[{label:`${e}.json`,info:this.$locale.baseText("codeNodeEditor.completer.json")},{label:`${e}.binary`,info:this.$locale.baseText("codeNodeEditor.completer.binary")}];return{from:i.from,options:r.map(as)}},inputMethodCompletions(s){var t;const e={first:/\$input\.first\(\)\..*/,last:/\$input\.last\(\)\..*/,item:/\$input\.item\..*/,all:/\$input\.all\(\)\[(?<index>\w+)\]\..*/};for(const[i,n]of Object.entries(e)){const o=s.matchBefore(n);if(!o||o.from===o.to&&!s.explicit)continue;let r="";if(i==="item"&&(r="$input.item"),i==="first"&&(r="$input.first()"),i==="last"&&(r="$input.last()"),i==="all"){const l=o.text.match(n);if(!((t=l==null?void 0:l.groups)!=null&&t.index))continue;const{index:c}=l.groups;r=`$input.all()[${c}]`}const a=[{label:`${r}.json`,info:this.$locale.baseText("codeNodeEditor.completer.json")},{label:`${r}.binary`,info:this.$locale.baseText("codeNodeEditor.completer.binary")}];return{from:o.from,options:a.map(as)}}return null},selectorMethodCompletions(s,e=null){var i,n;const t={first:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.first\(\)\..*/,last:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.last\(\)\..*/,item:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.item\..*/,all:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.all\(\)\[(?<index>\w+)\]\..*/};for(const[o,r]of Object.entries(t)){const a=s.matchBefore(r);if(!a||a.from===a.to&&!s.explicit)continue;const l=a.text.match(r);let c="";!e&&((i=l==null?void 0:l.groups)==null?void 0:i.quotedNodeName)&&(c=`$(${l.groups.quotedNodeName})`);let d="";if(o==="item"&&(d=`${c}.item`),o==="first"&&(d=`${c}.first()`),o==="last"&&(d=`${c}.last()`),o==="all"){const h=a.text.match(r);if(!((n=h==null?void 0:h.groups)!=null&&n.index))continue;d=`${c}.all()[${h.groups.index}]`}const u=[{label:`${d}.json`,info:this.$locale.baseText("codeNodeEditor.completer.json")},{label:`${d}.binary`,info:this.$locale.baseText("codeNodeEditor.completer.binary")}];return{from:a.from,options:u.map(as)}}return null}}}),IN=m.extend({methods:{matcherJsonFieldCompletions(s,e,t){var l;const i=new RegExp(`(${Es(e)})..*`),n=s.matchBefore(i);if(!n||n.from===n.to&&!s.explicit)return null;const o=this.getInputNodeName();if(!o)return null;const[r]=n.text.split("."),a=t[r];if(!a)return null;for(const c of["first","last","item"])if(a.includes(c)||n.text.includes(c)){const d=this.getJsonOutput(o,{accessor:c});return d?this.toJsonFieldCompletions(n,d,e):null}if(a.includes("all")){const c=a.match(/\$(input|\(.*\))\.all\(\)\[(?<index>.+)\]$/);if(!((l=c==null?void 0:c.groups)!=null&&l.index))return null;const{index:d}=c.groups,u=this.getJsonOutput(o,{index:Number(d)});return u?this.toJsonFieldCompletions(n,u,e):null}return null},inputJsonFieldCompletions(s){var t;const e={first:/\$input\.first\(\)\.json(\[|\.).*/,last:/\$input\.last\(\)\.json(\[|\.).*/,item:/\$input\.item\.json(\[|\.).*/,all:/\$input\.all\(\)\[(?<index>\w+)\]\.json(\[|\.).*/};for(const[i,n]of Object.entries(e)){const o=s.matchBefore(n);if(!o||o.from===o.to&&!s.explicit)continue;const r=this.getInputNodeName();if(!!r){if(i==="first"||i==="last"){const a=this.getJsonOutput(r,{accessor:i});if(!a)continue;return this.toJsonFieldCompletions(o,a,`$input.${i}().json`)}if(i==="item"){const a=this.getJsonOutput(r,{accessor:"item"});if(!a)continue;return this.toJsonFieldCompletions(o,a,"$input.item.json")}if(i==="all"){const a=o.text.match(n);if(!((t=a==null?void 0:a.groups)!=null&&t.index))continue;const{index:l}=a.groups,c=this.getJsonOutput(r,{index:Number(l)});if(!c)continue;return this.toJsonFieldCompletions(o,c,`$input.all()[${l}].json`)}}}return null},selectorJsonFieldCompletions(s){var t,i;const e={first:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.first\(\)\.json(\[|\.).*/,last:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.last\(\)\.json(\[|\.).*/,item:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.item\.json(\[|\.).*/,all:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.all\(\)\[(?<index>\w+)\]\.json(\[|\.).*/};for(const[n,o]of Object.entries(e)){const r=s.matchBefore(o);if(!r||r.from===r.to&&!s.explicit)continue;const a=r.text.match(o);if(!((t=a==null?void 0:a.groups)!=null&&t.quotedNodeName))continue;const{quotedNodeName:l}=a.groups,c=`$(${a.groups.quotedNodeName})`;if(n==="first"||n==="last"){const d=this.getJsonOutput(l,{accessor:n});if(!d)continue;return this.toJsonFieldCompletions(r,d,`${c}.${n}().json`)}if(n==="item"){const d=this.getJsonOutput(l,{accessor:"item"});if(!d)continue;return this.toJsonFieldCompletions(r,d,`${c}.item.json`)}if(n==="all"){const d=r.text.match(o);if(!((i=d==null?void 0:d.groups)!=null&&i.index))continue;const{index:u}=d.groups,h=this.getJsonOutput(l,{index:Number(u)});if(!h)continue;return this.toJsonFieldCompletions(r,h,`${c}.all()[${u}].json`)}}return null},getInputNodeName(){try{const s=this.$store.getters["ndv/activeNode"];return this.getCurrentWorkflow().connectionsByDestinationNode[s.name].main[0][0].node}catch{return null}},toJsonFieldCompletions(s,e,t){if(s.text.endsWith(".json[")||s.text.endsWith(`${t}[`)){const i=Object.keys(e).map(n=>`${t}['${n}']`).map(n=>({label:n,info:this.$locale.baseText("codeNodeEditor.completer.json")}));return{from:s.from,options:i}}if(s.text.endsWith(".json.")||s.text.endsWith(`${t}.`)){const i=Object.keys(e).filter(yN).map(n=>`${t}.${n}`).map(vN);return{from:s.from,options:i}}return null},getJsonOutput(s,e){var a,l;const t=s.replace(/['"]/g,""),i=this.$store.getters.pinData,n=i&&i[t];if(n)try{let c=(a=e==null?void 0:e.index)!=null?a:0;return(e==null?void 0:e.accessor)==="last"&&(c=n.length-1),n[c].json}catch{}const o=this.$store.getters.getWorkflowRunData,r=o&&o[t];if(!r)return null;try{let c=(l=e==null?void 0:e.index)!=null?l:0;return(e==null?void 0:e.accessor)==="last"&&(c=r[0].data.main[0].length-1),r[0].data.main[0][c].json}catch{return null}}}}),AN=N(m,ON,xN,$N,kN,CN,NN,PN,DN,IN).extend({methods:{autocompletionExtension(){return h1({compareCompletions:(s,e)=>/\.json$|id$|id['"]\]$/.test(s.label)?0:s.label.localeCompare(e.label),override:[bN,vg,this.baseCompletions,this.requireCompletions,this.nodeSelectorCompletions,this.prevNodeCompletions,this.workflowCompletions,this.executionCompletions,this.todayCompletions,this.nowCompletions,this.dateTimeCompltions,this.inputCompletions,this.selectorCompletions,this.inputMethodCompletions,this.selectorMethodCompletions,this.inputJsonFieldCompletions,this.selectorJsonFieldCompletions,this.multilineCompletions]})},multilineCompletions(s){if(!this.editor)return null;let e={};try{e=this.variablesToValues()}catch{return null}if(Object.keys(e).length===0)return null;const t=this.editor.state.doc.toString().split(`
`),i=Object.keys(e),n=this.extendedUses(t,i);for(const d of n.itemField){const u=d.replace(/\.$/,""),h=this.matcherItemFieldCompletions(s,u,e);if(h)return h}for(const d of n.jsonField){const u=d.replace(/(\.|\[)$/,""),h=this.matcherJsonFieldCompletions(s,u,e);if(h)return h}const o=/^\$\((?<quotedNodeName>['"][\w\s]+['"])\)$/,r=Object.values({first:/\$input\.first\(\)$/,last:/\$input\.last\(\)$/,item:/\$input\.item$/,all:/\$input\.all\(\)\[(?<index>\w+)\]$/}),a=Object.values({first:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.first\(\)$/,last:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.last\(\)$/,item:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.item$/,all:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.all\(\)\[(?<index>\w+)\]$/}),l=Object.values({first:/\$input\.first\(\)\.json$/,last:/\$input\.last\(\)\.json$/,item:/\$input\.item\.json$/,all:/\$input\.all\(\)\[(?<index>\w+)\]\.json$/}),c=Object.values({first:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.first\(\)\.json$/,last:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.last\(\)\.json$/,item:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.item\.json$/,all:/\$\((?<quotedNodeName>['"][\w\s]+['"])\)\.all\(\)\[(?<index>\w+)\]\.json$/});for(const[d,u]of Object.entries(e)){if(u==="$execution")return this.executionCompletions(s,d);if(u==="$workflow")return this.workflowCompletions(s,d);if(u==="$prevNode")return this.prevNodeCompletions(s,d);if(u==="$now")return this.nowCompletions(s,d);if(u==="$today")return this.todayCompletions(s,d);if(u==="DateTime")return this.dateTimeCompltions(s,d);if(u==="$input")return this.inputCompletions(s,d);if(o.test(u))return this.selectorCompletions(s,d);const h=l.some(g=>g.test(u)),p=c.some(g=>g.test(u));if(h||p)return this.matcherJsonFieldCompletions(s,d,e);const f=r.some(g=>g.test(u)),w=a.some(g=>g.test(u));if(f||w)return this.matcherItemFieldCompletions(s,d,e)}return null},variablesToValues(){return this.variableDeclarationLines().reduce((s,e)=>{const[t,i]=e.split("="),n=t.replace(/(var|let|const)/,"").trim(),o=i.replace(/;/,"").trim();return s[n]=o,s},{})},variableDeclarationLines(){if(!this.editor)return[];const s=this.editor.state.doc.toString().split(`
`),e=t=>["var","const","let"].some(i=>t.startsWith(i));return s.filter(e)},extendedUses(s,e){return s.reduce((t,i)=>(e.forEach(n=>{const o=`(${n}.first\\(\\)|${n}.last\\(\\)|${n}.item|${n}.all\\(\\)\\[\\w+\\]).*`,r=i.match(new RegExp(o));r&&(/json(\.|\[)$/.test(r[0])?t.jsonField.push(r[0]):t.itemField.push(r[0]));const a=`^${n}\\.json(\\.|\\[)$`,l=i.match(new RegExp(a));l&&t.jsonField.push(l[0])}),t),{itemField:[],jsonField:[]})}}}),Et={fontSize:"0.8em",fontFamily:"Menlo, Consolas, 'DejaVu Sans Mono', monospace !important",maxHeight:"400px",tooltip:{maxWidth:"300px",lineHeight:"1.3em"},diagnosticButton:{backgroundColor:"inherit",lineHeight:"1em",textDecoration:"underline",marginLeft:"0.2em",cursor:"pointer"}},Ur=getComputedStyle(document.documentElement),RN=[z.theme({"&":{"font-size":Et.fontSize,border:Ur.getPropertyValue("--border-base"),borderRadius:Ur.getPropertyValue("--border-radius-base"),backgroundColor:"var(--color-code-background)",color:"var(--color-code-foreground)"},".cm-content":{fontFamily:Et.fontFamily,caretColor:"var(--color-code-caret)"},".cm-cursor, .cm-dropCursor":{borderLeftColor:"var(--color-code-caret)"},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--color-code-selection)"},".cm-activeLine":{backgroundColor:"var(--color-code-lineHighlight)"},".cm-activeLineGutter":{backgroundColor:"var(--color-code-lineHighlight)"},".cm-gutters":{backgroundColor:"var(--color-code-gutterBackground)",color:"var(--color-code-gutterForeground)"},".cm-tooltip":{maxWidth:Et.tooltip.maxWidth,lineHeight:Et.tooltip.lineHeight},".cm-scroller":{overflow:"auto",maxHeight:Et.maxHeight},".cm-diagnosticAction":{backgroundColor:Et.diagnosticButton.backgroundColor,color:Ur.getPropertyValue("--color-primary"),lineHeight:Et.diagnosticButton.lineHeight,textDecoration:Et.diagnosticButton.textDecoration,marginLeft:Et.diagnosticButton.marginLeft,cursor:Et.diagnosticButton.cursor}}),d0(Jo.define([{tag:k.comment,color:"var(--color-code-tags-comment)"},{tag:[k.string,k.special(k.brace)],color:"var(--color-code-tags-string)"},{tag:[k.number,k.self,k.bool,k.null],color:"var(--color-code-tags-primitive)"},{tag:k.keyword,color:"var(--color-code-tags-keyword)"},{tag:k.operator,color:"var(--color-code-tags-operator)"},{tag:[k.variableName,k.propertyName,k.attributeName,k.regexp,k.className,k.typeName],color:"var(--color-code-tags-variable)"},{tag:[k.definition(k.typeName),k.definition(k.propertyName),k.function(k.variableName)],color:"var(--color-code-tags-definition)"}]))],Ga=new m;var MN=N(_N,AN,ie).extend({name:"code-node-editor",props:{mode:{type:String,validator:s=>["runOnceForAllItems","runOnceForEachItem"].includes(s)},isReadOnly:{type:Boolean,default:!1},jsCode:{type:String}},data(){return{editor:null,linterCompartment:new tn}},watch:{mode(){this.reloadLinter(),this.refreshPlaceholder()}},computed:{content(){return this.editor?this.editor.state.doc.toString():""},placeholder(){return{runOnceForAllItems:Pu,runOnceForEachItem:Du}[this.mode]},previousPlaceholder(){return{runOnceForAllItems:Du,runOnceForEachItem:Pu}[this.mode]}},methods:{reloadLinter(){!this.editor||this.editor.dispatch({effects:this.linterCompartment.reconfigure(this.linterExtension())})},refreshPlaceholder(){!this.editor||(!this.content.trim()||this.content.trim()===this.previousPlaceholder)&&this.editor.dispatch({changes:{from:0,to:this.content.length,insert:this.placeholder}})},highlightLine(s){if(!!this.editor){if(s==="final"){this.editor.dispatch({selection:{anchor:this.content.trim().length}});return}this.editor.dispatch({selection:{anchor:this.editor.state.doc.line(s).from}})}},trackCompletion(s){if(!!s.transactions.find(t=>t.isUserEvent("input.complete")))try{const{fromA:t,toB:i}=s==null?void 0:s.changedRanges[0],n=this.content.slice(t,i),o=n.lastIndexOf(".");let r=null,a=null;o===-1?(r="",a=n):(r=n.slice(0,o),a=n.slice(o+1)),this.$telemetry.track("User autocompleted code",{instance_id:this.$store.getters.instanceId,node_type:Vo,field_name:this.mode==="runOnceForAllItems"?"jsCodeAllItems":"jsCodeEachItem",field_type:"code",context:r,inserted_text:a})}catch{}}},destroyed(){Ga.$off("error-line-number",this.highlightLine)},mounted(){Ga.$on("error-line-number",this.highlightLine);const s=[this.linterCompartment.of(this.linterExtension()),J.readOnly.of(this.isReadOnly),z.updateListener.of(t=>{!t.docChanged||(this.trackCompletion(t),this.$emit("valueChanged",this.content))})];this.jsCode===""&&this.$emit("valueChanged",this.placeholder);const e=J.create({doc:this.jsCode===""?this.placeholder:this.jsCode,extensions:[...fN,...s,RN,b1(),this.autocompletionExtension()]});this.editor=new z({parent:this.$refs.codeNodeEditor,state:e})}});var WN=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"codeNodeEditor",staticClass:"ph-no-capture"})},LN=[],QN=_(MN,WN,LN,!1,null,"ca9a0729",null,null),BN=QN.exports,UN=N(ve,ct,V,ie,dt).extend({name:"parameter-input",components:{CodeEdit:h$,CodeNodeEditor:BN,ExpressionEdit:yf,NodeCredentials:fl,CredentialsSelect:L$,PrismEditor:o_,ScopesNotice:gf,ParameterOptions:hl,ParameterIssues:vf,ResourceLocator:lk,TextEdit:pk,ImportParameter:wf},props:{isReadOnly:{type:Boolean},parameter:{type:Object},path:{type:String},value:{type:[String,Number,Boolean,Array,Object]},hideLabel:{type:Boolean},droppable:{type:Boolean},activeDrop:{type:Boolean},forceShowExpression:{type:Boolean},hint:{type:String},inputSize:{type:String},hideIssues:{type:Boolean},documentationUrl:{type:String},errorHighlight:{type:Boolean},isForCredential:{type:Boolean},eventSource:{type:String},expressionEvaluated:{type:String}},data(){return{codeEditDialogVisible:!1,nodeName:"",expressionAddOperation:"set",expressionEditDialogVisible:!1,remoteParameterOptions:[],remoteParameterOptionsLoading:!1,remoteParameterOptionsLoadingIssues:null,textEditDialogVisible:!1,tempValue:"",CUSTOM_API_CALL_KEY:Xs,activeCredentialType:"",dateTimePickerOptions:{shortcuts:[{text:"Today",onClick(s){s.$emit("pick",new Date)}},{text:"Yesterday",onClick(s){const e=new Date;e.setTime(e.getTime()-3600*1e3*24),s.$emit("pick",e)}},{text:"A week ago",onClick(s){const e=new Date;e.setTime(e.getTime()-3600*1e3*24*7),s.$emit("pick",e)}}]}}},watch:{dependentParametersValues(){this.loadRemoteParameterOptions()},value(){this.parameter.type==="color"&&this.getArgument("showAlpha")===!0||(this.tempValue=this.displayValue)}},computed:{...F("credentials",["allCredentialTypes"]),expressionDisplayValue(){if(this.activeDrop||this.forceShowExpression)return"";const s=ts(this.value)?this.value.value:this.value;return typeof s=="string"&&s.startsWith("=")?s.slice(1):""},isValueExpression(){return Go(this.parameter,this.value)},codeAutocomplete(){return this.getArgument("codeAutocomplete")},dependentParametersValues(){const s=this.getArgument("loadOptionsDependsOn");if(s===void 0)return null;const e=this.$store.getters["ndv/activeNode"].parameters;try{const t=this.resolveParameter(e),i=[];for(const n of s)i.push(ae.exports.get(t,n));return i.join("|")}catch{return null}},node(){return this.$store.getters["ndv/activeNode"]},displayTitle(){const s={interpolate:{shortPath:this.shortPath}};return this.getIssues.length&&this.isValueExpression?this.$locale.baseText("parameterInput.parameterHasIssuesAndExpression",s):this.getIssues.length&&!this.isValueExpression?this.$locale.baseText("parameterInput.parameterHasIssues",s):!this.getIssues.length&&this.isValueExpression?this.$locale.baseText("parameterInput.parameterHasExpression",s):this.$locale.baseText("parameterInput.parameter",s)},displayValue(){if(this.remoteParameterOptionsLoading===!0)return this.$locale.baseText("parameterInput.loadingOptions");let s;if(this.isValueExpression===!1?s=this.isResourceLocatorParameter?ts(this.value)?this.value.value:"":this.value:s=this.expressionEvaluated,this.parameter.type==="credentialsSelect"){const e=this.$store.getters["credentials/getCredentialTypeByName"](this.value);e&&(s=e.displayName)}if(this.parameter.type==="color"&&this.getArgument("showAlpha")===!0&&s.charAt(0)==="#"){const e=parseInt(s.slice(1),16),t=[];t.push(e>>24&255),t.push(e>>16&255),t.push(e>>8&255),t.push((255-e&255)/255),s="rgba("+t.join()+")"}if(s!=null&&this.parameter.type==="string"){const e=this.getArgument("rows");(e===void 0||e===1)&&(s=s.toString().replace(/\n/,"|"))}return s},getStringInputType(){if(this.getArgument("password")===!0)return"password";const s=this.getArgument("rows");return s!==void 0&&s>1||this.parameter.typeOptions&&this.parameter.typeOptions.editor==="code"?"textarea":"text"},getIssues(){if(this.hideIssues===!0||this.node===null)return[];const s=this.shortPath.split(".");s.pop();const e=s_(this.parameter,this.node.parameters,s.join("."),this.node);if(this.parameter.type==="credentialsSelect"&&this.displayValue===""){e.parameters=e.parameters||{};const t=this.$locale.baseText("parameterInput.selectACredentialTypeFromTheDropdown");e.parameters[this.parameter.name]=[t]}else if(["options","multiOptions"].includes(this.parameter.type)&&this.remoteParameterOptionsLoading===!1&&this.remoteParameterOptionsLoadingIssues===null&&this.parameterOptions){const t=this.parameterOptions.map(n=>n.value),i=[];this.skipCheck(this.displayValue)||(Array.isArray(this.displayValue)?i.push.apply(i,this.displayValue):i.push(this.displayValue));for(const n of i)if(n===null||!t.includes(n)){e.parameters===void 0&&(e.parameters={});const o=this.$locale.baseText("parameterInput.theValueIsNotSupported",{interpolate:{checkValue:n}});e.parameters[this.parameter.name]=[o]}}else this.remoteParameterOptionsLoadingIssues!==null&&(e.parameters===void 0&&(e.parameters={}),e.parameters[this.parameter.name]=[`There was a problem loading the parameter options from server: "${this.remoteParameterOptionsLoadingIssues}"`]);return e!==void 0&&e.parameters!==void 0&&e.parameters[this.parameter.name]!==void 0?e.parameters[this.parameter.name]:[]},isEditor(){return["code","json"].includes(this.editorType)},editorType(){return this.getArgument("editor")},parameterOptions(){return this.hasRemoteMethod===!1?this.parameter.options:this.remoteParameterOptions},parameterInputClasses(){const s={droppable:this.droppable,activeDrop:this.activeDrop},e=this.getArgument("rows"),t=this.parameter.type==="string"&&e!==void 0,i=this.parameter.type==="boolean"&&!this.isValueExpression;return!t&&!i&&(s["parameter-value-container"]=!0),(this.isValueExpression||this.forceShowExpression)&&(s.expression=!0),!this.droppable&&!this.activeDrop&&(this.getIssues.length||this.errorHighlight)&&(s["has-issues"]=!0),s},parameterInputWrapperStyle(){let s=0;const e={width:"100%"};return this.parameter.type==="credentialsSelect"||this.isResourceLocatorParameter||(this.getIssues.length&&(s+=20),s!==0&&(e.width=`calc(100% - ${s}px)`)),e},hasRemoteMethod(){return!!this.getArgument("loadOptionsMethod")||!!this.getArgument("loadOptions")},shortPath(){const s=this.path.split(".");return s.shift(),s.join(".")},workflow(){return this.getCurrentWorkflow()},isResourceLocatorParameter(){return this.parameter.type==="resourceLocator"}},methods:{isRemoteParameterOption(s){return this.remoteParameterOptions.map(e=>e.name).includes(s.name)},credentialSelected(s){this.$store.commit("updateNodeProperties",s);const e=this.$store.getters.getNodeByName(s.name);this.updateNodeCredentialIssues(e),this.$externalHooks().run("nodeSettings.credentialSelected",{updateInformation:s})},skipCheck(s){return typeof s=="string"&&s.includes(Xs)},getPlaceholder(){return this.isForCredential?this.$locale.credText().placeholder(this.parameter):this.$locale.nodeText().placeholder(this.parameter,this.path)},getOptionsOptionDisplayName(s){return this.isForCredential?this.$locale.credText().optionsOptionDisplayName(this.parameter,s):this.$locale.nodeText().optionsOptionDisplayName(this.parameter,s,this.path)},getOptionsOptionDescription(s){return this.isForCredential?this.$locale.credText().optionsOptionDescription(this.parameter,s):this.$locale.nodeText().optionsOptionDescription(this.parameter,s,this.path)},async loadRemoteParameterOptions(){if(!(this.node===null||this.hasRemoteMethod===!1||this.remoteParameterOptionsLoading)){this.remoteParameterOptionsLoadingIssues=null,this.remoteParameterOptionsLoading=!0,this.remoteParameterOptions.length=0;try{const s=this.$store.getters["ndv/activeNode"].parameters,e=this.resolveParameter(s),t=this.getArgument("loadOptionsMethod"),i=this.getArgument("loadOptions"),n=await this.$store.dispatch("nodeTypes/getNodeParameterOptions",{nodeTypeAndVersion:{name:this.node.type,version:this.node.typeVersion},path:this.path,methodName:t,loadOptions:i,currentNodeParameters:e,credentials:this.node.credentials});this.remoteParameterOptions.push.apply(this.remoteParameterOptions,n)}catch(s){this.remoteParameterOptionsLoadingIssues=s.message}this.remoteParameterOptionsLoading=!1}},closeCodeEditDialog(){this.codeEditDialogVisible=!1},closeExpressionEditDialog(){this.expressionEditDialogVisible=!1},trackExpressionEditOpen(){!this.node||this.node.type.startsWith("n8n-nodes-base")&&this.$telemetry.track("User opened Expression Editor",{node_type:this.node.type,parameter_name:this.parameter.displayName,parameter_field_type:this.parameter.type,new_expression:!this.isValueExpression,workflow_id:this.$store.getters.workflowId,session_id:this.$store.getters["ndv/ndvSessionId"],source:this.eventSource||"ndv"})},closeTextEditDialog(){this.textEditDialogVisible=!1},displayEditDialog(){this.isEditor?this.codeEditDialogVisible=!0:this.textEditDialogVisible=!0},getArgument(s){if(this.parameter.typeOptions!==void 0&&this.parameter.typeOptions[s]!==void 0)return this.parameter.typeOptions[s]},expressionUpdated(s){const e=this.isResourceLocatorParameter?{__rl:!0,value:s,mode:this.value.mode}:s;this.valueChanged(e)},openExpressionEdit(){if(this.isValueExpression){this.expressionEditDialogVisible=!0,this.trackExpressionEditOpen();return}},onBlur(){this.$emit("blur")},onResourceLocatorDrop(s){this.$emit("drop",s)},setFocus(){if(this.isValueExpression){this.expressionEditDialogVisible=!0,this.trackExpressionEditOpen();return}if(["json","string"].includes(this.parameter.type)&&this.getArgument("alwaysOpenEditWindow")){this.displayEditDialog();return}this.node!==null&&(this.nodeName=this.node.name),setTimeout(()=>{this.$refs.inputField&&this.$refs.inputField.$el&&this.$refs.inputField.focus()}),this.$emit("focus")},isCodeNode(s){return s.type===Vo},rgbaToHex(s){const e=s.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+(\.\d+)?)\)$/);if(e===null)return null;const[t,i,n,o]=e.splice(1,4).map(r=>Number(r));return"#"+((1<<24)+(t<<16)+(i<<8)+n).toString(16).slice(1)+((1<<8)+Math.floor((1-o)*255)).toString(16).slice(1)},onTextInputChange(s){const e={node:this.node!==null?this.node.name:this.nodeName,name:this.path,value:s};this.$emit("textInput",e)},valueChangedDebounced(s){this.callDebounced("valueChanged",{debounceTime:100},s)},valueChanged(s){if(this.parameter.name==="nodeCredentialType"&&(this.activeCredentialType=s),s instanceof Date&&(s=s.toISOString()),this.parameter.type==="color"&&this.getArgument("showAlpha")===!0&&s!==null&&s!==void 0&&s.toString().charAt(0)!=="#"){const t=this.rgbaToHex(s);t!==null&&(this.tempValue=t,s=t)}const e={node:this.node!==null?this.node.name:this.nodeName,name:this.path,value:s};this.$emit("valueChanged",e),(this.parameter.name==="operation"||this.parameter.name==="mode")&&this.$telemetry.track("User set node operation or mode",{workflow_id:this.$store.getters.workflowId,node_type:this.node&&this.node.type,resource:this.node&&this.node.parameters.resource,is_custom:s===Xs,session_id:this.$store.getters["ndv/ndvSessionId"],parameter:this.parameter.name})},optionSelected(s){const e=this.value;if(s==="resetValue")this.valueChanged(this.parameter.default);else if(s==="openExpression")this.expressionEditDialogVisible=!0;else if(s==="addExpression")this.isResourceLocatorParameter?ts(this.value)?this.valueChanged({__rl:!0,value:`=${this.value.value}`,mode:this.value.mode}):this.valueChanged({__rl:!0,value:`=${this.value}`,mode:""}):this.parameter.type==="number"||this.parameter.type==="boolean"?this.valueChanged(`={{${this.value}}}`):this.valueChanged(`=${this.value}`),setTimeout(()=>{this.expressionEditDialogVisible=!0,this.trackExpressionEditOpen()},375);else if(s==="removeExpression"){let t=this.expressionEvaluated;this.parameter.type==="multiOptions"&&typeof t=="string"&&(t=(t||"").split(",").filter(i=>(this.parameterOptions||[]).find(n=>n.value===i))),this.isResourceLocatorParameter&&ts(this.value)?this.valueChanged({__rl:!0,value:t,mode:this.value.mode}):this.valueChanged(typeof t!="undefined"?t:null)}else if(s==="refreshOptions"){if(this.isResourceLocatorParameter){const t=this.$refs.resourceLocator;t&&t.$emit("refreshList")}this.loadRemoteParameterOptions()}if(this.node&&(s==="addExpression"||s==="removeExpression")){const t={node_type:this.node.type,parameter:this.path,old_mode:s==="addExpression"?"fixed":"expression",new_mode:s==="removeExpression"?"fixed":"expression",was_parameter_empty:e===""||e===void 0,had_mapping:dl(e),had_parameter:typeof e=="string"&&e.includes("$parameter")};this.$telemetry.track("User switched parameter mode",t),this.$externalHooks().run("parameterInput.modeSwitch",t)}}},updated(){this.$nextTick(()=>{const s=this.$el.querySelectorAll(".remote-parameter-option");s.length>0&&this.$externalHooks().run("parameterInput.updated",{remoteParameterOptions:s})})},mounted(){if(this.$on("optionSelected",this.optionSelected),this.tempValue=this.displayValue,this.node!==null&&(this.nodeName=this.node.name),this.node&&this.node.parameters.authentication==="predefinedCredentialType"&&(this.activeCredentialType=this.node.parameters.nodeCredentialType),this.parameter.type==="color"&&this.getArgument("showAlpha")===!0&&this.displayValue!==null&&this.displayValue.toString().charAt(0)!=="#"){const s=this.rgbaToHex(this.displayValue);s!==null&&(this.tempValue=s)}if(this.hasRemoteMethod===!0&&this.node!==null&&(this.$watch(()=>this.node.credentials,()=>{this.loadRemoteParameterOptions()},{deep:!0,immediate:!0}),this.parameter.typeOptions&&this.parameter.typeOptions.reloadOnChange)){const s=this.parameter.typeOptions.reloadOnChange;for(let e=0;e<s.length;e++){const t=s[e];t in this.node.parameters&&this.$watch(()=>this.node&&this.node.parameters&&this.node.parameters[t]?this.node.parameters[t]:null,()=>{this.loadRemoteParameterOptions()},{deep:!0,immediate:!0})}}this.$externalHooks().run("parameterInput.mount",{parameter:this.parameter,inputFieldRef:this.$refs.inputField})}});var VN=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.parameterInputClasses,on:{keydown:function(i){i.stopPropagation()}}},[t("expression-edit",{attrs:{dialogVisible:e.expressionEditDialogVisible,value:e.isResourceLocatorParameter&&typeof e.value!="string"?e.value?e.value.value:"":e.value,parameter:e.parameter,path:e.path,eventSource:e.eventSource||"ndv"},on:{closeDialog:e.closeExpressionEditDialog,valueChanged:e.expressionUpdated}}),t("div",{staticClass:"parameter-input ignore-key-press",style:e.parameterInputWrapperStyle,on:{click:e.openExpressionEdit}},[e.isResourceLocatorParameter?t("resource-locator",{ref:"resourceLocator",attrs:{parameter:e.parameter,value:e.value,displayTitle:e.displayTitle,expressionDisplayValue:e.expressionDisplayValue,expressionComputedValue:e.expressionEvaluated,isValueExpression:e.isValueExpression,isReadOnly:e.isReadOnly,parameterIssues:e.getIssues,droppable:e.droppable,node:e.node,path:e.path},on:{input:e.valueChanged,focus:e.setFocus,blur:e.onBlur,drop:e.onResourceLocatorDrop}}):e.isValueExpression||e.droppable||e.forceShowExpression?t("n8n-input",{attrs:{size:e.inputSize,type:e.getStringInputType,rows:e.getArgument("rows"),value:e.expressionDisplayValue,title:e.displayTitle,readOnly:e.isReadOnly},on:{keydown:function(i){i.stopPropagation()}}}):["json","string"].includes(e.parameter.type)||e.remoteParameterOptionsLoadingIssues!==null?t("div",[e.codeEditDialogVisible?t("code-edit",{attrs:{value:e.value,parameter:e.parameter,type:e.editorType,codeAutocomplete:e.codeAutocomplete,path:e.path,readonly:e.isReadOnly},on:{closeDialog:e.closeCodeEditDialog,valueChanged:e.expressionUpdated}}):e._e(),t("text-edit",{attrs:{dialogVisible:e.textEditDialogVisible,value:e.value,parameter:e.parameter,path:e.path,isReadOnly:e.isReadOnly},on:{closeDialog:e.closeTextEditDialog,valueChanged:e.expressionUpdated}}),e.getArgument("editor")==="codeNodeEditor"&&e.isCodeNode(e.node)?t("code-node-editor",{attrs:{mode:e.node.parameters.mode,jsCode:e.node.parameters.jsCode,isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChangedDebounced}}):e.isEditor===!0?t("div",{staticClass:"code-edit clickable ph-no-capture",on:{click:function(i){return e.displayEditDialog()}}},[e.codeEditDialogVisible?e._e():t("prism-editor",{attrs:{lineNumbers:!0,readonly:!0,code:e.displayValue,language:"js"}})],1):t("n8n-input",{ref:"inputField",attrs:{size:e.inputSize,type:e.getStringInputType,rows:e.getArgument("rows"),value:e.displayValue,disabled:e.isReadOnly,title:e.displayTitle,placeholder:e.getPlaceholder()},on:{input:e.onTextInputChange,change:e.valueChanged,keydown:function(i){i.stopPropagation()},focus:e.setFocus,blur:e.onBlur},model:{value:e.tempValue,callback:function(i){e.tempValue=i},expression:"tempValue"}},[t("div",{staticClass:"expand-input-icon-container",attrs:{slot:"suffix"},slot:"suffix"},[e.isReadOnly?e._e():t("font-awesome-icon",{staticClass:"edit-window-button clickable",attrs:{icon:"expand-alt",title:e.$locale.baseText("parameterInput.openEditWindow")},on:{click:function(i){return e.displayEditDialog()}}})],1)])],1):e.parameter.type==="color"?t("div",{ref:"inputField",staticClass:"color-input"},[t("el-color-picker",{staticClass:"color-picker",attrs:{size:"small",value:e.displayValue,disabled:e.isReadOnly,title:e.displayTitle,"show-alpha":e.getArgument("showAlpha")},on:{focus:e.setFocus,blur:e.onBlur,change:e.valueChanged}}),t("n8n-input",{attrs:{size:e.inputSize,type:"text",value:e.tempValue,disabled:e.isReadOnly,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(i){i.stopPropagation()},focus:e.setFocus,blur:e.onBlur},model:{value:e.tempValue,callback:function(i){e.tempValue=i},expression:"tempValue"}})],1):e.parameter.type==="dateTime"?t("el-date-picker",{ref:"inputField",attrs:{type:"datetime",size:e.inputSize,value:e.displayValue,title:e.displayTitle,disabled:e.isReadOnly,placeholder:e.parameter.placeholder?e.getPlaceholder():e.$locale.baseText("parameterInput.selectDateAndTime"),"picker-options":e.dateTimePickerOptions},on:{change:e.valueChanged,focus:e.setFocus,blur:e.onBlur,keydown:function(i){i.stopPropagation()}},model:{value:e.tempValue,callback:function(i){e.tempValue=i},expression:"tempValue"}}):e.parameter.type==="number"?t("n8n-input-number",{ref:"inputField",attrs:{size:e.inputSize,value:e.displayValue,controls:!1,max:e.getArgument("maxValue"),min:e.getArgument("minValue"),precision:e.getArgument("numberPrecision"),disabled:e.isReadOnly,title:e.displayTitle,placeholder:e.parameter.placeholder},on:{change:e.valueChanged,input:e.onTextInputChange,focus:e.setFocus,blur:e.onBlur,keydown:function(i){i.stopPropagation()}}}):e.parameter.type==="credentialsSelect"||e.parameter.name==="genericAuthType"?t("credentials-select",{ref:"inputField",attrs:{parameter:e.parameter,node:e.node,activeCredentialType:e.activeCredentialType,inputSize:e.inputSize,displayValue:e.displayValue,isReadOnly:e.isReadOnly,displayTitle:e.displayTitle},on:{credentialSelected:e.credentialSelected,valueChanged:e.valueChanged,setFocus:e.setFocus,onBlur:e.onBlur},scopedSlots:e._u([{key:"issues-and-options",fn:function(){return[t("parameter-issues",{attrs:{issues:e.getIssues}})]},proxy:!0}])}):e.parameter.type==="options"?t("n8n-select",{ref:"inputField",attrs:{size:e.inputSize,filterable:"",value:e.displayValue,placeholder:e.parameter.placeholder?e.getPlaceholder():e.$locale.baseText("parameterInput.select"),loading:e.remoteParameterOptionsLoading,disabled:e.isReadOnly||e.remoteParameterOptionsLoading,title:e.displayTitle},on:{change:e.valueChanged,keydown:function(i){i.stopPropagation()},focus:e.setFocus,blur:e.onBlur}},e._l(e.parameterOptions,function(i){return t("n8n-option",{key:i.value,attrs:{value:i.value,label:e.getOptionsOptionDisplayName(i)}},[t("div",{staticClass:"list-option"},[t("div",{staticClass:"option-headline ph-no-capture",class:{"remote-parameter-option":e.isRemoteParameterOption(i)}},[e._v(" "+e._s(e.getOptionsOptionDisplayName(i))+" ")]),i.description?t("div",{staticClass:"option-description",domProps:{innerHTML:e._s(e.getOptionsOptionDescription(i))}}):e._e()])])}),1):e.parameter.type==="multiOptions"?t("n8n-select",{ref:"inputField",attrs:{size:e.inputSize,filterable:"",multiple:"",value:e.displayValue,loading:e.remoteParameterOptionsLoading,disabled:e.isReadOnly||e.remoteParameterOptionsLoading,title:e.displayTitle,placeholder:e.$locale.baseText("parameterInput.select")},on:{change:e.valueChanged,keydown:function(i){i.stopPropagation()},focus:e.setFocus,blur:e.onBlur}},e._l(e.parameterOptions,function(i){return t("n8n-option",{key:i.value,attrs:{value:i.value,label:e.getOptionsOptionDisplayName(i)}},[t("div",{staticClass:"list-option"},[t("div",{staticClass:"option-headline"},[e._v(e._s(e.getOptionsOptionDisplayName(i)))]),i.description?t("div",{staticClass:"option-description",domProps:{innerHTML:e._s(e.getOptionsOptionDescription(i))}}):e._e()])])}),1):e.parameter.type==="boolean"?t("el-switch",{ref:"inputField",staticClass:"switch-input",attrs:{"active-color":"#13ce66",value:e.displayValue,disabled:e.isReadOnly},on:{change:e.valueChanged}}):e._e()],1),e.parameter.type!=="credentialsSelect"&&!e.isResourceLocatorParameter?t("parameter-issues",{attrs:{issues:e.getIssues}}):e._e()],1)},FN=[],jN=_(UN,VN,FN,!1,null,"28cbb939",null,null),zN=jN.exports,GN=m.extend({name:"InputHint",props:{hint:{type:String},highlight:{type:Boolean},renderHTML:{type:Boolean,default:!1}},methods:{sanitizeHtml:xs},mounted(){this.$refs.hint&&this.$refs.hint.querySelectorAll("a").forEach(s=>s.target="_blank")}});const HN="_hint_1vrdc_1",qN="_highlight_1vrdc_7";var XN={hint:HN,highlight:qN},YN=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.hint?t("n8n-text",{attrs:{size:"small",color:"text-base",tag:"div"}},[e.renderHTML?t("div",{ref:"hint",class:{[e.$style.hint]:!0,[e.$style.highlight]:e.highlight},domProps:{innerHTML:e._s(e.sanitizeHtml(e.hint))}}):t("div",{class:{[e.$style.hint]:!0,[e.$style.highlight]:e.highlight}},[e._v(e._s(e.hint))])]):e._e()},ZN=[];const Au={$style:XN};function KN(s){for(var e in Au)this[e]=Au[e]}var JN=_(GN,YN,ZN,!1,KN,null,null,null),eP=JN.exports,tP=N(V,ie).extend({name:"parameter-input-wrapper",components:{ParameterInput:zN,InputHint:eP},mounted(){this.$on("optionSelected",this.optionSelected)},props:{isReadOnly:{type:Boolean},parameter:{type:Object},path:{type:String},value:{type:[String,Number,Boolean,Array,Object]},hideLabel:{type:Boolean},droppable:{type:Boolean},activeDrop:{type:Boolean},forceShowExpression:{type:Boolean},hint:{type:String,required:!1},inputSize:{type:String},hideIssues:{type:Boolean},documentationUrl:{type:String},errorHighlight:{type:Boolean},isForCredential:{type:Boolean},eventSource:{type:String}},computed:{isValueExpression(){return Go(this.parameter,this.value)},activeNode(){return this.$store.getters["ndv/activeNode"]},selectedRLMode(){var e;if(typeof this.value!="object"||this.parameter.type!=="resourceLocator"||!ac(this.value))return;const s=this.value.mode;if(s)return(e=this.parameter.modes)==null?void 0:e.find(t=>t.name===s)},parameterHint(){if(!this.isValueExpression)return this.selectedRLMode&&this.selectedRLMode.hint?this.selectedRLMode.hint:this.hint},targetItem(){return this.$store.getters["ndv/hoveringItem"]},expressionValueComputed(){var o;const s=this.$store.getters["ndv/ndvInputNodeName"],e=ac(this.value)?this.value.value:this.value;if(this.activeNode===null||!this.isValueExpression||typeof e!="string")return null;const t=this.$store.getters["ndv/ndvInputRunIndex"],i=this.$store.getters["ndv/ndvInputBranchIndex"];let n;try{const r=(o=this.targetItem)!=null?o:void 0;if(n=this.resolveExpression(e,void 0,{targetItem:r,inputNodeName:s,inputRunIndex:t,inputBranchIndex:i}),n===null)return null;typeof n=="string"&&n.trim().length===0&&(n=this.$locale.baseText("parameterInput.emptyString"))}catch(r){n=`[${this.$locale.baseText("parameterInput.error")}}: ${r.message}]`}return typeof n=="string"?n:JSON.stringify(n)},expressionOutput(){if(this.isValueExpression&&this.expressionValueComputed){const s=this.$store.getters["ndv/ndvInputData"];return!s||s&&s.length<=1?this.expressionValueComputed:this.$locale.baseText("parameterInput.expressionResult",{interpolate:{result:this.expressionValueComputed}})}return null}},methods:{onFocus(){this.$emit("focus")},onBlur(){this.$emit("blur")},onDrop(s){this.$emit("drop",s)},optionSelected(s){this.$refs.param&&this.$refs.param.$emit("optionSelected",s)},onValueChanged(s){this.$emit("valueChanged",s)},onTextInput(s){this.$emit("textInput",s)}}});const sP="_hint_i49or_1",iP="_hovering_i49or_5";var nP={hint:sP,hovering:iP},oP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("parameter-input",{ref:"param",attrs:{inputSize:e.inputSize,parameter:e.parameter,value:e.value,path:e.path,isReadOnly:e.isReadOnly,droppable:e.droppable,activeDrop:e.activeDrop,forceShowExpression:e.forceShowExpression,hideIssues:e.hideIssues,documentationUrl:e.documentationUrl,errorHighlight:e.errorHighlight,isForCredential:e.isForCredential,eventSource:e.eventSource,expressionEvaluated:e.expressionValueComputed},on:{focus:e.onFocus,blur:e.onBlur,drop:e.onDrop,textInput:e.onTextInput,valueChanged:e.onValueChanged}}),e.expressionOutput?t("input-hint",{class:e.$style.hint,attrs:{highlight:!!(e.expressionOutput&&e.targetItem),hint:e.expressionOutput}}):e.parameterHint?t("input-hint",{class:e.$style.hint,attrs:{renderHTML:!0,hint:e.parameterHint}}):e._e()],1)},rP=[];const Ru={$style:nP};function aP(s){for(var e in Ru)this[e]=Ru[e]}var lP=_(tP,oP,rP,!1,aP,null,null,null),Mg=lP.exports,cP=m.extend({name:"parameter-input-expanded",components:{ParameterOptions:hl,ParameterInputWrapper:Mg},props:{parameter:{type:Object},value:{},showValidationWarnings:{type:Boolean},documentationUrl:{type:String},eventSource:{type:String}},data(){return{focused:!1,blurredEver:!1,menuExpanded:!1}},computed:{showRequiredErrors(){if(!this.$props.parameter.required)return!1;if(this.blurredEver||this.showValidationWarnings){if(this.$props.parameter.type==="string")return!this.value;if(this.$props.parameter.type==="number")return typeof this.value!="number"}return!1},hint(){return this.isValueExpression?null:this.$locale.credText().hint(this.parameter)},isValueExpression(){return Go(this.parameter,this.value)}},methods:{onFocus(){this.focused=!0},onBlur(){this.blurredEver=!0,this.focused=!1},onMenuExpanded(s){this.menuExpanded=s},optionSelected(s){this.$refs.param&&this.$refs.param.$emit("optionSelected",s)},valueChanged(s){this.$emit("change",s)},onDocumentationUrlClick(){this.$telemetry.track("User clicked credential modal docs link",{docs_link:this.documentationUrl,source:"field",workflow_id:this.$store.getters.workflowId})}}});const dP="_errors_iszl5_1",uP="_hint_iszl5_5";var hP={errors:dP,hint:uP},pP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-input-label",{attrs:{label:e.$locale.credText().inputLabelDisplayName(e.parameter),tooltipText:e.$locale.credText().inputLabelDescription(e.parameter),required:e.parameter.required,showTooltip:e.focused,showOptions:e.menuExpanded},scopedSlots:e._u([{key:"options",fn:function(){return[t("parameter-options",{attrs:{parameter:e.parameter,value:e.value,isReadOnly:!1,showOptions:!0,isValueExpression:e.isValueExpression},on:{optionSelected:e.optionSelected,"menu-expanded":e.onMenuExpanded}})]},proxy:!0}])},[[t("parameter-input-wrapper",{ref:"param",attrs:{inputSize:"large",parameter:e.parameter,value:e.value,path:e.parameter.name,hideIssues:!0,documentationUrl:e.documentationUrl,errorHighlight:e.showRequiredErrors,isForCredential:!0,eventSource:e.eventSource,hint:e.showRequiredErrors?"":e.hint},on:{focus:e.onFocus,blur:e.onBlur,textInput:e.valueChanged,valueChanged:e.valueChanged}}),e.showRequiredErrors?t("div",{class:e.$style.errors},[t("n8n-text",{attrs:{color:"danger",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("parameterInputExpanded.thisFieldIsRequired"))+" "),e.documentationUrl?t("n8n-link",{attrs:{to:e.documentationUrl,size:"small",underline:!0},on:{click:e.onDocumentationUrlClick}},[e._v(" "+e._s(e.$locale.baseText("parameterInputExpanded.openDocs"))+" ")]):e._e()],1)],1):e._e()]],2)},fP=[];const Mu={$style:hP};function mP(s){for(var e in Mu)this[e]=Mu[e]}var gP=_(cP,pP,fP,!1,mP,null,null,null),wP=gP.exports,yP=m.extend({name:"CredentialsInput",props:["credentialProperties","credentialData","documentationUrl","showValidationWarnings"],components:{ParameterInputExpanded:wP},methods:{valueChanged(s){const e=s.name.split(".").pop();this.$emit("change",{name:e,value:s.value})}}});const vP="_container_3qo2j_1";var _P={container:vP},OP=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.credentialProperties.length?t("div",{class:e.$style.container,on:{keydown:function(i){i.stopPropagation()}}},e._l(e.credentialProperties,function(i){return t("form",{key:i.name,attrs:{autocomplete:"off"}},[t("parameter-input-expanded",{attrs:{parameter:i,value:e.credentialData[i.name],documentationUrl:e.documentationUrl,showValidationWarnings:e.showValidationWarnings,eventSource:"credentials"},on:{change:e.valueChanged}})],1)}),0):e._e()},bP=[];const Wu={$style:_P};function xP(s){for(var e in Wu)this[e]=Wu[e]}var $P=_(yP,OP,bP,!1,xP,null,null,null),TP=$P.exports,kP=m.extend({props:{isGoogleOAuthType:{type:Boolean}},computed:{basePath(){return this.$store.getters.getBaseUrl}}});const SP="_googleIcon_9am86_1";var EP={googleIcon:SP},CP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e.isGoogleOAuthType?t("img",{class:e.$style.googleIcon,attrs:{src:e.basePath+"google-signin-light.png",alt:e.$locale.baseText("credentialEdit.oAuthButton.signInWithGoogle")},on:{click:function(i){return i.stopPropagation(),e.$emit("click")}}}):t("n8n-button",{attrs:{label:e.$locale.baseText("credentialEdit.oAuthButton.connectMyAccount"),size:"large"},on:{click:function(i){return i.stopPropagation(),e.$emit("click")}}})],1)},NP=[];const Lu={$style:EP};function PP(s){for(var e in Lu)this[e]=Lu[e]}var DP=_(kP,CP,NP,!1,PP,null,null,null),IP=DP.exports;const AP="modulepreload",Qu={},RP="/{{BASE_PATH}}/",As=function(e,t){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=`${RP}${i}`,i in Qu)return;Qu[i]=!0;const n=i.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const r=document.createElement("link");if(r.rel=n?"stylesheet":AP,n||(r.as="script",r.crossOrigin=""),r.href=i,document.head.appendChild(r),n)return new Promise((a,l)=>{r.addEventListener("load",a),r.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};function Vr(s,e){let t=e.name;if(MP(s,e)||Ni(s)){const i=Hs(s).split(".");t=qs(i).join(".")}if(WP(s,e)||LP(s,e)){const i=[...Hs(s).split("."),e.name];t=qs(i).join(".")}return t}const Ni=s=>s.split(".").length>=3,MP=(s,e)=>s.split(".").length===2&&e.type==="collection",WP=(s,e)=>s.split(".").length>2&&e.type==="collection",LP=(s,e)=>e.type==="fixedCollection"&&s!=="parameters",Hs=s=>s.replace(/\[.*?\]/g,"").replace("parameters.",""),qs=s=>s.reduce((e,t,i)=>(e.push(t),i===s.length-1||e.push(i%2===0?"options":"values"),e),[]),Wg="Error",Lg="Forgot my password",Qg="Settings",Bg="Error connecting to n8n";var Ug={"_reusableBaseText.cancel":"Cancel","_reusableBaseText.codeNodeEditor.linter.useJson":"Access the properties of an item under `.json`, e.g. `item.json`","_reusableBaseText.codeNodeEditor.completer.all":"Get all items","_reusableBaseText.codeNodeEditor.completer.first":"Get the first item","_reusableBaseText.codeNodeEditor.completer.last":"Get the last item","_reusableBaseText.codeNodeEditor.completer.itemMatching":"Get the item matching a specified input item","_reusableBaseText.name":"Name","_reusableBaseText.save":"Save","_reusableBaseText.dismiss":"Dismiss","_reusableDynamicText.readMore":"Read more","_reusableDynamicText.learnMore":"Learn more","_reusableDynamicText.moreInfo":"More info","_reusableDynamicText.oauth2.clientId":"Client ID","_reusableDynamicText.oauth2.clientSecret":"Client Secret","generic.any":"Any","generic.cancel":"Cancel","generic.confirm":"Confirm","generic.filtersApplied":"Filters are currently applied.","generic.learnMore":"Learn more","generic.reset":"Reset","generic.resetAllFilters":"Reset all filters","generic.communityNode":"Community Node","generic.communityNode.tooltip":`This is a node from our community. It's part of the {packageName} package. <a href="{docURL}" target="_blank" title="Read the n8n docs">Learn more</a>`,"generic.copy":"Copy","generic.delete":"Delete","generic.executions":"Executions","generic.or":"or","generic.clickToCopy":"Click to copy","generic.copiedToClipboard":"Copied to clipboard","generic.beta":"beta","generic.yes":"Yes","generic.no":"No","generic.settings":"Settings","generic.unsavedWork.confirmMessage.headline":"Save changes before leaving?","generic.unsavedWork.confirmMessage.message":"If you don't save, you will lose your changes.","generic.unsavedWork.confirmMessage.confirmButtonText":"Save","generic.unsavedWork.confirmMessage.cancelButtonText":"Leave without saving","generic.workflow":"Workflow","about.aboutN8n":"About n8n","about.close":"Close","about.license":"License","about.n8nLicense":"Sustainable Use License + n8n Enterprise License","about.n8nVersion":"n8n Version","about.sourceCode":"Source Code","about.instanceID":"Instance ID","activationModal.butYouCanSeeThem":"but you can see them in the","activationModal.dontShowAgain":"Don't show again","activationModal.executionList":"execution list","activationModal.gotIt":"Got it","activationModal.ifYouChooseTo":"if you choose to","activationModal.saveExecutions":"save executions.","activationModal.theseExecutionsWillNotShowUp":"These executions will not show up immediately in the editor,","activationModal.workflowActivated":"Workflow activated","activationModal.yourTriggerWillNowFire":"Your trigger will now fire production executions automatically.","activationModal.yourTriggersWillNowFire":"Your triggers will now fire production executions automatically.","activationModal.yourWorkflowWillNowListenForEvents":"Your workflow will now listen for events from {serviceName} and trigger executions.","activationModal.yourWorkflowWillNowRegularlyCheck":"Your workflow will now regularly check {serviceName} for events and trigger executions for them.","auth.changePassword":"Change Password","auth.changePassword.currentPassword":"Current Password","auth.changePassword.error":"Problem changing the password","auth.changePassword.missingTokenError":"Missing token","auth.changePassword.missingUserIdError":"Missing user ID","auth.changePassword.passwordUpdated":"Password updated","auth.changePassword.passwordUpdatedMessage":"You can now sign in with your new password","auth.changePassword.passwordsMustMatchError":"Passwords must match","auth.changePassword.reenterNewPassword":"Re-enter New Password","auth.changePassword.tokenValidationError":"Issue validating invite token","auth.defaultPasswordRequirements":"8+ characters, at least 1 number and 1 capital letter","auth.email":"Email","auth.firstName":"First Name","auth.lastName":"Last Name","auth.newPassword":"New Password","auth.password":"Password","auth.role":"Role","auth.roles.member":"Member","auth.roles.owner":"Owner","auth.agreement.label":"I\u2019d be OK sharing my opinion on n8n (no marketing emails though)","auth.setup.confirmOwnerSetup":"Set up owner account?","auth.setup.confirmOwnerSetupMessage":'To give others access to your <b>{entities}</b>, you\u2019ll need to share these account details with them. Or you can continue as before with no account, by going back and skipping this setup. <a href="https://docs.n8n.io/reference/user-management.html" target="_blank">More info</a>',"auth.setup.createAccount":"Create account","auth.setup.goBack":"Go back","auth.setup.next":"Next","auth.setup.ownerAccountBenefits":"Setting up an owner account allows you to invite others, and prevents people using n8n without an account","auth.setup.settingUpOwnerError":"Problem setting up owner","auth.setup.setupConfirmation.concatEntities":"{workflows} and {credentials}","auth.setup.setupConfirmation.credentials":"{count} credential | {count} credentials","auth.setup.setupConfirmation.existingWorkflows":"{count} existing workflow | {count} existing workflows","auth.setup.setupOwner":"Set up owner account","auth.setup.skipOwnerSetupQuestion":"Skip owner account setup?","auth.setup.skipSetup":"Skip setup","auth.setup.skipSetupTemporarily":"Skip setup for now","auth.signin":"Sign in","auth.signin.error":"Problem logging in","auth.signout":"Sign out","auth.signout.error":"Could not sign out","auth.signup.finishAccountSetup":"Finish account setup","auth.signup.missingTokenError":"Missing token","auth.signup.setupYourAccount":"Set up your account","auth.signup.setupYourAccountError":"Problem setting up your account","auth.signup.tokenValidationError":"Issue validating invite token","binaryDataDisplay.backToList":"Back to list","binaryDataDisplay.backToOverviewPage":"Back to overview page","binaryDataDisplay.noDataFoundToDisplay":"No data found to display","binaryDataDisplay.yourBrowserDoesNotSupport":"Your browser does not support the video element. Kindly update it to latest version.","codeEdit.edit":"Edit","codeNodeEditor.completer.$()":"Output data of the {nodeName} node","codeNodeEditor.completer.$execution":"Information about the current execution","codeNodeEditor.completer.$execution.id":"The ID of the current execution","codeNodeEditor.completer.$execution.mode":"How the execution was triggered: 'test' or 'production'","codeNodeEditor.completer.$execution.resumeUrl":"Used when using the 'wait' node to wait for a webhook. The webhook to call to resume execution","codeNodeEditor.completer.$input":"This node\u2019s input data","codeNodeEditor.completer.$input.all":"@:_reusableBaseText.codeNodeEditor.completer.all","codeNodeEditor.completer.$input.first":"@:_reusableBaseText.codeNodeEditor.completer.first","codeNodeEditor.completer.$input.item":"The item that generated the current one","codeNodeEditor.completer.$input.itemMatching":"@:_reusableBaseText.codeNodeEditor.completer.itemMatching","codeNodeEditor.completer.$input.last":"@:_reusableBaseText.codeNodeEditor.completer.last","codeNodeEditor.completer.$itemIndex":"The position of the current item in the list of items","codeNodeEditor.completer.$jmespath":"Evaluate a JMESPath expression","codeNodeEditor.completer.$now":"The current timestamp (as a Luxon object)","codeNodeEditor.completer.$prevNode":"The node providing the input data for this run","codeNodeEditor.completer.$prevNode.name":"The name of the node providing the input data for this run","codeNodeEditor.completer.$prevNode.outputIndex":"The output connector of the node providing input data for this run","codeNodeEditor.completer.$prevNode.runIndex":"The run of the node providing input data to the current one","codeNodeEditor.completer.$runIndex":"The index of the current run of this node","codeNodeEditor.completer.$today":"A timestamp representing the current day (at midnight, as a Luxon object)","codeNodeEditor.completer.$workflow":"Information about the workflow","codeNodeEditor.completer.$workflow.active":"Whether the workflow is active or not (boolean)","codeNodeEditor.completer.$workflow.id":"The ID of the workflow","codeNodeEditor.completer.$workflow.name":"The name of the workflow","codeNodeEditor.completer.binary":"The item's binary (file) data","codeNodeEditor.completer.json":"The item's JSON data. When in doubt, use this","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromFormat":"Create a DateTime from an input string and format string.","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromHTTP":"Create a DateTime from an HTTP header date","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromISO":"Create a DateTime from an ISO 8601 string","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromJSDate":"Create a DateTime from a JavaScript Date object. Uses the default zone","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromMillis":"Create a DateTime from a number of milliseconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromObject":"Create a DateTime from a JavaScript object with keys like 'year' and 'hour' with reasonable defaults","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromRFC2822":"Create a DateTime from an RFC 2822 string","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromSQL":"Create a DateTime from a SQL date, time, or datetime","codeNodeEditor.completer.luxon.dateTimeStaticMethods.fromSeconds":"Create a DateTime from a number of seconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone","codeNodeEditor.completer.luxon.dateTimeStaticMethods.invalid":"Create an invalid DateTime.","codeNodeEditor.completer.luxon.dateTimeStaticMethods.isDateTime":"Check if an object is a DateTime. Works across context boundaries","codeNodeEditor.completer.luxon.dateTimeStaticMethods.local":"Create a local DateTime","codeNodeEditor.completer.luxon.dateTimeStaticMethods.now":"Create a DateTime for the current instant, in the system's time zone","codeNodeEditor.completer.luxon.dateTimeStaticMethods.utc":"Create a DateTime in UTC","codeNodeEditor.completer.luxon.instanceMethods.day":"Get the day of the month (1-30ish).","codeNodeEditor.completer.luxon.instanceMethods.daysInMonth":"Returns the number of days in this DateTime's month","codeNodeEditor.completer.luxon.instanceMethods.daysInYear":"Returns the number of days in this DateTime's year","codeNodeEditor.completer.luxon.instanceMethods.diff":"Return the difference between two DateTimes as a Duration.","codeNodeEditor.completer.luxon.instanceMethods.diffNow":"Return the difference between this DateTime and right now.","codeNodeEditor.completer.luxon.instanceMethods.endOf":"Set this DateTime to the end (meaning the last millisecond) of a unit of time","codeNodeEditor.completer.luxon.instanceMethods.equals":"Equality check","codeNodeEditor.completer.luxon.instanceMethods.hasSame":"Return whether this DateTime is in the same unit of time as another DateTime.","codeNodeEditor.completer.luxon.instanceMethods.hour":"Get the hour of the day (0-23).","codeNodeEditor.completer.luxon.instanceMethods.invalidExplanation":"Returns an explanation of why this DateTime became invalid, or null if the DateTime is valid","codeNodeEditor.completer.luxon.instanceMethods.invalidReason":"Returns an error code if this DateTime is invalid, or null if the DateTime is valid","codeNodeEditor.completer.luxon.instanceMethods.isInDST":"Get whether the DateTime is in a DST.","codeNodeEditor.completer.luxon.instanceMethods.isInLeapYear":"Returns true if this DateTime is in a leap year, false otherwise","codeNodeEditor.completer.luxon.instanceMethods.isOffsetFixed":"Get whether this zone's offset ever changes, as in a DST.","codeNodeEditor.completer.luxon.instanceMethods.isValid":"Returns whether the DateTime is valid. Invalid DateTimes occur when The DateTime was created from invalid calendar information, such as the 13th month or February 30. The DateTime was created by an operation on another invalid date.","codeNodeEditor.completer.luxon.instanceMethods.locale":"Get the locale of a DateTime, such 'en-GB'. The locale is used when formatting the DateTime","codeNodeEditor.completer.luxon.instanceMethods.max":"Return the max of several date times","codeNodeEditor.completer.luxon.instanceMethods.millisecond":"Get the millisecond of the second (0-999).","codeNodeEditor.completer.luxon.instanceMethods.min":"Return the min of several date times","codeNodeEditor.completer.luxon.instanceMethods.minus":"Subtract hours, minutes, seconds, or milliseconds increases the timestamp by the right number of milliseconds.","codeNodeEditor.completer.luxon.instanceMethods.minute":"Get the minute of the hour (0-59).","codeNodeEditor.completer.luxon.instanceMethods.month":"Get the month (1-12).","codeNodeEditor.completer.luxon.instanceMethods.monthLong":"Get the human readable long month name, such as 'October'.","codeNodeEditor.completer.luxon.instanceMethods.monthShort":"Get the human readable short month name, such as 'Oct'.","codeNodeEditor.completer.luxon.instanceMethods.numberingSystem":"Get the numbering system of a DateTime, such 'beng'. The numbering system is used when formatting the DateTime","codeNodeEditor.completer.luxon.instanceMethods.offset":"Get the UTC offset of this DateTime in minutes","codeNodeEditor.completer.luxon.instanceMethods.offsetNameLong":`Get the long human name for the zone\\'s current offset, for example "Eastern Standard Time" or " Eastern Daylight Time".`,"codeNodeEditor.completer.luxon.instanceMethods.offsetNameShort":`Get the short human name for the zone\\'s current offset, for example "EST" or "EDT".'`,"codeNodeEditor.completer.luxon.instanceMethods.offsetNumber":`Get the short human name for the zone\\'s current offset, for example "EST" or "EDT".'`,"codeNodeEditor.completer.luxon.instanceMethods.ordinal":"Get the ordinal (meaning the day of the year)","codeNodeEditor.completer.luxon.instanceMethods.outputCalendar":"Get the output calendar of a DateTime, such 'islamic'. The output calendar is used when formatting the DateTime","codeNodeEditor.completer.luxon.instanceMethods.plus":"Add hours, minutes, seconds, or milliseconds increases the timestamp by the right number of milliseconds.","codeNodeEditor.completer.luxon.instanceMethods.quarter":"Get the quarter","codeNodeEditor.completer.luxon.instanceMethods.second":"Get the second of the minute (0-59).","codeNodeEditor.completer.luxon.instanceMethods.set":"Set the values of specified units. Returns a newly-constructed DateTime.","codeNodeEditor.completer.luxon.instanceMethods.setLocale":"Set the locale. Returns a newly-constructed DateTime.","codeNodeEditor.completer.luxon.instanceMethods.setZone":"Set the DateTime's zone to specified zone. Returns a newly-constructed DateTime.","codeNodeEditor.completer.luxon.instanceMethods.startOf":"Set this DateTime to the beginning of a unit of time.","codeNodeEditor.completer.luxon.instanceMethods.toBSON":"Returns a BSON serializable equivalent to this DateTime.","codeNodeEditor.completer.luxon.instanceMethods.toFormat":"Returns a string representation of this DateTime formatted according to the specified format string.","codeNodeEditor.completer.luxon.instanceMethods.toHTTP":"Returns a string representation of this DateTime appropriate for use in HTTP headers.","codeNodeEditor.completer.luxon.instanceMethods.toISO":"Returns an ISO 8601-compliant string representation of this DateTime","codeNodeEditor.completer.luxon.instanceMethods.toISODate":"Returns an ISO 8601-compliant string representation of this DateTime's date component","codeNodeEditor.completer.luxon.instanceMethods.toISOTime":"Returns an ISO 8601-compliant string representation of this DateTime's time component","codeNodeEditor.completer.luxon.instanceMethods.toISOWeekDate":"Returns an ISO 8601-compliant string representation of this DateTime's week date","codeNodeEditor.completer.luxon.instanceMethods.toJSON":"Returns an ISO 8601 representation of this DateTime appropriate for use in JSON.","codeNodeEditor.completer.luxon.instanceMethods.toJsDate":"Returns a JavaScript Date equivalent to this DateTime.","codeNodeEditor.completer.luxon.instanceMethods.toLocal":"Set the DateTime's zone to the host's local zone. Returns a newly-constructed DateTime.","codeNodeEditor.completer.luxon.instanceMethods.toLocaleParts":'Returns an array of format "parts", meaning individual tokens along with metadata.',"codeNodeEditor.completer.luxon.instanceMethods.toLocaleString":"Returns a localized string representing this date. Accepts the same options as the Intl.DateTimeFormat constructor and any presets defined by Luxon.","codeNodeEditor.completer.luxon.instanceMethods.toMillis":"Returns the epoch milliseconds of this DateTime.","codeNodeEditor.completer.luxon.instanceMethods.toObject":"Returns a JavaScript object with this DateTime's year, month, day, and so on.","codeNodeEditor.completer.luxon.instanceMethods.toRFC2822":"Returns an RFC 2822-compatible string representation of this DateTime, always in UTC","codeNodeEditor.completer.luxon.instanceMethods.toRelative":"Returns a string representation of a this time relative to now, such as 'in two days'.","codeNodeEditor.completer.luxon.instanceMethods.toRelativeCalendar":`Returns a string representation of this date relative to today, such as '"'yesterday' or 'next month'`,"codeNodeEditor.completer.luxon.instanceMethods.toSQL":"Returns a string representation of this DateTime appropriate for use in SQL DateTime.","codeNodeEditor.completer.luxon.instanceMethods.toSQLDate":"Returns a string representation of this DateTime appropriate for use in SQL Date","codeNodeEditor.completer.luxon.instanceMethods.toSQLTime":"Returns a string representation of this DateTime appropriate for use in SQL Time","codeNodeEditor.completer.luxon.instanceMethods.toSeconds":"Returns the epoch seconds of this DateTime.","codeNodeEditor.completer.luxon.instanceMethods.toString":"Returns a string representation of this DateTime appropriate for debugging","codeNodeEditor.completer.luxon.instanceMethods.toUTC":"Set the DateTime's zone to UTC. Returns a newly-constructed DateTime.","codeNodeEditor.completer.luxon.instanceMethods.toUnixInteger":"Returns the epoch seconds (as a whole number) of this DateTime.","codeNodeEditor.completer.luxon.instanceMethods.until":"Return an Interval spanning between this DateTime and another DateTime","codeNodeEditor.completer.luxon.instanceMethods.valueOf":"Returns the epoch milliseconds of this DateTime.","codeNodeEditor.completer.luxon.instanceMethods.weekNumber":"Get the week number of the week year (1-52ish).","codeNodeEditor.completer.luxon.instanceMethods.weekYear":"Get the week year","codeNodeEditor.completer.luxon.instanceMethods.weekday":"Get the day of the week. 1 is Monday and 7 is Sunday.","codeNodeEditor.completer.luxon.instanceMethods.weekdayLong":"Get the human readable long weekday, such as 'Monday'.","codeNodeEditor.completer.luxon.instanceMethods.weekdayShort":"Get the human readable short weekday, such as 'Mon'.","codeNodeEditor.completer.luxon.instanceMethods.weeksInWeekYear":"Returns the number of weeks in this DateTime's year","codeNodeEditor.completer.luxon.instanceMethods.year":"Get the year","codeNodeEditor.completer.luxon.instanceMethods.zone":"Get the time zone associated with this DateTime.","codeNodeEditor.completer.luxon.instanceMethods.zoneName":"Get the name of the time zone.","codeNodeEditor.completer.selector.all":"@:_reusableBaseText.codeNodeEditor.completer.all","codeNodeEditor.completer.selector.context":"Extra data about the node","codeNodeEditor.completer.selector.first":"@:_reusableBaseText.codeNodeEditor.completer.first","codeNodeEditor.completer.selector.item":"The item that generated the current one","codeNodeEditor.completer.selector.itemMatching":"@:_reusableBaseText.codeNodeEditor.completer.itemMatching","codeNodeEditor.completer.selector.last":"@:_reusableBaseText.codeNodeEditor.completer.last","codeNodeEditor.completer.selector.params":"The parameters of the node","codeNodeEditor.linter.allItems.firstOrLastCalledWithArg":"expects no argument.","codeNodeEditor.linter.allItems.emptyReturn":"Code doesn't return items properly. Please return an array of objects, one for each item you would like to output.","codeNodeEditor.linter.allItems.itemCall":"`item` is a property to access, not a method to call. Did you mean `.item` without brackets?","codeNodeEditor.linter.allItems.itemMatchingNoArg":"`.itemMatching()` expects an item index to be passed in as its argument.","codeNodeEditor.linter.allItems.unavailableProperty":"`.item` is only available in the 'Run Once for Each Item' mode.","codeNodeEditor.linter.allItems.unavailableVar":"is only available in the 'Run Once for Each Item' mode.","codeNodeEditor.linter.bothModes.directAccess.firstOrLastCall":"@:_reusableBaseText.codeNodeEditor.linter.useJson","codeNodeEditor.linter.bothModes.directAccess.itemProperty":"@:_reusableBaseText.codeNodeEditor.linter.useJson","codeNodeEditor.linter.bothModes.varDeclaration.itemProperty":"@:_reusableBaseText.codeNodeEditor.linter.useJson","codeNodeEditor.linter.bothModes.varDeclaration.itemSubproperty":"@:_reusableBaseText.codeNodeEditor.linter.useJson","codeNodeEditor.linter.eachItem.emptyReturn":"Code doesn't return an object. Please return an object representing the output item","codeNodeEditor.linter.eachItem.legacyItemAccess":"`item` is not defined. Did you mean `$input.item.json`?","codeNodeEditor.linter.eachItem.returnArray":"Code doesn't return an object. Array found instead. Please return an object representing the output item","codeNodeEditor.linter.eachItem.unavailableMethod":"Method `$input.{method}()` is only available in the 'Run Once for All Items' mode.","codeNodeEditor.linter.bothModes.syntaxError":"Syntax error","collectionParameter.choose":"Choose...","collectionParameter.noProperties":"No properties","credentialEdit.credentialConfig.accountConnected":"Account connected","credentialEdit.credentialConfig.clickToCopy":"Click To Copy","credentialEdit.credentialConfig.connectionTestedSuccessfully":"Connection tested successfully","credentialEdit.credentialConfig.couldntConnectWithTheseSettings":"Couldn\u2019t connect with these settings","credentialEdit.credentialConfig.needHelpFillingOutTheseFields":"Need help filling out these fields?","credentialEdit.credentialConfig.oAuthRedirectUrl":"OAuth Redirect URL","credentialEdit.credentialConfig.openDocs":"Open docs","credentialEdit.credentialConfig.pleaseCheckTheErrorsBelow":"Please check the errors below","credentialEdit.credentialConfig.reconnect":"Reconnect","credentialEdit.credentialConfig.reconnectOAuth2Credential":"Reconnect OAuth2 Credential","credentialEdit.credentialConfig.redirectUrlCopiedToClipboard":"Redirect URL copied to clipboard","credentialEdit.credentialConfig.retry":"Retry","credentialEdit.credentialConfig.retryCredentialTest":"Retry credential test","credentialEdit.credentialConfig.retrying":"Retrying","credentialEdit.credentialConfig.subtitle":"In {appName}, use the URL above when prompted to enter an OAuth callback or redirect URL","credentialEdit.credentialConfig.theServiceYouReConnectingTo":"the service you're connecting to","credentialEdit.credentialConfig.missingCredentialType":"This credential's type isn't available. This usually happens when a previously installed community or custom node was uninstalled.","credentialEdit.credentialEdit.confirmMessage.beforeClose1.cancelButtonText":"Keep Editing","credentialEdit.credentialEdit.confirmMessage.beforeClose1.confirmButtonText":"Close","credentialEdit.credentialEdit.confirmMessage.beforeClose1.headline":"Close without saving?","credentialEdit.credentialEdit.confirmMessage.beforeClose1.message":"Are you sure you want to throw away the changes you made to the {credentialDisplayName} credential?","credentialEdit.credentialEdit.confirmMessage.beforeClose2.cancelButtonText":"Keep Editing","credentialEdit.credentialEdit.confirmMessage.beforeClose2.confirmButtonText":"Close","credentialEdit.credentialEdit.confirmMessage.beforeClose2.headline":"Close without connecting?","credentialEdit.credentialEdit.confirmMessage.beforeClose2.message":"You need to connect your credential for it to work","credentialEdit.credentialEdit.confirmMessage.deleteCredential.cancelButtonText":"","credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText":"Yes, delete","credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline":"Delete Credential?","credentialEdit.credentialEdit.confirmMessage.deleteCredential.message":'Are you sure you want to delete "{savedCredentialName}"? This may break any workflows that use it.',"credentialEdit.credentialEdit.connection":"Connection","credentialEdit.credentialEdit.sharing":"Sharing","credentialEdit.credentialEdit.couldNotFindCredentialOfType":"Could not find credential of type","credentialEdit.credentialEdit.couldNotFindCredentialWithId":"Could not find credential with ID","credentialEdit.credentialEdit.delete":"Delete","credentialEdit.credentialEdit.details":"Details","credentialEdit.credentialEdit.saving":"Saving","credentialEdit.credentialEdit.showError.createCredential.title":"Problem creating credential","credentialEdit.credentialEdit.showError.deleteCredential.title":"Problem deleting credential","credentialEdit.credentialEdit.showError.generateAuthorizationUrl.message":"There was a problem generating the authorization URL","credentialEdit.credentialEdit.showError.generateAuthorizationUrl.title":"OAuth Authorization Error","credentialEdit.credentialEdit.showError.loadCredential.title":"Problem loading credential","credentialEdit.credentialEdit.showError.updateCredential.title":"Problem updating credential","credentialEdit.credentialEdit.showMessage.title":"Credential deleted","credentialEdit.credentialEdit.testing":"Testing","credentialEdit.credentialEdit.info.sharee":"Only {credentialOwnerName} can edit this connection","credentialEdit.credentialInfo.allowUseBy":"Allow use by","credentialEdit.credentialInfo.created":"Created","credentialEdit.credentialInfo.id":"ID","credentialEdit.credentialInfo.lastModified":"Last modified","credentialEdit.oAuthButton.connectMyAccount":"Connect my account","credentialEdit.oAuthButton.signInWithGoogle":"Sign in with Google","credentialEdit.credentialSharing.info.owner":"Sharing a credential allows people to use it in their workflows. They cannot access credential details.","credentialEdit.credentialSharing.info.instanceOwner":"You have access to this credential because you\u2019re the Instance Owner. You can view partial data, update the credential title, or delete the credential.","credentialEdit.credentialSharing.info.sharee":"Only {credentialOwnerName} can change who this credential is shared with","credentialEdit.credentialSharing.info.sharee.fallback":"the owner","credentialEdit.credentialSharing.select.placeholder":"Add people","credentialEdit.credentialSharing.list.delete":"Remove","credentialEdit.credentialSharing.list.delete.confirm.title":"Remove access?","credentialEdit.credentialSharing.list.delete.confirm.message":"This may break any workflows in which {name} has used this credential","credentialEdit.credentialSharing.list.delete.confirm.confirmButtonText":"Remove","credentialEdit.credentialSharing.list.delete.confirm.cancelButtonText":"Cancel","credentialSelectModal.addNewCredential":"Add new credential","credentialSelectModal.continue":"Continue","credentialSelectModal.searchForApp":"Search for app...","credentialSelectModal.selectAnAppOrServiceToConnectTo":"Select an app or service to connect to","credentialsList.addNew":"Add New","credentialsList.confirmMessage.cancelButtonText":"","credentialsList.confirmMessage.confirmButtonText":"Yes, delete","credentialsList.confirmMessage.headline":"Delete Credential?","credentialsList.confirmMessage.message":"Are you sure you want to delete {credentialName}?","credentialsList.createNewCredential":"Create New Credential","credentialsList.created":"Created","credentialsList.credentials":"Credentials","credentialsList.deleteCredential":"Delete Credential","credentialsList.editCredential":"Edit Credential","credentialsList.errorLoadingCredentials":"Error loading credentials","credentialsList.name":"@:_reusableBaseText.name","credentialsList.operations":"Operations","credentialsList.showError.deleteCredential.title":"Problem deleting credential","credentialsList.showMessage.title":"Credential deleted","credentialsList.type":"Type","credentialsList.updated":"Updated","credentialsList.yourSavedCredentials":"Your saved credentials","credentials.heading":"Credentials","credentials.add":"Add Credential","credentials.empty.heading":"{name}, let's set up a credential","credentials.empty.heading.userNotSetup":"Set up a credential","credentials.empty.description":"Credentials let workflows interact with your apps and services","credentials.empty.button":"Add first credential","credentials.menu.my":"My credentials","credentials.menu.all":"All credentials","credentials.item.open":"Open","credentials.item.delete":"Delete","credentials.item.updated":"Last updated","credentials.item.created":"Created","credentials.item.owner":"Owner","credentials.search.placeholder":"Search credentials...","credentials.filters.type":"Type","credentials.filters.active":"Some credentials may be hidden since filters are applied.","credentials.filters.active.reset":"Remove filters","credentials.sort.lastUpdated":"Sort by last updated","credentials.sort.lastCreated":"Sort by last created","credentials.sort.nameAsc":"Sort by name (A-Z)","credentials.sort.nameDesc":"Sort by name (Z-A)","credentials.noResults":"No credentials found","credentials.noResults.withSearch.switchToShared.preamble":"some credentials may be","credentials.noResults.withSearch.switchToShared.link":"hidden","credentials.noResults.switchToShared.preamble":"but there are some","credentials.noResults.switchToShared.link":"shared with you","dataDisplay.needHelp":"Need help?","dataDisplay.nodeDocumentation":"Node Documentation","dataDisplay.openDocumentationFor":"Open {nodeTypeDisplayName} documentation","dataMapping.dragColumnToFieldHint":"Drag onto a field to map column to that field","dataMapping.dragFromPreviousHint":"Map data from previous nodes to <b>{name}</b> by first clicking this button","dataMapping.success.title":"You just mapped some data!","dataMapping.success.moreInfo":'Check out our <a href="https://docs.n8n.io/data/data-mapping" target="_blank">docs</a> for more details on mapping data in n8n',"dataMapping.tableHint":"<img src='/static/data-mapping-gif.gif'/> Drag a column onto <b>{name}</b> to map it","dataMapping.jsonHint":"<img src='/static/json-mapping-gif.gif'/> Drag a JSON key onto <b>{name}</b> to map data","dataMapping.mapKeyToField":"Map '{name}' to a field","dataMapping.mapAllKeysToField":"Map every '{name}' to a field","dataMapping.tableView.tableColumnsExceeded":"Some columns are hidden.","dataMapping.tableView.tableColumnsExceeded.tooltip":"Your data has more than {columnLimit} columns so some are hidden. Switch to {0} to see all data.","dataMapping.tableView.tableColumnsExceeded.tooltip.link":"JSON view","displayWithChange.cancelEdit":"Cancel Edit","displayWithChange.clickToChange":"Click to Change","displayWithChange.setValue":"Set Value","duplicateWorkflowDialog.cancel":"@:_reusableBaseText.cancel","duplicateWorkflowDialog.chooseOrCreateATag":"Choose or create a tag","duplicateWorkflowDialog.duplicateWorkflow":"Duplicate Workflow","duplicateWorkflowDialog.enterWorkflowName":"Enter workflow name","duplicateWorkflowDialog.save":"@:_reusableBaseText.save","duplicateWorkflowDialog.showMessage.message":"Please enter a name.","duplicateWorkflowDialog.showMessage.title":"Name missing",error:Wg,"error.goBack":"Go back","error.pageNotFound":"Oops, couldn\u2019t find that","executions.ExecutionStatus":"Execution status","executionDetails.confirmMessage.confirmButtonText":"Yes, delete","executionDetails.confirmMessage.headline":"Delete Execution?","executionDetails.confirmMessage.message":"Are you sure that you want to delete the current execution?","executionDetails.deleteExecution":"Delete this execution","executionDetails.executionFailed":"Execution failed","executionDetails.executionId":"Execution ID","executionDetails.executionWaiting":"Execution waiting","executionDetails.executionWasSuccessful":"Execution was successful","executionDetails.of":"of","executionDetails.openWorkflow":"Open Workflow","executionDetails.readOnly.readOnly":"Read only","executionDetails.readOnly.youreViewingTheLogOf":`You're viewing the log of a previous execution. You cannot<br />
		make changes since this execution already occurred. Make changes<br />
		to this workflow by clicking on its name on the left.`,"executionDetails.retry":"Retry of execution","executionDetails.runningTimeFinished":"in {time}","executionDetails.runningTimeRunning":"for {time}","executionDetails.runningMessage":"Execution is running. It will show here once finished.","executionDetails.workflow":"workflow","executionsLandingPage.emptyState.noTrigger.heading":"Set up the first step. Then execute your workflow","executionsLandingPage.emptyState.noTrigger.buttonText":"Add first step...","executionsLandingPage.clickExecutionMessage":"Click on an execution from the list to view it","executionsLandingPage.emptyState.heading":" No executions yet","executionsLandingPage.emptyState.message":"New workflow executions will show here","executionsLandingPage.emptyState.accordion.title":"Which executions is this workflow saving?","executionsLandingPage.emptyState.accordion.productionExecutions":"Production executions","executionsLandingPage.emptyState.accordion.manualExecutions":"Manual executions","executionsLandingPage.emptyState.accordion.productionExecutionsWarningTooltip":`Not all production executions are being saved. Change this in the workflow's <a href="#">settings</a>`,"executionsLandingPage.emptyState.accordion.footer":"You can change this in","executionsLandingPage.emptyState.accordion.footer.settingsLink":"Workflow settings","executionsLandingPage.emptyState.accordion.footer.tooltipLink":"Save your workflow","executionsLandingPage.emptyState.accordion.footer.tooltipText":"in order to access workflow settings","executionsLandingPage.noResults":"No executions found","executionsList.allWorkflows":"All Workflows","executionsList.anyStatus":"Any Status","executionsList.autoRefresh":"Auto refresh","executionsList.confirmMessage.cancelButtonText":"","executionsList.confirmMessage.confirmButtonText":"Yes, delete","executionsList.confirmMessage.headline":"Delete Executions?","executionsList.confirmMessage.message":"Are you sure that you want to delete the {numSelected} selected execution(s)?","executionsList.deleteSelected":"Delete Selected","executionsList.error":"Failed","executionsList.filters":"Filters","executionsList.loadMore":"Load More","executionsList.mode":"Mode","executionsList.modes.error":"error","executionsList.modes.integrated":"integrated","executionsList.modes.manual":"manual","executionsList.modes.retry":"retry","executionsList.modes.trigger":"trigger","executionsList.modes.webhook":"webhook","executionsList.name":"@:_reusableBaseText.name","executionsList.openPastExecution":"Open Past Execution","executionsList.retryExecution":"Retry execution","executionsList.retryOf":"Retry of","executionsList.retryWithCurrentlySavedWorkflow":"Retry with currently saved workflow (from node with error)","executionsList.retryWithOriginalWorkflow":"Retry with original workflow (from node with error)","executionsList.running":"Running","executionsList.succeeded":"Succeeded","executionsList.runningTime":"Running Time","executionsList.selectStatus":"Select Status","executionsList.selectWorkflow":"Select Workflow","executionsList.selected":"Selected","executionsList.manual":"Manual execution","executionsList.showError.handleDeleteSelected.title":"Problem deleting executions","executionsList.showError.loadMore.title":"Problem loading executions","executionsList.showError.loadWorkflows.title":"Problem loading workflows","executionsList.showError.refreshData.title":"Problem loading data","executionsList.showError.retryExecution.title":"Problem with retry","executionsList.showError.stopExecution.title":"Problem stopping execution","executionsList.showMessage.handleDeleteSelected.title":"Execution deleted","executionsList.showMessage.retrySuccessfulFalse.title":"Retry unsuccessful","executionsList.showMessage.retrySuccessfulTrue.title":"Retry successful","executionsList.showMessage.stopExecution.message":"Execution ID {activeExecutionId}","executionsList.showMessage.stopExecution.title":"Execution stopped","executionsList.startedAtId":"Started At / ID","executionsList.status":"Status","executionsList.statusTooltipText.theWorkflowExecutionFailed":"The workflow execution failed.","executionsList.statusTooltipText.theWorkflowExecutionFailedButTheRetryWasSuccessful":"The workflow execution failed but the retry {entryRetrySuccessId} was successful.","executionsList.statusTooltipText.theWorkflowExecutionIsProbablyStillRunning":"The workflow execution is probably still running but it may have crashed and n8n cannot safely tell. ","executionsList.statusTooltipText.theWorkflowExecutionWasARetryOfAndFailed":"The workflow execution was a retry of {entryRetryOf} and failed.<br />New retries have to be started from the original execution.","executionsList.statusTooltipText.theWorkflowExecutionWasARetryOfAndItWasSuccessful":"The workflow execution was a retry of {entryRetryOf} and it was successful.","executionsList.statusTooltipText.theWorkflowExecutionWasSuccessful":"The worklow execution was successful.","executionsList.statusTooltipText.theWorkflowIsCurrentlyExecuting":"The worklow is currently executing.","executionsList.statusTooltipText.theWorkflowIsWaitingIndefinitely":"The workflow is waiting indefinitely for an incoming webhook call.","executionsList.statusTooltipText.theWorkflowIsWaitingTill":"The worklow is waiting till {waitDateDate} {waitDateTime}.","executionsList.stopExecution":"Stop Execution","executionsList.success":"Success","executionsList.successRetry":"Success retry","executionsList.unknown":"Unknown","executionsList.unsavedWorkflow":"[UNSAVED WORKFLOW]","executionsList.waiting":"Waiting","executionsList.workflowExecutions":"Workflow Executions","executionSidebar.executionName":"Execution {id}","executionSidebar.searchPlaceholder":"Search executions...","executionView.onPaste.title":"Cannot paste here","executionView.onPaste.message":"This view is read-only. Switch to <i>Workflow</i> tab to be able to edit the current workflow","expressionEdit.editExpression":"Edit Expression","expressionEdit.expression":"Expression","expressionEdit.result":"Result","expressionEdit.variableSelector":"Variable Selector","fakeDoor.credentialEdit.sharing.name":"Sharing","fakeDoor.credentialEdit.sharing.actionBox.title":'Sharing is only available on <a href="https://n8n.io/cloud/" target="_blank">n8n Cloud</a> right now',"fakeDoor.credentialEdit.sharing.actionBox.description":"We\u2019re working on bringing it to this edition of n8n, as a paid feature. If you\u2019d like to be the first to hear when it\u2019s ready, join the list.","fakeDoor.credentialEdit.sharing.actionBox.title.cloud.upgrade":"Upgrade to add users","fakeDoor.credentialEdit.sharing.actionBox.description.cloud.upgrade":"Power and Pro plan users can create multiple user accounts and share credentials. (Sharing workflows is coming soon)","fakeDoor.credentialEdit.sharing.actionBox.button.cloud.upgrade":"Upgrade","fakeDoor.settings.environments.name":"Environments","fakeDoor.settings.environments.infoText":"Environments allow you to use different settings and credentials in a workflow when you're building it vs when it's running in production","fakeDoor.settings.environments.actionBox.title":"We\u2019re working on environments (as a paid feature)","fakeDoor.settings.environments.actionBox.title.cloud":"We\u2019re working on this","fakeDoor.settings.environments.actionBox.description":"If you'd like to be the first to hear when it's ready, join the list.","fakeDoor.settings.logging.name":"Logging","fakeDoor.settings.logging.infoText":'You can already write logs to a file or the console using environment variables. <a href="https://docs.n8n.io/hosting/logging/" target="_blank">More info</a>',"fakeDoor.settings.logging.actionBox.title":"We're working on advanced logging (as a paid feature)","fakeDoor.settings.logging.actionBox.title.cloud":"We're working on advanced logging","fakeDoor.settings.logging.actionBox.description":"This also includes audit logging. If you'd like to be the first to hear when it's ready, join the list.","fakeDoor.settings.users.name":"Users","fakeDoor.settings.users.actionBox.title":"Upgrade to add users","fakeDoor.settings.users.actionBox.description":"Power and Pro plan users can create multiple user accounts and share credentials. (Sharing workflows is coming soon)","fakeDoor.settings.users.actionBox.button":"Upgrade","fakeDoor.actionBox.button.label":"Join the list","fixedCollectionParameter.choose":"Choose...","fixedCollectionParameter.currentlyNoItemsExist":"Currently no items exist","fixedCollectionParameter.deleteItem":"Delete item","fixedCollectionParameter.moveDown":"Move down","fixedCollectionParameter.moveUp":"Move up",forgotPassword:Lg,"forgotPassword.emailSentIfExists":"We\u2019ve emailed {email} (if there\u2019s a matching account)","forgotPassword.getRecoveryLink":"Email me a recovery link","forgotPassword.noSMTPToSendEmailWarning":"Please contact your admin. n8n isn\u2019t set up to send email right now.","forgotPassword.recoverPassword":"Recover password","forgotPassword.recoveryEmailSent":"Recovery email sent","forgotPassword.returnToSignIn":"Back to sign in","forgotPassword.sendingEmailError":"Problem sending email","forgotPassword.smtpErrorContactAdministrator":"Please contact your administrator (problem with your SMTP setup)","forms.resourceFiltersDropdown.filters":"Filters","forms.resourceFiltersDropdown.ownedBy":"Owned by","forms.resourceFiltersDropdown.sharedWith":"Shared with","forms.resourceFiltersDropdown.reset":"Reset all","generic.oauth1Api":"OAuth1 API","generic.oauth2Api":"OAuth2 API","genericHelpers.loading":"Loading","genericHelpers.min":"min","genericHelpers.sec":"sec","genericHelpers.showMessage.message":"Executions are read-only. Make changes from the <b>Workflow</b> tab.","genericHelpers.showMessage.title":"Cannot edit execution","mainSidebar.aboutN8n":"About n8n","mainSidebar.confirmMessage.workflowDelete.cancelButtonText":"","mainSidebar.confirmMessage.workflowDelete.confirmButtonText":"Yes, delete","mainSidebar.confirmMessage.workflowDelete.headline":"Delete Workflow?","mainSidebar.confirmMessage.workflowDelete.message":"Are you sure that you want to delete '{workflowName}'?","mainSidebar.credentials":"Credentials","mainSidebar.help":"Help","mainSidebar.helpMenuItems.course":"Course","mainSidebar.helpMenuItems.documentation":"Documentation","mainSidebar.helpMenuItems.forum":"Forum","mainSidebar.helpMenuItems.quickstart":"Quickstart","mainSidebar.new":"New","mainSidebar.newTemplate":"New from template","mainSidebar.open":"Open","mainSidebar.prompt.cancel":"@:_reusableBaseText.cancel","mainSidebar.prompt.import":"Import","mainSidebar.prompt.importWorkflowFromUrl":"Import Workflow from URL","mainSidebar.prompt.invalidUrl":"Invalid URL","mainSidebar.prompt.workflowUrl":"Workflow URL","mainSidebar.save":"@:_reusableBaseText.save","mainSidebar.showError.stopExecution.title":"Problem stopping execution","mainSidebar.showMessage.handleFileImport.message":"The file does not contain valid JSON data","mainSidebar.showMessage.handleFileImport.title":"Could not import file","mainSidebar.showMessage.handleSelect1.title":"Workflow deleted","mainSidebar.showMessage.handleSelect2.title":"Workflow created","mainSidebar.showMessage.handleSelect3.title":"Workflow created","mainSidebar.showMessage.stopExecution.title":"Execution stopped","mainSidebar.templates":"Templates","mainSidebar.workflows":"Workflows","menuActions.duplicate":"Duplicate","menuActions.download":"Download","menuActions.importFromUrl":"Import from URL...","menuActions.importFromFile":"Import from File...","menuActions.delete":"Delete","multipleParameter.addItem":"Add item","multipleParameter.currentlyNoItemsExist":"Currently no items exist","multipleParameter.deleteItem":"Delete item","multipleParameter.moveDown":"Move down","multipleParameter.moveUp":"Move up","ndv.backToCanvas":"Back to canvas","ndv.backToCanvas.waitingForTriggerWarning":"Waiting for a Trigger node to execute. Close this view to see the Workflow Canvas.","ndv.execute.executeNode":"Execute node","ndv.execute.executing":"Executing","ndv.execute.fetchEvent":"Fetch Test Event","ndv.execute.fixPrevious":"Fix previous node first","ndv.execute.listenForEvent":"Listen For Event","ndv.execute.listenForTestEvent":"Listen For Test Event","ndv.execute.stopListening":"Stop Listening","ndv.execute.nodeIsDisabled":"Enable node to execute","ndv.execute.requiredFieldsMissing":"Complete required fields first","ndv.execute.stopWaitingForWebhook.error":"Problem deleting test webhook","ndv.execute.workflowAlreadyRunning":"Workflow is already running","ndv.featureRequest":"I wish this node would...","ndv.input":"Input","ndv.input.nodeDistance":"({count} node back) | ({count} nodes back)","ndv.input.noNodesFound":"No nodes found","ndv.input.parentNodes":"Parent nodes","ndv.input.tooMuchData.title":"Input data is huge","ndv.input.noOutputDataInBranch":"No input data in this branch","ndv.input.noOutputDataInNode":"Node did not output any data. n8n stops executing the workflow when a node has no output data.","ndv.input.noOutputData":"No data","ndv.input.noOutputData.executePrevious":"Execute previous nodes","ndv.input.noOutputData.title":"No input data yet","ndv.input.noOutputData.hint":"(From the earliest node that has no output data yet)","ndv.input.executingPrevious":"Executing previous nodes...","ndv.input.notConnected.title":"Wire me up","ndv.input.notConnected.message":"This node can only receive input data if you connect it to another node.","ndv.input.notConnected.learnMore":"Learn more","ndv.input.disabled":"The '{nodeName}' node is disabled and won\u2019t execute.","ndv.input.disabled.cta":"Enable it","ndv.output":"Output","ndv.output.edit":"Edit Output","ndv.output.all":"all","ndv.output.branch":"Branch","ndv.output.executing":"Executing node...","ndv.output.items":"item | items","ndv.output.noOutputData.message":"n8n stops executing the workflow when a node has no output data. You can change this default behaviour via","ndv.output.noOutputData.message.settings":"Settings","ndv.output.noOutputData.message.settingsOption":"> \u201CAlways Output Data\u201D.","ndv.output.noOutputData.title":"No output data returned","ndv.output.noOutputDataInBranch":"No output data in this branch","ndv.output.of":" of ","ndv.output.pageSize":"Page Size","ndv.output.run":"Run","ndv.output.runNodeHint":"Execute this node to output data","ndv.output.insertTestData":"insert test data","ndv.output.staleDataWarning.regular":"Node parameters have changed.<br>Execute node again to refresh output.","ndv.output.staleDataWarning.pinData":"Node parameter changes will not affect pinned output data.","ndv.output.tooMuchData.message":"The node contains {size} MB of data. Displaying it may cause problems. <br /> If you do decide to display it, avoid the JSON view.","ndv.output.tooMuchData.showDataAnyway":"Show data anyway","ndv.output.tooMuchData.title":"Output data is huge!","ndv.output.waitingToRun":"Waiting to execute...","ndv.title.cancel":"Cancel","ndv.title.rename":"Rename","ndv.title.renameNode":"Rename node","ndv.pinData.pin.title":"Pin data","ndv.pinData.pin.description":"Node will always output this data instead of executing. You can also pin data from previous executions.","ndv.pinData.pin.link":"More info","ndv.pinData.pin.multipleRuns.title":"Run #{index} was pinned","ndv.pinData.pin.multipleRuns.description":"This run will be outputted each time the node is run.","ndv.pinData.unpinAndExecute.title":"Unpin output data?","ndv.pinData.unpinAndExecute.description":"Executing a node overwrites pinned data.","ndv.pinData.unpinAndExecute.cancel":"Cancel","ndv.pinData.unpinAndExecute.confirm":"Unpin and execute","ndv.pinData.beforeClosing.title":"Save output changes before closing?","ndv.pinData.beforeClosing.cancel":"Discard","ndv.pinData.beforeClosing.confirm":"Save","ndv.pinData.error.tooLarge.title":"Output data is too large to pin","ndv.pinData.error.tooLarge.description":"You can pin at most 12MB of output per workflow.","noTagsView.readyToOrganizeYourWorkflows":"Ready to organize your workflows?","noTagsView.withWorkflowTagsYouReFree":"With workflow tags, you're free to create the perfect tagging system for your flows","node.activateDeactivateNode":"Activate/Deactivate Node","node.deleteNode":"Delete Node","node.disabled":"Disabled","node.duplicateNode":"Duplicate Node","node.editNode":"Edit Node","node.executeNode":"Execute Node","node.issues":"Issues","node.nodeIsExecuting":"Node is executing","node.nodeIsWaitingTill":"Node is waiting until {date} {time}","node.theNodeIsWaitingIndefinitelyForAnIncomingWebhookCall":"The node is waiting for an incoming webhook call (indefinitely)","node.waitingForYouToCreateAnEventIn":"Waiting for you to create an event in {nodeType}","node.discovery.pinData.canvas":"You can pin this output instead of waiting for a test event. Open node to do so.","node.discovery.pinData.ndv":"You can pin this output instead of waiting for a test event.","nodeBase.clickToAddNodeOrDragToConnect":"Click to add node<br />or drag to connect","nodeCreator.categoryNames.analytics":"Analytics","nodeCreator.categoryNames.communication":"Communication","nodeCreator.categoryNames.coreNodes":"Core Nodes","nodeCreator.categoryNames.customNodes":"Custom Nodes","nodeCreator.categoryNames.dataStorage":"Data & Storage","nodeCreator.categoryNames.development":"Development","nodeCreator.categoryNames.financeAccounting":"Finance & Accounting","nodeCreator.categoryNames.marketingContent":"Marketing & Content","nodeCreator.categoryNames.miscellaneous":"Miscellaneous","nodeCreator.categoryNames.productivity":"Productivity","nodeCreator.categoryNames.sales":"Sales","nodeCreator.categoryNames.suggestedNodes":"Suggested Nodes \u2728","nodeCreator.categoryNames.utility":"Utility","nodeCreator.mainPanel.all":"All","nodeCreator.mainPanel.regular":"Regular","nodeCreator.mainPanel.trigger":"Trigger","nodeCreator.noResults.dontWorryYouCanProbablyDoItWithThe":"Don\u2019t worry, you can probably do it with the","nodeCreator.noResults.httpRequest":"HTTP Request","nodeCreator.noResults.node":"node","nodeCreator.noResults.or":"or","nodeCreator.noResults.requestTheNode":"Request the node","nodeCreator.noResults.wantUsToMakeItFaster":"Want us to make it faster?","nodeCreator.noResults.weDidntMakeThatYet":"We didn't make that... yet","nodeCreator.noResults.clickToSeeResults":"To see results, <a data-action='showAllNodeCreatorNodes'>click here</a>","nodeCreator.noResults.webhook":"Webhook","nodeCreator.searchBar.searchNodes":"Search nodes...","nodeCreator.subcategoryDescriptions.appTriggerNodes":"Runs the flow when something happens in an app like Telegram, Notion or Airtable","nodeCreator.subcategoryDescriptions.dataTransformation":"Manipulate data fields, run code","nodeCreator.subcategoryDescriptions.files":"Work with CSV, XML, text, images etc.","nodeCreator.subcategoryDescriptions.flow":"Branches, core triggers, merge data","nodeCreator.subcategoryDescriptions.helpers":"HTTP Requests (API calls), date and time, scrape HTML","nodeCreator.subcategoryDescriptions.otherTriggerNodes":"Runs the flow on workflow errors, file changes, and more","nodeCreator.subcategoryNames.appTriggerNodes":"On App Event","nodeCreator.subcategoryNames.dataTransformation":"Data Transformation","nodeCreator.subcategoryNames.files":"Files","nodeCreator.subcategoryNames.flow":"Flow","nodeCreator.subcategoryNames.helpers":"Helpers","nodeCreator.subcategoryNames.otherTriggerNodes":"Other ways...","nodeCreator.subcategoryTitles.otherTriggerNodes":"Other Trigger Nodes","nodeCreator.triggerHelperPanel.title":"When should this workflow run?","nodeCreator.triggerHelperPanel.scheduleTriggerDisplayName":"On a Schedule","nodeCreator.triggerHelperPanel.scheduleTriggerDescription":"Runs the flow every day, hour, or custom interval","nodeCreator.triggerHelperPanel.webhookTriggerDisplayName":"On Webhook Call","nodeCreator.triggerHelperPanel.webhookTriggerDescription":"Runs the flow when another app sends a webhook","nodeCreator.triggerHelperPanel.manualTriggerDisplayName":"Manually","nodeCreator.triggerHelperPanel.manualTriggerDescription":"Runs the flow on clicking a button in n8n","nodeCreator.triggerHelperPanel.workflowTriggerDisplayName":"When Called By Another Workflow","nodeCreator.triggerHelperPanel.workflowTriggerDescription":"Runs the flow when called by the Execute Workflow node from a different workflow","nodeCredentials.createNew":"Create New","nodeCredentials.credentialFor":"Credential for {credentialType}","nodeCredentials.issues":"Issues","nodeCredentials.selectCredential":"Select Credential","nodeCredentials.showMessage.message":'Nodes that used credential "{oldCredentialName}" have been updated to use "{newCredentialName}"',"nodeCredentials.showMessage.title":"Node credential updated","nodeCredentials.updateCredential":"Update Credential","nodeErrorView.cause":"Cause","nodeErrorView.copyToClipboard":"Copy to Clipboard","nodeErrorView.dataBelowMayContain":"Data below may contain sensitive information. Proceed with caution when sharing.","nodeErrorView.details":"Details","nodeErrorView.error":"ERROR","nodeErrorView.httpCode":"HTTP Code","nodeErrorView.inParameter":"In or underneath Parameter","nodeErrorView.itemIndex":"Item Index","nodeErrorView.runIndex":"Run Index","nodeErrorView.showMessage.title":"Copied to clipboard","nodeErrorView.stack":"Stack","nodeErrorView.theErrorCauseIsTooLargeToBeDisplayed":"The error cause is too large to be displayed","nodeErrorView.time":"Time","nodeErrorView.inputPanel.previousNodeError.title":"Error running node '{nodeName}'","nodeErrorView.inputPanel.previousNodeError.text":"View error","nodeHelpers.credentialsUnset":"Credentials for '{credentialType}' are not set.","nodeSettings.alwaysOutputData.description":"If active, will output a single, empty item when the output would have been empty. Use to prevent the workflow finishing on this node.","nodeSettings.alwaysOutputData.displayName":"Always Output Data","nodeSettings.clickOnTheQuestionMarkIcon":"Click the '?' icon to open this node on n8n.io","nodeSettings.continueOnFail.description":"If active, the workflow continues even if this node's execution fails. When this occurs, the node passes along input data from previous nodes - so your workflow should account for unexpected output data.","nodeSettings.continueOnFail.displayName":"Continue On Fail","nodeSettings.docs":"Docs","nodeSettings.executeOnce.description":"If active, the node executes only once, with data from the first item it receives","nodeSettings.executeOnce.displayName":"Execute Once","nodeSettings.maxTries.description":"Number of times to attempt to execute the node before failing the execution","nodeSettings.maxTries.displayName":"Max. Tries","nodeSettings.noDescriptionFound":"No description found","nodeSettings.nodeDescription":"Node Description","nodeSettings.notes.description":"Optional note to save with the node","nodeSettings.notes.displayName":"Notes","nodeSettings.notesInFlow.description":"If active, the note above will display in the flow as a subtitle","nodeSettings.notesInFlow.displayName":"Display Note in Flow?","nodeSettings.parameters":"Parameters","nodeSettings.communityNodeTooltip":'This is a <a href="{docUrl}" target="_blank"/>community node</a>',"nodeSettings.retryOnFail.description":"If active, the node tries to execute again when it fails","nodeSettings.retryOnFail.displayName":"Retry On Fail","nodeSettings.scopes.expandedNoticeWithScopes":'<a data-key="toggle-expand">{count} scope</a> available for {activeCredential} credentials<br>{scopes}<br><a data-key="show-less">Show less</a> | <a data-key="toggle-expand">{count} scopes</a> available for {activeCredential} credentials<br>{scopes}<br><a data-key="show-less">Show less</a>',"nodeSettings.scopes.notice":'<a data-key="toggle-expand">{count} scope</a> available for {activeCredential} credentials | <a data-key="toggle-expand">{count} scopes</a> available for {activeCredential} credentials',"nodeSettings.theNodeIsNotValidAsItsTypeIsUnknown":"The node is not valid as its type ({nodeType}) is unknown","nodeSettings.communityNodeUnknown.title":"Install this node to use it","nodeSettings.communityNodeUnknown.description":"This node is not currently installed. It's part of the {action} community package.","nodeSettings.communityNodeUnknown.installLink.text":"How to install community nodes","nodeSettings.nodeTypeUnknown.description":"This node is not currently installed. It is either from a newer version of n8n, a {action}, or has an invalid structure","nodeSettings.nodeTypeUnknown.description.customNode":"custom node","nodeSettings.thisNodeDoesNotHaveAnyParameters":"This node does not have any parameters","nodeSettings.useTheHttpRequestNode":`Use the <b>HTTP Request</b> node to make a custom API call. We'll take care of the {nodeTypeDisplayName} auth for you. <a target="_blank" href="https://docs.n8n.io/integrations/custom-operations/">Learn more</a>`,"nodeSettings.waitBetweenTries.description":"How long to wait between each attempt (in milliseconds)","nodeSettings.waitBetweenTries.displayName":"Wait Between Tries (ms)","nodeView.addNode":"Add node","nodeView.addATriggerNodeFirst":"Add a <a data-action='showNodeCreator'>Trigger Node</a> first","nodeView.addOrEnableTriggerNode":"<a data-action='showNodeCreator'>Add</a> or enable a Trigger node to execute the workflow","nodeView.addSticky":"Click to add sticky note","nodeView.cantExecuteNoTrigger":"Cannot execute workflow","nodeView.canvasAddButton.addATriggerNodeBeforeExecuting":"Add a Trigger Node before executing the workflow","nodeView.canvasAddButton.addFirstStep":"Add first step\u2026","nodeView.confirmMessage.receivedCopyPasteData.cancelButtonText":"","nodeView.confirmMessage.receivedCopyPasteData.confirmButtonText":"Yes, import","nodeView.confirmMessage.receivedCopyPasteData.headline":"Import Workflow?","nodeView.confirmMessage.receivedCopyPasteData.message":"Workflow will be imported from<br /><i>{plainTextData}<i>","nodeView.couldntImportWorkflow":"Could not import workflow","nodeView.deletesTheCurrentExecutionData":"Deletes the current execution data","nodeView.executesTheWorkflowFromATriggerNode":"Runs the workflow, starting from a Trigger node","nodeView.itLooksLikeYouHaveBeenEditingSomething":"It looks like you made some edits. If you leave before saving, your changes will be lost.","nodeView.loadingTemplate":"Loading template","nodeView.moreInfo":"More info","nodeView.noNodesGivenToAdd":"No nodes to add specified","nodeView.prompt.cancel":"@:_reusableBaseText.cancel","nodeView.prompt.invalidName":"Invalid Name","nodeView.prompt.newName":"New Name","nodeView.prompt.rename":"Rename","nodeView.prompt.renameNode":"Rename Node","nodeView.redirecting":"Redirecting","nodeView.refresh":"Refresh","nodeView.resetZoom":"Reset Zoom","nodeView.runButtonText.executeWorkflow":"Execute Workflow","nodeView.runButtonText.executingWorkflow":"Executing Workflow","nodeView.runButtonText.waitingForTriggerEvent":"Waiting for Trigger Event","nodeView.showError.getWorkflowDataFromUrl.title":"Problem loading workflow","nodeView.showError.importWorkflowData.title":"Problem importing workflow","nodeView.showError.mounted1.message":"There was a problem loading init data","nodeView.showError.mounted1.title":"Init Problem","nodeView.showError.mounted2.message":"There was a problem initializing the workflow","nodeView.showError.mounted2.title":"Init Problem","nodeView.showError.openExecution.title":"Problem loading execution","nodeView.showError.openWorkflow.title":"Problem opening workflow","nodeView.showError.stopExecution.title":"Problem stopping execution","nodeView.showError.stopWaitingForWebhook.title":"Problem deleting test webhook","nodeView.showMessage.addNodeButton.message":"'{nodeTypeName}' is an unknown node type","nodeView.showMessage.addNodeButton.title":"Could not insert node","nodeView.showMessage.keyDown.title":"Workflow created","nodeView.showMessage.showMaxNodeTypeError.message":"Only one '{nodeTypeDataDisplayName}' node is allowed in a workflow | Only {count} '{nodeTypeDataDisplayName}' nodes are allowed in a workflow","nodeView.showMessage.showMaxNodeTypeError.title":"Could not insert node","nodeView.showMessage.stopExecutionCatch.message":"It completed before it could be stopped","nodeView.showMessage.stopExecutionCatch.title":"Workflow finished executing","nodeView.showMessage.stopExecutionTry.title":"Execution stopped","nodeView.stopCurrentExecution":"Stop current execution","nodeView.stopWaitingForWebhookCall":"Stop waiting for webhook call","nodeView.stoppingCurrentExecution":"Stopping current execution","nodeView.thereWasAProblemLoadingTheNodeParametersOfNode":"There was a problem loading the parameters of the node","nodeView.thisExecutionHasntFinishedYet":"This execution hasn't finished yet","nodeView.toSeeTheLatestStatus":"to see the latest status","nodeView.workflowTemplateWithIdCouldNotBeFound":'Workflow template with ID "{templateId}" could not be found',"nodeView.workflowWithIdCouldNotBeFound":'Workflow with ID "{workflowId}" could not be found',"nodeView.zoomIn":"Zoom In","nodeView.zoomOut":"Zoom Out","nodeView.zoomToFit":"Zoom to Fit","nodeWebhooks.clickToCopyWebhookUrls":"Click to copy webhook URLs","nodeWebhooks.clickToDisplayWebhookUrls":"Click to display webhook URLs","nodeWebhooks.clickToHideWebhookUrls":"Click to hide webhook URLs","nodeWebhooks.invalidExpression":"[INVALID EXPRESSION]","nodeWebhooks.productionUrl":"Production URL","nodeWebhooks.showMessage.title":"URL copied","nodeWebhooks.testUrl":"Test URL","nodeWebhooks.webhookUrls":"Webhook URLs","onboardingCallSignupModal.title":"Your onboarding session","onboardingCallSignupModal.description":"Pop in your email and we'll send you some scheduling options","onboardingCallSignupModal.emailInput.placeholder":"Your work email","onboardingCallSignupModal.signupButton.label":"Submit","onboardingCallSignupModal.cancelButton.label":"Cancel","onboardingCallSignupModal.infoText.emailError":"This doesn't seem to be a valid email address","onboardingCallSignupSucess.title":"Check your email for the final step","onboardingCallSignupSucess.message":"You should receive a message from us shortly","onboardingCallSignupFailed.title":"Something went wrong","onboardingCallSignupFailed.message":"Your request could not be sent","onboardingCallSignupModal.confirmExit.title":"Are you sure?","onboardingWorkflow.stickyContent":`## \u{1F447} Get started faster 
Lightning tour of the key concepts [3 min] 

[![n8n quickstart video](/static/quickstart_thumbnail.png#full-width)](https://www.youtube.com/watch?v=RpjQTGKm-ok)`,"openWorkflow.workflowImportError":"Could not import workflow","openWorkflow.workflowNotFoundError":"Could not find workflow","parameterInput.expressionResult":"e.g. {result}","parameterInput.emptyString":"[empty]","parameterInput.customApiCall":"Custom API Call","parameterInput.error":"ERROR","parameterInput.expression":"Expression","parameterInput.fixed":"Fixed","parameterInput.issues":"Issues","parameterInput.loadingOptions":"Loading options...","parameterInput.openEditWindow":"Open Edit Window","parameterInput.parameter":'Parameter: "{shortPath}"',"parameterInput.parameterHasExpression":'Parameter: "{shortPath}" has an expression',"parameterInput.parameterHasIssues":'Parameter: "{shortPath}" has issues',"parameterInput.parameterHasIssuesAndExpression":'Parameter: "{shortPath}" has issues and an expression',"parameterInput.refreshList":"Refresh List","parameterInput.resetValue":"Reset Value","parameterInput.select":"Select","parameterInput.selectDateAndTime":"Select date and time","parameterInput.selectACredentialTypeFromTheDropdown":"Select a credential type from the dropdown","parameterInput.theValueIsNotSupported":'The value "{checkValue}" is not supported!',"parameterInputExpanded.openDocs":"Open docs","parameterInputExpanded.thisFieldIsRequired":"This field is required","parameterInputList.delete":"Delete","parameterInputList.deleteParameter":"Delete Parameter","parameterInputList.parameterOptions":"Parameter Options","personalizationModal.continue":"Continue","personalizationModal.customerIntegrations":"Customer integrations","personalizationModal.customerSupport":"Customer support","personalizationModal.customizeN8n":"Customize n8n to you","personalizationModal.digitalAgencyOrConsultant":"Marketing agency / consultancy","personalizationModal.eCommerce":"eCommerce","personalizationModal.education":"Education","personalizationModal.engineeringOrDevops":"Engineering / Devops","personalizationModal.errorWhileSubmittingResults":"Error while submitting results","personalizationModal.financeOrAccounting":"Finance / Accounting","personalizationModal.financeOrInsurance":"Finance / Insurance","personalizationModal.getStarted":"Get started","personalizationModal.government":"Government","personalizationModal.healthcare":"Healthcare","personalizationModal.howAreYourCodingSkills":"How are your coding skills?","personalizationModal.howBigIsYourCompany":"How big is your company?","personalizationModal.hr":"HR","personalizationModal.imNotUsingN8nForWork":"I'm not using n8n for work","personalizationModal.it":"IT","personalizationModal.legal":"Legal","personalizationModal.lessThan20People":"Less than 20 people","personalizationModal.lookOutForThingsMarked":"Look out for things marked with a \u2728. They are personalized to make n8n more relevant to you.","personalizationModal.managedServiceProvider":"Managed service provider","personalizationModal.manufacturing":"Manufacturing","personalizationModal.marketing":"Marketing","personalizationModal.media":"Media","personalizationModal.notSureYet":"Not sure yet","personalizationModal.operations":"Operations","personalizationModal.other":"Other","personalizationModal.otherPleaseSpecify":"Other (please specify)","personalizationModal.people":"people","personalizationModal.physicalRetailOrServices":"Physical retail or services","personalizationModal.product":"Product (e.g. fast prototyping)","personalizationModal.realEstateOrConstruction":"Real estate / Construction","personalizationModal.saas":"Software as a service","personalizationModal.salesAndMarketing":"Sales and Marketing","personalizationModal.security":"Security","personalizationModal.select":"Select...","personalizationModal.specifyYourAutomationGoal":"Please specify your automation goal","personalizationModal.specifyYourCompanysIndustry":"Specify your company's industry","personalizationModal.support":"Support","personalizationModal.systemsIntegrator":"Systems integrator / Automation agency","personalizationModal.telecoms":"Telecoms","personalizationModal.thanks":"Thanks!","personalizationModal.theseQuestionsHelpUs":"These questions help us tailor n8n to you","personalizationModal.whatAreYouLookingToAutomate":"What are you looking to automate?","personalizationModal.whatBestDescribesYourCompany":"What best describes your company?","personalizationModal.whichIndustriesIsYourCompanyIn":"Which industries is your company in?","personalizationModal.specifySalesMarketingGoal":"Which parts of Sales and Marketing?","personalizationModal.leadGeneration":"Lead generation, enrichment, routing","personalizationModal.customerCommunication":"Customer communication","personalizationModal.customerActions":"Actions when lead changes status","personalizationModal.adCampaign":"Ad campaign management","personalizationModal.reporting":"Reporting","personalizationModal.dataSynching":"Data syncing","personalizationModal.specifyUsageMode":"Are you looking to do any of these?","personalizationModal.connectToInternalDB":"Connect to my company\u2019s internal databases","personalizationModal.buildBackendServices":"Build backend services (endpoints)","personalizationModal.manipulateFiles":"Manipulate/transfer files","personalizationModal.specifyOtherSalesAndMarketingGoal":"Specify your other Sales and Marketing goals","pushConnection.nodeExecutedSuccessfully":"Node executed successfully","pushConnection.workflowExecutedSuccessfully":"Workflow executed successfully","pushConnectionTracker.cannotConnectToServer":"You have a connection issue or the server is down. <br />n8n should reconnect automatically once the issue is resolved.","pushConnectionTracker.connectionLost":"Connection lost","pushConnection.pollingNode.dataNotFound":"No {service} data found","pushConnection.pollingNode.dataNotFound.message":"We didn\u2019t find any data in {service} to simulate an event. Please create one in {service} and try again.","resourceLocator.id.placeholder":"Enter ID...","resourceLocator.mode.id":"By ID","resourceLocator.mode.url":"By URL","resourceLocator.mode.list":"From list","resourceLocator.mode.list.disabled.title":"Change to Fixed mode to choose From List","resourceLocator.mode.list.error.title":"Could not load list","resourceLocator.mode.list.error.description.part1":"Please","resourceLocator.mode.list.error.description.part2":"check your credential","resourceLocator.mode.list.noResults":"No results","resourceLocator.mode.list.openUrl":"Open URL","resourceLocator.mode.list.placeholder":"Choose...","resourceLocator.mode.list.searchRequired":"Enter a search term to show results","resourceLocator.modeSelector.placeholder":"Mode...","resourceLocator.openSpecificResource":"Open {entity} in {appName}","resourceLocator.openResource":"Open in {appName}","resourceLocator.search.placeholder":"Search...","resourceLocator.url.placeholder":"Enter URL...","runData.emptyItemHint":"This is an item, but it's empty.","runData.emptyArray":"[empty array]","runData.emptyString":"[empty]","runData.emptyObject":"[empty object]","runData.unnamedField":"[Unnamed field]","runData.switchToBinary.info":"This item only has","runData.switchToBinary.binary":"binary data","runData.linking.hint":"Link displayed input and output runs","runData.unlinking.hint":"Unlink displayed input and output runs","runData.binary":"Binary","runData.copyItemPath":"Copy Item Path","runData.copyItemPath.toast":"Item path copied","runData.copyParameterPath":"Copy Parameter Path","runData.copyParameterPath.toast":"Parameter path copied","runData.copyValue":"Copy Selection","runData.copyValue.toast":"Output data copied","runData.copyToClipboard":"Copy to Clipboard","runData.copyDisabled":"First click on the output data you want to copy, then click this button.","runData.editOutput":"Edit Output","runData.editOutputInvalid":"Problem with output data","runData.editOutputInvalid.singleQuote":'Unexpected single quote. Please use double quotes (") instead',"runData.editOutputInvalid.onLine":"On line {line}:","runData.editOutputInvalid.atPosition":"(at position {position})","runData.editValue":"Edit Value","runData.downloadBinaryData":"Download","runData.executeNode":"Execute Node","runData.executionTime":"Execution Time","runData.fileExtension":"File Extension","runData.fileName":"File Name","runData.invalidPinnedData":"Invalid pinned data","runData.items":"Items","runData.json":"JSON","runData.mimeType":"Mime Type","runData.ms":"ms","runData.noBinaryDataFound":"No binary data found","runData.noData":"No data","runData.noTextDataFound":"No text data found","runData.nodeReturnedALargeAmountOfData":"Node returned a large amount of data","runData.output":"Output","runData.showBinaryData":"View","runData.startTime":"Start Time","runData.table":"Table","runData.pindata.learnMore":"Learn more","runData.pindata.thisDataIsPinned":"This data is pinned.","runData.pindata.unpin":"Unpin","runData.editor.save":"Save","runData.editor.cancel":"Cancel","runData.editor.copyDataInfo":"You can copy data from previous executions and paste it above.","saveButton.save":"@:_reusableBaseText.save","saveButton.saved":"Saved","saveButton.saving":"Saving",settings:Qg,"settings.communityNodes":"Community nodes","settings.communityNodes.empty.title":"Supercharge your workflows with community nodes","settings.communityNodes.empty.description":"Install over {count} node packages contributed by our community.","settings.communityNodes.empty.description.no-packages":"Install node packages contributed by our community.","settings.communityNodes.empty.installPackageLabel":"Install a community node","settings.communityNodes.queueMode.warning":'You need to install community nodes manually because your instance is running in queue mode. <a href="{docURL}" target="_blank" title="Read the n8n docs">More info</a>',"settings.communityNodes.npmUnavailable.warning":'To use this feature, please <a href="{npmUrl}" target="_blank" title="How to install npm">install npm</a> and restart n8n.',"settings.communityNodes.notAvailableOnDesktop":"Feature unavailable on desktop. Please self-host to use community nodes.","settings.communityNodes.packageNodes.label":"{count} node | {count} nodes","settings.communityNodes.updateAvailable.tooltip":"A newer version is available","settings.communityNodes.viewDocsAction.label":"Documentation","settings.communityNodes.uninstallAction.label":"Uninstall package","settings.communityNodes.upToDate.tooltip":"You are up to date","settings.communityNodes.failedToLoad.tooltip":"There is a problem with this package, try uninstalling it then reinstalling to resolve this issue","settings.communityNodes.fetchError.title":"Problem fetching installed packages","settings.communityNodes.fetchError.message":"There may be a problem with your internet connection or your n8n instance","settings.communityNodes.installModal.title":"Install community nodes","settings.communityNodes.installModal.description":"Find community nodes to add on the npm public registry.","settings.communityNodes.browseButton.label":"Browse","settings.communityNodes.installModal.packageName.label":"npm Package Name","settings.communityNodes.installModal.packageName.tooltip":"<img src='/static/community_package_tooltip_img.png'/><p>This is the title of the package on <a href='{npmURL}'>npmjs.com</a></p><p>Install a specific version by adding it after @, e.g. <code>package-name@0.15.0</code></p>","settings.communityNodes.installModal.packageName.placeholder":"e.g. n8n-nodes-chatwork","settings.communityNodes.installModal.checkbox.label":"I understand the risks of installing unverified code from a public source.","settings.communityNodes.installModal.installButton.label":"Install","settings.communityNodes.installModal.installButton.label.loading":"Installing","settings.communityNodes.installModal.error.packageNameNotValid":"Package name must start with n8n-nodes-","settings.communityNodes.messages.install.success":"Package installed","settings.communityNodes.messages.install.error":"Error installing new package","settings.communityNodes.messages.uninstall.error":"Problem uninstalling package","settings.communityNodes.messages.uninstall.success.title":"Package uninstalled","settings.communityNodes.messages.update.success.title":"Package updated","settings.communityNodes.messages.update.success.message":"{packageName} updated to version {version}","settings.communityNodes.messages.update.error.title":"Problem updating package","settings.communityNodes.confirmModal.uninstall.title":"Uninstall package?","settings.communityNodes.confirmModal.uninstall.message":"Any workflows that use nodes from the {packageName} package won't be able to run. Are you sure?","settings.communityNodes.confirmModal.uninstall.buttonLabel":"Uninstall package","settings.communityNodes.confirmModal.uninstall.buttonLoadingLabel":"Uninstalling","settings.communityNodes.confirmModal.update.title":"Update community node package?","settings.communityNodes.confirmModal.update.message":"You are about to update {packageName} to version {version}","settings.communityNodes.confirmModal.update.description":"We recommend you deactivate workflows that use any of the package's nodes and reactivate them once the update is completed","settings.communityNodes.confirmModal.update.buttonLabel":"Update package","settings.communityNodes.confirmModal.update.buttonLoadingLabel":"Updating...","settings.goBack":"Go back","settings.personal":"Personal","settings.personal.basicInformation":"Basic Information","settings.personal.personalSettings":"Personal Settings","settings.personal.personalSettingsUpdated":"Personal details updated","settings.personal.personalSettingsUpdatedError":"Problem updating your details","settings.personal.save":"Save","settings.personal.security":"Security","settings.signup.signUpInviterInfo":"{firstName} {lastName} has invited you to n8n","settings.users":"Users","settings.users.confirmDataHandlingAfterDeletion":"What should we do with their data?","settings.users.confirmUserDeletion":"Are you sure you want to delete this invited user?","settings.users.delete":"Delete","settings.users.deleteConfirmationMessage":"Type \u201Cdelete all data\u201D to confirm","settings.users.deleteConfirmationText":"delete all data","settings.users.deleteUser":"Delete {user}","settings.users.deleteWorkflowsAndCredentials":"Delete their workflows and credentials","settings.users.emailInvitesSent":"An invite email was sent to {emails}","settings.users.emailInvitesSentError":"Could not invite {emails}","settings.users.emailSentTo":"Email sent to {email}","settings.users.invalidEmailError":"{email} is not a valid email","settings.users.invite":"Invite","settings.users.inviteNewUsers":"Invite new users","settings.users.inviteResent":"Invite resent","settings.users.inviteUser":"Invite user","settings.users.inviteXUser":"Invite {count} users","settings.users.newEmailsToInvite":"New User Email Addresses","settings.users.noUsersToInvite":"No users to invite","settings.users.setupMyAccount":"Set up my owner account","settings.users.setupSMTPToInviteUsers":"Set up SMTP to invite users. {action}","settings.users.setupSMTPToInviteUsers.instructions":"Instructions","settings.users.setupToInviteUsers":"To invite users, set up your own account","settings.users.setupToInviteUsersInfo":'Invited users won\u2019t be able to see workflows and credentials of other users. <a href="https://docs.n8n.io/reference/user-management.html" target="_blank">More info</a> <br /> <br /> You will need details of an <a href="https://docs.n8n.io/reference/user-management.html#step-one-smtp" target="_blank">SMTP server</a> to complete the setup.',"settings.users.smtpToAddUsersWarning":'Set up SMTP before adding users (so that n8n can send them invitation emails). <a target="_blank" href="https://docs.n8n.io/reference/user-management.html#step-one-smtp">Instructions</a>',"settings.users.transferWorkflowsAndCredentials":"Transfer their workflows and credentials to another user","settings.users.transferredToUser":"Data transferred to {user}","settings.users.userDeleted":"User deleted","settings.users.userDeletedError":"Problem while deleting user","settings.users.userInvited":"User invited","settings.users.userInvitedError":"User could not be invited","settings.users.userReinviteError":"Could not reinvite user","settings.users.userToTransferTo":"User to transfer to","settings.users.usersEmailedError":"Couldn't send invite email","settings.users.usersInvited":"Users invited","settings.users.usersInvitedError":"Could not invite users","settings.api":"API","settings.n8napi":"n8n API","settings.api.create.description":'Control n8n programmatically using the <a href="https://docs.n8n.io/api" target="_blank">n8n API</a>',"settings.api.create.button":"Create an API Key","settings.api.create.button.loading":"Creating API Key...","settings.api.create.error":"Creating the API Key failed.","settings.api.delete.title":"Delete this API Key?","settings.api.delete.description":"Any application using this API Key will no longer have access to n8n. This operation cannot be undone.","settings.api.delete.button":"Delete Forever","settings.api.delete.error":"Deleting the API Key failed.","settings.api.delete.toast":"API Key deleted","settings.api.view.copy.toast":"API Key copied to clipboard","settings.api.view.apiPlayground":"API Playground","settings.api.view.info":"Use your API Key to control n8n programmatically using the {apiAction}. But if you only want to trigger workflows, consider using the {webhookAction} instead.","settings.api.view.info.api":"n8n API","settings.api.view.info.webhook":"webhook node","settings.api.view.myKey":"My API Key","settings.api.view.tryapi":"Try it out using the","settings.api.view.error":"Could not check if an api key already exists.","settings.version":"Version","showMessage.cancel":"@:_reusableBaseText.cancel","showMessage.ok":"OK","showMessage.showDetails":"Show Details",startupError:Bg,"startupError.message":"Could not connect to server. <a data-action='reload'>Refresh</a> to try again","tagsDropdown.createTag":'Create tag "{filter}"',"tagsDropdown.manageTags":"Manage tags","tagsDropdown.noMatchingTagsExist":"No matching tags exist","tagsDropdown.noTagsExist":"No tags exist","tagsDropdown.showError.message":"A problem occurred when trying to create the '{name}' tag","tagsDropdown.showError.title":"Could not create tag","tagsDropdown.typeToCreateATag":"Type to create a tag","tagsManager.couldNotDeleteTag":"Could not delete tag","tagsManager.done":"Done","tagsManager.manageTags":"Manage tags","tagsManager.showError.onCreate.message":"A problem occurred when trying to create the tag '{escapedName}'","tagsManager.showError.onCreate.title":"Could not create tag","tagsManager.showError.onDelete.message":"A problem occurred when trying to delete the tag '{escapedName}'","tagsManager.showError.onDelete.title":"Could not delete tag","tagsManager.showError.onUpdate.message":"A problem occurred when trying to update the tag '{escapedName}'","tagsManager.showError.onUpdate.title":"Could not update tag","tagsManager.showMessage.onDelete.title":"Tag deleted","tagsManager.showMessage.onUpdate.title":"Tag updated","tagsManager.tagNameCannotBeEmpty":"Tag name cannot be empty","tagsTable.areYouSureYouWantToDeleteThisTag":"Are you sure you want to delete this tag?","tagsTable.cancel":"@:_reusableBaseText.cancel","tagsTable.createTag":"Create tag","tagsTable.deleteTag":"Delete tag","tagsTable.editTag":"Edit Tag","tagsTable.name":"@:_reusableBaseText.name","tagsTable.noMatchingTagsExist":"No matching tags exist","tagsTable.saveChanges":"Save changes?","tagsTable.usage":"Usage","tagsTableHeader.addNew":"Add new","tagsTableHeader.searchTags":"Search Tags","tagsView.inUse":"{count} workflow | {count} workflows","tagsView.notBeingUsed":"Not being used","template.buttons.goBackButton":"Go back","template.buttons.useThisWorkflowButton":"Use this workflow","template.details.appsInTheCollection":"This collection features","template.details.appsInTheWorkflow":"Apps in this workflow","template.details.by":"by","template.details.categories":"Categories","template.details.created":"Created","template.details.details":"Details","template.details.times":"times","template.details.viewed":"Viewed","templates.allCategories":"All Categories","templates.categoriesHeading":"Categories","templates.collection":"Collection","templates.collections":"Collections","templates.collectionsNotFound":"Collection could not be found","templates.connectionWarning":"\u26A0\uFE0F There was a problem fetching workflow templates. Check your internet connection.","templates.endResult":"Share your own useful workflows through your <a href='https://n8n.io/dashboard' target='_blank'>n8n.io account</a>","templates.heading":"Workflow templates","templates.newButton":"New blank workflow","templates.noSearchResults":"Nothing found. Try adjusting your search to see more.","templates.searchPlaceholder":"Search workflows","templates.workflows":"Workflows","templates.workflowsNotFound":"Workflow could not be found","textEdit.edit":"Edit","timeAgo.daysAgo":"%s days ago","timeAgo.hoursAgo":"%s hours ago","timeAgo.inDays":"in %s days","timeAgo.inHours":"in %s hours","timeAgo.inMinutes":"in %s minutes","timeAgo.inMonths":"in %s months","timeAgo.inOneDay":"in 1 day","timeAgo.inOneHour":"in 1 hour","timeAgo.inOneMinute":"in 1 minute","timeAgo.inOneMonth":"in 1 month","timeAgo.inOneWeek":"in 1 week","timeAgo.inOneYear":"in 1 year","timeAgo.inWeeks":"in %s weeks","timeAgo.inYears":"in %s years","timeAgo.justNow":"Just now","timeAgo.minutesAgo":"%s minutes ago","timeAgo.monthsAgo":"%s months ago","timeAgo.oneDayAgo":"1 day ago","timeAgo.oneHourAgo":"1 hour ago","timeAgo.oneMinuteAgo":"1 minute ago","timeAgo.oneMonthAgo":"1 month ago","timeAgo.oneWeekAgo":"1 week ago","timeAgo.oneYearAgo":"1 year ago","timeAgo.rightNow":"Right now","timeAgo.weeksAgo":"%s weeks ago","timeAgo.yearsAgo":"%s years ago","nodeIssues.credentials.notSet":"Credentials for {type} are not set.","nodeIssues.credentials.notAvailable":"Credential is not available","nodeIssues.credentials.doNotExist":"Credentials with name {name} do not exist for {type}.","nodeIssues.credentials.doNotExist.hint":"You can create credentials with the exact name and then they get auto-selected on refresh..","nodeIssues.credentials.notIdentified":"Credentials with name {name} exist for {type}.","nodeIssues.credentials.notIdentified.hint":"Credentials are not clearly identified. Please select the correct credentials.","ndv.trigger.moreInfo":"More info","ndv.trigger.copiedTestUrl":"Test URL copied to clipboard","ndv.trigger.webhookBasedNode.executionsHelp.inactive":`<b>While building your workflow</b>, click the 'listen' button, then go to {service} and make an event happen. This will trigger an execution, which will show up in this editor.<br /> <br /> <b>Once you're happy with your workflow</b>, <a data-key="activate">activate</a> it. Then every time there's a matching event in {service}, the workflow will execute. These executions will show up in the <a data-key="executions">executions list</a>, but not in the editor.`,"ndv.trigger.webhookBasedNode.executionsHelp.active":`<b>While building your workflow</b>, click the 'listen' button, then go to {service} and make an event happen. This will trigger an execution, which will show up in this editor.<br /> <br /> <b>Your workflow will also execute automatically</b>, since it's activated. Every time there\u2019s a matching event in {service}, this node will trigger an execution. These executions will show up in the <a data-key="executions">executions list</a>, but not in the editor. `,"ndv.trigger.webhookNode.listening":"Listening for test event","ndv.trigger.webhookBasedNode.listening":"Listening for your trigger event","ndv.trigger.webhookNode.requestHint":"Make a {type} request to:","ndv.trigger.webhookBasedNode.serviceHint":"Go to {service} and create an event","ndv.trigger.webhookBasedNode.activationHint.inactive":'Once you\u2019ve finished building your workflow, <a data-key="activate">activate it</a> to have it also listen continuously (you just won\u2019t see those executions here).',"ndv.trigger.webhookBasedNode.activationHint.active":"This node will also trigger automatically on new {service} events (but those executions won\u2019t show up here).","ndv.trigger.pollingNode.activationHint.inactive":'Once you\u2019ve finished building your workflow, <a data-key="activate">activate it</a> to have it also check for events regularly (you just won\u2019t see those executions here).',"ndv.trigger.pollingNode.activationHint.active":"This node will also trigger automatically on new {service} events (but those executions won\u2019t show up here).","ndv.trigger.executionsHint.question":"When will this node trigger my flow?","ndv.trigger.pollingNode.fetchingEvent":"Fetching event","ndv.trigger.pollingNode.fetchingHint":"This node is looking for an event in {name} that is similar to the one you defined","ndv.trigger.pollingNode.executionsHelp.inactive":`<b>While building your workflow</b>, click the 'fetch' button to fetch a single mock event. It will show up in this editor.<br /><br /><b>Once you're happy with your workflow</b>, <a data-key="activate">activate</a> it. Then n8n will regularly check {service} for new events, and execute this workflow if it finds any. These executions will show up in the <a data-key="executions">executions list</a>, but not in the editor.`,"ndv.trigger.pollingNode.executionsHelp.active":`<b>While building your workflow</b>, click the 'fetch' button to fetch a single mock event. It will show up in this editor.<br /><br /><b>Your workflow will also execute automatically</b>, since it's activated. n8n will regularly check {app_name} for new events, and execute this workflow if it finds any. These executions will show up in the <a data-key="executions">executions list</a>, but not in the editor.`,"ndv.trigger.webhookBasedNode.action":"Pull in events from {name}","updatesPanel.andIs":"and is","updatesPanel.behindTheLatest":"behind the latest and greatest n8n","updatesPanel.howToUpdateYourN8nVersion":"How to update your n8n version","updatesPanel.version":"{numberOfVersions} version{howManySuffix}","updatesPanel.weVeBeenBusy":"We\u2019ve been busy \u2728","updatesPanel.youReOnVersion":"You\u2019re on {currentVersionName}, which was released","variableSelector.context":"Context","variableSelector.currentNode":"Current Node","variableSelector.nodes":"Nodes","variableSelector.outputData":"Output Data","variableSelector.parameters":"Parameters","variableSelector.variableFilter":"Variable filter...","variableSelectorItem.empty":"--- EMPTY ---","variableSelectorItem.selectItem":"Select Item","versionCard.breakingChanges":"Breaking changes","versionCard.released":"Released","versionCard.securityUpdate":"Security update","versionCard.thisVersionHasASecurityIssue":"This version has a security issue.<br />It is listed here for completeness.","versionCard.unknown":"unknown","versionCard.version":"Version","workflowActivator.workflowIsActive":"Workflow is already active","workflowActivator.activateWorkflow":"Activate workflow","workflowActivator.deactivateWorkflow":"Deactivate workflow","workflowActivator.active":"Active","workflowActivator.inactive":"Inactive","workflowActivator.showError.title":"Workflow could not be {newStateName}","workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.message":"Please resolve outstanding issues before you activate it","workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title":"Problem activating workflow","workflowActivator.showMessage.activeChangedWorkflowIdUndefined.message":"Please save it before activating","workflowActivator.showMessage.activeChangedWorkflowIdUndefined.title":"Problem activating workflow","workflowActivator.showMessage.displayActivationError.message.catchBlock":"Sorry there was a problem requesting the error","workflowActivator.showMessage.displayActivationError.message.errorDataNotUndefined":"The following error occurred on workflow activation:<br /><i>{message}</i>","workflowActivator.showMessage.displayActivationError.message.errorDataUndefined":"Unknown error","workflowActivator.showMessage.displayActivationError.title":"Problem activating workflow","workflowActivator.theWorkflowIsSetToBeActiveBut":"The workflow is activated but could not be started.<br />Click to display error message.","workflowActivator.thisWorkflowHasNoTriggerNodes":"This workflow has no trigger nodes that require activation","workflowDetails.active":"Active","workflowDetails.addTag":"Add tag","workflowDetails.chooseOrCreateATag":"Choose or create a tag","workflowDetails.showMessage.message":"Please enter a name, or press 'esc' to go back to the old one","workflowDetails.showMessage.title":"Name missing","workflowHelpers.showMessage.title":"Problem saving workflow","workflowOpen.active":"Active","workflowOpen.couldNotLoadActiveWorkflows":"Could not load active workflows","workflowOpen.created":"Created","workflowOpen.filterWorkflows":"Filter by tags","workflowOpen.name":"@:_reusableBaseText.name","workflowOpen.openWorkflow":"Open Workflow","workflowOpen.searchWorkflows":"Search workflows...","workflowOpen.showError.title":"Problem loading workflows","workflowOpen.showMessage.message":"This is the current workflow","workflowOpen.showMessage.title":"Workflow already open","workflowOpen.updated":"Updated","workflowOpen.newWFButton.label":"Add workflow","workflowOpen.newWFButton.title":"Create a new workflow","workflowPreview.showError.arrayEmpty":"Must have an array of nodes","workflowPreview.showError.missingWorkflow":"Missing workflow","workflowPreview.showError.previewError.message":"Unable to preview workflow","workflowPreview.showError.missingExecution":"Missing workflow execution","workflowPreview.executionMode.showError.previewError.message":"Unable to preview workflow execution","workflowPreview.showError.previewError.title":"Preview error","workflowRun.noActiveConnectionToTheServer":"Lost connection to the server","workflowRun.showError.title":"Problem running workflow","workflowRun.showMessage.message":"Please fix them before executing","workflowRun.showMessage.title":"Workflow has issues","workflowSettings.callerIds":"Caller IDs","workflowSettings.callerPolicy":"This workflow can be called by","workflowSettings.callerPolicy.options.any":"Any workflow","workflowSettings.callerPolicy.options.workflowsFromAList":"List of specific workflow IDs","workflowSettings.callerPolicy.options.none":"No workflows can call one","workflowSettings.defaultTimezone":"Default - {defaultTimezoneValue}","workflowSettings.defaultTimezoneNotValid":"Default Timezone not valid","workflowSettings.errorWorkflow":"Error Workflow","workflowSettings.helpTexts.errorWorkflow":"A second workflow to run if the current one fails.<br />The second workflow should an 'Error Trigger' node.","workflowSettings.helpTexts.executionTimeout":"How long the workflow should wait before timing out","workflowSettings.helpTexts.executionTimeoutToggle":"Whether to cancel workflow execution after a defined time","workflowSettings.helpTexts.saveDataErrorExecution":"Whether to save data of executions that fail","workflowSettings.helpTexts.saveDataSuccessExecution":"Whether to save data of executions that finish successfully","workflowSettings.helpTexts.saveExecutionProgress":"Whether to save data after each node execution. This allows you to resume from where execution stopped if there is an error, but may increase latency.","workflowSettings.helpTexts.saveManualExecutions":"Whether to save data of executions that are started manually from the editor","workflowSettings.helpTexts.timezone":"The timezone in which the workflow should run. Used by 'cron' node, for example.","workflowSettings.helpTexts.workflowCallerIds":"Comma-delimited list of IDs of workflows that are allowed to call this workflow","workflowSettings.helpTexts.workflowCallerPolicy":"Workflows that are allowed to call this workflow using the Execute Workflow node","workflowSettings.hours":"hours","workflowSettings.minutes":"minutes","workflowSettings.noWorkflow":"- No Workflow -","workflowSettings.save":"@:_reusableBaseText.save","workflowSettings.saveDataErrorExecution":"Save failed production executions","workflowSettings.saveDataErrorExecutionOptions.defaultSave":"Default - {defaultValue}","workflowSettings.saveDataErrorExecutionOptions.doNotSave":"Do not save","workflowSettings.saveDataErrorExecutionOptions.save":"@:_reusableBaseText.save","workflowSettings.saveDataSuccessExecution":"Save successful production executions","workflowSettings.saveDataSuccessExecutionOptions.defaultSave":"Default - {defaultValue}","workflowSettings.saveDataSuccessExecutionOptions.doNotSave":"Do not save","workflowSettings.saveDataSuccessExecutionOptions.save":"@:_reusableBaseText.save","workflowSettings.saveExecutionProgress":"Save execution progress","workflowSettings.saveExecutionProgressOptions.defaultSave":"Default - {defaultValue}","workflowSettings.saveExecutionProgressOptions.no":"No","workflowSettings.saveExecutionProgressOptions.yes":"Yes","workflowSettings.saveManualExecutions":"Save manual executions","workflowSettings.saveManualOptions.defaultSave":"Default - {defaultValue}","workflowSettings.saveManualOptions.no":"No","workflowSettings.saveManualOptions.yes":"Yes","workflowSettings.seconds":"seconds","workflowSettings.selectOption":"Select Option","workflowSettings.settingsFor":"Workflow settings for {workflowName} (#{workflowId})","workflowSettings.showError.saveSettings1.errorMessage":"Timeout is activated but set to 0","workflowSettings.showError.saveSettings1.message":"There was a problem saving the settings","workflowSettings.showError.saveSettings1.title":"Problem saving settings","workflowSettings.showError.saveSettings2.errorMessage":"Maximum Timeout is: {hours} hours, {minutes} minutes, {seconds} seconds","workflowSettings.showError.saveSettings2.message":"The timeout is longer than allowed","workflowSettings.showError.saveSettings2.title":"Problem saving settings","workflowSettings.showError.saveSettings3.title":"Problem saving settings","workflowSettings.showMessage.saveSettings.title":"Workflow settings saved","workflowSettings.timeoutAfter":"Timeout After","workflowSettings.timeoutWorkflow":"Timeout Workflow","workflowSettings.timezone":"Timezone","workflows.heading":"Workflows","workflows.add":"Add Workflow","workflows.menu.my":"My workflows","workflows.menu.all":"All workflows","workflows.item.open":"Open","workflows.item.duplicate":"Duplicate","workflows.item.delete":"Delete","workflows.item.updated":"Last updated","workflows.item.created":"Created","workflows.item.owner":"Owner","workflows.search.placeholder":"Search workflows...","workflows.filters":"Filters","workflows.filters.tags":"Tags","workflows.filters.ownedBy":"Owned by","workflows.filters.sharedWith":"Shared with","workflows.filters.apply":"Apply filters","workflows.filters.reset":"Reset all","workflows.filters.active":"Some workflows may be hidden since filters are applied.","workflows.filters.active.reset":"Remove filters","workflows.sort.lastUpdated":"Sort by last updated","workflows.sort.lastCreated":"Sort by last created","workflows.sort.nameAsc":"Sort by name (A-Z)","workflows.sort.nameDesc":"Sort by name (Z-A)","workflows.noResults":"No workflows found","workflows.noResults.withSearch.switchToShared.preamble":"some workflows may be","workflows.noResults.withSearch.switchToShared.link":"hidden","workflows.noResults.switchToShared.preamble":"but there are some","workflows.noResults.switchToShared.link":"shared with you","workflows.empty.heading":"\u{1F44B} Welcome {name}!","workflows.empty.heading.userNotSetup":"\u{1F44B} Welcome!","workflows.empty.description":"Create your first workflow","workflows.empty.startFromScratch":"Start from scratch","workflows.empty.browseTemplates":"Browse templates","importCurlModal.title":"Import cURL command","importCurlModal.input.label":"cURL Command","importCurlModal.input.placeholder":"Paste the cURL command here","ImportCurlModal.notice.content":"This will overwrite any changes you have already made","importCurlModal.button.label":"Import","importParameter.label":"Import cURL","importParameter.showError.invalidCurlCommand.title":"Couldn\u2019t import cURL command","importParameter.showError.invalidCurlCommand.message":"This command is in an unsupported format","importParameter.showError.invalidProtocol1.title":"Use the {node} node","importParameter.showError.invalidProtocol2.title":"Invalid Protocol","importParameter.showError.invalidProtocol.message":"The HTTP node doesn\u2019t support {protocol} requests"},QP=Object.freeze(Object.defineProperty({__proto__:null,error:Wg,forgotPassword:Lg,settings:Qg,startupError:Bg,default:Ug},Symbol.toStringTag,{value:"Module"}));function BP(s){switch(s){case"./locales/en.json":return As(()=>Promise.resolve().then(function(){return QP}),[]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}m.use(Vp);Wp("en");let Zn;function UP(s,e){Zn=new VP(e),Object.defineProperty(s,"$locale",{get(){return Zn}}),Object.defineProperty(s.prototype,"$locale",{get(){return Zn}})}class VP{constructor(e){this.$store=e}get i18n(){return qe}exists(e){return this.i18n.te(e)}shortNodeType(e){return e.replace("n8n-nodes-base.","")}baseText(e,t){return t&&t.adjustToNumber?this.i18n.tc(e,t.adjustToNumber,t&&t.interpolate).toString():this.i18n.t(e,t&&t.interpolate).toString()}dynamicRender({key:e,fallback:t}){return this.i18n.te(e)?this.i18n.t(e).toString():t}headerText(e){return this.dynamicRender(e)}credText(){const t=`n8n-nodes-base.credentials.${this.$store.getters.activeCredentialType}`,i=this;return{inputLabelDisplayName({name:n,displayName:o}){return["clientId","clientSecret"].includes(n)?i.dynamicRender({key:`_reusableDynamicText.oauth2.${n}`,fallback:o}):i.dynamicRender({key:`${t}.${n}.displayName`,fallback:o})},hint({name:n,hint:o}){return i.dynamicRender({key:`${t}.${n}.hint`,fallback:o||""})},inputLabelDescription({name:n,description:o}){return i.dynamicRender({key:`${t}.${n}.description`,fallback:o})},optionsOptionDisplayName({name:n},{value:o,name:r}){return i.dynamicRender({key:`${t}.${n}.options.${o}.displayName`,fallback:r})},optionsOptionDescription({name:n},{value:o,description:r}){return i.dynamicRender({key:`${t}.${n}.options.${o}.description`,fallback:r})},placeholder({name:n,placeholder:o}){return i.dynamicRender({key:`${t}.${n}.placeholder`,fallback:o||""})}}}nodeText(){const e=this.$store.getters["ndv/activeNode"],i=`n8n-nodes-base.nodes.${e?this.shortNodeType(e.type):""}.nodeView`,n=this;return{inputLabelDisplayName(o,r){const a=Vr(r,o);return n.dynamicRender({key:`${i}.${a}.displayName`,fallback:o.displayName})},inputLabelDescription(o,r){const a=Vr(r,o);return n.dynamicRender({key:`${i}.${a}.description`,fallback:o.description})},hint(o,r){const a=Vr(r,o);return n.dynamicRender({key:`${i}.${a}.hint`,fallback:o.hint})},placeholder(o,r){let a=o.name;if(Ni(r)){const l=Hs(r).split(".");a=qs(l).join(".")}return n.dynamicRender({key:`${i}.${a}.placeholder`,fallback:o.placeholder||""})},optionsOptionDisplayName(o,{value:r,name:a},l){let c=o.name;if(Ni(l)){const d=Hs(l).split(".");c=qs(d).join(".")}return n.dynamicRender({key:`${i}.${c}.options.${r}.displayName`,fallback:a})},optionsOptionDescription(o,{value:r,description:a},l){let c=o.name;if(Ni(l)){const d=Hs(l).split(".");c=qs(d).join(".")}return n.dynamicRender({key:`${i}.${c}.options.${r}.description`,fallback:a})},collectionOptionDisplayName(o,{name:r,displayName:a},l){let c=o.name;if(Ni(l)){const d=Hs(l).split(".");c=qs(d).join(".")}return n.dynamicRender({key:`${i}.${c}.options.${r}.displayName`,fallback:a})},multipleValueButtonText({name:o,typeOptions:r}){return n.dynamicRender({key:`${i}.${o}.multipleValueButtonText`,fallback:r.multipleValueButtonText})},eventTriggerDescription(o,r){return n.dynamicRender({key:`n8n-nodes-base.nodes.${o}.nodeView.eventTriggerDescription`,fallback:r})}}}}const qe=new Vp({locale:"en",fallbackLocale:"en",messages:{en:Ug},silentTranslationWarn:!0});Xv((s,e)=>qe.t(s,e&&e.interpolate));const Bu=["en"];function Fr(s){return qe.locale=s,Up.defaults.headers.common["Accept-Language"]=s,document.querySelector("html").setAttribute("lang",s),Wp(s),s}async function FP(s){if(!s)return Promise.resolve();if(qe.locale===s||Bu.includes(s))return Promise.resolve(Fr(s));const{numberFormats:e,...t}=(await BP(`./locales/${s}.json`)).default;qe.setLocaleMessage(s,t),e&&qe.setNumberFormat(s,e),Bu.push(s),Fr(s)}function jP(s,e){const t=qe.messages[e]["n8n-nodes-base"]||{},i={...t.nodes,...s},n={"n8n-nodes-base":Object.assign(t,{nodes:i})};qe.setLocaleMessage(e,Object.assign(qe.messages[e],n))}function zP(s,e){const t=qe.messages[e]["n8n-nodes-base"]||{},i={...t.credentials,...s},n={"n8n-nodes-base":Object.assign(t,{credentials:i})};qe.setLocaleMessage(e,Object.assign(qe.messages[e],n))}function GP(s,e){qe.setLocaleMessage(e,Object.assign(qe.messages[e],{headers:s}))}var HP=N(Ce).extend({name:"CredentialConfig",components:{Banner:Lx,CopyInput:ul,CredentialInputs:TP,OauthButton:IP},props:{credentialType:{type:Object},credentialProperties:{type:Array},parentTypes:{type:Array},credentialData:{},credentialId:{type:[String,Number],default:""},showValidationWarning:{type:Boolean,default:!1},authError:{type:String},testedSuccessfully:{type:Boolean},isOAuthType:{type:Boolean},isOAuthConnected:{type:Boolean},isRetesting:{type:Boolean},credentialPermissions:{type:Object,default:()=>({})},requiredPropertiesFilled:{type:Boolean}},data(){return{EnterpriseEditionFeature:Be}},async beforeMount(){if(this.$store.getters.defaultLocale==="en")return;this.$store.commit("setActiveCredentialType",this.credentialType.name);const s=`n8n-nodes-base.credentials.${this.credentialType.name}`;if(this.$locale.exists(s))return;const e=await this.restApi().getCredentialTranslation(this.credentialType.name);zP({[this.credentialType.name]:e},this.$store.getters.defaultLocale)},computed:{appName(){return this.credentialType?pf(this.credentialType.displayName)||this.$locale.baseText("credentialEdit.credentialConfig.theServiceYouReConnectingTo"):""},credentialTypeName(){return this.credentialType.name},credentialOwnerName(){return this.$store.getters["credentials/getCredentialOwnerName"](this.credentialId)},documentationUrl(){const s=this.credentialType,e=this.$store.getters["ndv/activeNode"],t=e?ll(e.type):!1;return!s||!s.documentationUrl?"":s.documentationUrl.startsWith("https://")||s.documentationUrl.startsWith("http://")?s.documentationUrl:t?"":`${T_}${s.documentationUrl}/?utm_source=n8n_app&utm_medium=left_nav_menu&utm_campaign=create_new_credentials_modal`},isGoogleOAuthType(){return this.credentialTypeName==="googleOAuth2Api"||this.parentTypes.includes("googleOAuth2Api")},oAuthCallbackUrl(){const s=this.credentialTypeName==="oAuth2Api"||this.parentTypes.includes("oAuth2Api")?"oauth2":"oauth1";return this.$store.getters.oauthCallbackUrls[s]},showOAuthSuccessBanner(){return this.isOAuthType&&this.requiredPropertiesFilled&&this.isOAuthConnected&&!this.authError}},methods:{onDataChange(s){this.$emit("change",s)},onDocumentationUrlClick(){this.$telemetry.track("User clicked credential modal docs link",{docs_link:this.documentationUrl,credential_type:this.credentialTypeName,source:"modal",workflow_id:this.$store.getters.workflowId})}},watch:{showOAuthSuccessBanner(s,e){s&&!e&&this.$emit("scrollToTop")}}});const qP="_container_6zz86_1";var XP={container:qP},YP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("banner",{directives:[{name:"show",rawName:"v-show",value:e.showValidationWarning,expression:"showValidationWarning"}],attrs:{theme:"danger",message:e.$locale.baseText("credentialEdit.credentialConfig.pleaseCheckTheErrorsBelow")}}),e.authError&&!e.showValidationWarning?t("banner",{attrs:{theme:"danger",message:e.$locale.baseText("credentialEdit.credentialConfig.couldntConnectWithTheseSettings"),details:e.authError,buttonLabel:e.$locale.baseText("credentialEdit.credentialConfig.retry"),buttonLoadingLabel:"Retrying",buttonTitle:e.$locale.baseText("credentialEdit.credentialConfig.retryCredentialTest"),buttonLoading:e.isRetesting},on:{click:function(i){return e.$emit("retest")}}}):e._e(),t("banner",{directives:[{name:"show",rawName:"v-show",value:e.showOAuthSuccessBanner&&!e.showValidationWarning,expression:"showOAuthSuccessBanner && !showValidationWarning"}],attrs:{theme:"success",message:e.$locale.baseText("credentialEdit.credentialConfig.accountConnected"),buttonLabel:e.$locale.baseText("credentialEdit.credentialConfig.reconnect"),buttonTitle:e.$locale.baseText("credentialEdit.credentialConfig.reconnectOAuth2Credential")},on:{click:function(i){return e.$emit("oauth")}}}),t("banner",{directives:[{name:"show",rawName:"v-show",value:e.testedSuccessfully&&!e.showValidationWarning,expression:"testedSuccessfully && !showValidationWarning"}],attrs:{theme:"success",message:e.$locale.baseText("credentialEdit.credentialConfig.connectionTestedSuccessfully"),buttonLabel:e.$locale.baseText("credentialEdit.credentialConfig.retry"),buttonLoadingLabel:e.$locale.baseText("credentialEdit.credentialConfig.retrying"),buttonTitle:e.$locale.baseText("credentialEdit.credentialConfig.retryCredentialTest"),buttonLoading:e.isRetesting},on:{click:function(i){return e.$emit("retest")}}}),e.credentialPermissions.updateConnection?[e.documentationUrl&&e.credentialProperties.length?t("n8n-notice",{attrs:{theme:"warning"}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialConfig.needHelpFillingOutTheseFields"))+" "),t("span",{staticClass:"ml-4xs"},[t("n8n-link",{attrs:{to:e.documentationUrl,size:"small",bold:""},on:{click:e.onDocumentationUrlClick}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialConfig.openDocs"))+" ")])],1)]):e._e(),e.isOAuthType&&e.credentialProperties.length?t("CopyInput",{attrs:{label:e.$locale.baseText("credentialEdit.credentialConfig.oAuthRedirectUrl"),value:e.oAuthCallbackUrl,copyButtonText:e.$locale.baseText("credentialEdit.credentialConfig.clickToCopy"),hint:e.$locale.baseText("credentialEdit.credentialConfig.subtitle",{interpolate:{appName:e.appName}}),toastTitle:e.$locale.baseText("credentialEdit.credentialConfig.redirectUrlCopiedToClipboard")}}):e._e()]:t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("div",{staticClass:"ph-no-capture"},[t("n8n-info-tip",{attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialEdit.info.sharee",{interpolate:{credentialOwnerName:e.credentialOwnerName}}))+" ")])],1)]),e.credentialType&&e.credentialPermissions.updateConnection?t("CredentialInputs",{attrs:{credentialData:e.credentialData,credentialProperties:e.credentialProperties,documentationUrl:e.documentationUrl,showValidationWarnings:e.showValidationWarning},on:{change:e.onDataChange}}):e._e(),e.isOAuthType&&e.requiredPropertiesFilled&&!e.isOAuthConnected&&e.credentialPermissions.isOwner?t("OauthButton",{attrs:{isGoogleOAuthType:e.isGoogleOAuthType},on:{click:function(i){return e.$emit("oauth")}}}):e._e(),e.credentialType?e._e():t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialConfig.missingCredentialType"))+" ")])],2)},ZP=[];const Uu={$style:XP};function KP(s){for(var e in Uu)this[e]=Uu[e]}var JP=_(HP,YP,ZP,!1,KP,null,null,null),eD=JP.exports,tD=m.extend({name:"TimeAgo",props:{date:{type:String},capitalize:{type:Boolean,default:!1}},beforeMount(){a_(this.defaultLocale,this.localeFunc)},methods:{localeFunc(s,e,t){return[[this.$locale.baseText("timeAgo.justNow"),this.$locale.baseText("timeAgo.rightNow")],[this.$locale.baseText("timeAgo.justNow"),this.$locale.baseText("timeAgo.rightNow")],[this.$locale.baseText("timeAgo.oneMinuteAgo"),this.$locale.baseText("timeAgo.inOneMinute")],[this.$locale.baseText("timeAgo.minutesAgo"),this.$locale.baseText("timeAgo.inMinutes")],[this.$locale.baseText("timeAgo.oneHourAgo"),this.$locale.baseText("timeAgo.inOneHour")],[this.$locale.baseText("timeAgo.hoursAgo"),this.$locale.baseText("timeAgo.inHours")],[this.$locale.baseText("timeAgo.oneDayAgo"),this.$locale.baseText("timeAgo.inOneDay")],[this.$locale.baseText("timeAgo.daysAgo"),this.$locale.baseText("timeAgo.inDays")],[this.$locale.baseText("timeAgo.oneWeekAgo"),this.$locale.baseText("timeAgo.inOneWeek")],[this.$locale.baseText("timeAgo.weeksAgo"),this.$locale.baseText("timeAgo.inWeeks")],[this.$locale.baseText("timeAgo.oneMonthAgo"),this.$locale.baseText("timeAgo.inOneMonth")],[this.$locale.baseText("timeAgo.monthsAgo"),this.$locale.baseText("timeAgo.inMonths")],[this.$locale.baseText("timeAgo.oneYearAgo"),this.$locale.baseText("timeAgo.inOneYear")],[this.$locale.baseText("timeAgo.yearsAgo"),this.$locale.baseText("timeAgo.inYears")]][e]}},computed:{...F(["defaultLocale"]),format(){const s=l_(this.date,this.defaultLocale);return this.capitalize?s:s.toLowerCase()},convertDate(){const e=new Date(this.date).getTime();return vx(e)}}}),sD=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{attrs:{title:e.convertDate}},[e._v(" "+e._s(e.format)+" ")])},iD=[],nD=_(tD,sD,iD,!1,null,null,null,null),sr=nD.exports,oD=m.extend({name:"CredentialInfo",props:["nodesWithAccess","nodeAccess","currentCredential","credentialPermissions"],components:{TimeAgo:sr},methods:{onNodeAccessChange(s,e){this.$emit("accessChange",{name:s,value:e})},shortNodeType(s){return this.$locale.shortNodeType(s.name)}}});const rD="_container_1efpk_1",aD="_label_1efpk_5",lD="_accessLabel_1efpk_10 _label_1efpk_5",cD="_valueLabel_1efpk_15";var dD={container:rD,label:aD,accessLabel:lD,valueLabel:cD},uD=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("el-row",[t("el-col",{class:e.$style.accessLabel,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.allowUseBy"))+" ")])],1),t("el-col",{attrs:{span:16}},e._l(e.nodesWithAccess,function(i){return t("div",{key:i.name,class:e.$style.valueLabel},[e.credentialPermissions.updateNodeAccess?t("el-checkbox",{attrs:{label:e.$locale.headerText({key:`headers.${e.shortNodeType(i)}.displayName`,fallback:i.displayName}),value:!!e.nodeAccess[i.name]},on:{change:n=>e.onNodeAccessChange(i.name,n)}}):t("n8n-text",[e._v(" "+e._s(e.$locale.headerText({key:`headers.${e.shortNodeType(i)}.displayName`,fallback:i.displayName}))+" ")])],1)}),0)],1),e.currentCredential?t("el-row",[t("el-col",{class:e.$style.label,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.created"))+" ")])],1),t("el-col",{class:e.$style.valueLabel,attrs:{span:16}},[t("n8n-text",{attrs:{compact:!0}},[t("TimeAgo",{attrs:{date:e.currentCredential.createdAt,capitalize:!0}})],1)],1)],1):e._e(),e.currentCredential?t("el-row",[t("el-col",{class:e.$style.label,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.lastModified"))+" ")])],1),t("el-col",{class:e.$style.valueLabel,attrs:{span:16}},[t("n8n-text",{attrs:{compact:!0}},[t("TimeAgo",{attrs:{date:e.currentCredential.updatedAt,capitalize:!0}})],1)],1)],1):e._e(),e.currentCredential?t("el-row",[t("el-col",{class:e.$style.label,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.id"))+" ")])],1),t("el-col",{class:e.$style.valueLabel,attrs:{span:16}},[t("n8n-text",{attrs:{compact:!0}},[e._v(e._s(e.currentCredential.id))])],1)],1):e._e()],1)},hD=[];const Vu={$style:dD};function pD(s){for(var e in Vu)this[e]=Vu[e]}var fD=_(oD,uD,hD,!1,pD,null,null,null),mD=fD.exports,gD=N(V).extend({name:"CredentialSharing",props:["credential","credentialId","credentialData","sharedWith","credentialPermissions"],computed:{...F("users",["allUsers","currentUser"]),usersList(){return this.allUsers.filter(s=>{const e=s.id===this.currentUser.id,t=(this.credentialData.sharedWith||[]).find(i=>i.id===s.id);return!e&&!t})},sharedWithList(){return[{...this.credential?this.credential.ownedBy:this.currentUser,isOwner:!0}].concat(this.credentialData.sharedWith||[])},credentialOwnerName(){return this.$store.getters["credentials/getCredentialOwnerName"](this.credentialId)}},methods:{async onAddSharee(s){const{id:e,firstName:t,lastName:i,email:n}=this.$store.getters["users/getUserById"](s),o={id:e,firstName:t,lastName:i,email:n};this.$emit("change",(this.credentialData.sharedWith||[]).concat(o))},async onRemoveSharee(s){const e=this.$store.getters["users/getUserById"](s);await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.message",{interpolate:{name:e.fullName}}),this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.title"),null,this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.confirmButtonText"),this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.cancelButtonText"))&&this.$emit("change",this.credentialData.sharedWith.filter(i=>i.id!==e.id))},async loadUsers(){await this.$store.dispatch("users/fetchUsers")}},mounted(){this.loadUsers()}});const wD="_container_1h1cb_1";var yD={container:wD},vD=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("n8n-info-tip",{staticClass:"mb-s",attrs:{bold:!1}},[e.credentialPermissions.isOwner?[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialSharing.info.owner"))+" ")]:[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialSharing.info.sharee",{interpolate:{credentialOwnerName:e.credentialOwnerName}}))+" ")]],2),!e.credentialPermissions.isOwner&&e.credentialPermissions.isInstanceOwner?t("n8n-info-tip",{attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialSharing.info.instanceOwner"))+" ")]):e._e(),e.credentialPermissions.updateSharing?t("n8n-user-select",{attrs:{size:"large",users:e.usersList,currentUserId:e.currentUser.id,placeholder:e.$locale.baseText("credentialEdit.credentialSharing.select.placeholder")},on:{input:e.onAddSharee},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("n8n-icon",{attrs:{icon:"search"}})]},proxy:!0}],null,!1,3648684143)}):e._e(),t("n8n-users-list",{attrs:{users:e.sharedWithList,currentUserId:e.currentUser.id,"delete-label":e.$locale.baseText("credentialEdit.credentialSharing.list.delete"),readonly:!e.credentialPermissions.updateSharing},on:{delete:e.onRemoveSharee}})],1)},_D=[];const Fu={$style:yD};function OD(s){for(var e in Fu)this[e]=Fu[e]}var bD=_(gD,vD,_D,!1,OD,null,null,null),xD=bD.exports,$D=m.extend({name:"SaveButton",props:{saved:{type:Boolean},isSaving:{type:Boolean},disabled:{type:Boolean},saveLabel:{type:String},savingLabel:{type:String},savedLabel:{type:String},type:{type:String,default:"primary"}},computed:{saveButtonLabel(){return this.isSaving?this.$locale.baseText("saveButton.saving"):this.$locale.baseText("saveButton.save")}}});const TD="_container_6rnx1_1",kD="_button_6rnx1_8",SD="_saved_6rnx1_12";var ED={container:TD,button:kD,saved:SD},CD=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{class:e.$style.container},[e.saved?t("span",{class:e.$style.saved},[e._v(e._s(e.$locale.baseText("saveButton.saved")))]):t("n8n-button",{class:e.$style.button,attrs:{label:e.saveButtonLabel,loading:e.isSaving,disabled:e.disabled,type:e.type},on:{click:function(i){return e.$emit("click")}}})],1)},ND=[];const ju={$style:ED};function PD(s){for(var e in ju)this[e]=ju[e]}var DD=_($D,CD,ND,!1,PD,null,null,null),Vg=DD.exports,ID=N(V).extend({name:"InlineNameEdit",props:{name:{type:String},subtitle:{type:String},type:{type:String},readonly:{type:Boolean,default:!1}},data(){return{isNameEdit:!1}},methods:{onNameEdit(s){this.$emit("input",s)},enableNameEdit(){this.isNameEdit=!0,setTimeout(()=>{const s=this.$refs.nameInput;s&&s.focus()},0)},disableNameEdit(){this.name||(this.$emit("input",`Untitled ${this.type}`),this.$showToast({title:"Error",message:`${this.type} name cannot be empty`,type:"warning"})),this.isNameEdit=!1}}});const AD="_container_daod9_1",RD="_headline_daod9_9",MD="_nameInput_daod9_36",WD="_subtitle_daod9_46";var LD={container:AD,headline:RD,"headline-editable":"_headline-editable_daod9_28",nameInput:MD,subtitle:WD},QD=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"ph-no-capture",class:e.$style.container},[e.readonly?t("span",{class:e.$style.headline},[e._v(" "+e._s(e.name)+" ")]):t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.disableNameEdit,expression:"disableNameEdit"}],class:[e.$style.headline,e.$style["headline-editable"]],on:{keydown:function(i){i.stopPropagation()},click:e.enableNameEdit}},[e.isNameEdit?t("div",{class:e.$style.nameInput},[t("n8n-input",{ref:"nameInput",attrs:{value:e.name,size:"xlarge",maxlength:64},on:{input:e.onNameEdit,change:e.disableNameEdit}})],1):t("div",[t("span",[e._v(e._s(e.name))]),t("i",[t("font-awesome-icon",{attrs:{icon:"pen"}})],1)])]),!e.isNameEdit&&e.subtitle?t("div",{class:e.$style.subtitle},[e._v(" "+e._s(e.subtitle)+" ")]):e._e()])},BD=[];const zu={$style:LD};function UD(s){for(var e in zu)this[e]=zu[e]}var VD=_(ID,QD,BD,!1,UD,null,null,null),FD=VD.exports,jD=m.extend({name:"FeatureComingSoon",props:{featureId:{type:String,required:!0},showTitle:{type:Boolean,default:!1}},computed:{userId(){return this.$store.getters["users/currentUserId"]},versionCli(){return this.$store.getters["settings/versionCli"]},instanceId(){return this.$store.getters.instanceId},featureInfo(){return this.$store.getters["ui/getFakeDoorById"](this.featureId)}},methods:{openLinkPage(){window.open(`${this.featureInfo.linkURL}&u=${this.instanceId}#${this.userId}&v=${this.versionCli}`,"_blank"),this.$telemetry.track("user clicked feature waiting list button",{feature:this.featureId})}}});const zD="_actionBoxContainer_re7iy_1";var GD={actionBoxContainer:zD},HD=function(){var e=this,t=e._self._c;return e._self._setupProxy,this.featureInfo?t("div",{class:[e.$style.container]},[e.showTitle?t("div",{staticClass:"mb-2xl"},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText(e.featureInfo.featureName))+" ")])],1):e._e(),e.featureInfo.infoText?t("div",{staticClass:"mb-l"},[t("n8n-info-tip",{attrs:{theme:"info",type:"note"}},[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText(e.featureInfo.infoText))}})]],2)],1):e._e(),t("div",{class:e.$style.actionBoxContainer},[t("n8n-action-box",{attrs:{description:e.$locale.baseText(e.featureInfo.actionBoxDescription),buttonText:e.$locale.baseText(e.featureInfo.actionBoxButtonLabel||"fakeDoor.actionBox.button.label")},on:{click:e.openLinkPage},scopedSlots:e._u([{key:"heading",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText(e.featureInfo.actionBoxTitle))}})]},proxy:!0}],null,!1,1885287474)})],1)]):e._e()},qD=[];const Gu={$style:GD};function XD(s){for(var e in Gu)this[e]=Gu[e]}var YD=_(jD,HD,qD,!1,XD,null,null,null),Fg=YD.exports,ZD=N(V,ct).extend({name:"CredentialEdit",components:{CredentialSharing:xD,CredentialConfig:eD,CredentialIcon:uf,CredentialInfo:mD,InlineNameEdit:FD,Modal:Me,SaveButton:Vg,FeatureComingSoon:Fg},props:{modalName:{type:String,required:!0},activeId:{type:[String,Number],required:!0},mode:{type:String}},data(){return{activeTab:"connection",authError:"",credentialId:"",credentialName:"",credentialData:{},modalBus:new m,nodeAccess:{},isDeleting:!1,isSaving:!1,isTesting:!1,hasUnsavedChanges:!1,loading:!0,showValidationWarning:!1,testedSuccessfully:!1,isRetesting:!1,EnterpriseEditionFeature:Be}},async mounted(){if(this.nodeAccess=this.nodesWithAccess.reduce((s,e)=>(this.mode==="new"?s[e.name]={nodeType:e.name}:s[e.name]=null,s),{}),this.mode==="new"?(this.credentialName=await this.$store.dispatch("credentials/getNewCredentialName",{credentialTypeName:this.credentialTypeName}),m.set(this.credentialData,"ownedBy",{id:this.currentUser.id,firstName:this.currentUser.firstName,lastName:this.currentUser.lastName,email:this.currentUser.email})):await this.loadCurrentCredential(),this.credentialType)for(const s of this.credentialType.properties)this.credentialData.hasOwnProperty(s.name)||m.set(this.credentialData,s.name,s.default);this.$externalHooks().run("credentialsEdit.credentialModalOpened",{credentialType:this.credentialTypeName,isEditingCredential:this.mode==="edit",activeNode:this.$store.getters["ndv/activeNode"]}),setTimeout(()=>{this.credentialId&&(this.requiredPropertiesFilled?this.retestCredential():this.showValidationWarning=!0)},0),this.loading=!1},computed:{...F("users",["currentUser"]),currentCredential(){return this.credentialId?this.$store.getters["credentials/getCredentialById"](this.credentialId):null},credentialTypeName(){return this.mode==="edit"?this.currentCredential?this.currentCredential.type:null:`${this.activeId}`},credentialType(){if(!this.credentialTypeName)return null;const s=this.$store.getters["credentials/getCredentialTypeByName"](this.credentialTypeName);return s?{...s,properties:this.getCredentialProperties(this.credentialTypeName)}:null},isCredentialTestable(){if(this.isOAuthType||!this.requiredPropertiesFilled)return!1;const{ownedBy:s,sharedWith:e,...t}=this.credentialData;return Object.values(t).reduce((o,r)=>o||typeof r=="string"&&r.startsWith("="),!1)?!1:!!this.nodesWithAccess.filter(o=>o.credentials?!!o.credentials.filter(a=>a.name===this.credentialTypeName&&a.testedBy).length:!1).length||!!this.credentialType&&!!this.credentialType.test},nodesWithAccess(){return this.credentialTypeName?this.$store.getters["credentials/getNodesWithAccess"](this.credentialTypeName):[]},parentTypes(){return this.credentialTypeName?this.getParentTypes(this.credentialTypeName):[]},isOAuthType(){return!!this.credentialTypeName&&((this.credentialTypeName==="oAuth2Api"||this.parentTypes.includes("oAuth2Api"))&&this.credentialData.grantType==="authorizationCode"||this.credentialTypeName==="oAuth1Api"||this.parentTypes.includes("oAuth1Api"))},isOAuthConnected(){return this.isOAuthType&&!!this.credentialData.oauthTokenData},credentialProperties(){return this.credentialType?this.credentialType.properties.filter(s=>this.displayCredentialParameter(s)?!this.credentialType.__overwrittenProperties||!this.credentialType.__overwrittenProperties.includes(s.name):!1):[]},requiredPropertiesFilled(){for(const s of this.credentialProperties)if(s.required===!0&&(s.type==="string"&&!this.credentialData[s.name]||s.type==="number"&&typeof this.credentialData[s.name]!="number"))return!1;return!0},credentialsFakeDoorFeatures(){return this.$store.getters["ui/getFakeDoorByLocation"]("credentialsModal")},credentialPermissions(){return this.loading?{}:zo(this.currentUser,this.credentialId?this.currentCredential:this.credentialData,this.$store)},sidebarItems(){const s=[{id:"connection",label:this.$locale.baseText("credentialEdit.credentialEdit.connection"),position:"top"},{id:"sharing",label:this.$locale.baseText("credentialEdit.credentialEdit.sharing"),position:"top",available:this.credentialType!==null&&this.isSharingAvailable}];if(this.credentialType!==null&&!this.isSharingAvailable)for(const e of this.credentialsFakeDoorFeatures)s.push({id:`coming-soon/${e.id}`,label:this.$locale.baseText(e.featureName),position:"top"});return s.push({id:"details",label:this.$locale.baseText("credentialEdit.credentialEdit.details"),position:"top"}),s},isSharingAvailable(){return this.$store.getters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)===!0}},methods:{async beforeClose(){let s=!1;if(this.hasUnsavedChanges){const e=this.credentialType?this.credentialType.displayName:"";s=await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.message",{interpolate:{credentialDisplayName:e}}),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.cancelButtonText"),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.confirmButtonText"))}else this.credentialPermissions.isOwner&&this.isOAuthType&&!this.isOAuthConnected&&(s=await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.message"),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.cancelButtonText"),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.confirmButtonText")));if(s)this.requiredPropertiesFilled?this.isOAuthType&&this.scrollToBottom():(this.showValidationWarning=!0,this.scrollToTop());else return!0;return!1},displayCredentialParameter(s){return s.type==="hidden"?!1:s.displayOptions===void 0?!0:this.displayParameter(this.credentialData,s,"",null)},getCredentialProperties(s){const e=this.$store.getters["credentials/getCredentialTypeByName"](s);if(!e)return[];if(e.extends===void 0)return e.properties;const t=[];for(const i of e.extends){const n=this.getCredentialProperties(i);lc(t,n)}return lc(t,e.properties),t},async loadCurrentCredential(){this.credentialId=this.activeId;try{const s=await this.$store.dispatch("credentials/getCredentialData",{id:this.credentialId});if(!s)throw new Error(this.$locale.baseText("credentialEdit.credentialEdit.couldNotFindCredentialWithId")+":"+this.credentialId);this.credentialData=s.data||{},s.sharedWith&&m.set(this.credentialData,"sharedWith",s.sharedWith),s.ownedBy&&m.set(this.credentialData,"ownedBy",s.ownedBy),this.credentialName=s.name,s.nodesAccess.forEach(e=>{this.nodeAccess[e.nodeType]=e})}catch(s){this.$showError(s,this.$locale.baseText("credentialEdit.credentialEdit.showError.loadCredential.title")),this.closeDialog();return}},onTabSelect(s){this.activeTab=s;const e=s.replaceAll("coming-soon/",""),t=this.credentialType?this.credentialType.name:"",i=this.$store.getters["ndv/activeNode"];this.$telemetry.track("User viewed credential tab",{credential_type:t,node_type:i?i.type:null,tab:e,workflow_id:this.$store.getters.workflowId,credential_id:this.credentialId,sharing_enabled:Be.Sharing})},onNodeAccessChange({name:s,value:e}){this.hasUnsavedChanges=!0,e?this.nodeAccess={...this.nodeAccess,[s]:{nodeType:s}}:this.nodeAccess={...this.nodeAccess,[s]:null}},onChangeSharedWith(s){m.set(this.credentialData,"sharedWith",s),this.hasUnsavedChanges=!0},onDataChange({name:s,value:e}){this.hasUnsavedChanges=!0;const{oauthTokenData:t,...i}=this.credentialData;this.credentialData={...i,[s]:e}},closeDialog(){this.modalBus.$emit("close")},getParentTypes(s){const e=this.$store.getters["credentials/getCredentialTypeByName"](s);if(e===void 0||e.extends===void 0)return[];const t=[];for(const i of e.extends)t.push(i),t.push.apply(t,this.getParentTypes(i));return t},onNameEdit(s){this.hasUnsavedChanges=!0,this.credentialName=s},scrollToTop(){setTimeout(()=>{const s=this.$refs.content;s&&(s.scrollTop=0)},0)},scrollToBottom(){setTimeout(()=>{const s=this.$refs.content;s&&(s.scrollTop=s.scrollHeight)},0)},async retestCredential(){if(!this.isCredentialTestable){this.authError="",this.testedSuccessfully=!1;return}const s=Object.values(this.nodeAccess).filter(o=>!!o),{ownedBy:e,sharedWith:t,...i}=this.credentialData,n={id:this.credentialId,name:this.credentialName,type:this.credentialTypeName,data:i,nodesAccess:s};this.isRetesting=!0,await this.testCredential(n),this.isRetesting=!1},async testCredential(s){const e=await this.$store.dispatch("credentials/testCredential",s);e.status==="Error"?(this.authError=e.message,this.testedSuccessfully=!1):(this.authError="",this.testedSuccessfully=!0),this.scrollToTop()},async saveCredential(){this.requiredPropertiesFilled?this.showValidationWarning=!1:(this.showValidationWarning=!0,this.scrollToTop()),this.isSaving=!0;const s=Object.values(this.nodeAccess).filter(a=>!!a),e=Ht(this.credentialType.properties,this.credentialData,!1,!1,null);let t,i;this.$store.getters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)&&(t=this.credentialData.sharedWith,i=this.credentialData.ownedBy);const n={id:this.credentialId,name:this.credentialName,type:this.credentialTypeName,data:e,nodesAccess:s,sharedWith:t,ownedBy:i};let o;const r=this.mode==="new"&&!this.credentialId;if(r?o=await this.createCredential(n):o=await this.updateCredential(n),this.isSaving=!1,o){this.credentialId=o.id,this.isCredentialTestable?(this.isTesting=!0,n.data=this.credentialData,n.id=this.credentialId,await this.testCredential(n),this.isTesting=!1):(this.authError="",this.testedSuccessfully=!1);const a={credential_type:n.type,workflow_id:this.$store.getters.workflowId,credential_id:o.id,is_complete:!!this.requiredPropertiesFilled,is_new:r};this.isOAuthType?a.is_valid=!!this.isOAuthConnected:this.isCredentialTestable&&(a.is_valid=!!this.testedSuccessfully),this.$store.getters["ndv/activeNode"]&&(a.node_type=this.$store.getters["ndv/activeNode"].type),this.authError&&this.authError!==""&&(a.authError=this.authError),this.$telemetry.track("User saved credentials",a),this.$externalHooks().run("credentialEdit.saveCredential",a)}return o},async createCredential(s){let e;try{e=await this.$store.dispatch("credentials/createNewCredential",s),this.hasUnsavedChanges=!1}catch(t){return this.$showError(t,this.$locale.baseText("credentialEdit.credentialEdit.showError.createCredential.title")),null}return this.$externalHooks().run("credential.saved",{credential_type:s.type,credential_id:e.id,is_new:!0}),this.$telemetry.track("User created credentials",{credential_type:s.type,credential_id:e.id,workflow_id:this.$store.getters.workflowId}),e},async updateCredential(s){let e;try{e=await this.$store.dispatch("credentials/updateCredential",{id:this.credentialId,data:s}),this.hasUnsavedChanges=!1}catch(t){return this.$showError(t,this.$locale.baseText("credentialEdit.credentialEdit.showError.updateCredential.title")),null}return this.$externalHooks().run("credential.saved",{credential_type:s.type,credential_id:e.id,is_new:!1}),this.updateNodesCredentialsIssues(),e},async deleteCredential(){if(!this.currentCredential)return;const s=this.currentCredential.name;if(await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.message",{interpolate:{savedCredentialName:s}}),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText"))!==!1){try{this.isDeleting=!0,await this.$store.dispatch("credentials/deleteCredential",{id:this.credentialId}),this.hasUnsavedChanges=!1}catch(t){this.$showError(t,this.$locale.baseText("credentialEdit.credentialEdit.showError.deleteCredential.title")),this.isDeleting=!1;return}this.isDeleting=!1,this.updateNodesCredentialsIssues(),this.$showMessage({title:this.$locale.baseText("credentialEdit.credentialEdit.showMessage.title"),type:"success"}),this.closeDialog()}},async oAuthCredentialAuthorize(){let s;const e=await this.saveCredential();if(!e)return;const t=this.parentTypes;try{this.credentialTypeName==="oAuth2Api"||t.includes("oAuth2Api")?s=await this.$store.dispatch("credentials/oAuth2Authorize",{...this.credentialData,id:e.id}):(this.credentialTypeName==="oAuth1Api"||t.includes("oAuth1Api"))&&(s=await this.$store.dispatch("credentials/oAuth1Authorize",{...this.credentialData,id:e.id}))}catch(r){this.$showError(r,this.$locale.baseText("credentialEdit.credentialEdit.showError.generateAuthorizationUrl.title"),this.$locale.baseText("credentialEdit.credentialEdit.showError.generateAuthorizationUrl.message"));return}const i="scrollbars=no,resizable=yes,status=no,titlebar=noe,location=no,toolbar=no,menubar=no,width=500,height=700",n=window.open(s,"OAuth2 Authorization",i);m.set(this.credentialData,"oauthTokenData",null);const o=r=>{r.data==="success"&&(window.removeEventListener("message",o,!1),m.set(this.credentialData,"oauthTokenData",{}),this.$store.commit("credentials/enableOAuthCredential",e),n&&n.close())};window.addEventListener("message",o,!1)}}});const KD="_credentialModal_1gvmx_1",JD="_mainContent_1gvmx_6",eI="_sidebar_1gvmx_12",tI="_header_1gvmx_22",sI="_container_1gvmx_26",iI="_credInfo_1gvmx_31",nI="_credActions_1gvmx_39",oI="_credIcon_1gvmx_50";var rI={credentialModal:KD,mainContent:JD,sidebar:eI,header:tI,container:sI,credInfo:iI,credActions:nI,credIcon:oI},aI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,customClass:e.$style.credentialModal,eventBus:e.modalBus,loading:e.loading,beforeClose:e.beforeClose,width:"70%",height:"80%"}},[t("template",{slot:"header"},[t("div",{class:e.$style.header},[t("div",{class:e.$style.credInfo},[t("div",{class:e.$style.credIcon},[t("CredentialIcon",{attrs:{credentialTypeName:e.credentialTypeName}})],1),t("InlineNameEdit",{attrs:{name:e.credentialName,subtitle:e.credentialType?e.credentialType.displayName:"",readonly:!e.credentialPermissions.updateName,type:"Credential"},on:{input:e.onNameEdit}})],1),t("div",{class:e.$style.credActions},[e.currentCredential&&e.credentialPermissions.delete?t("n8n-icon-button",{attrs:{title:e.$locale.baseText("credentialEdit.credentialEdit.delete"),icon:"trash",size:"medium",type:"tertiary",disabled:e.isSaving,loading:e.isDeleting},on:{click:e.deleteCredential}}):e._e(),(e.hasUnsavedChanges||e.credentialId)&&e.credentialPermissions.save?t("SaveButton",{attrs:{saved:!e.hasUnsavedChanges&&!e.isTesting,isSaving:e.isSaving||e.isTesting,savingLabel:e.isTesting?e.$locale.baseText("credentialEdit.credentialEdit.testing"):e.$locale.baseText("credentialEdit.credentialEdit.saving")},on:{click:e.saveCredential}}):e._e()],1)]),t("hr")]),t("template",{slot:"content"},[t("div",{class:e.$style.container},[t("div",{class:e.$style.sidebar},[t("n8n-menu",{attrs:{mode:"tabs",items:e.sidebarItems},on:{select:e.onTabSelect}})],1),e.activeTab==="connection"?t("div",{ref:"content",class:e.$style.mainContent},[t("CredentialConfig",{attrs:{credentialType:e.credentialType,credentialProperties:e.credentialProperties,credentialData:e.credentialData,credentialId:e.credentialId,showValidationWarning:e.showValidationWarning,authError:e.authError,testedSuccessfully:e.testedSuccessfully,isOAuthType:e.isOAuthType,isOAuthConnected:e.isOAuthConnected,isRetesting:e.isRetesting,parentTypes:e.parentTypes,requiredPropertiesFilled:e.requiredPropertiesFilled,credentialPermissions:e.credentialPermissions},on:{change:e.onDataChange,oauth:e.oAuthCredentialAuthorize,retest:e.retestCredential,scrollToTop:e.scrollToTop}})],1):e.activeTab==="sharing"&&e.credentialType?t("enterprise-edition",{class:e.$style.mainContent,attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("CredentialSharing",{attrs:{credential:e.currentCredential,credentialData:e.credentialData,credentialId:e.credentialId,credentialPermissions:e.credentialPermissions},on:{change:e.onChangeSharedWith}})],1):e.activeTab==="details"&&e.credentialType?t("div",{class:e.$style.mainContent},[t("CredentialInfo",{attrs:{nodeAccess:e.nodeAccess,nodesWithAccess:e.nodesWithAccess,currentCredential:e.currentCredential,credentialPermissions:e.credentialPermissions},on:{accessChange:e.onNodeAccessChange}})],1):e.activeTab.startsWith("coming-soon")?t("div",{class:e.$style.mainContent},[t("FeatureComingSoon",{attrs:{featureId:e.activeTab.split("/")[1]}})],1):e._e()],1)])],2)},lI=[];const Hu={$style:rI};function cI(s){for(var e in Hu)this[e]=Hu[e]}var dI=_(ZD,aI,lI,!1,cI,null,null,null),uI=dI.exports;function hI(s){return"version"in s}const ze={Owner:"owner",Member:"member",Default:"default"},re={LoggedIn:"LoggedIn",LoggedOut:"LoggedOut"},jr={TAGS:{CAN_DELETE_TAGS:{allow:{role:[ze.Owner,ze.Default]}}},PRIMARY_MENU:{CAN_ACCESS_USER_INFO:{allow:{loginStatus:[re.LoggedIn]},deny:{role:[ze.Default]}}},USER_SETTINGS:{VIEW_UM_SETUP_WARNING:{allow:{role:[ze.Default]}}}},Kn=(s,e)=>{const t=e?re.LoggedIn:re.LoggedOut;if(s.deny){if(s.deny.shouldDeny&&s.deny.shouldDeny()||s.deny.loginStatus&&s.deny.loginStatus.includes(t))return!1;if(e&&e.globalRole){const i=e.isDefaultUser?ze.Default:e.globalRole.name;if(s.deny.role&&s.deny.role.includes(i))return!1}else if(s.deny.role)return!1}if(s.allow){if(s.allow.shouldAllow&&s.allow.shouldAllow()||s.allow.loginStatus&&s.allow.loginStatus.includes(t))return!0;if(e&&e.globalRole){const i=e.isDefaultUser?ze.Default:e.globalRole.name;if(s.allow.role&&s.allow.role.includes(i))return!0}}return!1};function pI(s){return s?hI(s)?fI(s):mI(s):[]}function jg(s){if(s.createdAt){const e=new Date(s.createdAt),t=new Date;return Math.ceil((t.getTime()-e.getTime())/(1e3*3600*24))}return-1}function fI(s){let e=[];const{version:t,...i}=s;if(Object.keys(i).length===0)return[];const n=s[tl],o=s[gs],r=s[Dn];let a=null;if(Zs in s&&s[Zs]&&(a=parseInt(s[Zs],10),a=isNaN(a)?0:a),o===tf?e=e.concat(J_):o===hO?e=e.concat(Yr):(o===Fs||r===Jn||r===ia)&&a!==null&&a>=4?e=e.concat(xt):(o===Fs||r===Jn||r===ia)&&a!==null&&a<3?e=e.concat(Zr):r===In?e=e.concat(xt):r===An||r===Rn?e=e.concat(tO):r===Di?e=e.concat(B_):r===Mn?e=e.concat(Z_):r===sf?e=e.concat(Zr):r===Wn?e=e.concat(z_):r===Ln?e=e.concat(Y_):e=e.concat(xt),a!==null&&a>=4?e=e.concat(Vo):e=e.concat(qp),a!==null&&a<3?e=e.concat(Ja):e=e.concat(el),n===sl||n===il)switch(r){case In:e=e.concat(Vs);break;case An:e=e.concat(wc);break;case Di:e=e.concat(Xp);break;case Mn:e=e.concat(q_);break;case Wn:e=e.concat(gc);break;case Rn:e=e.concat(Zp);break;case Ln:e=e.concat(Xr);break;default:e=e.concat(Kr)}else switch(r){case In:e=e.concat(Vs);break;case An:e=e.concat(wc);break;case Rn:e=e.concat(Kp);break;case Mn:e=e.concat(D_);break;case Wn:e=e.concat(gc);break;case Di:e=e.concat(W_);break;case Ln:e=e.concat(Xr);break;default:e=e.concat(Kr)}return e=e.concat(Yp),e}function mI(s){const e=s[tl],t=s[lO];function i(a){return Array.isArray(t)?t.includes(a):t===a}const n=!t||t.length===0;if(e===null&&n&&s[Zs]===null)return[];let o=null;s[Zs]&&(o=parseInt(s[Zs],10),o=isNaN(o)?0:o);let r=[];return i(cr)?r=r.concat(xt):r=r.concat(Zr),o!==null&&o>=4?r=r.concat(Vo):r=r.concat(qp),o!==null&&o<3?r=r.concat(Ja):r=r.concat(el),e===sl||e===il?i(_c)?r=r.concat(Xp):i(Oc)?r=r.concat([Xr,Vs]):i(vc)?r=r.concat([Yr,H_]):i(cr)?r=r.concat([M_,Vs]):r=r.concat([V_,F_]):i(_c)?r=r.concat(R_):i(Oc)?r=r.concat([G_,Vs]):i(vc)?r=r.concat([Yr,I_]):i(cr)?r=r.concat([Q_,Vs]):i(cO)?r=r.concat([eO,Kp,Zp]):r=r.concat([L_,Kr]),r=r.concat(Yp),r}const qu=/^.* <(.*)>$/;function Xu(s){let e=s.trim();if(qu.test(e)){const t=e.match(qu);t&&t.length===2&&(e=t[1])}return e}var gI=N(V).extend({components:{Modal:Me},name:"InviteUsersModal",props:{modalName:{type:String}},data(){return{config:null,formBus:new m,modalBus:new m,emails:"",loading:!1,INVITE_USER_MODAL_KEY:Mo}},mounted(){this.config=[{name:"emails",properties:{label:this.$locale.baseText("settings.users.newEmailsToInvite"),required:!0,validationRules:[{name:"VALID_EMAILS"}],validators:{VALID_EMAILS:{validate:this.validateEmails}},placeholder:"name1@email.com, name2@email.com, ...",capitalize:!0,focusInitially:!0}},{name:"role",initialValue:"member",properties:{label:this.$locale.baseText("auth.role"),required:!0,type:"select",options:[{value:ze.Member,label:this.$locale.baseText("auth.roles.member")}],capitalize:!0}}]},computed:{emailsCount(){return this.emails.split(",").filter(s=>!!s.trim()).length},buttonLabel(){return this.emailsCount>1?this.$locale.baseText("settings.users.inviteXUser",{interpolate:{count:this.emailsCount.toString()}}):this.$locale.baseText("settings.users.inviteUser")},enabledButton(){return this.emailsCount>=1}},methods:{validateEmails(s){if(typeof s!="string")return!1;const e=s.split(",");for(let t=0;t<e.length;t++){const i=e[t],n=Xu(i);if(!!n.trim()&&!jo.test(String(n).trim().toLowerCase()))return{messageKey:"settings.users.invalidEmailError",options:{interpolate:{email:n}}}}return!1},onInput(s){s.name==="emails"&&(this.emails=s.value)},async onSubmit(){try{this.loading=!0;const s=this.emails.split(",").map(i=>({email:Xu(i)})).filter(i=>!!i.email);if(s.length===0)throw new Error(this.$locale.baseText("settings.users.noUsersToInvite"));const t=(await this.$store.dispatch("users/inviteUsers",s)).reduce((i,{user:n,error:o})=>(o?i.error.push(n.email):i.success.push(n.email),i),{success:[],error:[]});t.success.length&&this.$showMessage({type:"success",title:this.$locale.baseText(t.success.length>1?"settings.users.usersInvited":"settings.users.userInvited"),message:this.$locale.baseText("settings.users.emailInvitesSent",{interpolate:{emails:t.success.join(", ")}})}),t.error.length&&setTimeout(()=>{this.$showMessage({type:"error",title:this.$locale.baseText("settings.users.usersEmailedError"),message:this.$locale.baseText("settings.users.emailInvitesSentError",{interpolate:{emails:t.error.join(", ")}})})},0),this.modalBus.$emit("close")}catch(s){this.$showError(s,this.$locale.baseText("settings.users.usersInvitedError"))}this.loading=!1},onSubmitClick(){this.formBus.$emit("submit")}}}),wI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.INVITE_USER_MODAL_KEY,title:e.$locale.baseText("settings.users.inviteNewUsers"),center:!0,width:"460px",eventBus:e.modalBus},on:{enter:e.onSubmit}},[t("template",{slot:"content"},[t("n8n-form-inputs",{attrs:{inputs:e.config,eventBus:e.formBus,columnView:!0},on:{input:e.onInput,submit:e.onSubmit}})],1),t("template",{slot:"footer"},[t("n8n-button",{attrs:{loading:e.loading,disabled:!e.enabledButton,label:e.buttonLabel,float:"right"},on:{click:e.onSubmitClick}})],1)],2)},yI=[],vI=_(gI,wI,yI,!1,null,null,null,null),_I=vI.exports,OI=N(ve).extend({name:"CredentialsSelectModal",components:{Modal:Me},async mounted(){try{await this.$store.dispatch("credentials/fetchCredentialTypes")}catch{}this.loading=!1,setTimeout(()=>{const s=this.$refs.select;s&&s.focus()},0)},data(){return{modalBus:new m,selected:"",loading:!0,CREDENTIAL_SELECT_MODAL_KEY:Ro}},computed:{...F("credentials",["allCredentialTypes"])},methods:{onSelect(s){this.selected=s},openCredentialType(){this.modalBus.$emit("close"),this.$store.dispatch("ui/openNewCredential",{type:this.selected});const s={credential_type:this.selected,source:"primary_menu",new_credential:!0,workflow_id:this.$store.getters.workflowId};this.$telemetry.track("User opened Credential modal",s),this.$externalHooks().run("credentialsSelectModal.openCredentialType",s)}}});const bI="_title_1tuym_1",xI="_subtitle_1tuym_6";var $I={title:bI,subtitle:xI},TI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.CREDENTIAL_SELECT_MODAL_KEY,eventBus:e.modalBus,width:"50%",center:!0,loading:e.loading,maxWidth:"460px",minHeight:"250px"}},[t("template",{slot:"header"},[t("h2",{class:e.$style.title},[e._v(e._s(e.$locale.baseText("credentialSelectModal.addNewCredential")))])]),t("template",{slot:"content"},[t("div",[t("div",{class:e.$style.subtitle},[e._v(e._s(e.$locale.baseText("credentialSelectModal.selectAnAppOrServiceToConnectTo")))]),t("n8n-select",{ref:"select",attrs:{filterable:"",defaultFirstOption:"",placeholder:e.$locale.baseText("credentialSelectModal.searchForApp"),size:"xlarge",value:e.selected},on:{change:e.onSelect}},[t("font-awesome-icon",{attrs:{slot:"prefix",icon:"search"},slot:"prefix"}),e._l(e.allCredentialTypes,function(i){return t("n8n-option",{key:i.name,attrs:{value:i.name,label:i.displayName,filterable:""}})})],2)],1)]),t("template",{slot:"footer"},[t("div",{class:e.$style.footer},[t("n8n-button",{attrs:{label:e.$locale.baseText("credentialSelectModal.continue"),float:"right",size:"large",disabled:!e.selected},on:{click:e.openCredentialType}})],1)])],2)},kI=[];const Yu={$style:$I};function SI(s){for(var e in Yu)this[e]=Yu[e]}var EI=_(OI,TI,kI,!1,SI,null,null,null),CI=EI.exports;const zr="__manage",Gr="__create";var NI=N(V).extend({name:"TagsDropdown",props:["placeholder","currentTagIds","createEnabled","eventBus"],data(){return{filter:"",MANAGE_KEY:zr,CREATE_KEY:Gr,focused:!1,preventUpdate:!1}},mounted(){const s=this.$refs.select&&this.$refs.select.$refs&&this.$refs.select.$refs.innerSelect;if(s){const e=s.$refs.input;e&&(e.setAttribute("maxlength",`${Ya}`),e.addEventListener("keydown",t=>{const i=t;i.key==="Escape"?this.$emit("esc"):i.key==="Enter"&&this.filter.length===0&&(this.$data.preventUpdate=!0,this.$emit("blur"),this.$refs.select&&typeof this.$refs.select.blur=="function"&&this.$refs.select.blur())}))}this.$props.eventBus&&this.$props.eventBus.$on("focus",()=>{this.focusOnInput(),this.focusOnTopOption()}),this.$store.dispatch("tags/fetchAll")},computed:{...F("tags",["allTags","isLoading","hasTags"]),options(){return this.allTags.filter(s=>s&&s.name.toLowerCase().includes(this.$data.filter.toLowerCase()))},appliedTags(){return this.$props.currentTagIds.filter(s=>this.$store.getters["tags/getTagById"](s))}},methods:{filterOptions(s=""){this.$data.filter=s.trim(),this.$nextTick(()=>this.focusOnTopOption())},async onCreate(){const s=this.$data.filter;try{const e=await this.$store.dispatch("tags/create",s);this.$emit("update",[...this.$props.currentTagIds,e.id]),this.$nextTick(()=>this.focusOnTag(e.id)),this.$data.filter=""}catch(e){this.$showError(e,this.$locale.baseText("tagsDropdown.showError.title"),this.$locale.baseText("tagsDropdown.showError.message",{interpolate:{name:s}}))}},onTagsUpdated(s){const e=s.find(t=>t===zr||t===Gr);e===zr?(this.$data.filter="",this.$store.dispatch("ui/openModal",Lo)):e===Gr?this.onCreate():setTimeout(()=>{this.$data.preventUpdate||this.$emit("update",s),this.$data.preventUpdate=!1},0)},focusOnTopOption(){const s=this.$refs.tag,e=this.$refs.create;e&&e.hoverItem?e.hoverItem():s&&s[0]&&s[0].hoverItem&&s[0].hoverItem()},focusOnTag(s){const e=this.$refs.tag||[];e&&e.length&&e.find(t=>t.value===s)},focusOnInput(){const s=this.$refs.select;s&&(s.focusOnInput(),this.focused=!0)},onVisibleChange(s){s?this.focused=!0:(this.$data.filter="",this.focused=!1)},onRemoveTag(){this.$nextTick(()=>{this.focusOnInput()})},onClickOutside(s){s.type==="click"&&this.$emit("blur")}},watch:{allTags(){this.currentTagIds.length!==this.appliedTags.length&&this.$emit("update",this.appliedTags)}}});var PI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],class:{"tags-container":!0,focused:e.focused},on:{keydown:function(i){i.stopPropagation()}}},[t("n8n-select",{ref:"select",attrs:{popperAppendToBody:!1,value:e.appliedTags,loading:e.isLoading,placeholder:e.placeholder,"filter-method":e.filterOptions,filterable:"",multiple:"","loading-text":"...","popper-class":"tags-dropdown",size:"medium"},on:{change:e.onTagsUpdated,"visible-change":e.onVisibleChange,"remove-tag":e.onRemoveTag}},[e.options.length===0&&e.filter&&e.createEnabled?t("n8n-option",{key:e.CREATE_KEY,ref:"create",staticClass:"ops",attrs:{value:e.CREATE_KEY}},[t("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t("span",[e._v(" "+e._s(e.$locale.baseText("tagsDropdown.createTag",{interpolate:{filter:e.filter}}))+" ")])],1):e.options.length===0?t("n8n-option",{attrs:{value:"message",disabled:""}},[e.createEnabled?t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.typeToCreateATag")))]):e.allTags.length>0?t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.noMatchingTagsExist")))]):t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.noTagsExist")))])]):e._e(),e._l(e.options,function(i,n){return t("n8n-option",{key:i.id+"_"+n,ref:"tag",refInFor:!0,staticClass:"tag",attrs:{value:i.id,label:i.name}})}),t("n8n-option",{key:e.MANAGE_KEY,staticClass:"ops manage-tags",attrs:{value:e.MANAGE_KEY}},[t("font-awesome-icon",{attrs:{icon:"cog"}}),t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.manageTags")))])],1)],2)],1)},DI=[],II=_(NI,PI,DI,!1,null,"431395fc",null,null),Fl=II.exports,AI=N(V,ie,Ce).extend({components:{TagsDropdown:Fl,Modal:Me},name:"DuplicateWorkflow",props:["modalName","isActive","data"],data(){const s=this.data.tags;return{name:"",currentTagIds:s,isSaving:!1,modalBus:new m,dropdownBus:new m,MAX_WORKFLOW_NAME_LENGTH:qa,prevTagIds:s}},async mounted(){this.name=await this.$store.dispatch("workflows/getDuplicateCurrentWorkflowName",this.data.name),this.$nextTick(()=>this.focusOnNameInput())},computed:{...F("settings",["areTagsEnabled"])},watch:{isActive(s){s&&this.focusOnSelect()}},methods:{focusOnSelect(){this.dropdownBus.$emit("focus")},focusOnNameInput(){const s=this.$refs.nameInput;s&&s.focus&&s.focus()},onTagsBlur(){this.prevTagIds=this.currentTagIds},onTagsEsc(){this.currentTagIds=this.prevTagIds},onTagsUpdate(s){this.currentTagIds=s},async save(){const s=this.name.trim();if(!s){this.$showMessage({title:this.$locale.baseText("duplicateWorkflowDialog.showMessage.title"),message:this.$locale.baseText("duplicateWorkflowDialog.showMessage.message"),type:"error"});return}const e=this.data.id;this.isSaving=!0;const{createdAt:t,updatedAt:i,...n}=await this.restApi().getWorkflow(this.data.id);await this.saveAsNewWorkflow({name:s,data:n,tags:this.currentTagIds,resetWebhookUrls:!0,openInNewWindow:!0,resetNodeIds:!0})&&(this.closeDialog(),this.$telemetry.track("User duplicated workflow",{old_workflow_id:e,workflow_id:this.data.id})),this.isSaving=!1},closeDialog(){this.modalBus.$emit("close")}}});const RI="_content_qk1mu_1",MI="_footer_qk1mu_5";var WI={content:RI,footer:MI},LI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,eventBus:e.modalBus,title:e.$locale.baseText("duplicateWorkflowDialog.duplicateWorkflow"),center:!0,width:"420px"},on:{enter:e.save},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.content},[t("n8n-input",{ref:"nameInput",attrs:{placeholder:e.$locale.baseText("duplicateWorkflowDialog.enterWorkflowName"),maxlength:e.MAX_WORKFLOW_NAME_LENGTH},model:{value:e.name,callback:function(i){e.name=i},expression:"name"}}),e.areTagsEnabled?t("TagsDropdown",{ref:"dropdown",attrs:{createEnabled:!0,currentTagIds:e.currentTagIds,eventBus:e.dropdownBus,placeholder:e.$locale.baseText("duplicateWorkflowDialog.chooseOrCreateATag")},on:{blur:e.onTagsBlur,esc:e.onTagsEsc,update:e.onTagsUpdate}}):e._e()],1)]},proxy:!0},{key:"footer",fn:function({close:i}){return[t("div",{class:e.$style.footer},[t("n8n-button",{attrs:{loading:e.isSaving,label:e.$locale.baseText("duplicateWorkflowDialog.save"),float:"right"},on:{click:e.save}}),t("n8n-button",{attrs:{type:"secondary",disabled:e.isSaving,label:e.$locale.baseText("duplicateWorkflowDialog.cancel"),float:"right"},on:{click:i}})],1)]}}])})},QI=[];const Zu={$style:WI};function BI(s){for(var e in Zu)this[e]=Zu[e]}var UI=_(AI,LI,QI,!1,BI,null,null,null),VI=UI.exports,FI=m.extend({name:"ModalRoot",props:["name","keepAlive"],methods:{isActive(s){return this.$store.getters["ui/isModalActive"](s)},isOpen(s){return this.$store.getters["ui/isModalOpen"](s)},getData(s){return this.$store.getters["ui/getModalData"](s)},getMode(s){return this.$store.getters["ui/getModalMode"](s)},getActiveId(s){return this.$store.getters["ui/getModalActiveId"](s)}}}),jI=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.isOpen(e.name)||e.keepAlive?t("div",[e._t("default",null,{modalName:e.name,active:e.isActive(e.name),open:e.isOpen(e.name),activeId:e.getActiveId(e.name),mode:e.getMode(e.name),data:e.getData(e.name)})],2):e._e()},zI=[],GI=_(FI,jI,zI,!1,null,null,null,null),HI=GI.exports,qI=N(V).extend({components:{Modal:Me},name:"OnboardingCallSignupModal",props:["modalName"],data(){return{email:"",modalBus:new m,ONBOARDING_CALL_SIGNUP_MODAL_KEY:Ki,showError:!1,okToClose:!1,loading:!1}},computed:{isEmailValid(){return jo.test(String(this.email).toLowerCase())}},methods:{async onSignup(){if(!this.isEmailValid){this.showError=!0;return}this.showError=!1,this.loading=!0,this.okToClose=!1;try{await this.$store.dispatch("ui/applyForOnboardingCall",{email:this.email}),this.$showMessage({type:"success",title:this.$locale.baseText("onboardingCallSignupSucess.title"),message:this.$locale.baseText("onboardingCallSignupSucess.message")}),this.okToClose=!0,this.modalBus.$emit("close")}catch(s){this.$showError(s,this.$locale.baseText("onboardingCallSignupFailed.title"),this.$locale.baseText("onboardingCallSignupFailed.message")),this.loading=!1,this.okToClose=!0}},async onCancel(){this.okToClose=!0,this.modalBus.$emit("close")},onModalClose(){return this.okToClose}}});const XI="_buttonsContainer_n7se3_1";var YI={buttonsContainer:XI},ZI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.ONBOARDING_CALL_SIGNUP_MODAL_KEY,title:e.$locale.baseText("onboardingCallSignupModal.title"),eventBus:e.modalBus,center:!0,showClose:!1,beforeClose:e.onModalClose,width:"460px"}},[t("template",{slot:"content"},[t("div",{staticClass:"pb-m"},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("onboardingCallSignupModal.description"))+" ")])],1),t("div",{on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.onSignup.apply(null,arguments)}}},[t("n8n-input",{attrs:{placeholder:e.$locale.baseText("onboardingCallSignupModal.emailInput.placeholder")},model:{value:e.email,callback:function(i){e.email=i},expression:"email"}}),e.showError?t("n8n-text",{staticClass:"mt-4xs",attrs:{size:"small",tag:"div",color:"danger"}},[e._v(" "+e._s(e.$locale.baseText("onboardingCallSignupModal.infoText.emailError"))+" ")]):e._e()],1)]),t("template",{slot:"footer"},[t("div",{class:e.$style.buttonsContainer},[t("n8n-button",{attrs:{label:e.$locale.baseText("onboardingCallSignupModal.cancelButton.label"),disabled:e.loading,size:"medium",float:"right",type:"outline"},on:{click:e.onCancel}}),t("n8n-button",{attrs:{disabled:e.email===""||e.loading,label:e.$locale.baseText("onboardingCallSignupModal.signupButton.label"),size:"medium",float:"right",loading:e.loading},on:{click:e.onSignup}})],1)])],2)},KI=[];const Ku={$style:YI};function JI(s){for(var e in Ku)this[e]=Ku[e]}var eA=_(qI,ZI,KI,!1,JI,null,null,null),tA=eA.exports;const sA="v3";var iA=N(V,ie).extend({components:{Modal:Me},name:"PersonalizationModal",data(){return{submitted:!1,isSaving:!1,PERSONALIZATION_MODAL_KEY:Qo,otherWorkAreaFieldVisible:!1,otherCompanyIndustryFieldVisible:!1,showAllIndustryQuestions:!0,modalBus:new m,formBus:new m}},computed:{...F({baseUrl:"getBaseUrl"}),...F("users",["currentUser"]),...F("settings",["isOnboardingCallPromptFeatureEnabled"]),survey(){return[{name:gs,properties:{label:this.$locale.baseText("personalizationModal.whatBestDescribesYourCompany"),type:"select",placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.saas"),value:dO},{label:this.$locale.baseText("personalizationModal.eCommerce"),value:tf},{label:this.$locale.baseText("personalizationModal.digitalAgencyOrConsultant"),value:pO},{label:this.$locale.baseText("personalizationModal.systemsIntegrator"),value:fO},{value:uO,label:this.$locale.baseText("personalizationModal.education")},{label:this.$locale.baseText("personalizationModal.other"),value:dr},{label:this.$locale.baseText("personalizationModal.imNotUsingN8nForWork"),value:Fs}]}},{name:bc,properties:{type:"multi-select",label:this.$locale.baseText("personalizationModal.whichIndustriesIsYourCompanyIn"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{value:TO,label:this.$locale.baseText("personalizationModal.financeOrInsurance")},{value:yO,label:this.$locale.baseText("personalizationModal.government")},{value:$O,label:this.$locale.baseText("personalizationModal.healthcare")},{value:kO,label:this.$locale.baseText("personalizationModal.it")},{value:vO,label:this.$locale.baseText("personalizationModal.legal")},{value:xO,label:this.$locale.baseText("personalizationModal.managedServiceProvider")},{value:_O,label:this.$locale.baseText("personalizationModal.marketing")},{value:OO,label:this.$locale.baseText("personalizationModal.media")},{value:bO,label:this.$locale.baseText("personalizationModal.manufacturing")},{value:gO,label:this.$locale.baseText("personalizationModal.physicalRetailOrServices")},{value:wO,label:this.$locale.baseText("personalizationModal.realEstateOrConstruction")},{value:SO,label:this.$locale.baseText("personalizationModal.security")},{value:EO,label:this.$locale.baseText("personalizationModal.telecoms")},{value:xc,label:this.$locale.baseText("personalizationModal.otherPleaseSpecify")}]},shouldDisplay(e){return e[gs]===dr}},{name:mO,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyYourCompanysIndustry")},shouldDisplay(e){const t=e[gs],i=e[bc];return t===dr&&!!i&&i.includes(xc)}},{name:Dn,properties:{type:"select",label:this.$locale.baseText("personalizationModal.whatAreYouLookingToAutomate"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{value:In,label:this.$locale.baseText("personalizationModal.customerIntegrations")},{value:An,label:this.$locale.baseText("personalizationModal.customerSupport")},{value:zO,label:this.$locale.baseText("personalizationModal.engineeringOrDevops")},{value:Rn,label:this.$locale.baseText("personalizationModal.financeOrAccounting")},{value:Mn,label:this.$locale.baseText("personalizationModal.hr")},{value:sf,label:this.$locale.baseText("personalizationModal.operations")},{value:Wn,label:this.$locale.baseText("personalizationModal.product")},{value:Di,label:this.$locale.baseText("personalizationModal.salesAndMarketing")},{value:Ln,label:this.$locale.baseText("personalizationModal.security")},{value:Jn,label:this.$locale.baseText("personalizationModal.otherPleaseSpecify")},{value:ia,label:this.$locale.baseText("personalizationModal.notSureYet")}]},shouldDisplay(e){return e[gs]!==Fs}},{name:jO,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyYourAutomationGoal")},shouldDisplay(e){const t=e[gs],i=e[Dn];return t!==Fs&&i===Jn}},{name:$c,properties:{type:"multi-select",label:this.$locale.baseText("personalizationModal.specifySalesMarketingGoal"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.leadGeneration"),value:IO},{label:this.$locale.baseText("personalizationModal.customerCommunication"),value:AO},{label:this.$locale.baseText("personalizationModal.customerActions"),value:RO},{label:this.$locale.baseText("personalizationModal.adCampaign"),value:MO},{label:this.$locale.baseText("personalizationModal.reporting"),value:WO},{label:this.$locale.baseText("personalizationModal.dataSynching"),value:LO},{label:this.$locale.baseText("personalizationModal.other"),value:Tc}]},shouldDisplay(e){return e[Dn]===Di}},{name:QO,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyOtherSalesAndMarketingGoal")},shouldDisplay(e){const t=e[$c];return!!t&&t.includes(Tc)}},{name:BO,properties:{type:"multi-select",label:this.$locale.baseText("personalizationModal.specifyUsageMode"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.connectToInternalDB"),value:UO},{label:this.$locale.baseText("personalizationModal.buildBackendServices"),value:VO},{label:this.$locale.baseText("personalizationModal.manipulateFiles"),value:FO}]}},{name:tl,properties:{type:"select",label:this.$locale.baseText("personalizationModal.howBigIsYourCompany"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.lessThan20People"),value:CO},{label:`20-99 ${this.$locale.baseText("personalizationModal.people")}`,value:NO},{label:`100-499 ${this.$locale.baseText("personalizationModal.people")}`,value:PO},{label:`500-999 ${this.$locale.baseText("personalizationModal.people")}`,value:sl},{label:`1000+ ${this.$locale.baseText("personalizationModal.people")}`,value:il},{label:this.$locale.baseText("personalizationModal.imNotUsingN8nForWork"),value:DO}]},shouldDisplay(e){return e[gs]!==Fs}}]}},methods:{closeDialog(){this.modalBus.$emit("close")},onSave(){this.formBus.$emit("submit")},async onSubmit(s){this.$data.isSaving=!0;try{const e={...s,version:sA,personalization_survey_submitted_at:new Date().toISOString(),personalization_survey_n8n_version:this.$store.getters.versionCli};this.$externalHooks().run("personalizationModal.onSubmit",e),await this.$store.dispatch("users/submitPersonalizationSurvey",e),Object.keys(s).length===0&&this.closeDialog(),await this.fetchOnboardingPrompt(),this.submitted=!0}catch(e){this.$showError(e,"Error while submitting results")}this.$data.isSaving=!1},async fetchOnboardingPrompt(){if(this.isOnboardingCallPromptFeatureEnabled&&jg(this.currentUser)<=of){const s=await this.$store.dispatch("ui/getNextOnboardingPrompt"),e=s.toast_sequence_number===1?rf:1e3;s.title&&s.description&&setTimeout(async()=>{this.$showToast({type:"info",title:s.title,message:s.description,duration:0,customClass:"clickable",closeOnClick:!0,onClick:()=>{this.$telemetry.track("user clicked onboarding toast",{seq_num:s.toast_sequence_number,title:s.title,description:s.description}),this.$store.commit("ui/openModal",Ki,{root:!0})}})},e)}}}});const nA="_container_etdnh_1",oA="_submittedContainer_etdnh_6",rA="_demoImage_etdnh_10";var aA={container:nA,submittedContainer:oA,demoImage:rA},lA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.PERSONALIZATION_MODAL_KEY,title:e.submitted?e.$locale.baseText("personalizationModal.thanks"):e.$locale.baseText("personalizationModal.customizeN8n"),subtitle:e.submitted?"":e.$locale.baseText("personalizationModal.theseQuestionsHelpUs"),centerTitle:!0,showClose:!1,eventBus:e.modalBus,closeOnClickModal:!1,closeOnPressEscape:!1,width:"460px"},on:{enter:e.onSave},scopedSlots:e._u([{key:"content",fn:function(){return[e.submitted?t("div",{class:e.$style.submittedContainer},[t("img",{class:e.$style.demoImage,attrs:{src:e.baseUrl+"suggestednodes.png"}}),t("n8n-text",[e._v(e._s(e.$locale.baseText("personalizationModal.lookOutForThingsMarked")))])],1):t("div",{class:e.$style.container},[t("n8n-form-inputs",{attrs:{inputs:e.survey,columnView:!0,eventBus:e.formBus},on:{submit:e.onSubmit}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",[e.submitted?t("n8n-button",{attrs:{label:e.$locale.baseText("personalizationModal.getStarted"),float:"right"},on:{click:e.closeDialog}}):t("n8n-button",{attrs:{loading:e.isSaving,label:e.$locale.baseText("personalizationModal.continue"),float:"right"},on:{click:e.onSave}})],1)]},proxy:!0}])})},cA=[];const Ju={$style:aA};function dA(s){for(var e in Ju)this[e]=Ju[e]}var uA=_(iA,lA,cA,!1,dA,null,null,null),hA=uA.exports,pA=m.extend({props:{disabled:{default:!1},search:{default:""}},data(){return{maxLength:Ya}},methods:{onAddNew(){this.$emit("createEnable")},onSearchChange(s){this.$emit("searchChange",s)}}});var fA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-row",{staticClass:"tags-header"},[t("el-col",{attrs:{span:10}},[t("n8n-input",{attrs:{placeholder:e.$locale.baseText("tagsTableHeader.searchTags"),value:e.search,disabled:e.disabled,clearable:"",maxlength:e.maxLength},on:{input:e.onSearchChange}},[t("font-awesome-icon",{attrs:{slot:"prefix",icon:"search"},slot:"prefix"})],1)],1),t("el-col",{attrs:{span:14}},[t("n8n-button",{attrs:{disabled:e.disabled,icon:"plus",label:e.$locale.baseText("tagsTableHeader.addNew"),size:"large",float:"right"},on:{click:e.onAddNew}})],1)],1)},mA=[],gA=_(pA,fA,mA,!1,null,"2d6eee8e",null,null),wA=gA.exports;const yA=350,vA=100;var _A=m.extend({name:"TagsTable",props:["rows","isLoading","newName","isSaving"],data(){return{maxLength:Ya}},mounted(){this.$props.rows.length===1&&this.$props.rows[0].create&&this.focusOnInput()},methods:{getRowClasses:({row:s})=>s.disable?"disabled":"",getSpan({row:s,columnIndex:e}){return e===0&&s.tag&&s.delete?[1,2]:e===1&&s.tag&&s.delete?[0,0]:1},enableUpdate(s){s.tag&&(this.$emit("updateEnable",s.tag.id),this.$emit("newNameChange",s.tag.name),this.focusOnInput())},enableDelete(s){s.tag&&(this.$emit("deleteEnable",s.tag.id),this.focusOnDelete())},cancel(){this.$emit("cancelOperation")},apply(){this.$emit("applyOperation")},onNewNameChange(s){this.$emit("newNameChange",s)},focusOnInput(){setTimeout(()=>{const s=this.$refs.nameInput;s&&s.focus&&s.focus()},yA)},focusOnDelete(){setTimeout(()=>{const s=this.$refs.deleteHiddenInput;s&&s.focus&&s.focus()},vA)},focusOnCreate(){this.$refs.table.$refs.bodyWrapper.scrollTop=0,this.focusOnInput()}},watch:{rows(s){s&&s[0]&&s[0].create&&this.focusOnCreate()}}});var OA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"table",attrs:{stripe:"","max-height":"450","empty-text":e.$locale.baseText("tagsTable.noMatchingTagsExist"),data:e.rows,"span-method":e.getSpan,"row-class-name":e.getRowClasses}},[t("el-table-column",{attrs:{label:e.$locale.baseText("tagsTable.name")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{key:i.row.id,staticClass:"name",on:{keydown:function(n){n.stopPropagation()}}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[i.row.create||i.row.update?t("n8n-input",{ref:"nameInput",attrs:{value:e.newName,maxlength:e.maxLength},on:{input:e.onNewNameChange}}):i.row.delete?t("span",[t("span",[e._v(e._s(e.$locale.baseText("tagsTable.areYouSureYouWantToDeleteThisTag")))]),t("input",{ref:"deleteHiddenInput",staticClass:"hidden"})]):t("span",{class:{disabled:i.row.disable}},[e._v(" "+e._s(i.row.tag.name)+" ")])],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$locale.baseText("tagsTable.usage"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("transition",{attrs:{name:"fade",mode:"out-in"}},[!i.row.create&&!i.row.delete?t("div",{class:{disabled:i.row.disable}},[e._v(" "+e._s(i.row.usage)+" ")]):e._e()])]}}])}),t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(i){return[t("transition",{attrs:{name:"fade",mode:"out-in"}},[i.row.create?t("div",{staticClass:"ops"},[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.cancel"),type:"secondary",disabled:e.isSaving},on:{click:function(n){return n.stopPropagation(),e.cancel.apply(null,arguments)}}}),t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.createTag"),loading:e.isSaving},on:{click:function(n){return n.stopPropagation(),e.apply.apply(null,arguments)}}})],1):i.row.update?t("div",{staticClass:"ops"},[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.cancel"),type:"secondary",disabled:e.isSaving},on:{click:function(n){return n.stopPropagation(),e.cancel.apply(null,arguments)}}}),t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.saveChanges"),loading:e.isSaving},on:{click:function(n){return n.stopPropagation(),e.apply.apply(null,arguments)}}})],1):i.row.delete?t("div",{staticClass:"ops"},[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.cancel"),type:"secondary",disabled:e.isSaving},on:{click:function(n){return n.stopPropagation(),e.cancel.apply(null,arguments)}}}),t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.deleteTag"),loading:e.isSaving},on:{click:function(n){return n.stopPropagation(),e.apply.apply(null,arguments)}}})],1):i.row.disable?e._e():t("div",{staticClass:"ops main"},[t("n8n-icon-button",{attrs:{title:e.$locale.baseText("tagsTable.editTag"),icon:"pen"},on:{click:function(n){return n.stopPropagation(),e.enableUpdate(i.row)}}}),i.row.canDelete?t("n8n-icon-button",{attrs:{title:e.$locale.baseText("tagsTable.deleteTag"),icon:"trash"},on:{click:function(n){return n.stopPropagation(),e.enableDelete(i.row)}}}):e._e()],1)])]}}])})],1)},bA=[],xA=_(_A,OA,bA,!1,null,"d19305d7",null,null),$A=xA.exports;const TA=(s,e)=>s.toLowerCase().trim().includes(e.toLowerCase().trim());var kA=m.extend({components:{TagsTableHeader:wA,TagsTable:$A},name:"TagsView",props:["tags","isLoading"],data(){return{createEnabled:!1,deleteId:"",updateId:"",search:"",newName:"",stickyIds:new Set,isSaving:!1}},computed:{...F("users",["canUserDeleteTags"]),isCreateEnabled(){return(this.$props.tags||[]).length===0||this.$data.createEnabled},rows(){const s=i=>i&&i>0?this.$locale.baseText("tagsView.inUse",{adjustToNumber:i}):this.$locale.baseText("tagsView.notBeingUsed"),e=this.isCreateEnabled||this.$data.updateId||this.$data.deleteId,t=(this.$props.tags||[]).filter(i=>this.stickyIds.has(i.id)||TA(i.name,this.$data.search)).map(i=>({tag:i,usage:s(i.usageCount),disable:e&&i.id!==this.deleteId&&i.id!==this.$data.updateId,update:e&&i.id===this.$data.updateId,delete:e&&i.id===this.$data.deleteId,canDelete:this.canUserDeleteTags}));return this.isCreateEnabled?[{create:!0},...t]:t}},methods:{onNewNameChange(s){this.newName=s},onSearchChange(s){this.$data.stickyIds.clear(),this.$data.search=s},isHeaderDisabled(){return this.$props.isLoading||!!(this.isCreateEnabled||this.$data.updateId||this.$data.deleteId)},onUpdateEnable(s){this.updateId=s},disableUpdate(){this.updateId="",this.newName=""},updateTag(){this.$data.isSaving=!0;const s=this.newName.trim(),e=t=>{this.$data.isSaving=!1,t&&(this.stickyIds.add(this.updateId),this.disableUpdate())};this.$emit("update",this.updateId,s,e)},onDeleteEnable(s){this.deleteId=s},disableDelete(){this.deleteId=""},deleteTag(){this.$data.isSaving=!0;const s=e=>{e&&this.disableDelete(),this.$data.isSaving=!1};this.$emit("delete",this.deleteId,s)},onCreateEnable(){this.$data.createEnabled=!0,this.$data.newName=""},disableCreate(){this.$data.createEnabled=!1,this.$emit("disableCreate")},createTag(){this.$data.isSaving=!0;const s=this.$data.newName.trim(),e=(t,i)=>{t&&(this.stickyIds.add(t.id),this.disableCreate()),this.$data.isSaving=!1};this.$emit("create",s,e)},applyOperation(){this.$data.isSaving||(this.isCreateEnabled?this.createTag():this.$data.updateId?this.updateTag():this.$data.deleteId&&this.deleteTag())},cancelOperation(){this.$data.isSaving||(this.isCreateEnabled?this.disableCreate():this.$data.updateId?this.disableUpdate():this.$data.deleteId&&this.disableDelete())}}}),SA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{on:{keyup:[function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.applyOperation.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.cancelOperation.apply(null,arguments)}]}},[t("TagsTableHeader",{attrs:{search:e.search,disabled:e.isHeaderDisabled()},on:{searchChange:e.onSearchChange,createEnable:e.onCreateEnable}}),t("TagsTable",{ref:"tagsTable",attrs:{rows:e.rows,isLoading:e.isLoading,isSaving:e.isSaving,newName:e.newName},on:{newNameChange:e.onNewNameChange,updateEnable:e.onUpdateEnable,deleteEnable:e.onDeleteEnable,cancelOperation:e.cancelOperation,applyOperation:e.applyOperation}})],1)},EA=[],CA=_(kA,SA,EA,!1,null,null,null,null),NA=CA.exports,PA=m.extend({name:"NoTagsView"});var DA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"container"},[t("el-col",{staticClass:"notags",attrs:{span:16}},[t("div",{staticClass:"icon"},[e._v("\u{1F5C4}\uFE0F")]),t("div",[t("div",{staticClass:"headline"},[e._v(e._s(e.$locale.baseText("noTagsView.readyToOrganizeYourWorkflows")))]),t("div",{staticClass:"description"},[e._v(" "+e._s(e.$locale.baseText("noTagsView.withWorkflowTagsYouReFree"))+" ")])]),t("n8n-button",{attrs:{label:"Create a tag",size:"large"},on:{click:function(i){return e.$emit("enableCreate")}}})],1)],1)},IA=[],AA=_(PA,DA,IA,!1,null,"05665e5e",null,null),RA=AA.exports,MA=N(V).extend({name:"TagsManager",created(){this.$store.dispatch("tags/fetchAll",{force:!0,withUsageCount:!0})},data(){return{tagIds:this.$store.getters["tags/allTags"].map(e=>e.id),isCreating:!1,modalBus:new m,TAGS_MANAGER_MODAL_KEY:Lo}},components:{TagsView:NA,NoTagsView:RA,Modal:Me},computed:{...F("tags",["isLoading"]),tags(){return this.$data.tagIds.map(s=>this.$store.getters["tags/getTagById"](s)).filter(Boolean)},hasTags(){return this.tags.length>0}},methods:{onEnableCreate(){this.$data.isCreating=!0},onDisableCreate(){this.$data.isCreating=!1},async onCreate(s,e){try{if(!s)throw new Error(this.$locale.baseText("tagsManager.tagNameCannotBeEmpty"));const t=await this.$store.dispatch("tags/create",s);this.$data.tagIds=[t.id].concat(this.$data.tagIds),e(t)}catch(t){const i=escape(s);this.$showError(t,this.$locale.baseText("tagsManager.showError.onCreate.title"),this.$locale.baseText("tagsManager.showError.onCreate.message",{interpolate:{escapedName:i}})+":"),e(null,t)}},async onUpdate(s,e,t){const n=this.$store.getters["tags/getTagById"](s).name;try{if(!e)throw new Error(this.$locale.baseText("tagsManager.tagNameCannotBeEmpty"));if(e===n){t(!0);return}const o=await this.$store.dispatch("tags/rename",{id:s,name:e});t(!!o),this.$showMessage({title:this.$locale.baseText("tagsManager.showMessage.onUpdate.title"),type:"success"})}catch(o){const r=escape(n);this.$showError(o,this.$locale.baseText("tagsManager.showError.onUpdate.title"),this.$locale.baseText("tagsManager.showError.onUpdate.message",{interpolate:{escapedName:r}})+":"),t(!1,o)}},async onDelete(s,e){const i=this.$store.getters["tags/getTagById"](s).name;try{const n=await this.$store.dispatch("tags/delete",s);if(!n)throw new Error(this.$locale.baseText("tagsManager.couldNotDeleteTag"));this.$data.tagIds=this.$data.tagIds.filter(o=>o!==s),e(n),this.$showMessage({title:this.$locale.baseText("tagsManager.showMessage.onDelete.title"),type:"success"})}catch(n){const o=escape(i);this.$showError(n,this.$locale.baseText("tagsManager.showError.onDelete.title"),this.$locale.baseText("tagsManager.showError.onDelete.message",{interpolate:{escapedName:o}})+":"),e(!1,n)}},onEnter(){this.isLoading||(this.hasTags?this.modalBus.$emit("close"):this.onEnableCreate())}}}),WA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{title:e.$locale.baseText("tagsManager.manageTags"),name:e.TAGS_MANAGER_MODAL_KEY,eventBus:e.modalBus,minWidth:"620px",minHeight:"420px"},on:{enter:e.onEnter},scopedSlots:e._u([{key:"content",fn:function(){return[t("el-row",[e.hasTags||e.isCreating?t("TagsView",{attrs:{isLoading:e.isLoading,tags:e.tags},on:{create:e.onCreate,update:e.onUpdate,delete:e.onDelete,disableCreate:e.onDisableCreate}}):t("NoTagsView",{on:{enableCreate:e.onEnableCreate}})],1)]},proxy:!0},{key:"footer",fn:function({close:i}){return[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsManager.done"),float:"right"},on:{click:i}})]}}])})},LA=[],QA=_(MA,WA,LA,!1,null,null,null,null),BA=QA.exports,UA=m.extend({name:"ModalDrawer",props:{name:{type:String},beforeClose:{type:Function},eventBus:{type:m},direction:{type:String},modal:{type:Boolean,default:!0},width:{type:String},wrapperClosable:{type:Boolean,default:!0}},mounted(){window.addEventListener("keydown",this.onWindowKeydown),this.$props.eventBus&&this.$props.eventBus.$on("close",()=>{this.close()});const s=document.activeElement;s&&s.blur()},beforeDestroy(){window.removeEventListener("keydown",this.onWindowKeydown)},methods:{onWindowKeydown(s){!this.isActive||s&&s.keyCode===13&&this.handleEnter()},handleEnter(){this.isActive&&this.$emit("enter")},async close(){this.beforeClose&&await this.beforeClose()===!1||this.$store.commit("ui/closeModal",this.$props.name)}},computed:{isActive(){return this.$store.getters["ui/isModalActive"](this.$props.name)},visible(){return this.$store.getters["ui/isModalOpen"](this.$props.name)}}});var VA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-drawer",{attrs:{direction:e.direction,visible:e.visible,size:e.width,"before-close":e.close,modal:e.modal,wrapperClosable:e.wrapperClosable},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("header")]},proxy:!0}],null,!0)},[[t("span",{on:{keydown:function(i){i.stopPropagation()}}},[e._t("content")],2)]],2)},FA=[],jA=_(UA,VA,FA,!1,null,null,null,null),zg=jA.exports,zA=m.extend({name:"NodeIcon",props:{nodeType:{},size:{type:Number,required:!1},disabled:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!1}},computed:{type(){const s=this.nodeType;let e="unknown";return s&&(s.iconData?e=s.iconData.type:s.icon&&(e=s.icon.split(":")[0]==="file"?"file":"icon")),e},color(){const s=this.nodeType;return s&&s.defaults&&s.defaults.color?s.defaults.color.toString():""},iconSource(){const s=this.nodeType,e=this.$store.getters.getRestUrl,t={};if(s){if(s.iconData)return{icon:s.iconData.icon,fileBuffer:s.iconData.fileBuffer};if(s.icon){const[i,n]=s.icon.split(":");i==="file"?t.path=`${e}/node-icon/${s.name}`:t.icon=n}}return t}}});var GA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-node-icon",{attrs:{type:e.type,src:e.iconSource.path||e.iconSource.fileBuffer,name:e.iconSource.icon,color:e.color,disabled:e.disabled,size:e.size,circle:e.circle,nodeTypeName:e.nodeType?e.nodeType.displayName:"",showTooltip:e.showTooltip},on:{click:i=>e.$emit("click")}})},HA=[],qA=_(zA,GA,HA,!1,null,null,null,null),pi=qA.exports,XA={props:["text","type"]};const YA="_badge_uyyku_1",ZA="_danger_uyyku_11 _badge_uyyku_1",KA="_warning_uyyku_18 _badge_uyyku_1";var JA={badge:YA,danger:ZA,warning:KA},eR=function(){var e=this,t=e._self._c;return t("fragment",[e.type==="danger"?t("el-tag",{class:e.$style.danger,attrs:{type:"danger",size:"small"}},[e._v(" "+e._s(e.text)+" ")]):e.type==="warning"?t("el-tag",{class:e.$style.warning,attrs:{size:"small"}},[e._v(" "+e._s(e.text)+" ")]):e._e()],1)},tR=[];const eh={$style:JA};function sR(s){for(var e in eh)this[e]=eh[e]}var iR=_(XA,eR,tR,!1,sR,null,null,null),Gg=iR.exports;const nR="_icon_z329d_1";var oR={icon:nR};const rR={};var aR=function(){var e=this,t=e._self._c;return t("n8n-tooltip",{attrs:{content:" ",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._t("default")],2),t("font-awesome-icon",{class:e.$style.icon,attrs:{icon:"exclamation-triangle"}})],1)},lR=[];const th={$style:oR};function cR(s){for(var e in th)this[e]=th[e]}var dR=_(rR,aR,lR,!1,cR,null,null,null),jl=dR.exports;m.component("NodeIcon",pi);m.component("TimeAgo",sr);m.component("Badge",Gg);m.component("WarningTooltip",jl);var uR=m.extend({components:{NodeIcon:pi,TimeAgo:sr,Badge:Gg,WarningTooltip:jl},name:"VersionCard",props:["version"],nodeName(s){return s!==null?s.displayName:this.$locale.baseText("versionCard.unknown")}});const hR="_card_1jaen_1",pR="_header_1jaen_13",fR="_name_1jaen_28",mR="_divider_1jaen_35",gR="_description_1jaen_41",wR="_nodes_1jaen_55";var yR={card:hR,header:pR,name:fR,divider:mR,description:gR,"release-date":"_release-date_1jaen_48",nodes:wR},vR=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.version?t("a",{class:e.$style.card,attrs:{set:e.version=e.version,href:e.version.documentationUrl,target:"_blank"}},[t("div",{class:e.$style.header},[t("div",[t("div",{class:e.$style.name},[e._v(" "+e._s(`${e.$locale.baseText("versionCard.version")} ${e.version.name}`)+" ")]),e.version.hasSecurityIssue?t("WarningTooltip",[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("versionCard.thisVersionHasASecurityIssue"))}})]],2):e._e(),e.version.hasSecurityFix?t("Badge",{attrs:{text:e.$locale.baseText("versionCard.securityUpdate"),type:"danger"}}):e._e(),e.version.hasBreakingChange?t("Badge",{attrs:{text:e.$locale.baseText("versionCard.breakingChanges"),type:"warning"}}):e._e()],1),t("div",{class:e.$style["release-date"]},[e._v(" "+e._s(e.$locale.baseText("versionCard.released"))+"\xA0"),t("TimeAgo",{attrs:{date:e.version.createdAt}})],1)]),e.version.description||e.version.nodes&&e.version.nodes.length?t("div",{class:e.$style.divider}):e._e(),t("div",[e.version.description?t("div",{class:e.$style.description,domProps:{innerHTML:e._s(e.version.description)}}):e._e(),e.version.nodes&&e.version.nodes.length>0?t("div",{class:e.$style.nodes},e._l(e.version.nodes,function(i){return t("NodeIcon",{key:i.name,attrs:{nodeType:i,title:e.$options.nodeName(i)}})}),1):e._e()])]):e._e()},_R=[];const sh={$style:yR};function OR(s){for(var e in sh)this[e]=sh[e]}var bR=_(uR,vR,_R,!1,OR,null,null,null),xR=bR.exports,$R=m.extend({name:"UpdatesPanel",components:{ModalDrawer:zg,VersionCard:xR,TimeAgo:sr},computed:{...F("versions",["nextVersions","currentVersion","infoUrl"])},data(){return{VERSIONS_MODAL_KEY:Ns}}});const TR="_title_176t2_1",kR="_description_176t2_9",SR="_versions_176t2_25";var ER={title:TR,description:kR,versions:SR,"versions-card":"_versions-card_176t2_34"},CR=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ModalDrawer",{attrs:{name:e.VERSIONS_MODAL_KEY,direction:"ltr",width:"520px"}},[t("template",{slot:"header"},[t("span",{class:e.$style.title},[e._v(" "+e._s(e.$locale.baseText("updatesPanel.weVeBeenBusy"))+" ")])]),t("template",{slot:"content"},[t("section",{class:e.$style.description},[e.currentVersion?t("p",[e._v(" "+e._s(e.$locale.baseText("updatesPanel.youReOnVersion",{interpolate:{currentVersionName:e.currentVersion.name}}))+" "),t("strong",[t("TimeAgo",{attrs:{date:e.currentVersion.createdAt}})],1),e._v(e._s(e.$locale.baseText("updatesPanel.andIs"))+" "),t("strong",[e._v(e._s(e.$locale.baseText("updatesPanel.version",{interpolate:{numberOfVersions:e.nextVersions.length,howManySuffix:e.nextVersions.length>1?"s":""}})))]),e._v(" "+e._s(e.$locale.baseText("updatesPanel.behindTheLatest"))+" ")]):e._e(),e.infoUrl?t("n8n-link",{attrs:{to:e.infoUrl,bold:!0}},[t("font-awesome-icon",{attrs:{icon:"info-circle"}}),t("span",[e._v(" "+e._s(e.$locale.baseText("updatesPanel.howToUpdateYourN8nVersion"))+" ")])],1):e._e()],1),t("section",{class:e.$style.versions},e._l(e.nextVersions,function(i){return t("div",{key:i.name,class:e.$style["versions-card"]},[t("VersionCard",{attrs:{version:i}})],1)}),0)])],2)},NR=[];const ih={$style:ER};function PR(s){for(var e in ih)this[e]=ih[e]}var DR=_($R,CR,NR,!1,PR,null,null,null),IR=DR.exports;const AR="How likely are you to recommend n8n to a friend or colleague?",RR="Great to hear! Can we reach out to see how we can make n8n even better for you?",MR="Thanks for your feedback! We'd love to understand how we can improve. Can we reach out?";var WR=N(ie).extend({name:"ValueSurvey",props:["isActive"],components:{ModalDrawer:zg},watch:{isActive(s){s&&this.$telemetry.track("User shown value survey",{instance_id:this.$store.getters.instanceId})}},computed:{getTitle(){return this.form.value!==""?Number(this.form.value)>7?RR:MR:AR},isEmailValid(){return jo.test(String(this.form.email).toLowerCase())}},data(){return{form:{email:"",value:""},showButtons:!0,VALUE_SURVEY_MODAL_KEY:Bo,modalBus:new m}},methods:{closeDialog(){this.form.value===""&&this.$telemetry.track("User responded value survey score",{instance_id:this.$store.getters.instanceId,nps:""}),this.form.value!==""&&this.form.email===""&&this.$telemetry.track("User responded value survey email",{instance_id:this.$store.getters.instanceId,email:""})},onInputChange(s){this.form.email=s},async selectSurveyValue(s){this.form.value=s,this.showButtons=!1,(await this.$store.dispatch("settings/submitValueSurvey",{value:this.form.value})).updated&&this.$telemetry.track("User responded value survey score",{instance_id:this.$store.getters.instanceId,nps:this.form.value})},async send(){this.isEmailValid&&((await this.$store.dispatch("settings/submitValueSurvey",{email:this.form.email,value:this.form.value})).updated&&(this.$telemetry.track("User responded value survey email",{instance_id:this.$store.getters.instanceId,email:this.form.email}),this.$showMessage({title:"Thanks for your feedback",message:'If you\u2019d like to help even more, leave us a <a target="_blank" href="https://www.g2.com/products/n8n/reviews/start">review on G2</a>.',type:"success",duration:15e3})),setTimeout(()=>{this.form.value="",this.form.email="",this.showButtons=!0},1e3),this.modalBus.$emit("close"))}}});const LR="_title_dy21g_1",QR="_content_dy21g_12",BR="_wrapper_dy21g_22",UR="_buttons_dy21g_27",VR="_container_dy21g_31",FR="_text_dy21g_46",jR="_input_dy21g_52",zR="_button_dy21g_27",GR="_disclaimer_dy21g_61";var HR={title:LR,content:QR,wrapper:BR,buttons:UR,container:VR,text:FR,input:jR,button:zR,disclaimer:GR};var qR=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ModalDrawer",{staticClass:"value-survey",attrs:{name:e.VALUE_SURVEY_MODAL_KEY,eventBus:e.modalBus,beforeClose:e.closeDialog,modal:!1,wrapperClosable:!1,direction:"btt",width:"120px"}},[t("template",{slot:"header"},[t("div",{class:e.$style.title},[t("n8n-heading",{attrs:{tag:"h2",size:"medium",color:"text-xlight"}},[e._v(e._s(e.getTitle))])],1)]),t("template",{slot:"content"},[t("section",{class:e.$style.content},[e.showButtons?t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.buttons},e._l(11,function(i){return t("div",{key:i-1,class:e.$style.container},[t("n8n-button",{attrs:{type:"tertiary",label:(i-1).toString(),square:""},on:{click:function(n){e.selectSurveyValue((i-1).toString())}}})],1)}),0),t("div",{class:e.$style.text},[t("n8n-text",{attrs:{size:"small",color:"text-xlight"}},[e._v("Not likely")]),t("n8n-text",{attrs:{size:"small",color:"text-xlight"}},[e._v("Very likely")])],1)]):t("div",{class:e.$style.email},[t("div",{class:e.$style.input,on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.send.apply(null,arguments)}}},[t("n8n-input",{attrs:{placeholder:"Your email address",size:"medium"},on:{input:e.onInputChange},model:{value:e.form.email,callback:function(i){e.$set(e.form,"email",i)},expression:"form.email"}}),t("div",{class:e.$style.button},[t("n8n-button",{attrs:{label:"Send",float:"right",disabled:!e.isEmailValid},on:{click:e.send}})],1)],1),t("div",{class:e.$style.disclaimer},[t("n8n-text",{attrs:{size:"small",color:"text-xlight"}},[e._v(" David from our product team will get in touch personally ")])],1)])])])],2)},XR=[];const nh={$style:HR};function YR(s){for(var e in nh)this[e]=nh[e]}var ZR=_(WR,qR,XR,!1,YR,null,null,null),KR=ZR.exports,JR=N(ve,be,Ce,V).extend({name:"WorkflowSettings",components:{Modal:Me},data(){return{isLoading:!0,helpTexts:{errorWorkflow:this.$locale.baseText("workflowSettings.helpTexts.errorWorkflow"),timezone:this.$locale.baseText("workflowSettings.helpTexts.timezone"),saveDataErrorExecution:this.$locale.baseText("workflowSettings.helpTexts.saveDataErrorExecution"),saveDataSuccessExecution:this.$locale.baseText("workflowSettings.helpTexts.saveDataSuccessExecution"),saveExecutionProgress:this.$locale.baseText("workflowSettings.helpTexts.saveExecutionProgress"),saveManualExecutions:this.$locale.baseText("workflowSettings.helpTexts.saveManualExecutions"),executionTimeoutToggle:this.$locale.baseText("workflowSettings.helpTexts.executionTimeoutToggle"),executionTimeout:this.$locale.baseText("workflowSettings.helpTexts.executionTimeout"),workflowCallerPolicy:this.$locale.baseText("workflowSettings.helpTexts.workflowCallerPolicy"),workflowCallerIds:this.$locale.baseText("workflowSettings.helpTexts.workflowCallerIds")},defaultValues:{timezone:"America/New_York",saveDataErrorExecution:"all",saveDataSuccessExecution:"all",saveExecutionProgress:!1,saveManualExecutions:!1,workflowCallerPolicy:""},workflowCallerPolicyOptions:[],saveDataErrorExecutionOptions:[],saveDataSuccessExecutionOptions:[],saveExecutionProgressOptions:[],saveManualOptions:[],timezones:[],workflowSettings:{},workflows:[],executionTimeout:this.$store.getters.executionTimeout,maxExecutionTimeout:this.$store.getters.maxExecutionTimeout,timeoutHMS:{hours:0,minutes:0,seconds:0},modalBus:new m,WORKFLOW_SETTINGS_MODAL_KEY:Lt}},computed:{...F(["workflowName","workflowId"]),isWorkflowSharingEnabled(){return this.$store.getters["settings/isWorkflowSharingEnabled"]}},async mounted(){if(!this.workflowId||this.workflowId===fe){this.$showMessage({title:"No workflow active",message:"No workflow active to display settings of.",type:"error",duration:0}),this.closeDialog();return}this.defaultValues.saveDataErrorExecution=this.$store.getters.saveDataErrorExecution,this.defaultValues.saveDataSuccessExecution=this.$store.getters.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.$store.getters.saveManualExecutions,this.defaultValues.timezone=this.$store.getters.timezone,this.defaultValues.workflowCallerPolicy=this.$store.getters["settings/workflowCallerPolicyDefaultOption"],this.isLoading=!0;const s=[];s.push(this.loadWorkflows()),s.push(this.loadSaveDataErrorExecutionOptions()),s.push(this.loadSaveDataSuccessExecutionOptions()),s.push(this.loadSaveExecutionProgressOptions()),s.push(this.loadSaveManualOptions()),s.push(this.loadTimezones()),s.push(this.loadWorkflowCallerPolicyOptions());try{await Promise.all(s)}catch(t){this.$showError(t,"Problem loading settings","The following error occurred loading the data:")}const e=Se(this.$store.getters.workflowSettings);e.timezone===void 0&&(e.timezone="DEFAULT"),e.saveDataErrorExecution===void 0&&(e.saveDataErrorExecution="DEFAULT"),e.saveDataSuccessExecution===void 0&&(e.saveDataSuccessExecution="DEFAULT"),e.saveExecutionProgress===void 0&&(e.saveExecutionProgress="DEFAULT"),e.saveManualExecutions===void 0&&(e.saveManualExecutions="DEFAULT"),e.callerPolicy===void 0&&(e.callerPolicy=this.defaultValues.workflowCallerPolicy),e.executionTimeout===void 0&&(e.executionTimeout=this.$store.getters.executionTimeout),e.maxExecutionTimeout===void 0&&(e.maxExecutionTimeout=this.$store.getters.maxExecutionTimeout),m.set(this,"workflowSettings",e),this.timeoutHMS=this.convertToHMS(e.executionTimeout),this.isLoading=!1,this.$externalHooks().run("workflowSettings.dialogVisibleChanged",{dialogVisible:!0}),this.$telemetry.track("User opened workflow settings",{workflow_id:this.$store.getters.workflowId})},methods:{onCallerIdsInput(s){this.workflowSettings.callerIds=/^[0-9,\s]+$/.test(s)?s:s.replace(/[^0-9,\s]/g,"")},closeDialog(){this.modalBus.$emit("close"),this.$externalHooks().run("workflowSettings.dialogVisibleChanged",{dialogVisible:!1})},setTimeout(s,e){const t=e?parseInt(e,10):0;this.timeoutHMS={...this.timeoutHMS,[s]:t}},async loadWorkflowCallerPolicyOptions(){this.workflowCallerPolicyOptions=[{key:"any",value:this.$locale.baseText("workflowSettings.callerPolicy.options.any")},{key:"none",value:this.$locale.baseText("workflowSettings.callerPolicy.options.none")},{key:"workflowsFromAList",value:this.$locale.baseText("workflowSettings.callerPolicy.options.workflowsFromAList")}]},async loadSaveDataErrorExecutionOptions(){this.saveDataErrorExecutionOptions.length=0,this.saveDataErrorExecutionOptions.push.apply(this.saveDataErrorExecutionOptions,[{key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveDataErrorExecution==="all"?this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.save"):this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.doNotSave")}})},{key:"all",value:this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.save")},{key:"none",value:this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.doNotSave")}])},async loadSaveDataSuccessExecutionOptions(){this.saveDataSuccessExecutionOptions.length=0,this.saveDataSuccessExecutionOptions.push.apply(this.saveDataSuccessExecutionOptions,[{key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveDataSuccessExecution==="all"?this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.save"):this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.doNotSave")}})},{key:"all",value:this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.save")},{key:"none",value:this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.doNotSave")}])},async loadSaveExecutionProgressOptions(){this.saveExecutionProgressOptions.length=0,this.saveExecutionProgressOptions.push.apply(this.saveExecutionProgressOptions,[{key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveExecutionProgress?this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.yes"):this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.no")}})},{key:!0,value:this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.yes")},{key:!1,value:this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.no")}])},async loadSaveManualOptions(){this.saveManualOptions.length=0,this.saveManualOptions.push({key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveManualOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveManualExecutions?this.$locale.baseText("workflowSettings.saveManualOptions.yes"):this.$locale.baseText("workflowSettings.saveManualOptions.no")}})}),this.saveManualOptions.push({key:!0,value:this.$locale.baseText("workflowSettings.saveManualOptions.yes")}),this.saveManualOptions.push({key:!1,value:this.$locale.baseText("workflowSettings.saveManualOptions.no")})},async loadTimezones(){if(this.timezones.length!==0)return;const s=await this.restApi().getTimezones();let e=s[this.defaultValues.timezone];e===void 0&&(e=this.$locale.baseText("workflowSettings.defaultTimezoneNotValid")),this.timezones.push({key:"DEFAULT",value:this.$locale.baseText("workflowSettings.defaultTimezone",{interpolate:{defaultTimezoneValue:e}})});for(const t of Object.keys(s))this.timezones.push({key:t,value:s[t]})},async loadWorkflows(){const s=await this.restApi().getWorkflows();s.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),s.unshift({id:void 0,name:this.$locale.baseText("workflowSettings.noWorkflow")}),m.set(this,"workflows",s)},async saveSettings(){const s={settings:this.workflowSettings},{hours:e,minutes:t,seconds:i}=this.timeoutHMS;if(s.settings.executionTimeout=s.settings.executionTimeout!==-1?e*3600+t*60+i:-1,s.settings.executionTimeout===0){this.$showError(new Error(this.$locale.baseText("workflowSettings.showError.saveSettings1.errorMessage")),this.$locale.baseText("workflowSettings.showError.saveSettings1.title"),this.$locale.baseText("workflowSettings.showError.saveSettings1.message")+":");return}if(s.settings.executionTimeout>this.workflowSettings.maxExecutionTimeout){const{hours:r,minutes:a,seconds:l}=this.convertToHMS(this.workflowSettings.maxExecutionTimeout);this.$showError(new Error(this.$locale.baseText("workflowSettings.showError.saveSettings2.errorMessage",{interpolate:{hours:r.toString(),minutes:a.toString(),seconds:l.toString()}})),this.$locale.baseText("workflowSettings.showError.saveSettings2.title"),this.$locale.baseText("workflowSettings.showError.saveSettings2.message")+":");return}delete s.settings.maxExecutionTimeout,this.isLoading=!0,s.hash=this.$store.getters.workflowHash;try{const r=await this.restApi().updateWorkflow(this.$route.params.name,s);this.$store.commit("setWorkflowHash",r.hash)}catch(r){this.$showError(r,this.$locale.baseText("workflowSettings.showError.saveSettings3.title")),this.isLoading=!1;return}const n={};for(const r of Object.keys(this.workflowSettings))this.workflowSettings[r]!=="DEFAULT"&&(n[r]=this.workflowSettings[r]);const o=Se(this.$store.getters.workflowSettings);this.$store.commit("setWorkflowSettings",n),this.isLoading=!1,this.$showMessage({title:this.$locale.baseText("workflowSettings.showMessage.saveSettings.title"),type:"success"}),this.closeDialog(),this.$externalHooks().run("workflowSettings.saveSettings",{oldSettings:o}),this.$telemetry.track("User updated workflow settings",{workflow_id:this.$store.getters.workflowId})},toggleTimeout(){this.workflowSettings.executionTimeout=this.workflowSettings.executionTimeout===-1?0:-1},convertToHMS(s){if(s>0){const e=Math.floor(s/3600),t=s%3600,i=Math.floor(t/60),n=t%60;return{hours:e,minutes:i,seconds:n}}return{hours:0,minutes:0,seconds:0}}}});var eM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.WORKFLOW_SETTINGS_MODAL_KEY,width:"65%",maxHeight:"80%",title:e.$locale.baseText("workflowSettings.settingsFor",{interpolate:{workflowName:e.workflowName,workflowId:e.workflowId}}),eventBus:e.modalBus,scrollable:!0},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"workflow-settings"},[t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.errorWorkflow")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.helpTexts.errorWorkflow)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:"Select Workflow",size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.errorWorkflow,callback:function(i){e.$set(e.workflowSettings,"errorWorkflow",i)},expression:"workflowSettings.errorWorkflow"}},e._l(e.workflows,function(i){return t("n8n-option",{key:i.id,attrs:{label:i.name,value:i.id}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.timezone")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.timezone)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:"Select Timezone",size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.timezone,callback:function(i){e.$set(e.workflowSettings,"timezone",i)},expression:"workflowSettings.timezone"}},e._l(e.timezones,function(i){return t("n8n-option",{key:i.key,attrs:{label:i.value,value:i.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveDataErrorExecution")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.saveDataErrorExecution)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.saveDataErrorExecution,callback:function(i){e.$set(e.workflowSettings,"saveDataErrorExecution",i)},expression:"workflowSettings.saveDataErrorExecution"}},e._l(e.saveDataErrorExecutionOptions,function(i){return t("n8n-option",{key:i.key,attrs:{label:i.value,value:i.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveDataSuccessExecution")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.saveDataSuccessExecution)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.saveDataSuccessExecution,callback:function(i){e.$set(e.workflowSettings,"saveDataSuccessExecution",i)},expression:"workflowSettings.saveDataSuccessExecution"}},e._l(e.saveDataSuccessExecutionOptions,function(i){return t("n8n-option",{key:i.key,attrs:{label:i.value,value:i.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveManualExecutions")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.saveManualExecutions)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.saveManualExecutions,callback:function(i){e.$set(e.workflowSettings,"saveManualExecutions",i)},expression:"workflowSettings.saveManualExecutions"}},e._l(e.saveManualOptions,function(i){return t("n8n-option",{key:i.key,attrs:{label:i.value,value:i.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveExecutionProgress")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.saveExecutionProgress)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.saveExecutionProgress,callback:function(i){e.$set(e.workflowSettings,"saveExecutionProgress",i)},expression:"workflowSettings.saveExecutionProgress"}},e._l(e.saveExecutionProgressOptions,function(i){return t("n8n-option",{key:i.key,attrs:{label:i.value,value:i.key}})}),1)],1)],1),e.isWorkflowSharingEnabled?t("div",[t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.callerPolicy")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.workflowCallerPolicy)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.callerPolicy,callback:function(i){e.$set(e.workflowSettings,"callerPolicy",i)},expression:"workflowSettings.callerPolicy"}},e._l(e.workflowCallerPolicyOptions,function(i){return t("n8n-option",{key:i.key,attrs:{label:i.value,value:i.key}})}),1)],1)],1),e.workflowSettings.callerPolicy==="workflowsFromAList"?t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.callerIds")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.workflowCallerIds)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{attrs:{span:14}},[t("n8n-input",{attrs:{type:"text",size:"medium"},on:{input:e.onCallerIdsInput},model:{value:e.workflowSettings.callerIds,callback:function(i){e.$set(e.workflowSettings,"callerIds",i)},expression:"workflowSettings.callerIds"}})],1)],1):e._e()],1):e._e(),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.timeoutWorkflow")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.executionTimeoutToggle)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{attrs:{span:14}},[t("div",[t("el-switch",{ref:"inputField",attrs:{value:e.workflowSettings.executionTimeout>-1,"active-color":"#13ce66"},on:{change:e.toggleTimeout}})],1)])],1),e.workflowSettings.executionTimeout>-1?t("div",[t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.timeoutAfter")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.helpTexts.executionTimeout)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{attrs:{span:4}},[t("n8n-input",{attrs:{size:"medium",value:e.timeoutHMS.hours,min:0},on:{input:i=>e.setTimeout("hours",i)}},[t("template",{slot:"append"},[e._v(e._s(e.$locale.baseText("workflowSettings.hours")))])],2)],1),t("el-col",{staticClass:"timeout-input",attrs:{span:4}},[t("n8n-input",{attrs:{size:"medium",value:e.timeoutHMS.minutes,min:0,max:60},on:{input:i=>e.setTimeout("minutes",i)}},[t("template",{slot:"append"},[e._v(e._s(e.$locale.baseText("workflowSettings.minutes")))])],2)],1),t("el-col",{staticClass:"timeout-input",attrs:{span:4}},[t("n8n-input",{attrs:{size:"medium",value:e.timeoutHMS.seconds,min:0,max:60},on:{input:i=>e.setTimeout("seconds",i)}},[t("template",{slot:"append"},[e._v(e._s(e.$locale.baseText("workflowSettings.seconds")))])],2)],1)],1)],1):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"action-buttons"},[t("n8n-button",{attrs:{label:e.$locale.baseText("workflowSettings.save"),size:"large",float:"right"},on:{click:e.saveSettings}})],1)]},proxy:!0}])})},tM=[],sM=_(JR,eM,tM,!1,null,"0866aa47",null,null),Hg=sM.exports,iM=N(V).extend({components:{Modal:Me},name:"DeleteUserModal",props:{modalName:{type:String},activeId:{type:String}},data(){return{modalBus:new m,loading:!1,operation:"",deleteConfirmText:"",transferId:"",ignoreIds:[this.activeId]}},computed:{...F("users",["allUsers","currentUserId"]),userToDelete(){const s=this.$store.getters["users/getUserById"];return s(this.activeId)},isPending(){return this.userToDelete&&!this.userToDelete.firstName},title(){const s=this.userToDelete&&(this.userToDelete.fullName||this.userToDelete.email)||"";return this.$locale.baseText("settings.users.deleteUser",{interpolate:{user:s}})},enabled(){return!!(this.isPending||this.operation==="delete"&&this.deleteConfirmText===this.$locale.baseText("settings.users.deleteConfirmationText")||this.operation==="transfer"&&this.transferId)}},methods:{setOperation(s){this.operation=s,this.transferId=""},setConfirmText(s){this.deleteConfirmText=s},setTransferId(s){this.transferId=s},async onSubmit(){try{if(!this.enabled)return;this.loading=!0;const s={id:this.activeId};this.operation==="transfer"&&(s.transferId=this.transferId),await this.$store.dispatch("users/deleteUser",s);let e="";if(this.transferId){const t=this.$store.getters["users/getUserById"],i=t(this.transferId);e=this.$locale.baseText("settings.users.transferredToUser",{interpolate:{user:i.fullName||""}})}this.$showMessage({type:"success",title:this.$locale.baseText("settings.users.userDeleted"),message:e}),this.modalBus.$emit("close")}catch(s){this.$showError(s,this.$locale.baseText("settings.users.userDeletedError"))}this.loading=!1}}});const nM="_content_i27ti_1",oM="_innerContent_i27ti_8",rM="_optionInput_i27ti_12";var aM={content:nM,innerContent:oM,optionInput:rM},lM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,title:e.title,center:!0,width:"460px",eventBus:e.modalBus},on:{enter:e.onSubmit}},[t("template",{slot:"content"},[t("div",[e.isPending?t("div",[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("settings.users.confirmUserDeletion")))])],1):t("div",{class:e.$style.content},[t("div",[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("settings.users.confirmDataHandlingAfterDeletion")))])],1),t("el-radio",{attrs:{value:e.operation,label:"transfer"},on:{change:()=>e.setOperation("transfer")}},[t("n8n-text",{attrs:{color:"text-dark"}},[e._v(e._s(e.$locale.baseText("settings.users.transferWorkflowsAndCredentials")))])],1),e.operation==="transfer"?t("div",{class:e.$style.optionInput},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("settings.users.userToTransferTo")}},[t("n8n-user-select",{attrs:{users:e.allUsers,value:e.transferId,ignoreIds:e.ignoreIds,currentUserId:e.currentUserId},on:{input:e.setTransferId}})],1)],1):e._e(),t("el-radio",{attrs:{value:e.operation,label:"delete"},on:{change:()=>e.setOperation("delete")}},[t("n8n-text",{attrs:{color:"text-dark"}},[e._v(e._s(e.$locale.baseText("settings.users.deleteWorkflowsAndCredentials")))])],1),e.operation==="delete"?t("div",{class:e.$style.optionInput},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("settings.users.deleteConfirmationMessage")}},[t("n8n-input",{attrs:{value:e.deleteConfirmText,placeholder:e.$locale.baseText("settings.users.deleteConfirmationText")},on:{input:e.setConfirmText}})],1)],1):e._e()],1)])]),t("template",{slot:"footer"},[t("n8n-button",{attrs:{loading:e.loading,disabled:!e.enabled,label:e.$locale.baseText("settings.users.delete"),float:"right"},on:{click:e.onSubmit}})],1)],2)},cM=[];const oh={$style:aM};function dM(s){for(var e in oh)this[e]=oh[e]}var uM=_(iM,lM,cM,!1,dM,null,null,null),hM=uM.exports,pM=N(be).extend({name:"ExecutionTime",props:["startTime"],computed:{time(){if(!this.startTime)return"...";const s=this.nowTime-new Date(this.startTime).getTime();return this.displayTimer(s)}},data(){return{nowTime:-1,intervalTimer:null}},mounted(){this.setNow(),this.intervalTimer=setInterval(()=>{this.setNow()},1e3)},destroyed(){this.intervalTimer!==null&&clearInterval(this.intervalTimer)},methods:{setNow(){this.nowTime=new Date().getTime()}}});var fM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e._v(" "+e._s(e.time)+" ")])},mM=[],gM=_(pM,fM,mM,!1,null,null,null,null),wM=gM.exports;const qg=N(ve,ie,V).extend({data(){return{updatingWorkflowActivation:!1}},methods:{async activateCurrentWorkflow(s){const e=this.$store.getters.workflowId;return this.updateWorkflowActivation(e,!0,s)},async updateWorkflowActivation(s,e,t){this.updatingWorkflowActivation=!0;const i=this.$store.getters.nodesIssuesExist;let n=s;if(!n||n===fe){if(!await this.saveCurrentWorkflow()){this.updatingWorkflowActivation=!1;return}n=this.$store.getters.workflowId}const o=n===this.$store.getters.workflowId,a=this.$store.getters.getActiveWorkflows.includes(n),l={workflow_id:n,is_active:e,previous_status:a,ndv_input:t==="ndv"};this.$telemetry.track("User set workflow active status",l),this.$externalHooks().run("workflowActivate.updateWorkflowActivation",l);try{if(a&&e){this.$showMessage({title:this.$locale.baseText("workflowActivator.workflowIsActive"),type:"success"}),this.updatingWorkflowActivation=!1;return}if(o&&i){this.$showMessage({title:this.$locale.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title"),message:this.$locale.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.message"),type:"error"}),this.updatingWorkflowActivation=!1;return}await this.updateWorkflow({workflowId:n,active:e})}catch(d){const u=e===!0?"activated":"deactivated";this.$showError(d,this.$locale.baseText("workflowActivator.showError.title",{interpolate:{newStateName:u}})+":"),this.updatingWorkflowActivation=!1;return}const c=o?"workflow.activeChangeCurrent":"workflow.activeChange";this.$externalHooks().run(c,{workflowId:n,active:e}),this.$emit("workflowActiveChanged",{id:n,active:e}),this.updatingWorkflowActivation=!1,o&&(e&&window.localStorage.getItem(nf)!=="true"?this.$store.dispatch("ui/openModal",Qi):this.$store.dispatch("settings/fetchPromptsData"))}}});var yM=N(V,qg).extend({name:"WorkflowActivator",props:["workflowActive","workflowId"],computed:{...F({dirtyState:"getStateIsDirty"}),nodesIssuesExist(){return this.$store.getters.nodesIssuesExist},isWorkflowActive(){return this.$store.getters.getActiveWorkflows.includes(this.workflowId)},couldNotBeStarted(){return this.workflowActive===!0&&this.isWorkflowActive!==this.workflowActive},getActiveColor(){return this.couldNotBeStarted===!0?"#ff4949":"#13ce66"},isCurrentWorkflow(){return this.$store.getters.workflowId===this.workflowId},disabled(){return!this.workflowId||this.isCurrentWorkflow?!this.workflowActive&&!this.containsTrigger:!1},containsTrigger(){return ff(this.$store.getters.workflowTriggerNodes).length>0}},methods:{async activeChanged(s){return this.updateWorkflowActivation(this.workflowId,s)},async displayActivationError(){let s;try{const e=await this.restApi().getActivationError(this.workflowId);e===void 0?s=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataUndefined"):s=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataNotUndefined",{interpolate:{message:e.error.message}})}catch{s=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.catchBlock")}this.$showMessage({title:this.$locale.baseText("workflowActivator.showMessage.displayActivationError.title"),message:s,type:"warning",duration:0})}}});const vM="_activeStatusText_nj9sv_1";var _M={activeStatusText:vM};var OM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"workflow-activator"},[t("div",{class:e.$style.activeStatusText},[e.workflowActive?t("n8n-text",{attrs:{color:e.couldNotBeStarted?"danger":"success",size:"small",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflowActivator.active"))+" ")]):t("n8n-text",{attrs:{color:"text-base",size:"small",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflowActivator.inactive"))+" ")])],1),t("n8n-tooltip",{attrs:{disabled:!e.disabled,placement:"bottom"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$locale.baseText("workflowActivator.thisWorkflowHasNoTriggerNodes")))]),t("el-switch",{directives:[{name:"loading",rawName:"v-loading",value:e.updatingWorkflowActivation,expression:"updatingWorkflowActivation"}],attrs:{value:e.workflowActive,title:e.workflowActive?e.$locale.baseText("workflowActivator.deactivateWorkflow"):e.$locale.baseText("workflowActivator.activateWorkflow"),disabled:e.disabled||e.updatingWorkflowActivation,"active-color":e.getActiveColor,"inactive-color":"#8899AA","element-loading-spinner":"el-icon-loading"},on:{change:e.activeChanged}})],1),e.couldNotBeStarted?t("div",{staticClass:"could-not-be-started"},[t("n8n-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$locale.baseText("workflowActivator.theWorkflowIsSetToBeActiveBut"))},on:{click:e.displayActivationError},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"},on:{click:e.displayActivationError}})],1)],1):e._e()],1)},bM=[];const rh={$style:_M};function xM(s){for(var e in rh)this[e]=rh[e]}var $M=_(yM,OM,bM,!1,xM,"fba2f12d",null,null),zl=$M.exports,TM=N(ve,be,Ce,V).extend({name:"ExecutionsList",components:{ExecutionTime:wM,WorkflowActivator:zl,Modal:Me},data(){return{finishedExecutions:[],finishedExecutionsCount:0,finishedExecutionsCountEstimated:!1,checkAll:!1,autoRefresh:!0,autoRefreshInterval:void 0,filter:{status:"ALL",workflowId:"ALL"},isDataLoading:!1,requestItemsPerRequest:10,selectedItems:{},stoppingExecutions:[],workflows:[],modalBus:new m,EXECUTIONS_MODAL_KEY:Zi}},async created(){await this.loadWorkflows(),await this.refreshData(),this.handleAutoRefreshToggle(),this.$externalHooks().run("executionsList.openDialog"),this.$telemetry.track("User opened Executions log",{workflow_id:this.$store.getters.workflowId})},beforeDestroy(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0)},computed:{statuses(){return[{id:"ALL",name:this.$locale.baseText("executionsList.anyStatus")},{id:"error",name:this.$locale.baseText("executionsList.error")},{id:"running",name:this.$locale.baseText("executionsList.running")},{id:"success",name:this.$locale.baseText("executionsList.success")},{id:"waiting",name:this.$locale.baseText("executionsList.waiting")}]},activeExecutions(){return this.$store.getters.getActiveExecutions},combinedExecutions(){const s=[];return["ALL","running"].includes(this.filter.status)&&s.push.apply(s,this.activeExecutions),["ALL","error","success","waiting"].includes(this.filter.status)&&s.push.apply(s,this.finishedExecutions),s},combinedExecutionsCount(){return 0+this.activeExecutions.length+this.finishedExecutionsCount},numSelected(){return this.checkAll===!0?this.finishedExecutionsCount:Object.keys(this.selectedItems).length},isIndeterminate(){return this.checkAll===!0?!1:this.numSelected>0},workflowFilterCurrent(){const s={};return this.filter.workflowId!=="ALL"&&(s.workflowId=this.filter.workflowId),s},workflowFilterPast(){const s={};return this.filter.workflowId!=="ALL"&&(s.workflowId=this.filter.workflowId),this.filter.status==="waiting"?s.waitTill=!0:["error","success"].includes(this.filter.status)&&(s.finished=this.filter.status==="success"),s}},methods:{closeDialog(){this.modalBus.$emit("close")},convertToDisplayDate:yx,displayExecution(s,e){if(e.metaKey||e.ctrlKey){const t=this.$router.resolve({name:O.EXECUTION_PREVIEW,params:{name:s.workflowId,executionId:s.id}});window.open(t.href,"_blank");return}this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:s.workflowId,executionId:s.id}}).catch(()=>{}),this.modalBus.$emit("closeAll")},handleAutoRefreshToggle(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0),this.autoRefresh&&(this.autoRefreshInterval=setInterval(()=>this.loadAutoRefresh(),4*1e3))},handleCheckAllChange(){this.checkAll===!1&&m.set(this,"selectedItems",{})},handleCheckboxChanged(s){this.selectedItems[s]?m.delete(this.selectedItems,s):m.set(this.selectedItems,s,!0)},async handleDeleteSelected(){if(await this.confirmMessage(this.$locale.baseText("executionsList.confirmMessage.message",{interpolate:{numSelected:this.numSelected.toString()}}),this.$locale.baseText("executionsList.confirmMessage.headline"),"warning",this.$locale.baseText("executionsList.confirmMessage.confirmButtonText"),this.$locale.baseText("executionsList.confirmMessage.cancelButtonText"))===!1)return;this.isDataLoading=!0;const e={};this.checkAll===!0?e.deleteBefore=this.finishedExecutions[0].startedAt:e.ids=Object.keys(this.selectedItems),e.filters=this.workflowFilterPast;try{await this.restApi().deleteExecutions(e);let t=!1,i=!1;const n=this.$store.getters.workflowId,o=this.$store.getters["workflows/getActiveWorkflowExecution"];for(const r of Object.keys(this.selectedItems)){const a=this.$store.getters["workflows/getExecutionDataById"](r);a&&a.workflowId===n&&(this.$store.commit("workflows/deleteExecution",a),t=!0),a.id===o.id&&(i=!0)}if(t){const r=this.$store.getters["workflows/currentWorkflowExecutions"];r.length===0?(this.$store.commit("workflows/setActiveWorkflowExecution",null),this.$router.push({name:O.EXECUTION_HOME,params:{name:n}})):i&&(this.$store.commit("workflows/setActiveWorkflowExecution",r[0]),this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:n,executionId:r[0].id}}).catch(()=>{}))}}catch(t){this.isDataLoading=!1,this.$showError(t,this.$locale.baseText("executionsList.showError.handleDeleteSelected.title"));return}this.isDataLoading=!1,this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.handleDeleteSelected.title"),type:"success"}),m.set(this,"selectedItems",{}),this.checkAll=!1,this.refreshData()},handleFilterChanged(){this.refreshData()},handleRetryClick(s){let e=!1;s.command==="currentlySaved"&&(e=!0),this.retryExecution(s.row,e),this.$telemetry.track("User clicked retry execution button",{workflow_id:this.$store.getters.workflowId,execution_id:s.row.id,retry_type:e?"current":"original"})},getRowClass(s){const e=[];return s.row.stoppedAt===void 0&&e.push("currently-running"),e.join(" ")},getWorkflowName(s){const e=this.workflows.find(t=>t.id===s);if(e!==void 0)return e.name},async loadActiveExecutions(){const s=await this.restApi().getCurrentExecutions(this.workflowFilterCurrent);for(const e of s)e.workflowId!==void 0&&e.workflowName===void 0&&(e.workflowName=this.getWorkflowName(e.workflowId));this.$store.commit("setActiveExecutions",s)},async loadAutoRefresh(){const s=this.workflowFilterPast,e=this.restApi().getPastExecutions(s,30),t=this.restApi().getCurrentExecutions({}),i=await Promise.all([e,t]);for(const a of i[1])a.workflowId!==void 0&&a.workflowName===void 0&&(a.workflowName=this.getWorkflowName(a.workflowId));this.$store.commit("setActiveExecutions",i[1]);const n=this.finishedExecutions.map(a=>parseInt(a.id,10));let o=0;const r=[];for(let a=i[0].results.length-1;a>=0;a--){const l=i[0].results[a],c=parseInt(l.id,10);if(o!==0&&isNaN(c)===!1&&c-o>1){const h=ae.exports.range(o+1,c);r.push(...h)}o=parseInt(l.id,10)||0;const d=n.indexOf(c);if(d!==-1){this.finishedExecutions[d].finished===!1&&l.finished===!0&&(this.finishedExecutions[d]=l);continue}let u;for(u=this.finishedExecutions.length-1;u>=0;u--)if(c<parseInt(this.finishedExecutions[u].id,10)){this.finishedExecutions.splice(u+1,0,l);break}u===-1&&this.finishedExecutions.unshift(l)}this.finishedExecutions=this.finishedExecutions.filter(a=>!r.includes(parseInt(a.id,10))&&o>=parseInt(a.id,10)),this.finishedExecutionsCount=i[0].count,this.finishedExecutionsCountEstimated=i[0].estimated},async loadFinishedExecutions(){if(this.filter.status==="running"){this.finishedExecutions=[],this.finishedExecutionsCount=0,this.finishedExecutionsCountEstimated=!1;return}const s=await this.restApi().getPastExecutions(this.workflowFilterPast,this.requestItemsPerRequest);this.finishedExecutions=s.results,this.finishedExecutionsCount=s.count,this.finishedExecutionsCountEstimated=s.estimated},async loadMore(){if(this.filter.status==="running")return;this.isDataLoading=!0;const s=this.workflowFilterPast;let e;this.finishedExecutions.length!==0&&(e=this.finishedExecutions.slice(-1)[0].id);let t;try{t=await this.restApi().getPastExecutions(s,this.requestItemsPerRequest,e)}catch(i){this.isDataLoading=!1,this.$showError(i,this.$locale.baseText("executionsList.showError.loadMore.title"));return}t.results=t.results.map(i=>({...i,mode:i.mode})),this.finishedExecutions.push.apply(this.finishedExecutions,t.results),this.finishedExecutionsCount=t.count,this.finishedExecutionsCountEstimated=t.estimated,this.isDataLoading=!1},async loadWorkflows(){try{const s=await this.restApi().getWorkflows();s.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),s.unshift({id:"ALL",name:this.$locale.baseText("executionsList.allWorkflows")}),m.set(this,"workflows",s)}catch(s){this.$showError(s,this.$locale.baseText("executionsList.showError.loadWorkflows.title"))}},async retryExecution(s,e){this.isDataLoading=!0;try{await this.restApi().retryExecution(s.id,e)===!0?this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulTrue.title"),type:"success"}):this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulFalse.title"),type:"error"}),this.isDataLoading=!1}catch(t){this.$showError(t,this.$locale.baseText("executionsList.showError.retryExecution.title")),this.isDataLoading=!1}},async refreshData(){this.isDataLoading=!0;try{const s=this.loadActiveExecutions(),e=this.loadFinishedExecutions();await Promise.all([s,e])}catch(s){this.$showError(s,this.$locale.baseText("executionsList.showError.refreshData.title"))}this.isDataLoading=!1},statusTooltipText(s){if(s.waitTill){const e=new Date(s.waitTill);return e.toISOString()===ef?this.$locale.baseText("executionsList.statusTooltipText.theWorkflowIsWaitingIndefinitely"):this.$locale.baseText("executionsList.statusTooltipText.theWorkflowIsWaitingTill",{interpolate:{waitDateDate:e.toLocaleDateString(),waitDateTime:e.toLocaleTimeString()}})}else return s.stoppedAt===void 0?this.$locale.baseText("executionsList.statusTooltipText.theWorkflowIsCurrentlyExecuting"):s.finished===!0&&s.retryOf!==void 0?this.$locale.baseText("executionsList.statusTooltipText.theWorkflowExecutionWasARetryOfAndItWasSuccessful",{interpolate:{entryRetryOf:s.retryOf}}):s.finished===!0?this.$locale.baseText("executionsList.statusTooltipText.theWorkflowExecutionWasSuccessful"):s.retryOf!==void 0?this.$locale.baseText("executionsList.statusTooltipText.theWorkflowExecutionWasARetryOfAndFailed",{interpolate:{entryRetryOf:s.retryOf}}):s.retrySuccessId!==void 0?this.$locale.baseText("executionsList.statusTooltipText.theWorkflowExecutionFailedButTheRetryWasSuccessful",{interpolate:{entryRetrySuccessId:s.retrySuccessId}}):s.stoppedAt===null?this.$locale.baseText("executionsList.statusTooltipText.theWorkflowExecutionIsProbablyStillRunning"):this.$locale.baseText("executionsList.statusTooltipText.theWorkflowExecutionFailed")},async stopExecution(s){try{this.stoppingExecutions.push(s),await this.restApi().stopCurrentExecution(s);const e=this.stoppingExecutions.indexOf(s);this.stoppingExecutions.splice(e,1),this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.stopExecution.title"),message:this.$locale.baseText("executionsList.showMessage.stopExecution.message",{interpolate:{activeExecutionId:s}}),type:"success"}),this.refreshData()}catch(e){this.$showError(e,this.$locale.baseText("executionsList.showError.stopExecution.title"))}}}});var kM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.EXECUTIONS_MODAL_KEY,width:"80%",title:`${e.$locale.baseText("executionsList.workflowExecutions")} ${e.combinedExecutions.length}/${e.finishedExecutionsCountEstimated===!0?"~":""}${e.combinedExecutionsCount}`,eventBus:e.modalBus},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"filters"},[t("el-row",[t("el-col",{staticClass:"filter-headline",attrs:{span:2}},[e._v(" "+e._s(e.$locale.baseText("executionsList.filters"))+": ")]),t("el-col",{attrs:{span:7}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("executionsList.selectWorkflow"),size:"medium",filterable:""},on:{change:e.handleFilterChanged},model:{value:e.filter.workflowId,callback:function(i){e.$set(e.filter,"workflowId",i)},expression:"filter.workflowId"}},[t("div",{staticClass:"ph-no-capture"},e._l(e.workflows,function(i){return t("n8n-option",{key:i.id,attrs:{label:i.name,value:i.id}})}),1)])],1),t("el-col",{attrs:{span:5,offset:1}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("executionsList.selectStatus"),size:"medium",filterable:""},on:{change:e.handleFilterChanged},model:{value:e.filter.status,callback:function(i){e.$set(e.filter,"status",i)},expression:"filter.status"}},e._l(e.statuses,function(i){return t("n8n-option",{key:i.id,attrs:{label:i.name,value:i.id}})}),1)],1),t("el-col",{staticClass:"autorefresh",attrs:{span:4,offset:5}},[t("el-checkbox",{on:{change:e.handleAutoRefreshToggle},model:{value:e.autoRefresh,callback:function(i){e.autoRefresh=i},expression:"autoRefresh"}},[e._v(e._s(e.$locale.baseText("executionsList.autoRefresh")))])],1)],1)],1),t("div",{staticClass:"selection-options"},[e.checkAll===!0||e.isIndeterminate===!0?t("span",[e._v(" "+e._s(e.$locale.baseText("executionsList.selected"))+": "+e._s(e.numSelected)+" / "),e.finishedExecutionsCountEstimated===!0?t("span",[e._v("~")]):e._e(),e._v(e._s(e.finishedExecutionsCount)+" "),t("n8n-icon-button",{attrs:{title:e.$locale.baseText("executionsList.deleteSelected"),icon:"trash",size:"mini"},on:{click:e.handleDeleteSelected}})],1):e._e()]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isDataLoading,expression:"isDataLoading"}],attrs:{data:e.combinedExecutions,stripe:"","row-class-name":e.getRowClass}},[t("el-table-column",{attrs:{label:"",width:"30"},scopedSlots:e._u([{key:"header",fn:function(i){return[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate,label:" "},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(n){e.checkAll=n},expression:"checkAll"}})]}},{key:"default",fn:function(i){return[i.row.stoppedAt!==void 0&&i.row.id?t("el-checkbox",{attrs:{value:e.selectedItems[i.row.id.toString()]||e.checkAll,label:" "},on:{change:function(n){return e.handleCheckboxChanged(i.row.id)}}}):e._e()]}}])}),t("el-table-column",{attrs:{property:"startedAt",label:e.$locale.baseText("executionsList.startedAtId"),width:"205"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(" "+e._s(e.convertToDisplayDate(i.row.startedAt))),t("br"),i.row.id?t("small",[e._v("ID: "+e._s(i.row.id))]):e._e()]}}])}),t("el-table-column",{attrs:{property:"workflowName",label:e.$locale.baseText("executionsList.name")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"ph-no-capture"},[t("span",{staticClass:"workflow-name"},[e._v(" "+e._s(i.row.workflowName||e.$locale.baseText("executionsList.unsavedWorkflow"))+" ")])]),i.row.stoppedAt===void 0?t("span",[e._v(" ("+e._s(e.$locale.baseText("executionsList.running"))+") ")]):e._e(),i.row.retryOf!==void 0?t("span",[t("br"),t("small",[e._v(e._s(e.$locale.baseText("executionsList.retryOf"))+' "'+e._s(i.row.retryOf)+'"')])]):i.row.retrySuccessId!==void 0?t("span",[t("br"),t("small",[e._v(e._s(e.$locale.baseText("executionsList.successRetry"))+' "'+e._s(i.row.retrySuccessId)+'"')])]):e._e()]}}])}),t("el-table-column",{attrs:{label:e.$locale.baseText("executionsList.status"),width:"122",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("n8n-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.statusTooltipText(i.row))},slot:"content"}),i.row.waitTill?t("span",{staticClass:"status-badge running"},[e._v(" "+e._s(e.$locale.baseText("executionsList.waiting"))+" ")]):i.row.stoppedAt===void 0?t("span",{staticClass:"status-badge running"},[e._v(" "+e._s(e.$locale.baseText("executionsList.running"))+" ")]):i.row.finished?t("span",{staticClass:"status-badge success"},[e._v(" "+e._s(e.$locale.baseText("executionsList.success"))+" ")]):i.row.stoppedAt!==null?t("span",{staticClass:"status-badge error"},[e._v(" "+e._s(e.$locale.baseText("executionsList.error"))+" ")]):t("span",{staticClass:"status-badge warning"},[e._v(" "+e._s(e.$locale.baseText("executionsList.unknown"))+" ")])]),t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleRetryClick}},[t("span",{staticClass:"retry-button"},[i.row.stoppedAt!==void 0&&!i.row.finished&&i.row.retryOf===void 0&&i.row.retrySuccessId===void 0&&!i.row.waitTill?t("n8n-icon-button",{staticClass:"ml-3xs",attrs:{type:i.row.stoppedAt===null?"warning":"danger",size:"mini",title:e.$locale.baseText("executionsList.retryExecution"),icon:"redo"}}):e._e()],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:{command:"currentlySaved",row:i.row}}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow"))+" ")]),t("el-dropdown-item",{attrs:{command:{command:"original",row:i.row}}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithOriginalworkflow"))+" ")])],1)],1)]}}])}),t("el-table-column",{attrs:{property:"mode",label:e.$locale.baseText("executionsList.mode"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(" "+e._s(e.$locale.baseText(`executionsList.modes.${i.row.mode}`))+" ")]}}])}),t("el-table-column",{attrs:{label:e.$locale.baseText("executionsList.runningTime"),width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.stoppedAt===void 0?t("span",[t("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}),t("execution-time",{attrs:{"start-time":i.row.startedAt}})],1):i.row.stoppedAt===null?t("span",[e._v(" -- ")]):t("span",[e._v(" "+e._s(e.displayTimer(new Date(i.row.stoppedAt).getTime()-new Date(i.row.startedAt).getTime(),!0))+" ")])]}}])}),t("el-table-column",{attrs:{label:"",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"actions-container"},[i.row.stoppedAt===void 0||i.row.waitTill?t("span",[t("n8n-icon-button",{attrs:{icon:"stop",size:"small",title:e.$locale.baseText("executionsList.stopExecution"),loading:e.stoppingExecutions.includes(i.row.id)},on:{click:function(n){return n.stopPropagation(),e.stopExecution(i.row.id)}}})],1):e._e(),i.row.stoppedAt!==void 0&&i.row.id?t("span",[t("n8n-icon-button",{attrs:{icon:"folder-open",size:"small",title:e.$locale.baseText("executionsList.openPastExecution")},on:{click:function(n){return n.stopPropagation(),(o=>e.displayExecution(i.row,o)).apply(null,arguments)}}})],1):e._e()])]}}])})],1),e.finishedExecutionsCount>e.finishedExecutions.length||e.finishedExecutionsCountEstimated===!0?t("div",{staticClass:"load-more"},[t("n8n-button",{attrs:{icon:"sync",title:e.$locale.baseText("executionsList.loadMore"),label:e.$locale.baseText("executionsList.loadMore"),loading:e.isDataLoading},on:{click:function(i){return e.loadMore()}}})],1):e._e()]},proxy:!0}])})},SM=[],EM=_(TM,kM,SM,!1,null,"95fce425",null,null),Xg=EM.exports,CM=m.extend({name:"ActivationModal",components:{Modal:Me},props:["modalName"],data(){return{WORKFLOW_ACTIVE_MODAL_KEY:Qi,checked:!1,modalBus:new m}},methods:{async showExecutionsList(){const s=this.$store.getters["workflows/getActiveWorkflowExecution"],e=this.$store.getters.workflowId;s?this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:e,executionId:s.id}}).catch(()=>{}):this.$router.push({name:O.EXECUTION_HOME,params:{name:e}}).catch(()=>{}),this.$store.commit("ui/closeModal",Qi)},async showSettings(){this.$store.dispatch("ui/openModal",Lt)},handleCheckboxChange(s){this.checked=s,window.localStorage.setItem(nf,s.toString())}},computed:{triggerContent(){const s=ff(this.$store.getters.workflowTriggerNodes);if(!s.length)return"";if(s.length>1)return this.$locale.baseText("activationModal.yourTriggersWillNowFire");const e=s[0],t=this.$store.getters["nodeTypes/getNodeType"](e.type,e.typeVersion);if(t.activationMessage)return t.activationMessage;const i=$s(t);return e.webhookId?this.$locale.baseText("activationModal.yourWorkflowWillNowListenForEvents",{interpolate:{serviceName:i}}):t.polling?this.$locale.baseText("activationModal.yourWorkflowWillNowRegularlyCheck",{interpolate:{serviceName:i}}):this.$locale.baseText("activationModal.yourTriggerWillNowFire")}}});const NM="_spaced_1fidk_1",PM="_footer_1fidk_5";var DM={spaced:NM,footer:PM},IM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.WORKFLOW_ACTIVE_MODAL_KEY,title:e.$locale.baseText("activationModal.workflowActivated"),width:"460px"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("n8n-text",[e._v(e._s(e.triggerContent))])],1),t("div",{class:e.$style.spaced},[t("n8n-text",[t("n8n-text",{attrs:{bold:!0}},[e._v(" "+e._s(e.$locale.baseText("activationModal.theseExecutionsWillNotShowUp"))+" ")]),e._v(" "+e._s(e.$locale.baseText("activationModal.butYouCanSeeThem"))+" "),t("a",{on:{click:e.showExecutionsList}},[e._v(" "+e._s(e.$locale.baseText("activationModal.executionList"))+" ")]),e._v(" "+e._s(e.$locale.baseText("activationModal.ifYouChooseTo"))+" "),t("a",{on:{click:e.showSettings}},[e._v(e._s(e.$locale.baseText("activationModal.saveExecutions")))])],1)],1)]},proxy:!0},{key:"footer",fn:function({close:i}){return[t("div",{class:e.$style.footer},[t("el-checkbox",{attrs:{value:e.checked},on:{change:e.handleCheckboxChange}},[e._v(e._s(e.$locale.baseText("activationModal.dontShowAgain")))]),t("n8n-button",{attrs:{label:e.$locale.baseText("activationModal.gotIt")},on:{click:i}})],1)]}}])})},AM=[];const ah={$style:DM};function RM(s){for(var e in ah)this[e]=ah[e]}var MM=_(CM,IM,AM,!1,RM,null,null,null),WM=MM.exports,LM=N(V).extend({name:"ImportCurlModal",components:{Modal:Me},data(){return{IMPORT_CURL_MODAL_KEY:Gt,curlCommand:"",modalBus:new m}},computed:{node(){return this.$store.getters["ndv/activeNode"]}},methods:{closeDialog(){this.modalBus.$emit("close")},onInput(s){this.curlCommand=s},async importCurlCommand(){const s=this.curlCommand;if(s!=="")try{const e=await this.$store.dispatch("ui/getCurlToJson",s),t=e["parameters.url"],i=KO.find(n=>t.includes(`${n}://`));if(i)if(Sc[i]){const n=Sc[i];this.showProtocolErrorWithSupportedNode(i,n)}else this.showProtocolError(i);else{this.$store.dispatch("ui/setHttpNodeParameters",{parameters:JSON.stringify(e)}),this.closeDialog(),this.sendTelemetry();return}this.sendTelemetry({success:!1,invalidProtocol:!0,protocol:i})}catch{this.showInvalidcURLCommandError(),this.sendTelemetry({success:!1,invalidProtocol:!1})}finally{this.$store.dispatch("ui/setCurlCommand",{command:this.curlCommand})}},showProtocolErrorWithSupportedNode(s,e){this.$showToast({title:this.$locale.baseText("importParameter.showError.invalidProtocol1.title",{interpolate:{node:e}}),message:this.$locale.baseText("importParameter.showError.invalidProtocol.message",{interpolate:{protocol:s.toUpperCase()}}),type:"error",duration:0})},showProtocolError(s){this.$showToast({title:this.$locale.baseText("importParameter.showError.invalidProtocol2.title"),message:this.$locale.baseText("importParameter.showError.invalidProtocol.message",{interpolate:{protocol:s}}),type:"error",duration:0})},showInvalidcURLCommandError(){this.$showToast({title:this.$locale.baseText("importParameter.showError.invalidCurlCommand.title"),message:this.$locale.baseText("importParameter.showError.invalidCurlCommand.message"),type:"error",duration:0})},sendTelemetry(s={success:!0,invalidProtocol:!1,protocol:""}){this.$telemetry.track("User imported curl command",{success:s.success,invalidProtocol:s.invalidProtocol,protocol:s.protocol})}},mounted(){this.curlCommand=this.$store.getters["ui/getCurlCommand"],setTimeout(()=>{this.$refs.input.focus()})}});const QM="_modalFooter_1czzg_1",BM="_notice_1czzg_7",UM="_container_1czzg_11";var VM={modalFooter:QM,notice:BM,container:UM},FM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"700px",title:e.$locale.baseText("importCurlModal.title"),eventBus:e.modalBus,name:e.IMPORT_CURL_MODAL_KEY,center:!0}},[t("template",{slot:"content"},[t("div",{class:e.$style.container},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("importCurlModal.input.label"),color:"text-dark"}},[t("n8n-input",{ref:"input",attrs:{value:e.curlCommand,type:"textarea",rows:5,placeholder:e.$locale.baseText("importCurlModal.input.placeholder")},on:{input:e.onInput,focus:function(i){return i.target.select()}}})],1)],1)]),t("template",{slot:"footer"},[t("div",{class:e.$style.modalFooter},[t("n8n-notice",{class:e.$style.notice,attrs:{content:e.$locale.baseText("ImportCurlModal.notice.content")}}),t("div",[t("n8n-button",{attrs:{float:"right",label:e.$locale.baseText("importCurlModal.button.label")},on:{click:e.importCurlCommand}})],1)],1)])],2)},jM=[];const lh={$style:VM};function zM(s){for(var e in lh)this[e]=lh[e]}var GM=_(LM,FM,jM,!1,zM,null,null,null),HM=GM.exports,qM=m.extend({name:"Modals",components:{AboutModal:wb,ActivationModal:WM,CommunityPackageInstallModal:Bb,CommunityPackageManageConfirmModal:Cb,ContactPromptModal:rx,ChangePasswordModal:zb,CredentialEdit:uI,CredentialsSelectModal:CI,DeleteUserModal:hM,DuplicateWorkflowDialog:VI,InviteUsersModal:_I,ExecutionsList:Xg,ModalRoot:HI,OnboardingCallSignupModal:tA,PersonalizationModal:hA,TagsManager:BA,UpdatesPanel:IR,ValueSurvey:KR,WorkflowSettings:Hg,ImportCurlModal:HM},data:()=>({COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY:jt,COMMUNITY_PACKAGE_INSTALL_MODAL_KEY:Uo,CONTACT_PROMPT_MODAL_KEY:Za,CREDENTIAL_EDIT_MODAL_KEY:_t,CREDENTIAL_SELECT_MODAL_KEY:Ro,ABOUT_MODAL_KEY:Yi,CHANGE_PASSWORD_MODAL_KEY:Ao,DELETE_USER_MODAL_KEY:Pn,DUPLICATE_MODAL_KEY:Wo,ONBOARDING_CALL_SIGNUP_MODAL_KEY:Ki,PERSONALIZATION_MODAL_KEY:Qo,INVITE_USER_MODAL_KEY:Mo,TAGS_MANAGER_MODAL_KEY:Lo,VERSIONS_MODAL_KEY:Ns,WORKFLOW_SETTINGS_MODAL_KEY:Lt,VALUE_SURVEY_MODAL_KEY:Bo,EXECUTIONS_MODAL_KEY:Zi,WORKFLOW_ACTIVE_MODAL_KEY:Qi,IMPORT_CURL_MODAL_KEY:Gt})}),XM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("ModalRoot",{attrs:{name:e.CONTACT_PROMPT_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:i}){return[t("ContactPromptModal",{attrs:{modalName:i}})]}}])}),t("ModalRoot",{attrs:{name:e.CREDENTIAL_EDIT_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:i,activeId:n,mode:o}){return[t("CredentialEdit",{attrs:{modalName:i,mode:o,activeId:n}})]}}])}),t("ModalRoot",{attrs:{name:e.ABOUT_MODAL_KEY}},[t("AboutModal")],1),t("ModalRoot",{attrs:{name:e.CREDENTIAL_SELECT_MODAL_KEY}},[t("CredentialsSelectModal")],1),t("ModalRoot",{attrs:{name:e.DUPLICATE_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:i,active:n,data:o}){return[t("DuplicateWorkflowDialog",{attrs:{data:o,isActive:n,modalName:i}})]}}])}),t("ModalRoot",{attrs:{name:e.PERSONALIZATION_MODAL_KEY}},[t("PersonalizationModal")],1),t("ModalRoot",{attrs:{name:e.TAGS_MANAGER_MODAL_KEY}},[t("TagsManager")],1),t("ModalRoot",{attrs:{name:e.VERSIONS_MODAL_KEY,keepAlive:!0}},[t("UpdatesPanel")],1),t("ModalRoot",{attrs:{name:e.VALUE_SURVEY_MODAL_KEY,keepAlive:!0},scopedSlots:e._u([{key:"default",fn:function({active:i}){return[t("ValueSurvey",{attrs:{isActive:i}})]}}])}),t("ModalRoot",{attrs:{name:e.WORKFLOW_SETTINGS_MODAL_KEY}},[t("WorkflowSettings")],1),t("ModalRoot",{attrs:{name:e.CHANGE_PASSWORD_MODAL_KEY}},[t("ChangePasswordModal")],1),t("ModalRoot",{attrs:{name:e.INVITE_USER_MODAL_KEY}},[t("InviteUsersModal")],1),t("ModalRoot",{attrs:{name:e.DELETE_USER_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:i,activeId:n}){return[t("DeleteUserModal",{attrs:{modalName:i,activeId:n}})]}}])}),t("ModalRoot",{attrs:{name:e.EXECUTIONS_MODAL_KEY}},[t("ExecutionsList")],1),t("ModalRoot",{attrs:{name:e.WORKFLOW_ACTIVE_MODAL_KEY}},[t("ActivationModal")],1),t("ModalRoot",{attrs:{name:e.ONBOARDING_CALL_SIGNUP_MODAL_KEY}},[t("OnboardingCallSignupModal")],1),t("ModalRoot",{attrs:{name:e.COMMUNITY_PACKAGE_INSTALL_MODAL_KEY}},[t("CommunityPackageInstallModal")],1),t("ModalRoot",{attrs:{name:e.IMPORT_CURL_MODAL_KEY}},[t("ImportCurlModal")],1),t("ModalRoot",{attrs:{name:e.COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:i,activeId:n,mode:o}){return[t("CommunityPackageManageConfirmModal",{attrs:{modalName:i,activePackageName:n,mode:o}})]}}])})],1)},YM=[],ZM=_(qM,XM,YM,!1,null,null,null,null),KM=ZM.exports;const JM="_wrapper_jjxoi_1",eW="_spinner_jjxoi_8";var tW={wrapper:JM,spinner:eW};const sW={};var iW=function(){var e=this,t=e._self._c;return t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.spinner},[t("n8n-spinner")],1)])},nW=[];const ch={$style:tW};function oW(s){for(var e in ch)this[e]=ch[e]}var rW=_(sW,iW,nW,!1,oW,null,null,null),aW=rW.exports,lW=N(ve).extend({name:"Telemetry",data(){return{isTelemetryInitialized:!1}},computed:{...F("settings",["telemetry"]),...F("users",["currentUserId"]),...F(["instanceId"]),isTelemetryEnabledOnRoute(){return this.$route.meta&&this.$route.meta.telemetry?!this.$route.meta.telemetry.disabled:!0}},mounted(){this.init()},methods:{init(){if(this.isTelemetryInitialized||!this.isTelemetryEnabledOnRoute)return;const s=this.telemetry;!s||!s.enabled||(this.$telemetry.init(s,{instanceId:this.instanceId,userId:this.currentUserId,store:this.$store,versionCli:this.$store.getters["settings/versionCli"]}),this.$externalHooks().run("telemetry.currentUserIdChanged",{instanceId:this.instanceId,userId:this.currentUserId}),this.isTelemetryInitialized=!0)}},watch:{telemetry(){this.init()},currentUserId(s){this.$telemetry.identify(this.instanceId,s),this.$externalHooks().run("telemetry.currentUserIdChanged",{instanceId:this.instanceId,userId:s})},isTelemetryEnabledOnRoute(s){s&&this.init()}}}),cW=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("fragment")},dW=[],uW=_(lW,cW,dW,!1,null,null,null,null),hW=uW.exports;const Gl=m.extend({methods:{canUserAccessRouteByName(s){const{route:e}=this.$router.resolve({name:s});return this.canUserAccessRoute(e)},canUserAccessCurrentRoute(){return this.canUserAccessRoute(this.$route)},canUserAccessRoute(s){const e=s.meta&&s.meta.permissions,t=this.$store.getters["users/currentUser"];return!!(e&&Kn(e,t))}}}),Yg=m.extend({data(){return{customActions:{}}},mounted(){window.addEventListener("click",this.delegateClick),this.$root.$on("registerGlobalLinkAction",this.registerCustomAction)},destroyed(){window.removeEventListener("click",this.delegateClick),this.$root.$off("registerGlobalLinkAction",this.registerCustomAction)},computed:{availableActions(){return{reload:this.reload,...this.customActions}}},methods:{registerCustomAction(s,e){this.customActions[s]=e},unregisterCustomAction(s){m.delete(this.customActions,s)},delegateClick(s){const e=s.target;if(!(e instanceof Element)||e.tagName!=="A")return;const t=e.getAttribute("data-action");t&&typeof this.availableActions[t]=="function"&&(s.preventDefault(),this.availableActions[t]())},reload(){window.top?window.top.location.reload():window.location.reload()}}});var pW=N(V,Gl,Ce,Yg).extend({name:"App",components:{LoadingView:aW,Telemetry:hW,Modals:KM},computed:{...F("settings",["isHiringBannerEnabled","isTemplatesEnabled","isTemplatesEndpointReachable","isUserManagementEnabled","showSetupPage"]),...F("users",["currentUser"]),...F("ui",["sidebarMenuCollapsed"]),defaultLocale(){return this.$store.getters.defaultLocale}},data(){return{loading:!0}},methods:{async initSettings(){try{await this.$store.dispatch("settings/getSettings")}catch(s){throw this.$showToast({title:this.$locale.baseText("startupError"),message:this.$locale.baseText("startupError.message"),type:"error",duration:0}),s}},async loginWithCookie(){try{await this.$store.dispatch("users/loginWithCookie")}catch{}},async initTemplates(){if(!!this.isTemplatesEnabled)try{await this.$store.dispatch("settings/testTemplatesEndpoint")}catch{}},logHiringBanner(){this.isHiringBannerEnabled&&this.$route.name!==O.DEMO&&console.log(qO)},async initialize(){await this.initSettings(),await Promise.all([this.loginWithCookie(),this.initTemplates()])},trackPage(){this.$store.commit("ui/setCurrentView",this.$route.name),this.$route&&this.$route.meta&&this.$route.meta.templatesEnabled?this.$store.commit("templates/setSessionId"):this.$store.commit("templates/resetSessionId"),this.$telemetry.page(this.$route)},authenticate(){if(this.isUserManagementEnabled&&this.showSetupPage){if(this.$route.name===O.SETUP)return;this.$router.replace({name:O.SETUP});return}if(this.canUserAccessCurrentRoute())return;if(!this.currentUser){const e=this.$route.query.redirect||encodeURIComponent(`${window.location.pathname}${window.location.search}`);this.$router.replace({name:O.SIGNIN,query:{redirect:e}});return}if(this.$route.name===O.SIGNIN&&typeof this.$route.query.redirect=="string"){const e=decodeURIComponent(this.$route.query.redirect);if(e.startsWith("/")){this.$router.replace(e);return}}this.$router.replace({name:O.HOMEPAGE})},redirectIfNecessary(){const s=this.$route.meta&&typeof this.$route.meta.getRedirect=="function"&&this.$route.meta.getRedirect(this.$store);s&&this.$router.replace(s)},setTheme(){const s=window.localStorage.getItem(GO);s&&window.document.body.classList.add(`theme-${s}`)}},async mounted(){this.setTheme(),await this.initialize(),this.logHiringBanner(),this.authenticate(),this.redirectIfNecessary(),this.loading=!1,this.trackPage(),this.$externalHooks().run("app.mount"),this.defaultLocale!=="en"&&this.$store.dispatch("nodeTypes/getNodeTranslationHeaders")},watch:{$route(s){this.authenticate(),this.redirectIfNecessary(),this.trackPage()},defaultLocale(s){FP(s)}}});const fW="_app_vwn7a_1",mW="_container_vwn7a_6",gW="_content_vwn7a_13",wW="_header_vwn7a_19",yW="_sidebar_vwn7a_24";var vW={app:fW,container:mW,content:gW,header:wW,sidebar:yW},_W=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:[e.$style.app,"root-container"]},[e.loading?t("LoadingView"):t("div",{class:{[e.$style.container]:!0,[e.$style.sidebarCollapsed]:e.sidebarMenuCollapsed},attrs:{id:"app"}},[t("div",{class:e.$style.header,attrs:{id:"header"}},[t("router-view",{attrs:{name:"header"}})],1),t("div",{class:e.$style.sidebar,attrs:{id:"sidebar"}},[t("router-view",{attrs:{name:"sidebar"}})],1),t("div",{class:e.$style.content,attrs:{id:"content"}},[t("keep-alive",{attrs:{include:"NodeView",max:1}},[t("router-view")],1)],1),t("Modals"),t("Telemetry")],1)],1)},OW=[];const dh={$style:vW};function bW(s){for(var e in dh)this[e]=dh[e]}var xW=_(pW,_W,OW,!1,bW,null,null,null),$W=xW.exports,TW=m.extend({computed:{basePath(){return this.$store.getters.getBaseUrl}}});const kW="_img_8137c_1";var SW={img:kW},EW=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("img",{class:e.$style.img,attrs:{src:e.basePath+"n8n-logo-expanded.svg",alt:"n8n.io"}})},CW=[];const uh={$style:SW};function NW(s){for(var e in uh)this[e]=uh[e]}var PW=_(TW,EW,CW,!1,NW,null,null,null),DW=PW.exports,IW=m.extend({name:"AuthView",components:{Logo:DW},props:{form:{},formLoading:{type:Boolean,default:!1},subtitle:{type:String}},methods:{onInput(s){this.$emit("input",s)},onSubmit(s){this.$emit("submit",s)},onSecondaryClick(){this.$emit("secondaryClick")}}});const AW="_container_16wci_5",RW="_logoContainer_16wci_16",MW="_textContainer_16wci_21",WW="_formContainer_16wci_25";var LW={container:AW,logoContainer:RW,textContainer:MW,formContainer:WW};var QW=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("div",{class:e.$style.logoContainer},[t("Logo")],1),e.subtitle?t("div",{class:e.$style.textContainer},[t("n8n-text",{attrs:{size:"large"}},[e._v(e._s(e.subtitle))])],1):e._e(),t("div",{class:e.$style.formContainer},[t("n8n-form-box",e._b({attrs:{buttonLoading:e.formLoading},on:{secondaryClick:e.onSecondaryClick,submit:e.onSubmit,input:e.onInput}},"n8n-form-box",e.form,!1))],1)])},BW=[];const hh={$style:LW};function UW(s){for(var e in hh)this[e]=hh[e]}var VW=_(IW,QW,BW,!1,UW,null,null,null),rn=VW.exports,FW=N(V).extend({name:"ChangePasswordView",components:{AuthView:rn},data(){return{password:"",loading:!1,config:null}},async mounted(){this.config={title:this.$locale.baseText("auth.changePassword"),buttonText:this.$locale.baseText("auth.changePassword"),redirectText:this.$locale.baseText("auth.signin"),redirectLink:"/signin",inputs:[{name:"password",properties:{label:this.$locale.baseText("auth.newPassword"),type:"password",required:!0,validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"password2",properties:{label:this.$locale.baseText("auth.changePassword.reenterNewPassword"),type:"password",required:!0,validators:{TWO_PASSWORDS_MATCH:{validate:this.passwordsMatch}},validationRules:[{name:"TWO_PASSWORDS_MATCH"}],autocomplete:"new-password",capitalize:!0}}]};const s=this.$route.query.token,e=this.$route.query.userId;try{if(!s)throw new Error(this.$locale.baseText("auth.changePassword.missingTokenError"));if(!e)throw new Error(this.$locale.baseText("auth.changePassword.missingUserIdError"));await this.$store.dispatch("users/validatePasswordToken",{token:s,userId:e})}catch{this.$showMessage({title:this.$locale.baseText("auth.changePassword.tokenValidationError"),type:"error"})}},methods:{passwordsMatch(s){return typeof s!="string"?!1:s!==this.password?{messageKey:"auth.changePassword.passwordsMustMatchError"}:!1},onInput(s){s.name==="password"&&(this.password=s.value)},async onSubmit(){try{this.loading=!0;const s=this.$route.query.token,e=this.$route.query.userId;await this.$store.dispatch("users/changePassword",{token:s,userId:e,password:this.password}),this.$showMessage({type:"success",title:this.$locale.baseText("auth.changePassword.passwordUpdated"),message:this.$locale.baseText("auth.changePassword.passwordUpdatedMessage")}),await this.$router.push({name:O.SIGNIN})}catch(s){this.$showError(s,this.$locale.baseText("auth.changePassword.error"))}this.loading=!1}}}),jW=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.config?t("AuthView",{attrs:{form:e.config,formLoading:e.loading},on:{submit:e.onSubmit,input:e.onInput}}):e._e()},zW=[],GW=_(FW,jW,zW,!1,null,null,null,null),HW=GW.exports,qW=m.extend({name:"ErrorView",props:{messageKey:{type:String,required:!0},errorCode:{type:Number},redirectTextKey:{type:String},redirectPage:{type:String}},methods:{onButtonClick(){this.$router.push({name:this.redirectPage})}}});const XW="_container_womip_1",YW="_icon_womip_10",ZW="_message_womip_17";var KW={container:XW,icon:YW,message:ZW},JW=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("font-awesome-icon",{class:e.$style.icon,attrs:{icon:"exclamation-triangle"}}),t("div",{class:e.$style.message},[t("div",[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText(e.messageKey))+" ")])],1),t("div",[e.errorCode?t("n8n-text",{attrs:{size:"large"}},[e._v(" "+e._s(e.errorCode)+" "+e._s(e.$locale.baseText("error"))+" ")]):e._e()],1)]),t("n8n-button",{attrs:{label:e.$locale.baseText(e.redirectTextKey)},on:{click:e.onButtonClick}})],1)},eL=[];const ph={$style:KW};function tL(s){for(var e in ph)this[e]=ph[e]}var sL=_(qW,JW,eL,!1,tL,null,null,null),iL=sL.exports,nL=N(V).extend({name:"ForgotMyPasswordView",components:{AuthView:rn},data(){return{loading:!1}},computed:{...F("settings",["isSmtpSetup"]),formConfig(){const s=[{name:"email",properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0}}],e=[{name:"no-smtp-warning",properties:{label:this.$locale.baseText("forgotPassword.noSMTPToSendEmailWarning"),type:"info"}}],t={title:this.$locale.baseText("forgotPassword.recoverPassword"),redirectText:this.$locale.baseText("forgotPassword.returnToSignIn"),redirectLink:"/signin"};return this.isSmtpSetup?{...t,buttonText:this.$locale.baseText("forgotPassword.getRecoveryLink"),inputs:s}:{...t,inputs:e}}},methods:{async onSubmit(s){try{this.loading=!0,await this.$store.dispatch("users/sendForgotPasswordEmail",s),this.$showMessage({type:"success",title:this.$locale.baseText("forgotPassword.recoveryEmailSent"),message:this.$locale.baseText("forgotPassword.emailSentIfExists",{interpolate:{email:s.email}})})}catch{this.$showMessage({type:"error",title:this.$locale.baseText("forgotPassword.sendingEmailError"),message:this.$locale.baseText("forgotPassword.smtpErrorContactAdministrator")})}this.loading=!1}}}),oL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.formConfig,formLoading:e.loading},on:{submit:e.onSubmit}})},rL=[],aL=_(nL,oL,rL,!1,null,null,null,null),lL=aL.exports;const fi=m.extend({methods:{$titleSet(s,e){let t="\u26A0\uFE0F";e==="EXECUTING"?t="\u{1F504}":e==="IDLE"&&(t="\u25B6\uFE0F"),window.document.title=`n8n - ${t} ${s}`},$titleReset(){document.title="n8n - Workflow Automation"}}}),Zg=N(ve,ct,V,fi,ie).extend({data(){return{eventSource:null,reconnectTimeout:null,retryTimeout:null,pushMessageQueue:[]}},computed:{sessionId(){return this.$store.getters.sessionId}},methods:{pushAutomaticReconnect(){this.reconnectTimeout===null&&(this.reconnectTimeout=setTimeout(()=>{this.pushConnect()},3e3))},pushConnect(){this.pushDisconnect();const s=`${this.$store.getters.getRestUrl}/push?sessionId=${this.sessionId}`;this.eventSource=new EventSource(s,{withCredentials:!0}),this.eventSource.addEventListener("message",this.pushMessageReceived,!1),this.eventSource.addEventListener("open",()=>{this.$store.commit("setPushConnectionActive",!0),this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},!1),this.eventSource.addEventListener("error",()=>{this.pushDisconnect(),this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.$store.commit("setPushConnectionActive",!1),this.pushAutomaticReconnect()},!1)},pushDisconnect(){this.eventSource!==null&&(this.eventSource.close(),this.eventSource=null,this.$store.commit("setPushConnectionActive",!1))},queuePushMessage(s,e){this.pushMessageQueue.push({event:s,retriesLeft:e}),this.retryTimeout===null&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,20))},processWaitingPushMessages(){this.retryTimeout!==null&&(clearTimeout(this.retryTimeout),this.retryTimeout=null);const s=this.pushMessageQueue.length;for(let e=0;e<s;e++){const t=this.pushMessageQueue.shift();if(this.pushMessageReceived(t.event,!0)===!1){t.retriesLeft-=1,t.retriesLeft>0&&this.pushMessageQueue.unshift(t);break}}this.pushMessageQueue.length!==0&&this.retryTimeout===null&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,25))},pushMessageReceived(s,e){var n,o;let i;try{i=JSON.parse(s.data)}catch{return!1}if(i.type==="sendConsoleMessage"){const r=i.data;return console.log(r.source,...r.messages),!0}if(!["testWebhookReceived"].includes(i.type)&&e!==!0&&this.pushMessageQueue.length)return this.queuePushMessage(s,5),!1;if(i.type==="nodeExecuteAfter"||i.type==="nodeExecuteBefore"){if(this.$store.getters.isActionActive("workflowRunning")===!1)return!1;const r=i.data;if(this.$store.getters.activeExecutionId!==r.executionId)return e!==!0&&this.queuePushMessage(s,5),!1}if(i.type==="executionFinished"){const r=i.data;if(this.$store.commit("finishActiveExecution",r),this.$store.getters.isActionActive("workflowRunning")===!1)return!1;if(this.$store.getters.activeExecutionId!==r.executionId)return e!==!0&&this.queuePushMessage(s,5),!1;const a=r.data,l=this.$getExecutionError(a.data),c=a&&a.data&&a.data.resultData&&a.data.resultData.error&&a.data.resultData.error.lineNumber;Ga.$emit("error-line-number",c||"final");const d=this.getCurrentWorkflow();if(a.waitTill!==void 0){const{activeExecutionId:h,workflowSettings:p,saveManualExecutions:f}=this.$store.getters,w=p.saveManualExecutions===void 0?f:p.saveManualExecutions;let g;w?g=`<a href="/workflow/${d.id}/executions/${h}">View the execution</a> to see what happened after this node.`:(this.$root.$emit("registerGlobalLinkAction","open-settings",async()=>{this.$store.getters.isNewWorkflow&&await this.saveAsNewWorkflow(),this.$store.dispatch("ui/openModal",Lt)}),g='<a data-action="open-settings">Turn on saving manual executions</a> and run again to see what happened after this node.'),this.$titleSet(d.name,"IDLE"),this.$showToast({title:"Workflow started waiting",message:`${g} <a href="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.wait/" target="_blank">More info</a>`,type:"success",duration:0})}else if(a.finished!==!0){if(this.$titleSet(d.name,"ERROR"),((n=a.data.resultData.error)==null?void 0:n.name)==="ExpressionError"&&a.data.resultData.error.context.functionality==="pairedItem"){const h=a.data.resultData.error;this.getWorkflowDataToSave().then(p=>{const f={caused_by_credential:!1,error_message:h.description,error_title:h.message,error_type:h.context.type,node_graph_string:JSON.stringify(Pi(p,this.getNodeTypes()).nodeGraph),workflow_id:this.$store.getters.workflowId};if(h.context.nodeCause&&["no pairing info","invalid pairing info"].includes(h.context.type)){const w=d.getNode(h.context.nodeCause);w&&(f.is_pinned=!!d.getPinDataOfNode(w.name),f.mode=w.parameters.mode,f.node_type=w.type,f.operation=w.parameters.operation,f.resource=w.parameters.resource)}this.$telemetry.track("Instance FE emitted paired item error",f)})}if(((o=a.data.resultData.error)==null?void 0:o.name)==="SubworkflowOperationError"){const h=a.data.resultData.error;this.$store.commit("setSubworkflowExecutionError",h),this.$showMessage({title:h.message,message:h.description,type:"error",duration:0})}else{let h;a.data.resultData.lastNodeExecuted?h=`Problem in node \u2018${a.data.resultData.lastNodeExecuted}\u2018`:h="Problem executing workflow",this.$showMessage({title:h,message:l,type:"error",duration:0})}}else{this.$titleSet(d.name,"IDLE");const h=this.$store.getters.getWorkflowExecution;if(h&&h.executedNode){const p=this.$store.getters.getNodeByName(h.executedNode),f=p&&this.$store.getters["nodeTypes/getNodeType"](p.type,p.typeVersion),w=h&&h.executedNode&&h.data&&h.data.resultData&&h.data.resultData.runData&&h.data.resultData.runData[h.executedNode];p&&f&&!w?this.$showMessage({title:this.$locale.baseText("pushConnection.pollingNode.dataNotFound",{interpolate:{service:$s(f)}}),message:this.$locale.baseText("pushConnection.pollingNode.dataNotFound.message",{interpolate:{service:$s(f)}}),type:"success"}):this.$showMessage({title:this.$locale.baseText("pushConnection.nodeExecutedSuccessfully"),type:"success"})}else this.$showMessage({title:this.$locale.baseText("pushConnection.workflowExecutedSuccessfully"),type:"success"})}a.data.resultData.runData=this.$store.getters.getWorkflowRunData,this.$store.commit("setExecutingNode",null),this.$store.commit("setWorkflowExecutionData",a),this.$store.commit("removeActiveAction","workflowRunning"),this.updateNodesExecutionIssues();let u=0;a.data.resultData.lastNodeExecuted&&!l&&(u=a.data.resultData.runData[a.data.resultData.lastNodeExecuted][0].data.main[0].length),this.$externalHooks().run("pushConnection.executionFinished",{itemsCount:u,nodeName:a.data.resultData.lastNodeExecuted,errorMessage:l,runDataExecutedStartData:a.data.startData,resultDataError:a.data.resultData.error})}else if(i.type==="executionStarted"){const r=i.data,a={id:r.executionId,finished:!1,mode:r.mode,startedAt:r.startedAt,retryOf:r.retryOf,workflowId:r.workflowId,workflowName:r.workflowName};this.$store.commit("addActiveExecution",a)}else if(i.type==="nodeExecuteAfter"){const r=i.data;this.$store.commit("addNodeExecutionData",r)}else if(i.type==="nodeExecuteBefore"){const r=i.data;this.$store.commit("setExecutingNode",r.nodeName)}else if(i.type==="testWebhookDeleted")i.data.workflowId===this.$store.getters.workflowId&&(this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("removeActiveAction","workflowRunning"));else if(i.type==="testWebhookReceived"){const r=i.data;r.workflowId===this.$store.getters.workflowId&&(this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("setActiveExecutionId",r.executionId)),this.processWaitingPushMessages()}else if(i.type==="reloadNodeType")this.$store.dispatch("nodeTypes/getNodeTypes"),this.$store.dispatch("nodeTypes/getFullNodesProperties",[i.data]);else if(i.type==="removeNodeType"){const a=[i.data];this.$store.dispatch("credentials/fetchCredentialTypes").then(()=>{this.$store.commit("nodeTypes/removeNodeTypes",a)})}return!0}}}),cL=25,dL=4;var uL=m.extend({name:"ShortenName",props:["name","limit"],computed:{shortenedName(){return cl(this.name,this.limit||cL,dL)}}}),hL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{attrs:{title:e.name}},[e._t("default",null,{shortenedName:e.shortenedName})],2)},pL=[],fL=_(uL,hL,pL,!1,null,null,null,null),Kg=fL.exports,mL=m.extend({name:"IntersectionObserver",props:["threshold","enabled"],data(){return{observer:null}},mounted(){if(!this.$props.enabled)return;const s={root:this.$refs.root,rootMargin:"0px",threshold:this.$props.threshold},e=new IntersectionObserver(t=>{t.forEach(({target:i,isIntersecting:n})=>{this.$emit("observed",{el:i,isIntersecting:n})})},s);this.$data.observer=e,this.$on("observe",t=>{e.observe(t)}),this.$on("unobserve",t=>{e.unobserve(t)})},beforeDestroy(){this.$props.enabled&&this.$data.observer.disconnect()}}),gL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"root"},[e._t("default")],2)},wL=[],yL=_(mL,gL,wL,!1,null,null,null,null),vL=yL.exports;function Jg(s,e,t){this.$children.forEach(i=>{i.$options.name===s?i.$emit.apply(i,[e].concat(t)):Jg.apply(i,[s,e].concat([t]))})}var _L=m.extend({methods:{$dispatch(s,e,t){let i=this.$parent||this.$root,n=i.$options.name;for(;i&&(!n||n!==s);)i=i.$parent,i&&(n=i.$options.name);i&&i.$emit.apply(i,[e].concat(t))},$broadcast(s,e,t){Jg.call(this,s,e,t)}}}),OL=N(_L).extend({name:"IntersectionObserved",props:["enabled"],mounted(){!this.$props.enabled||this.$nextTick(()=>{this.$dispatch("IntersectionObserver","observe",this.$refs.observed)})},beforeDestroy(){this.$props.enabled&&this.$dispatch("IntersectionObserver","unobserve",this.$refs.observed)}}),bL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{ref:"observed"},[e._t("default")],2)},xL=[],$L=_(OL,bL,xL,!1,null,null,null,null),TL=$L.exports;const kL=20;var SL=m.extend({components:{IntersectionObserver:vL,IntersectionObserved:TL},name:"TagsContainer",props:["tagIds","limit","clickable","responsive","hoverable"],data(){return{visibility:{}}},computed:{tags(){const s=this.$props.tagIds.map(n=>this.$store.getters["tags/getTagById"](n)).filter(Boolean),e=this.$props.limit||kL;let t=e?s.slice(0,e):s;t=t.map(n=>({...n,hidden:this.$props.responsive&&!this.$data.visibility[n.id]}));let i=t.length;if(this.$props.responsive&&(i=Object.values(this.visibility).reduce((n,o)=>o?n+1:n,0)),i<s.length){const n=s.slice(i),o=n.reduce((a,l)=>a?`${a}, ${l.name}`:l.name,""),r={id:"count",name:`+${n.length}`,title:o,isCount:!0};t.splice(i,0,r)}return t}},methods:{onObserved({el:s,isIntersecting:e}){s.dataset.id&&m.set(this.$data.visibility,s.dataset.id,e)},onClick(s,e){this.clickable&&s.stopPropagation(),e.hidden||this.$emit("click",e.id)}}});var EL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("IntersectionObserver",{staticClass:"tags-container",attrs:{threshold:1,enabled:e.responsive},on:{observed:e.onObserved}},[[t("span",{staticClass:"tags"},e._l(e.tags,function(i){return t("span",{key:i.id,class:{clickable:!i.hidden},on:{click:n=>e.onClick(n,i)}},[i.isCount?t("el-tag",{staticClass:"count-container",attrs:{title:i.title,type:"info",size:"small"}},[e._v(" "+e._s(i.name)+" ")]):t("IntersectionObserved",{class:{hidden:i.hidden},attrs:{"data-id":i.id,enabled:e.responsive}},[t("el-tag",{class:{hoverable:e.hoverable},attrs:{title:i.name,type:"info",size:"small"}},[e._v(" "+e._s(i.name)+" ")])],1)],1)}),0)]],2)},CL=[],NL=_(SL,EL,CL,!1,null,"c60739d5",null,null),PL=NL.exports,DL=m.extend({name:"PushConnectionTracker",computed:{...F(["pushConnectionActive"])}}),IL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e.pushConnectionActive?e._t("default"):t("div",{staticClass:"push-connection-lost primary-color"},[t("n8n-tooltip",{attrs:{placement:"bottom-end"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$locale.baseText("pushConnectionTracker.cannotConnectToServer"))},slot:"content"}),t("span",[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("\xA0 "+e._s(e.$locale.baseText("pushConnectionTracker.connectionLost"))+" ")],1)])],1)],2)},AL=[],RL=_(DL,IL,AL,!1,null,null,null,null),ML=RL.exports,WL=m.extend({name:"ExpandableInputBase",props:["value","placeholder","staticSize"],computed:{hiddenValue(){let s=this.value.replace(/\s/g,".");return s||(s=this.$props.placeholder),`${s}`}}});var LL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{"el-input":!0,"static-size":e.staticSize},attrs:{"data-value":e.hiddenValue}},[e._t("default")],2)},QL=[],BL=_(WL,LL,QL,!1,null,"868ced0c",null,null),ew=BL.exports,UL=m.extend({components:{ExpandableInputBase:ew},name:"ExpandableInputEdit",props:["value","placeholder","maxlength","autofocus","eventBus"],mounted(){this.$props.autofocus&&this.$refs.input&&this.focus(),this.$props.eventBus&&this.$props.eventBus.$on("focus",()=>{this.focus()})},methods:{focus(){this.$refs.input&&this.$refs.input.focus()},onInput(){this.$emit("input",this.$refs.input.value)},onEnter(){this.$emit("enter",this.$refs.input.value)},onClickOutside(s){s.type==="click"&&this.$emit("blur",this.$refs.input.value)},onEscape(){this.$emit("esc")}}}),VL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ExpandableInputBase",{attrs:{value:e.value,placeholder:e.placeholder}},[t("input",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"input",staticClass:"el-input__inner",attrs:{placeholder:e.placeholder,maxlength:e.maxlength,size:"4"},domProps:{value:e.value},on:{input:e.onInput,keydown:[function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.onEnter.apply(null,arguments)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.onEscape.apply(null,arguments)}]}})])},FL=[],jL=_(UL,VL,FL,!1,null,null,null,null),zL=jL.exports,GL=m.extend({components:{ExpandableInputBase:ew},name:"ExpandableInputPreview",props:["value"]});var HL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ExpandableInputBase",{attrs:{value:e.value,staticSize:!0}},[[t("input",{class:{"el-input__inner":!0,clickable:!0},attrs:{disabled:!0,size:"4"},domProps:{value:e.value}})]],2)},qL=[],XL=_(GL,HL,qL,!1,null,"476cb59e",null,null),YL=XL.exports,ZL=m.extend({name:"InlineTextEdit",components:{ExpandableInputEdit:zL,ExpandableInputPreview:YL},props:["isEditEnabled","value","placeholder","maxLength","previewValue"],data(){return{newValue:"",escPressed:!1,disabled:!1,inputBus:new m}},methods:{onInput(s){this.disabled||(this.newValue=s)},onClick(){this.disabled||(this.$data.newValue=this.$props.value,this.$emit("toggle"))},onBlur(){this.disabled||(this.$data.escPressed||this.submit(),this.$data.escPressed=!1)},submit(){if(this.disabled)return;const s=e=>{this.$data.disabled=!1,e||this.$data.inputBus.$emit("focus")};this.$data.disabled=!0,this.$emit("submit",this.newValue,s)},onEscape(){this.disabled||(this.$data.escPressed=!0,this.$emit("toggle"))}}});var KL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{staticClass:"inline-edit",on:{keydown:function(i){i.stopPropagation()}}},[e.isEditEnabled?t("span",[t("ExpandableInputEdit",{attrs:{placeholder:e.placeholder,value:e.newValue,maxlength:e.maxLength,autofocus:!0,eventBus:e.inputBus},on:{input:e.onInput,esc:e.onEscape,blur:e.onBlur,enter:e.submit}})],1):t("span",{staticClass:"preview",on:{click:e.onClick}},[t("ExpandableInputPreview",{attrs:{value:e.previewValue||e.value}})],1)])},JL=[],eQ=_(ZL,KL,JL,!1,null,"bdd985b7",null,null),tQ=eQ.exports,sQ=N(be,dt).extend({name:"BreakpointsObserver",props:["valueXS","valueXL","valueLG","valueMD","valueSM","valueDefault"],data(){return{width:window.innerWidth}},created(){window.addEventListener("resize",this.onResize)},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.callDebounced("onResizeEnd",{debounceTime:50})},onResizeEnd(){this.$data.width=window.innerWidth}},computed:{bp(){return this.$data.width<uc?"XS":this.$data.width>=fc?"XL":this.$data.width>=pc?"LG":this.$data.width>=hc?"MD":"SM"},value(){return this.$props.valueXS!==void 0&&this.$data.width<uc?this.$props.valueXS:this.$props.valueXL!==void 0&&this.$data.width>=fc?this.$props.valueXL:this.$props.valueLG!==void 0&&this.$data.width>=pc?this.$props.valueLG:this.$props.valueMD!==void 0&&this.$data.width>=hc?this.$props.valueMD:this.$props.valueSM!==void 0?this.$props.valueSM:this.$props.valueDefault}}}),iQ=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e._t("default",null,{bp:e.bp,value:e.value})],2)},nQ=[],oQ=_(sQ,iQ,nQ,!1,null,null,null,null),rQ=oQ.exports;const aQ=(s,e)=>{if(s.length!==e.length)return!0;const t=new Set(s);return e.reduce((i,n)=>i||!t.has(n),!1)};var lQ=N(ie,fi).extend({name:"WorkflowDetails",components:{TagsContainer:PL,PushConnectionTracker:ML,ShortenName:Kg,WorkflowActivator:zl,SaveButton:Vg,TagsDropdown:Fl,InlineTextEdit:tQ,BreakpointsObserver:rQ},data(){return{isTagsEditEnabled:!1,isNameEditEnabled:!1,appliedTagIds:[],tagsEditBus:new m,MAX_WORKFLOW_NAME_LENGTH:qa,tagsSaving:!1}},computed:{...F({isWorkflowActive:"isActive",workflowName:"workflowName",isDirty:"getStateIsDirty",currentWorkflowTagIds:"workflowTags"}),...F("settings",["areTagsEnabled"]),isNewWorkflow(){return!this.currentWorkflowId||this.currentWorkflowId===fe||this.currentWorkflowId==="new"},isWorkflowSaving(){return this.$store.getters.isActionActive("workflowSaving")},currentWorkflowId(){return this.$store.getters.workflowId},workflowName(){return this.$store.getters.workflowName},onWorkflowPage(){return this.$route.meta&&(this.$route.meta.nodeView||this.$route.meta.keepWorkflowAlive===!0)},onExecutionsTab(){return[O.EXECUTION_HOME.toString(),O.EXECUTIONS.toString(),O.EXECUTION_PREVIEW].includes(this.$route.name||"")},workflowMenuItems(){return[{id:tt.DUPLICATE,label:this.$locale.baseText("menuActions.duplicate"),disabled:!this.onWorkflowPage||!this.currentWorkflowId},{id:tt.DOWNLOAD,label:this.$locale.baseText("menuActions.download"),disabled:!this.onWorkflowPage},{id:tt.IMPORT_FROM_URL,label:this.$locale.baseText("menuActions.importFromUrl"),disabled:!this.onWorkflowPage||this.onExecutionsTab},{id:tt.IMPORT_FROM_FILE,label:this.$locale.baseText("menuActions.importFromFile"),disabled:!this.onWorkflowPage||this.onExecutionsTab},{id:tt.SETTINGS,label:this.$locale.baseText("generic.settings"),disabled:!this.onWorkflowPage||this.isNewWorkflow},{id:tt.DELETE,label:this.$locale.baseText("menuActions.delete"),disabled:!this.onWorkflowPage||this.isNewWorkflow,customClass:this.$style.deleteItem,divided:!0}]}},methods:{async onSaveButtonClick(){let s;this.currentWorkflowId!==fe?s=this.currentWorkflowId:this.$route.params.name&&this.$route.params.name!=="new"&&(s=this.$route.params.name),await this.saveCurrentWorkflow({id:s,name:this.workflowName,tags:this.currentWorkflowTagIds})&&this.$store.dispatch("settings/fetchPromptsData")},onTagsEditEnable(){this.$data.appliedTagIds=this.currentWorkflowTagIds,this.$data.isTagsEditEnabled=!0,setTimeout(()=>{this.$data.isNameEditEnabled=!1,this.$data.tagsEditBus.$emit("focus")},0)},async onTagsUpdate(s){this.$data.appliedTagIds=s},async onTagsBlur(){const s=this.currentWorkflowTagIds,e=this.$data.appliedTagIds;if(!aQ(s,e)){this.$data.isTagsEditEnabled=!1;return}if(this.$data.tagsSaving)return;this.$data.tagsSaving=!0;const t=await this.saveCurrentWorkflow({tags:e});this.$telemetry.track("User edited workflow tags",{workflow_id:this.currentWorkflowId,new_tag_count:e.length}),this.$data.tagsSaving=!1,t&&(this.$data.isTagsEditEnabled=!1)},onTagsEditEsc(){this.$data.isTagsEditEnabled=!1},onNameToggle(){this.$data.isNameEditEnabled=!this.$data.isNameEditEnabled,this.$data.isNameEditEnabled&&(this.$data.isTagsEditEnabled&&this.onTagsBlur(),this.$data.isTagsEditEnabled=!1)},async onNameSubmit(s,e){const t=s.trim();if(!t){this.$showMessage({title:this.$locale.baseText("workflowDetails.showMessage.title"),message:this.$locale.baseText("workflowDetails.showMessage.message"),type:"error"}),e(!1);return}if(t===this.workflowName){this.$data.isNameEditEnabled=!1,e(!0);return}const i=await this.saveCurrentWorkflow({name:s});i&&(this.$data.isNameEditEnabled=!1),e(i)},async handleFileImport(){const s=new FileReader;s.onload=t=>{const i=t.target.result;let n;try{n=JSON.parse(i)}catch{this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleFileImport.title"),message:this.$locale.baseText("mainSidebar.showMessage.handleFileImport.message"),type:"error"});return}this.$root.$emit("importWorkflowData",{data:n})};const e=this.$refs.importFile;e!==null&&e.files!==null&&e.files.length!==0&&s.readAsText(e.files[0])},async onWorkflowMenuSelect(s){switch(s){case tt.DUPLICATE:{await this.$store.dispatch("ui/openModalWithData",{name:Wo,data:{id:this.$store.getters.workflowId,name:this.$store.getters.workflowName,tags:this.$store.getters.workflowTags}});break}case tt.DOWNLOAD:{const e=await this.getWorkflowDataToSave(),{tags:t,...i}=e;i.id&&typeof i.id=="string"&&(i.id=parseInt(i.id,10));const n={...i,meta:{instanceId:this.$store.getters.instanceId},tags:(t||[]).map(a=>{const{usageCount:l,...c}=this.$store.getters["tags/getTagById"](a);return c})},o=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"});let r=this.$store.getters.workflowName||"unsaved_workflow";r=r.replace(/[^a-z0-9]/gi,"_"),this.$telemetry.track("User exported workflow",{workflow_id:e.id}),Fp.exports.saveAs(o,r+".json");break}case tt.IMPORT_FROM_URL:{try{const e=await this.$prompt(this.$locale.baseText("mainSidebar.prompt.workflowUrl")+":",this.$locale.baseText("mainSidebar.prompt.importWorkflowFromUrl")+":",{confirmButtonText:this.$locale.baseText("mainSidebar.prompt.import"),cancelButtonText:this.$locale.baseText("mainSidebar.prompt.cancel"),inputErrorMessage:this.$locale.baseText("mainSidebar.prompt.invalidUrl"),inputPattern:/^http[s]?:\/\/.*\.json$/i});this.$root.$emit("importWorkflowUrl",{url:e.value})}catch{}break}case tt.IMPORT_FROM_FILE:{this.$refs.importFile.click();break}case tt.SETTINGS:{this.$store.dispatch("ui/openModal",Lt);break}case tt.DELETE:{if(await this.confirmMessage(this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.message",{interpolate:{workflowName:this.workflowName}}),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.headline"),"warning",this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.confirmButtonText"),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.cancelButtonText"))===!1)return;try{await this.restApi().deleteWorkflow(this.currentWorkflowId)}catch(t){this.$showError(t,this.$locale.baseText("mainSidebar.showError.stopExecution.title"));return}this.$store.commit("setStateDirty",!1),this.$titleReset(),this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleSelect1.title"),type:"success"}),this.$router.push({name:O.NEW_WORKFLOW});break}}}},watch:{currentWorkflowId(){this.$data.isTagsEditEnabled=!1,this.$data.isNameEditEnabled=!1}}});const cQ="_workflowMenuContainer_1e9wn_1",dQ="_hiddenInput_1e9wn_5",uQ="_deleteItem_1e9wn_9";var hQ={workflowMenuContainer:cQ,hiddenInput:dQ,deleteItem:uQ},pQ=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.workflowName?t("div",{staticClass:"container"},[t("BreakpointsObserver",{staticClass:"name-container",attrs:{valueXS:15,valueSM:25,valueMD:50},scopedSlots:e._u([{key:"default",fn:function({value:i}){return[t("ShortenName",{attrs:{name:e.workflowName,limit:i,custom:!0},scopedSlots:e._u([{key:"default",fn:function({shortenedName:n}){return[t("InlineTextEdit",{staticClass:"name",attrs:{value:e.workflowName,previewValue:n,isEditEnabled:e.isNameEditEnabled,maxLength:e.MAX_WORKFLOW_NAME_LENGTH,placeholder:"Enter workflow name"},on:{toggle:e.onNameToggle,submit:e.onNameSubmit}})]}}],null,!0)})]}}],null,!1,4183662312)}),e.areTagsEnabled?t("span",{staticClass:"tags"},[e.isTagsEditEnabled?t("div",[t("TagsDropdown",{ref:"dropdown",staticClass:"tags-edit",attrs:{createEnabled:!0,currentTagIds:e.appliedTagIds,eventBus:e.tagsEditBus,placeholder:e.$locale.baseText("workflowDetails.chooseOrCreateATag")},on:{blur:e.onTagsBlur,update:e.onTagsUpdate,esc:e.onTagsEditEsc}})],1):e.currentWorkflowTagIds.length===0?t("div",[t("span",{staticClass:"add-tag clickable",on:{click:e.onTagsEditEnable}},[e._v(" + "+e._s(e.$locale.baseText("workflowDetails.addTag"))+" ")])]):t("TagsContainer",{key:e.currentWorkflowId,attrs:{tagIds:e.currentWorkflowTagIds,clickable:!0,responsive:!0},on:{click:e.onTagsEditEnable}})],1):t("span",{staticClass:"tags"}),t("PushConnectionTracker",{staticClass:"actions"},[[t("span",{staticClass:"activator"},[t("WorkflowActivator",{attrs:{"workflow-active":e.isWorkflowActive,"workflow-id":e.currentWorkflowId}})],1),t("SaveButton",{attrs:{type:"secondary",saved:!this.isDirty&&!this.isNewWorkflow,disabled:e.isWorkflowSaving},on:{click:e.onSaveButtonClick}}),t("div",{class:e.$style.workflowMenuContainer},[t("input",{ref:"importFile",class:e.$style.hiddenInput,attrs:{type:"file"},on:{change:function(i){return e.handleFileImport()}}}),t("n8n-action-dropdown",{attrs:{items:e.workflowMenuItems},on:{select:e.onWorkflowMenuSelect}})],1)]],2)],1):e._e()},fQ=[];const fh={$style:hQ};function mQ(s){for(var e in fh)this[e]=fh[e]}var gQ=_(lQ,pQ,fQ,!1,mQ,"b82ea9b3",null,null),wQ=gQ.exports,yQ=m.extend({name:"ReadOnly"});var vQ=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-tooltip",{staticClass:"primary-color",attrs:{placement:"bottom-end"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("executionDetails.readOnly.youreViewingTheLogOf"))}})]),t("div",[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),t("span",{domProps:{textContent:e._s(e.$locale.baseText("executionDetails.readOnly.readOnly"))}})],1)])},_Q=[],OQ=_(yQ,vQ,_Q,!1,null,"990eb0c0",null,null),bQ=OQ.exports,xQ=N(fi).extend({name:"ExecutionDetails",components:{ShortenName:Kg,ReadOnly:bQ},computed:{executionId(){return this.$route.params.id},executionFinished(){const s=this.$store.getters.getWorkflowExecution;return!!s&&s.finished},executionWaiting(){const s=this.$store.getters.getWorkflowExecution;return!!s&&!!s.waitTill},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowName(){return this.$store.getters.workflowName}},methods:{async openWorkflow(s){this.$titleSet(this.workflowName,"IDLE"),this.$router.push({name:"NodeViewExisting",params:{name:s}})}}});var $Q=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"container"},[t("span",{staticClass:"title"},[e._v(" "+e._s(e.$locale.baseText("executionDetails.executionId")+":")+" "),t("span",[t("strong",[e._v(e._s(e.executionId))]),e._v("\xA0 "),e.executionFinished?t("font-awesome-icon",{staticClass:"execution-icon success",attrs:{icon:"check",title:e.$locale.baseText("executionDetails.executionWasSuccessful")}}):e.executionWaiting?t("font-awesome-icon",{staticClass:"execution-icon warning",attrs:{icon:"clock",title:e.$locale.baseText("executionDetails.executionWaiting")}}):t("font-awesome-icon",{staticClass:"execution-icon error",attrs:{icon:"times",title:e.$locale.baseText("executionDetails.executionFailed")}})],1),e._v(" "+e._s(e.$locale.baseText("executionDetails.of"))+" "),t("span",{staticClass:"primary-color clickable",attrs:{title:e.$locale.baseText("executionDetails.openWorkflow")}},[t("ShortenName",{attrs:{name:e.workflowName},scopedSlots:e._u([{key:"default",fn:function({shortenedName:i}){return[t("span",{on:{click:function(n){return e.openWorkflow(e.workflowExecution.workflowId)}}},[e._v(' "'+e._s(i)+'" ')])]}}])})],1),e._v(" "+e._s(e.$locale.baseText("executionDetails.workflow"))+" ")]),t("ReadOnly",{staticClass:"read-only"})],1)},TQ=[],kQ=_(xQ,$Q,TQ,!1,null,"07f76280",null,null),SQ=kQ.exports,EQ=m.extend({name:"tab-bar",data(){return{MAIN_HEADER_TABS:Le}},props:{items:{type:Array,required:!0},activeTab:{type:String,default:Le.WORKFLOW}},computed:{mainSidebarCollapsed(){return this.$store.getters["ui/sidebarMenuCollapsed"]}},methods:{onSelect(s,e){this.$emit("select",s,e)}}});const CQ="_container_1mpky_1",NQ="_menuCollapsed_1mpky_13";var PQ={container:CQ,menuCollapsed:NQ},DQ=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.items?t("div",{class:{[e.$style.container]:!0,["tab-bar-container"]:!0,[e.$style.menuCollapsed]:e.mainSidebarCollapsed}},[t("n8n-radio-buttons",{attrs:{value:e.activeTab,options:e.items},on:{input:e.onSelect}})],1):e._e()},IQ=[];const mh={$style:PQ};function AQ(s){for(var e in mh)this[e]=mh[e]}var RQ=_(EQ,DQ,IQ,!1,AQ,null,null,null),MQ=RQ.exports,WQ=N(Zg,ie).extend({name:"MainHeader",components:{WorkflowDetails:wQ,ExecutionDetails:SQ,TabBar:MQ},data(){return{activeHeaderTab:Le.WORKFLOW,workflowToReturnTo:"",dirtyState:this.$store.getters.getStateIsDirty}},computed:{...F("ui",["sidebarMenuCollapsed"]),tabBarItems(){return[{value:Le.WORKFLOW,label:this.$locale.baseText("generic.workflow")},{value:Le.EXECUTIONS,label:this.$locale.baseText("generic.executions")}]},isExecutionPage(){return this.$route.name===O.EXECUTION},activeNode(){return this.$store.getters["ndv/activeNode"]},hideMenuBar(){return Boolean(this.activeNode&&this.activeNode.type!==nt)},workflowName(){return this.$store.getters.workflowName},currentWorkflow(){return this.$route.params.name||this.$store.getters.workflowId},onWorkflowPage(){return this.$route.meta&&(this.$route.meta.nodeView||this.$route.meta.keepWorkflowAlive===!0)},activeExecution(){return this.$store.getters["workflows/getActiveWorkflowExecution"]}},mounted(){this.syncTabsWithRoute(this.$route),this.pushConnect()},beforeDestroy(){this.pushDisconnect()},watch:{$route(s,e){this.syncTabsWithRoute(s)}},methods:{syncTabsWithRoute(s){s.name===O.EXECUTION_HOME||s.name===O.EXECUTIONS||s.name===O.EXECUTION_PREVIEW?this.activeHeaderTab=Le.EXECUTIONS:(s.name===O.WORKFLOW||s.name===O.NEW_WORKFLOW)&&(this.activeHeaderTab=Le.WORKFLOW);const e=s.params.name;e!=="new"&&(this.workflowToReturnTo=e)},onTabSelected(s,e){switch(s){case Le.WORKFLOW:["","new",fe].includes(this.workflowToReturnTo)?this.$route.name!==O.NEW_WORKFLOW&&(this.$router.push({name:O.NEW_WORKFLOW}),this.$store.commit("setStateDirty",this.dirtyState)):this.$route.name!==O.WORKFLOW&&this.$router.push({name:O.WORKFLOW,params:{name:this.workflowToReturnTo}}),this.activeHeaderTab=Le.WORKFLOW;break;case Le.EXECUTIONS:this.dirtyState=this.$store.getters.getStateIsDirty,this.workflowToReturnTo=this.currentWorkflow;const t=this.currentWorkflow===fe?"new":this.currentWorkflow;this.activeExecution?this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:t,executionId:this.activeExecution.id}}).catch(()=>{}):this.$router.push({name:O.EXECUTION_HOME,params:{name:t}}),this.activeHeaderTab=Le.EXECUTIONS;break}}}});var LQ=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{class:{"main-header":!0,expanded:!e.sidebarMenuCollapsed}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideMenuBar,expression:"!hideMenuBar"}],staticClass:"top-menu"},[e.isExecutionPage?t("ExecutionDetails"):t("WorkflowDetails"),e.onWorkflowPage&&!e.isExecutionPage?t("tab-bar",{attrs:{items:e.tabBarItems,activeTab:e.activeHeaderTab},on:{select:e.onTabSelected}}):e._e()],1)])])},QQ=[],BQ=_(WQ,LQ,QQ,!1,null,null,null,null),bi=BQ.exports;const UQ="_notification_197jx_8";var VQ={"gift-icon":"_gift-icon_197jx_1",notification:UQ};const FQ={};var jQ=function(){var e=this,t=e._self._c;return t("div",{class:e.$style["gift-icon"]},[t("font-awesome-icon",{attrs:{icon:"gift"}}),t("div",{class:e.$style.notification},[t("div")])],1)},zQ=[];const gh={$style:VQ};function GQ(s){for(var e in gh)this[e]=gh[e]}var HQ=_(FQ,jQ,zQ,!1,GQ,null,null,null),qQ=HQ.exports;const Hl=N(ve,Ce,ie,V,fi).extend({methods:{async runWorkflowApi(s){if(this.$store.getters.pushConnectionActive===!1)throw new Error(this.$locale.baseText("workflowRun.noActiveConnectionToTheServer"));this.$store.commit("setSubworkflowExecutionError",null),this.$store.commit("addActiveAction","workflowRunning");let e;try{e=await this.restApi().runWorkflow(s)}catch(t){throw this.$store.commit("removeActiveAction","workflowRunning"),t}return e.executionId!==void 0&&this.$store.commit("setActiveExecutionId",e.executionId),e.waitingForWebhook===!0&&this.$store.commit("setExecutionWaitingForWebhook",!0),e},async runWorkflow(s,e){const t=this.getCurrentWorkflow();if(this.$store.getters.isActionActive("workflowRunning")!==!0){this.$titleSet(t.name,"EXECUTING"),this.clearAllStickyNotifications();try{if(this.$store.getters.nodesIssuesExist===!0){const f=this.checkReadyForExecution(t,s);if(f!==null){const w=[];let g;const v=[],y=[];for(const S of Object.keys(f)){g=Bp(f[S]);let T="UNKNOWN";const $=this.$store.getters.getNodeByName(S);$&&(T=$.type),y.push(T);const D={node_type:T,error:"",caused_by_credential:!!f[S].credentials};for(const P of g)w.push(`<strong>${S}</strong>: ${P}`),D.error=D.error.concat(", ",P);v.push(D)}this.$showMessage({title:this.$locale.baseText("workflowRun.showMessage.title"),message:w.join("<br />"),type:"error",duration:0}),this.$titleSet(t.name,"ERROR"),this.$externalHooks().run("workflowRun.runError",{errorMessages:w,nodeName:s}),this.getWorkflowDataToSave().then(S=>{this.$telemetry.track("Workflow execution preflight failed",{workflow_id:t.id,workflow_name:t.name,execution_type:s?"node":"workflow",node_graph_string:JSON.stringify(Pi(S,this.getNodeTypes()).nodeGraph),error_node_types:JSON.stringify(y),errors:JSON.stringify(v)})});return}}let n=[];s!==void 0&&(n=t.getParentNodes(s,"main",1));const o=this.$store.getters.getWorkflowRunData;let r;const a=[];if(o!==null&&Object.keys(o).length!==0){r={};for(const f of n){const w=t.getParentNodes(f,"main");if(!t.nodes[f].disabled){w.push(f);for(const g of w){if(o[g]===void 0||o[g].length===0){a.push(g);break}r[g]=o[g].slice(0,1)}}}Object.keys(r).length===0&&(r=void 0)}a.length===0&&s!==void 0&&a.push(s);const l=this.$store.getters.isNewWorkflow,c=this.$store.getters.currentWorkflowHasWebhookNode;l&&c&&await this.saveCurrentWorkflow();const d=await this.getWorkflowDataToSave(),u={workflowData:d,runData:r,pinData:d.pinData,startNodes:a};s&&(u.destinationNode=s);const h={id:"__IN_PROGRESS__",finished:!1,mode:"manual",startedAt:new Date,stoppedAt:void 0,workflowId:t.id,executedNode:s,data:{resultData:{runData:r||{},pinData:d.pinData,startNodes:a,workflowData:d}},workflowData:{id:this.$store.getters.workflowId,name:d.name,active:d.active,createdAt:0,updatedAt:0,...d}};this.$store.commit("setWorkflowExecutionData",h),this.updateNodesExecutionIssues();const p=await this.runWorkflowApi(u);return this.$externalHooks().run("workflowRun.runWorkflow",{nodeName:s,source:e}),p}catch(i){this.$titleSet(t.name,"ERROR"),this.$showError(i,this.$locale.baseText("workflowRun.showError.title"));return}}}}});var XQ=N(be,Ce,V,fi,ie,Hl,Gl,dt).extend({name:"MainSidebar",components:{ExecutionsList:Xg,GiftNotificationIcon:qQ,WorkflowSettings:Hg},data(){return{basePath:this.$store.getters.getBaseUrl,fullyExpanded:!1}},computed:{...F("ui",{isCollapsed:"sidebarMenuCollapsed",isNodeView:"isNodeView"}),...F("versions",["hasVersionUpdates","nextVersions"]),...F("users",["canUserAccessSidebarUserInfo","currentUser"]),...F("settings",["isTemplatesEnabled","isUserManagementEnabled"]),canUserAccessSettings(){return this.findFirstAccessibleSettingsRoute()!==null},showUserArea(){return this.isUserManagementEnabled&&this.canUserAccessSidebarUserInfo&&this.currentUser},workflowExecution(){return this.$store.getters.getWorkflowExecution},userMenuItems(){return[{id:"settings",label:this.$locale.baseText("settings")},{id:"logout",label:this.$locale.baseText("auth.signout")}]},mainMenuItems(){var i;const s=[],e=this.$store.getters.sidebarMenuItems;if(e&&e.length>0)for(const n of e)s.push({id:n.id,icon:n.properties?n.properties.icon:"",label:n.properties?n.properties.title:"",position:n.position,type:(i=n.properties)!=null&&i.href?"link":"regular",properties:n.properties});const t=[{id:"workflows",icon:"network-wired",label:this.$locale.baseText("mainSidebar.workflows"),position:"top",activateOnRouteNames:[O.WORKFLOWS]},{id:"templates",icon:"box-open",label:this.$locale.baseText("mainSidebar.templates"),position:"top",available:this.isTemplatesEnabled,activateOnRouteNames:[O.TEMPLATES]},{id:"credentials",icon:"key",label:this.$locale.baseText("mainSidebar.credentials"),customIconSize:"medium",position:"top",activateOnRouteNames:[O.CREDENTIALS]},{id:"executions",icon:"tasks",label:this.$locale.baseText("generic.executions"),position:"top"},{id:"settings",icon:"cog",label:this.$locale.baseText("settings"),position:"bottom",available:this.canUserAccessSettings&&this.currentUser,activateOnRouteNames:[O.USERS_SETTINGS,O.API_SETTINGS,O.PERSONAL_SETTINGS]},{id:"help",icon:"question",label:"Help",position:"bottom",children:[{id:"quickstart",icon:"video",label:this.$locale.baseText("mainSidebar.helpMenuItems.quickstart"),type:"link",properties:{href:"https://www.youtube.com/watch?v=RpjQTGKm-ok",newWindow:!0}},{id:"docs",icon:"book",label:this.$locale.baseText("mainSidebar.helpMenuItems.documentation"),type:"link",properties:{href:"https://docs.n8n.io",newWindow:!0}},{id:"forum",icon:"users",label:this.$locale.baseText("mainSidebar.helpMenuItems.forum"),type:"link",properties:{href:"https://community.n8n.io",newWindow:!0}},{id:"examples",icon:"graduation-cap",label:this.$locale.baseText("mainSidebar.helpMenuItems.course"),type:"link",properties:{href:"https://www.youtube.com/watch?v=RpjQTGKm-ok",newWindow:!0}},{id:"about",icon:"info",label:this.$locale.baseText("mainSidebar.aboutN8n"),position:"bottom"}]}];return[...s,...t]}},async mounted(){this.$refs.user&&this.$externalHooks().run("mainSidebar.mounted",{userRef:this.$refs.user}),window.innerWidth<900||this.isNodeView?this.$store.commit("ui/collapseSidebarMenu"):this.$store.commit("ui/expandSidebarMenu"),await m.nextTick(),this.fullyExpanded=!this.isCollapsed},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},methods:{trackHelpItemClick(s){this.$telemetry.track("User clicked help resource",{type:s,workflow_id:this.$store.getters.workflowId})},async onUserActionToggle(s){switch(s){case"logout":this.onLogout();break;case"settings":this.$router.push({name:O.PERSONAL_SETTINGS});break}},async onLogout(){try{await this.$store.dispatch("users/logout");const s=this.$router.resolve({name:O.SIGNIN});window.open(s.href,"_self")}catch(s){this.$showError(s,this.$locale.baseText("auth.signout.error"))}},toggleCollapse(){this.$store.commit("ui/toggleSidebarMenuCollapse"),this.isCollapsed?this.fullyExpanded=!this.isCollapsed:setTimeout(()=>{this.fullyExpanded=!this.isCollapsed},300)},openUpdatesPanel(){this.$store.dispatch("ui/openModal",Ns)},async handleSelect(s){switch(s){case"workflows":{this.$router.currentRoute.name!==O.WORKFLOWS&&this.$router.push({name:O.WORKFLOWS});break}case"templates":{this.$router.currentRoute.name!==O.TEMPLATES&&this.$router.push({name:O.TEMPLATES});break}case"credentials":{this.$router.currentRoute.name!==O.CREDENTIALS&&this.$router.push({name:O.CREDENTIALS});break}case"executions":{this.$store.dispatch("ui/openModal",Zi);break}case"settings":{const e=this.findFirstAccessibleSettingsRoute();if(e){const t=this.$router.resolve({name:e});this.$router.currentRoute.name!==e&&this.$router.push(t.route.path)}break}case"about":{this.trackHelpItemClick("about"),this.$store.dispatch("ui/openModal",Yi);break}case"quickstart":case"docs":case"forum":case"examples":{this.trackHelpItemClick(s);break}}},async createNewWorkflow(){if(this.$store.getters.getStateIsDirty){const e=await this.confirmModal(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),"warning",this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),!0);if(e===to)await this.saveCurrentWorkflow({},!1)&&this.$store.dispatch("settings/fetchPromptsData"),this.$router.currentRoute.name===O.NEW_WORKFLOW?this.$root.$emit("newWorkflow"):this.$router.push({name:O.NEW_WORKFLOW}),this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleSelect2.title"),type:"success"});else if(e===nl)this.$store.commit("setStateDirty",!1),this.$router.currentRoute.name===O.NEW_WORKFLOW?this.$root.$emit("newWorkflow"):(this.$store.commit("setWorkflowId",fe),this.$router.push({name:O.NEW_WORKFLOW})),this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleSelect2.title"),type:"success"});else if(e===eo)return}else this.$router.currentRoute.name!==O.NEW_WORKFLOW&&(this.$store.commit("setWorkflowId",fe),this.$router.push({name:O.NEW_WORKFLOW})),this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleSelect3.title"),type:"success"});this.$titleReset()},findFirstAccessibleSettingsRoute(){const s=this.$router.getRoutes().filter(t=>t.meta.telemetry&&t.meta.telemetry.pageCategory==="settings").map(t=>t.name||"");let e=null;for(const t of s)if(this.canUserAccessRouteByName(t)){e=t;break}return e},onResize(s){this.callDebounced("onResizeEnd",{debounceTime:100},s)},onResizeEnd(s){const e=s.target.outerWidth;this.checkWidthAndAdjustSidebar(e)},checkWidthAndAdjustSidebar(s){s<900&&(this.$store.commit("ui/collapseSidebarMenu"),m.nextTick(()=>{this.fullyExpanded=!this.isCollapsed}))}}});const YQ="_sideMenu_1r5vy_1",ZQ="_logo_1r5vy_8",KQ="_sideMenuCollapsed_1r5vy_19",JQ="_sideMenuCollapseButton_1r5vy_26",e2="_expandedButton_1r5vy_54",t2="_updates_1r5vy_62",s2="_expanded_1r5vy_54",i2="_userArea_1r5vy_81",n2="_userName_1r5vy_88",o2="_userActions_1r5vy_102";var r2={sideMenu:YQ,logo:ZQ,sideMenuCollapsed:KQ,sideMenuCollapseButton:JQ,expandedButton:e2,updates:t2,expanded:s2,userArea:i2,userName:n2,userActions:o2},a2=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{["side-menu"]:!0,[e.$style.sideMenu]:!0,[e.$style.sideMenuCollapsed]:e.isCollapsed},attrs:{id:"side-menu"}},[t("div",{class:{clickable:!0,[e.$style.sideMenuCollapseButton]:!0,[e.$style.expandedButton]:!e.isCollapsed},attrs:{id:"collapse-change-button"},on:{click:e.toggleCollapse}}),t("n8n-menu",{attrs:{items:e.mainMenuItems,collapsed:e.isCollapsed},on:{select:e.handleSelect},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.logo},[t("img",{class:e.$style.icon,attrs:{src:e.basePath+(e.isCollapsed?"n8n-logo-collapsed.svg":"n8n-logo-expanded.svg"),alt:"n8n"}})])]},proxy:!0},e.hasVersionUpdates?{key:"menuSuffix",fn:function(){return[t("div",{class:e.$style.updates,on:{click:e.openUpdatesPanel}},[t("div",{class:e.$style.giftContainer},[t("GiftNotificationIcon")],1),t("n8n-text",{class:{["ml-xs"]:!0,[e.$style.expanded]:e.fullyExpanded},attrs:{color:"text-base"}},[e._v(" "+e._s(e.nextVersions.length>99?"99+":e.nextVersions.length)+" update"+e._s(e.nextVersions.length>1?"s":"")+" ")])],1)]},proxy:!0}:null,e.showUserArea?{key:"footer",fn:function(){return[t("div",{class:e.$style.userArea},[t("div",{staticClass:"ml-3xs"},[t("el-dropdown",{attrs:{disabled:!e.isCollapsed,placement:"right-end",trigger:"click"},on:{command:e.onUserActionToggle}},[t("div",{class:{[e.$style.avatar]:!0,clickable:e.isCollapsed}},[t("n8n-avatar",{attrs:{firstName:e.currentUser.firstName,lastName:e.currentUser.lastName,size:"small"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"settings"}},[e._v(e._s(e.$locale.baseText("settings")))]),t("el-dropdown-item",{attrs:{command:"logout"}},[e._v(e._s(e.$locale.baseText("auth.signout")))])],1)],1)])],1),t("div",{class:{["ml-2xs"]:!0,[e.$style.userName]:!0,[e.$style.expanded]:e.fullyExpanded}},[t("n8n-text",{attrs:{size:"small",bold:!0,color:"text-dark"}},[e._v(e._s(e.currentUser.fullName))])],1),t("div",{class:{[e.$style.userActions]:!0,[e.$style.expanded]:e.fullyExpanded}},[t("n8n-action-dropdown",{attrs:{items:e.userMenuItems,placement:"top-start"},on:{select:e.onUserActionToggle}})],1)])]},proxy:!0}:null],null,!0)})],1)},l2=[];const wh={$style:r2};function c2(s){for(var e in wh)this[e]=wh[e]}var d2=_(XQ,a2,l2,!1,c2,null,null,null),Ct=d2.exports;const ql=m.extend({data(){return{isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isMacOs:/(ipad|iphone|ipod|mac)/i.test(navigator.platform)}},computed:{controlKeyCode(){return this.isMacOs?"Meta":"Control"}},methods:{isCtrlKeyPressed(s){return this.isTouchDevice===!0?!0:this.isMacOs?s.metaKey:s.ctrlKey}}}),tw="drop-add-node",Xl="midpoint-arrow",u2="endpoint-arrow",ls="run-items-label",si="connection-actions",h2=26,Yl="input-name-label",sw=[-3,.5],p2=[-4.5,.5],iw="output-name-label",Ze=20,f2=90,m2=100,Wt=100,Co=100,nw=180,ow=240,rw=65,g2=65,w2=200,y2=300,yh=Wt*2+Ze,aw=140,v2="-input",_2="-output",lw="PlaceholderTriggerButton",O2={name:"Start",type:di,typeVersion:1,position:[nw,ow],parameters:{}},b2={name:"Choose a Trigger...",type:lw,typeVersion:1,position:[],parameters:{height:Co,width:Co}},Hr={name:Xa,type:nt,typeVersion:1,position:[0,0],parameters:{height:300,width:380}},x2=["N8nCustom",{cornerRadius:12,stub:h2+10,targetGap:4,alwaysRespectStubs:!1,loopbackVerticalLength:Wt+Ze,loopbackMinimum:aw,getEndpointOffset(s){const t=s&&s.__meta?s.__meta.index:0,i=s&&s.__meta?s.__meta.totalEndpoints:0,n=gt(s,iw),o=n&&n.label&&n.label.length>1?10:0,r=i>3?24:0;return t*10+o+r}}],mi={stroke:Ge("--color-foreground-dark"),strokeWidth:2,outlineWidth:12,outlineStroke:"transparent"},$2={...mi,stroke:Ge("--color-foreground-xdark")},cw={...mi,stroke:Ge("--color-primary")},T2={...mi,stroke:Ge("--color-success-light")},k2=[["Arrow",{id:u2,location:1,width:12,foldback:1,length:10,visible:!0}],["Arrow",{id:Xl,location:.5,width:12,foldback:1,length:10,visible:!1}]],vh={input:{1:[[.01,.5,-1,0]],2:[[.01,.3,-1,0],[.01,.7,-1,0]],3:[[.01,.25,-1,0],[.01,.5,-1,0],[.01,.75,-1,0]],4:[[.01,.2,-1,0],[.01,.4,-1,0],[.01,.6,-1,0],[.01,.8,-1,0]]},output:{1:[[.99,.5,1,0]],2:[[.99,.3,1,0],[.99,.7,1,0]],3:[[.99,.25,1,0],[.99,.5,1,0],[.99,.75,1,0]],4:[[.99,.2,1,0],[.99,.4,1,0],[.99,.6,1,0],[.99,.8,1,0]]}},_h=(s,e)=>({width:8,height:s&&s.outputs.length>2?18:20,fill:Ge(e),stroke:Ge(e),lineWidth:0}),S2=s=>["Label",{id:Yl,location:sw,label:s,cssClass:"node-input-endpoint-label",visible:!0}],Oh=(s,e)=>({radius:s&&s.outputs.length>2?7:9,fill:Ge(e),outlineStroke:"none"}),E2=s=>["Label",{id:iw,location:[1.9,.5],label:s,cssClass:"node-output-endpoint-label",visible:!0}],C2=s=>s.reduce((e,t)=>t.position[0]>e.position[0]||t.position[1]>e.position[1]?e:t),N2=s=>s.reduce((e,t)=>{const i=[nt,lw].includes(t.type),n=i&&zs(t.parameters.width)?t.parameters.width:Wt,o=i&&zs(t.parameters.height)?t.parameters.height:Wt,r=t.position[0],a=t.position[1];return r<e.minX&&(e.minX=r),a<e.minY&&(e.minY=a),r+n>e.maxX&&(e.maxX=r+n),a+o>e.maxY&&(e.maxY=a+o),e},{minX:s[0].position[0],minY:s[0].position[1],maxX:s[0].position[0],maxY:s[0].position[1]}),dw=({scale:s,offset:[e,t]})=>(s/=1.25,e/=1.25,t/=1.25,e+=window.innerWidth/10,t+=window.innerHeight/10,{scale:s,offset:[e,t]}),uw=({scale:s,offset:[e,t]})=>(s*=1.25,e-=window.innerWidth/10,t-=window.innerHeight/10,e*=1.25,t*=1.25,{scale:s,offset:[e,t]}),P2=s=>{if(s.scale>1)for(;s.scale>1;)s=dw(s);else for(;s.scale<1;)s=uw(s);return s.scale=1,s},gt=(s,e)=>{try{return s.getOverlay(e)}catch{return null}},hw=(s,e)=>{const t=gt(s,e);t&&t.setVisible(!0)},No=(s,e)=>{const t=gt(s,e);t&&t.setVisible(!1)},ir=s=>{if(!s||!s.endpoints||s.endpoints.length!==2)return;const e=!!gt(s,ls),t=s.endpoints[0],i=s.endpoints[1],n=t.anchor.lastReturnValue[0],o=i.anchor.lastReturnValue?i.anchor.lastReturnValue[0]:n+1,r=e?150:0,a=n>=o,l=Math.abs(n-o)>=r,c=gt(s,Xl);c&&(c.setVisible(a&&l),c.setLocation(e?.6:.5))},pw=s=>{if(!s.connector)return[0,0];const e=s.connector.bounds,t=Math.abs(e.maxX-e.minX),i=Math.abs(e.maxY-e.minY);return[t,i]},D2=s=>{const e=s.endpoints[0],t=s.endpoints[1],i=e.anchor.lastReturnValue[0];return t.anchor.lastReturnValue[0]-i<-1*aw},Zl=s=>{if(!s||!s.connector)return;const e=gt(s,ls);if(!e)return;const t=gt(s,si);if(t&&t.visible){e.setVisible(!1);return}const[i,n]=pw(s);i<f2&&n<m2?e.setVisible(!1):e.setVisible(!0);const o=e.canvas&&e.canvas.querySelector("span");o&&(n===0||D2(s)?o.classList.add("floating"):o.classList.remove("floating"))},bh=s=>s==="trash"?'<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="trash" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-trash fa-w-14 Icon__medium_ctPPJ"><path data-v-66d5c7e2="" fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z" class=""></path></svg>':s==="plus"?'<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-plus fa-w-14 Icon__medium_ctPPJ"><path data-v-301ed208="" fill="currentColor" d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z" class=""></path></svg>':"",I2=(s,e)=>!(Math.abs(s[0]-e[0])<=100&&Math.abs(s[1]-e[1])<=50);function Po(s,e){const t=Math.ceil(s/e),i=e*t,n=s*e>0?e*(t+1):e*(t-1);return Math.abs(s-i)<Math.abs(s-n)?i:n}const Zt=(s,e,t)=>{const i=[...e];i[0]=Po(i[0],Ze),i[1]=Po(i[1],Ze),t||(t=[40,40]);let n=!1,o,r;do{for(n=!1,o=0;o<s.length;o++)if(r=s[o],!I2(r.position,i)){n=!0;break}n===!0&&(i[0]+=t[0],i[1]+=t[1])}while(n===!0);return i},Do=s=>{const e=s.pageX!==void 0?s.pageX:s.touches&&s.touches[0]&&s.touches[0].pageX?s.touches[0].pageX:0,t=s.pageY!==void 0?s.pageY:s.touches&&s.touches[0]&&s.touches[0].pageY?s.touches[0].pageY:0;return[e,t]},fw=(s,e,t,i)=>[(s-i[0])/t,(e-i[1])/t],A2=(s,e)=>{const{editorWidth:t,editorHeight:i}=gw();return fw(t/2,(i-rw)/2,s,e)},R2=(s,e,t)=>{const i=Ze*s,n=1*s,o=Ze/2*s;if(t)return{"background-image":"linear-gradient(135deg, #f9f9fb 25%, #ffffff 25%, #ffffff 50%, #f9f9fb 50%, #f9f9fb 75%, #ffffff 75%, #ffffff 100%)","background-size":`${i}px ${i}px`,"background-position":`left ${e[0]}px top ${e[1]}px`};const r={"background-size":`${i}px ${i}px`,"background-position":`left ${e[0]}px top ${e[1]}px`};if(i>10.5){const a=Ge("--color-canvas-dot");return{...r,"background-image":`radial-gradient(circle at ${o}px ${o}px, ${a} ${n}px, transparent 0)`}}return r},xh=s=>{s&&s.connector&&(No(s,si),Zl(s),ir(s))},M2=s=>{s&&s.connector&&(hw(s,si),No(s,ls),gt(s,ls)||No(s,Xl))},W2=(s,e)=>{const t={};return s.forEach(i=>{!i.data||!i.data.main||i.data.main.forEach((n,o)=>{const r=o;t[r]||(t[r]={}),t[r][Ti]||(t[r][Ti]={},t[r][Ti][0]={total:0,iterations:0});const a=t[r][Ti][0];a.total+=n?n.length:0,a.iterations+=n?1:0,e[r]&&e[r].map(l=>{const c=l.node,d=l.index;t[r][c]||(t[r][c]={}),t[r][c][d]||(t[r][c][d]={total:0,iterations:0}),t[r][c][d].total+=n?n.length:0,t[r][c][d].iterations+=n?1:0})})}),t},xi=s=>{s.removeOverlay(ls),s.setPaintStyle(mi),ir(s),s.canvas&&s.canvas.classList.remove("success")},mw=s=>{let e=`${s.total}`;return e=s.total>1?`${e} items`:`${e} item`,e=s.iterations>1?`${e} total`:e,e},$h=(s,e)=>{s.setPaintStyle(T2),s.canvas&&s.canvas.classList.add("success"),gt(s,ls)&&s.removeOverlay(ls),s.addOverlay(["Label",{id:ls,label:`<span>${mw(e)}</span>`,cssClass:"connection-run-items-label",location:.5}]),Zl(s),ir(s)},gw=()=>{let s=window.innerWidth,e=window.innerHeight;const t=document.getElementById("node-view-root");if(t){const i=t.getBoundingClientRect();s=i.width,e=i.height}return{editorWidth:s,editorHeight:e}},L2=(s,e=!0)=>{const{minX:t,minY:i,maxX:n,maxY:o}=N2(s),{editorWidth:r,editorHeight:a}=gw(),l=e?200:100,c=Wt*4,d=n-t+c,u=r/d,h=o-i+c,p=a/h,f=Math.min(u,p,1);let w=t*-1*f;w+=(r-(n-t)*f)/2;let g=i*-1*f;return g+=(a-(o-i+l)*f)/2,{zoomLevel:f,offset:[Po(w,Ze),Po(g,Ze)]}},Th=(s,e)=>{s&&s.connector&&(e&&s.connector.setTargetEndpoint(e),s.setPaintStyle(cw),No(s,tw))},Q2=s=>{s&&s.connector&&(s.connector.resetTargetEndpoint(),s.setPaintStyle($2),hw(s,tw))},B2=s=>{s&&s.connector&&(s.connector.resetTargetEndpoint(),s.setPaintStyle(mi))},kh=s=>{const e=gt(s,Yl);e&&e.setLocation(sw)},U2=s=>{const e=gt(s,Yl);e&&e.setLocation(p2)},V2=(s,e,t)=>{gt(s,si)||s.addOverlay(["Label",{id:si,label:`<div class="add">${bh("plus")}</div> <div class="delete">${bh("trash")}</div>`,cssClass:si,visible:!1,events:{mousedown:(i,n)=>{const o=n.target;o.classList.contains("delete")||o.parentElement&&o.parentElement.classList.contains("delete")?e():(o.classList.contains("add")||o.parentElement&&o.parentElement.classList.contains("add"))&&t()}}}])},Io=(s,e)=>`${s}${_2}${e}`,Ha=(s,e)=>`${s}${v2}${e}`,Sh=s=>{const e=[...s],t=!!e.find(r=>r.type===di),i=C2(e),n=nw-i.position[0],o=ow-i.position[1];return e.map(r=>{r.position[0]+=n+(t?0:Wt*2),r.position[1]+=o}),t||e.push({...O2,id:st()}),e},F2=N(ql).extend({data(){return{selectActive:!1,selectBox:document.createElement("span")}},mounted(){this.createSelectBox()},computed:{isDemo(){return this.$route.name===O.DEMO}},methods:{createSelectBox(){this.selectBox.id="select-box",this.selectBox.style.margin="0px auto",this.selectBox.style.border="2px dotted #FF0000",this.selectBox.style.position="absolute",this.selectBox.style.zIndex="100",this.selectBox.style.visibility="hidden",this.selectBox.addEventListener("mouseup",this.mouseUpMouseSelect),this.$el.querySelector("#node-view").appendChild(this.selectBox)},isCtrlKeyPressed(s){return this.isTouchDevice===!0?!0:this.isMacOs?s.metaKey:s.ctrlKey},getMousePositionWithinNodeView(s){const[e,t]=Do(s),i=this.isDemo?0:rw,n=this.isDemo?0:this.$store.getters["ui/sidebarMenuCollapsed"]?g2:w2;return fw(e-n,t-i,this.nodeViewScale,this.$store.getters.getNodeViewOffsetPosition)},showSelectBox(s){const[e,t]=this.getMousePositionWithinNodeView(s);this.selectBox=Object.assign(this.selectBox,{x:e,y:t}),this.selectBox.style.left=this.selectBox.x+"px",this.selectBox.style.top=this.selectBox.y+"px",this.selectBox.style.visibility="visible",this.selectActive=!0},updateSelectBox(s){const e=this.getSelectionBox(s);this.selectBox.style.left=e.x+"px",this.selectBox.style.top=e.y+"px",this.selectBox.style.width=e.width+"px",this.selectBox.style.height=e.height+"px"},hideSelectBox(){this.selectBox.style.visibility="hidden",this.selectBox.x=0,this.selectBox.y=0,this.selectBox.style.left="0px",this.selectBox.style.top="0px",this.selectBox.style.width="0px",this.selectBox.style.height="0px",this.selectActive=!1},getSelectionBox(s){const[e,t]=this.getMousePositionWithinNodeView(s);return{x:Math.min(e,this.selectBox.x),y:Math.min(t,this.selectBox.y),width:Math.abs(e-this.selectBox.x),height:Math.abs(t-this.selectBox.y)}},getNodesInSelection(s){const e=[],t=this.getSelectionBox(s);return this.$store.getters.allNodes.forEach(i=>{i.position[0]<t.x||i.position[0]>t.x+t.width||i.position[1]<t.y||i.position[1]>t.y+t.height||e.push(i)}),e},mouseDownMouseSelect(s){this.isCtrlKeyPressed(s)!==!0&&(this.$store.getters.isActionActive("dragActive")||(this.showSelectBox(s),this.$el.addEventListener("mousemove",this.mouseMoveSelect)))},mouseUpMouseSelect(s){if(this.selectActive===!1){this.isTouchDevice===!0&&s.target&&s.target.id.includes("node-view")&&this.deselectAllNodes();return}this.$el.removeEventListener("mousemove",this.mouseMoveSelect),this.deselectAllNodes();const e=this.getNodesInSelection(s);e.forEach(t=>{this.nodeSelected(t)}),e.length===1&&this.$store.commit("setLastSelectedNode",e[0].name),this.hideSelectBox()},mouseMoveSelect(s){if(s.buttons===0){this.mouseUpMouseSelect(s);return}this.updateSelectBox(s)},nodeDeselected(s){this.$store.commit("removeNodeFromSelection",s),this.instance.removeFromDragSelection(s.id)},nodeSelected(s){this.$store.commit("addSelectedNode",s),this.instance.addToDragSelection(s.id)},deselectAllNodes(){this.instance.clearDragSelection(),this.$store.commit("resetSelectedNodes"),this.$store.commit("setLastSelectedNode",null),this.$store.commit("setLastSelectedNodeOutputIndex",null),this.lastSelectedConnection=null,this.newNodeInsertPosition=null}}}),j2=N(ql).extend({data(){return{moveLastPosition:[0,0]}},methods:{moveWorkflow(s){const e=this.$store.getters.getNodeViewOffsetPosition,[t,i]=Do(s),n=e[0]+(t-this.moveLastPosition[0]),o=e[1]+(i-this.moveLastPosition[1]);this.$store.commit("setNodeViewOffsetPosition",{newOffset:[n,o]}),this.moveLastPosition[0]=t,this.moveLastPosition[1]=i},mouseDownMoveWorkflow(s){if(this.isCtrlKeyPressed(s)===!1||this.$store.getters.isActionActive("dragActive"))return;this.$store.commit("setNodeViewMoveInProgress",!0);const[e,t]=Do(s);this.moveLastPosition[0]=e,this.moveLastPosition[1]=t,this.$el.addEventListener("mousemove",this.mouseMoveNodeWorkflow)},mouseUpMoveWorkflow(s){this.$store.getters.isNodeViewMoveInProgress!==!1&&(this.$el.removeEventListener("mousemove",this.mouseMoveNodeWorkflow),this.$store.commit("setNodeViewMoveInProgress",!1))},mouseMoveNodeWorkflow(s){if(!(s.target&&!s.target.id.includes("node-view"))&&!this.$store.getters.isActionActive("dragActive")){if(s.buttons===0){this.mouseUp(s);return}this.moveWorkflow(s)}},wheelMoveWorkflow(s){const e=u_(s),t=this.$store.getters.getNodeViewOffsetPosition,i=t[0]-(s.shiftKey?e.pixelY:e.pixelX),n=t[1]-(s.shiftKey?e.pixelX:e.pixelY);this.$store.commit("setNodeViewOffsetPosition",{newOffset:[i,n]})}}}),z2=N(V).extend({methods:{async checkForNewVersions(){if(!this.$store.getters["versions/areNotificationsEnabled"])return;await this.$store.dispatch("versions/fetchVersions");const e=this.$store.getters["versions/currentVersion"],t=this.$store.getters["versions/nextVersions"];if(e&&e.hasSecurityIssue&&t.length){const i=e.securityIssueFixVersion;let n="Please update to latest version.";i&&(n=`Please update to version ${i} or higher.`),n=`${n} <a class="primary-color">More info</a>`,this.$showToast({title:"Critical update available",message:n,onClick:()=>{this.$store.dispatch("ui/openModal",Ns)},closeOnClick:!0,customClass:"clickable",type:"warning",duration:0})}}}});var G2=m.extend({name:"NodeTitle",props:{value:{type:String},nodeType:{},readOnly:{type:Boolean,default:!1}},data(){return{editName:!1,newName:""}},methods:{onEdit(){this.newName=this.value,this.editName=!0,this.$nextTick(()=>{const s=this.$refs.input;s&&s.focus()})},onRename(){this.newName.trim()!==""&&this.$emit("input",this.newName.trim()),this.editName=!1}}});const H2="_container_9bi3m_1",q2="_title_9bi3m_11",X2="_hoverable_9bi3m_19",Y2="_editIcon_9bi3m_22",Z2="_iconWrapper_9bi3m_26",K2="_editIconContainer_9bi3m_39",J2="_editButtons_9bi3m_45",eB="_editContainer_9bi3m_53";var tB={container:H2,title:q2,hoverable:X2,editIcon:Y2,iconWrapper:Z2,editIconContainer:K2,editButtons:J2,editContainer:eB},sB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{class:e.$style.container,on:{click:e.onEdit}},[t("span",{class:e.$style.iconWrapper},[t("NodeIcon",{attrs:{nodeType:e.nodeType,size:18}})],1),t("n8n-popover",{attrs:{placement:"right",width:"200",value:e.editName,disabled:e.readOnly}},[t("div",{class:e.$style.editContainer,on:{keydown:[function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.onRename.apply(null,arguments)},function(i){i.stopPropagation()},function(i){if(!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"]))return null;e.editName=!1}]}},[t("n8n-text",{attrs:{bold:!0,color:"text-base",tag:"div"}},[e._v(e._s(e.$locale.baseText("ndv.title.renameNode")))]),t("n8n-input",{ref:"input",attrs:{size:"small"},model:{value:e.newName,callback:function(i){e.newName=i},expression:"newName"}}),t("div",{class:e.$style.editButtons},[t("n8n-button",{attrs:{type:"secondary",size:"small",label:e.$locale.baseText("ndv.title.cancel")},on:{click:function(i){e.editName=!1}}}),t("n8n-button",{attrs:{type:"primary",size:"small",label:e.$locale.baseText("ndv.title.rename")},on:{click:e.onRename}})],1)],1),t("div",{staticClass:"ph-no-capture",class:{[e.$style.title]:!0,[e.$style.hoverable]:!e.readOnly},attrs:{slot:"reference"},slot:"reference"},[e._v(" "+e._s(e.value)+" "),t("div",{class:e.$style.editIconContainer},[e.readOnly?e._e():t("font-awesome-icon",{class:e.$style.editIcon,attrs:{icon:"pencil-alt"}})],1)])])],1)},iB=[];const Eh={$style:tB};function nB(s){for(var e in Eh)this[e]=Eh[e]}var oB=_(G2,sB,iB,!1,nB,null,null,null),rB=oB.exports,aB=N(V).extend({name:"parameter-input-full",components:{ParameterOptions:hl,DraggableTarget:Of,ParameterInputWrapper:Mg},data(){return{focused:!1,menuExpanded:!1,forceShowExpression:!1,dataMappingTooltipButtons:[]}},props:["displayOptions","isReadOnly","parameter","path","value","hideLabel"],created(){const s=this.onMappingTooltipDismissed.bind(this);this.dataMappingTooltipButtons=[{attrs:{label:this.$locale.baseText("_reusableBaseText.dismiss")},listeners:{click:s}}]},computed:{node(){return this.$store.getters["ndv/activeNode"]},hint(){return this.$locale.nodeText().hint(this.parameter,this.path)},isResourceLocator(){return this.parameter.type==="resourceLocator"},isDropDisabled(){return this.parameter.noDataExpression||this.isReadOnly||this.isResourceLocator},showExpressionSelector(){return this.isResourceLocator?!_f(this.parameter):!0},isInputDataEmpty(){return this.$store.getters["ndv/getNDVDataIsEmpty"]("input")},displayMode(){return this.$store.getters["ndv/inputPanelDisplayMode"]},showMappingTooltip(){return this.focused&&!this.isInputDataEmpty&&window.localStorage.getItem(js)!=="true"}},methods:{onFocus(){this.focused=!0,this.parameter.noDataExpression||this.$store.commit("ndv/setMappableNDVInputFocus",this.parameter.displayName)},onBlur(){this.focused=!1,this.parameter.noDataExpression||this.$store.commit("ndv/setMappableNDVInputFocus","")},onMenuExpanded(s){this.menuExpanded=s},optionSelected(s){this.$refs.param&&this.$refs.param.$emit("optionSelected",s)},valueChanged(s){this.$emit("valueChanged",s)},onDrop(s){this.forceShowExpression=!0,setTimeout(()=>{if(this.node){const e=this.isResourceLocator?this.value.value:this.value;let t;typeof e=="string"&&e.startsWith("=")&&e.length>1?t=`${e} ${s}`:t=`=${s}`;let i;if(this.isResourceLocator)if(!ts(this.value))i={node:this.node.name,name:this.path,value:{__rl:!0,value:t,mode:""}};else if(this.value.mode==="list"&&this.parameter.modes&&this.parameter.modes.length>1){let n=this.parameter.modes.find(o=>o.name==="id")||null;n||(n=this.parameter.modes.filter(o=>o.name!=="list")[0]),i={node:this.node.name,name:this.path,value:{__rl:!0,value:t,mode:n?n.name:""}}}else i={node:this.node.name,name:this.path,value:{__rl:!0,value:t,mode:this.value.mode}};else i={node:this.node.name,name:this.path,value:t};this.$emit("valueChanged",i),window.localStorage.getItem(js)!=="true"&&(this.$showMessage({title:this.$locale.baseText("dataMapping.success.title"),message:this.$locale.baseText("dataMapping.success.moreInfo"),type:"success"}),window.localStorage.setItem(js,"true")),this.$store.commit("ndv/setMappingTelemetry",{dest_node_type:this.node.type,dest_parameter:this.path,dest_parameter_mode:typeof e=="string"&&e.startsWith("=")?"expression":"fixed",dest_parameter_empty:e===""||e===void 0,dest_parameter_had_mapping:typeof e=="string"&&e.startsWith("=")&&dl(e),success:!0})}this.forceShowExpression=!1},200)},onMappingTooltipDismissed(){window.localStorage.setItem(js,"true")}},watch:{showMappingTooltip(s){s||this.$telemetry.track("User viewed data mapping tooltip",{type:"param focus"})}}}),lB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-input-label",{attrs:{label:e.hideLabel?"":e.$locale.nodeText().inputLabelDisplayName(e.parameter,e.path),tooltipText:e.hideLabel?"":e.$locale.nodeText().inputLabelDescription(e.parameter,e.path),showTooltip:e.focused,showOptions:e.menuExpanded||e.focused||e.forceShowExpression,bold:!1,size:"small",color:"text-dark"},scopedSlots:e._u([{key:"options",fn:function(){return[t("parameter-options",{attrs:{parameter:e.parameter,value:e.value,isReadOnly:e.isReadOnly,showOptions:e.displayOptions,showExpressionSelector:e.showExpressionSelector},on:{optionSelected:e.optionSelected,"menu-expanded":e.onMenuExpanded}})]},proxy:!0}])},[[t("draggable-target",{attrs:{type:"mapping",disabled:e.isDropDisabled,sticky:!0,stickyOffset:4},on:{drop:e.onDrop},scopedSlots:e._u([{key:"default",fn:function({droppable:i,activeDrop:n}){return[t("n8n-tooltip",{attrs:{placement:"left",manual:!0,value:e.showMappingTooltip,buttons:e.dataMappingTooltipButtons}},[t("span",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$locale.baseText(`dataMapping.${e.displayMode}Hint`,{interpolate:{name:e.parameter.displayName}}))},slot:"content"}),t("parameter-input-wrapper",{ref:"param",attrs:{parameter:e.parameter,value:e.value,path:e.path,isReadOnly:e.isReadOnly,droppable:i,activeDrop:n,forceShowExpression:e.forceShowExpression,hint:e.hint,inputSize:"small"},on:{valueChanged:e.valueChanged,focus:e.onFocus,blur:e.onBlur,drop:e.onDrop}})],1)]}}])})]],2)},cB=[],dB=_(aB,lB,cB,!1,null,null,null,null),Kl=dB.exports,uB=N(ct).extend({name:"CollectionParameter",props:["hideDelete","nodeValues","parameter","path","values","isReadOnly"],components:{ParameterInputList:()=>As(()=>Promise.resolve().then(function(){return TB}),void 0)},data(){return{selectedOption:void 0}},computed:{getPlaceholderText(){const s=this.$locale.nodeText().placeholder(this.parameter,this.path);return s||this.$locale.baseText("collectionParameter.choose")},getProperties(){const s=[];let e;for(const t of this.propertyNames)e=this.getOptionProperties(t),e!==void 0&&s.push(...e);return s},filteredOptions(){return this.parameter.options.filter(s=>this.displayNodeParameter(s))},node(){return this.$store.getters["ndv/activeNode"]},parameterOptions(){return this.filteredOptions.filter(s=>!this.propertyNames.includes(s.name))},propertyNames(){return this.values?Object.keys(this.values):[]}},methods:{getArgument(s){if(this.parameter.typeOptions!==void 0&&this.parameter.typeOptions[s]!==void 0)return this.parameter.typeOptions[s]},getOptionProperties(s){const e=[];for(const t of this.parameter.options)t.name===s&&e.push(t);return e},displayNodeParameter(s){return s.displayOptions===void 0?!0:this.displayParameter(this.nodeValues,s,this.path,this.node)},optionSelected(s){const e=this.getOptionProperties(s);if(e.length===0)return;const t=e[0],i=`${this.path}.${t.name}`;let n;if(t.typeOptions!==void 0&&t.typeOptions.multipleValues===!0){let o;t.type==="fixedCollection"?o=ae.exports.get(this.nodeValues,`${this.path}.${s}`,{}):(o=ae.exports.get(this.nodeValues,`${this.path}.${s}`,[]),o.push(Se(t.default))),n={name:i,value:o}}else n={name:i,value:Se(t.default)};this.$emit("valueChanged",n),this.selectedOption=void 0},valueChanged(s){this.$emit("valueChanged",s)}}});var hB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"collection-parameter",on:{keydown:function(i){i.stopPropagation()}}},[t("div",{staticClass:"collection-parameter-wrapper"},[e.getProperties.length===0?t("div",{staticClass:"no-items-exist"},[t("n8n-text",{attrs:{size:"small"}},[e._v(e._s(e.$locale.baseText("collectionParameter.noProperties")))])],1):e._e(),t("parameter-input-list",{attrs:{parameters:e.getProperties,nodeValues:e.nodeValues,path:e.path,hideDelete:e.hideDelete,indent:!0,isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}}),e.parameterOptions.length>0&&!e.isReadOnly?t("div",{staticClass:"param-options"},[e.parameter.options.length===1?t("n8n-button",{attrs:{type:"tertiary",block:"",label:e.getPlaceholderText},on:{click:function(i){return e.optionSelected(e.parameter.options[0].name)}}}):t("div",{staticClass:"add-option"},[t("n8n-select",{attrs:{placeholder:e.getPlaceholderText,size:"small",filterable:""},on:{change:e.optionSelected},model:{value:e.selectedOption,callback:function(i){e.selectedOption=i},expression:"selectedOption"}},e._l(e.parameterOptions,function(i){return t("n8n-option",{key:i.name,attrs:{label:e.$locale.nodeText().collectionOptionDisplayName(e.parameter,i,e.path),value:i.name}})}),1)],1)],1):e._e()],1)])},pB=[],fB=_(uB,hB,pB,!1,null,null,null,null),ww=fB.exports,mB=Object.freeze(Object.defineProperty({__proto__:null,default:ww},Symbol.toStringTag,{value:"Module"})),gB=m.extend({name:"MultipleParameter",components:{CollectionParameter:ww,ParameterInputFull:Kl},props:{nodeValues:{type:Object,required:!0},parameter:{type:Object,required:!0},path:{type:String,required:!0},values:{type:Array,default:()=>[]},isReadOnly:{type:Boolean,default:!1}},data(){return{mutableValues:[]}},watch:{values:{handler(s){this.mutableValues=Se(s)},deep:!0}},created(){this.mutableValues=Se(this.values)},computed:{addButtonText(){return!this.parameter.typeOptions||this.parameter.typeOptions&&!this.parameter.typeOptions.multipleValueButtonText?this.$locale.baseText("multipleParameter.addItem"):this.$locale.nodeText().multipleValueButtonText(this.parameter)},hideDelete(){var s;return((s=this.parameter.options)==null?void 0:s.length)===1},sortable(){var s;return!!((s=this.parameter.typeOptions)!=null&&s.sortable)}},methods:{addItem(){const s=this.getPath(),e=ae.exports.get(this.nodeValues,s,[]);e.push(Se(this.parameter.default));const t={name:s,value:e};this.$emit("valueChanged",t)},deleteItem(s){const e={name:this.getPath(s),value:void 0};this.$emit("valueChanged",e)},getPath(s){return this.path+(s!==void 0?`[${s}]`:"")},moveOptionDown(s){this.mutableValues.splice(s+1,0,this.mutableValues.splice(s,1)[0]);const e={name:this.path,value:this.mutableValues};this.$emit("valueChanged",e)},moveOptionUp(s){this.mutableValues.splice(s-1,0,this.mutableValues.splice(s,1)[0]);const e={name:this.path,value:this.mutableValues};this.$emit("valueChanged",e)},valueChanged(s){this.$emit("valueChanged",s)}}});var wB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"duplicate-parameter",on:{keydown:function(i){i.stopPropagation()}}},[t("n8n-input-label",{attrs:{label:e.$locale.nodeText().inputLabelDisplayName(e.parameter,e.path),tooltipText:e.$locale.nodeText().inputLabelDescription(e.parameter,e.path),underline:!0,size:"small",color:"text-dark"}}),e._l(e.mutableValues,function(i,n){return t("div",{key:n,staticClass:"duplicate-parameter-item",class:e.parameter.type},[e.isReadOnly?e._e():t("div",{staticClass:"delete-item clickable"},[t("font-awesome-icon",{attrs:{icon:"trash",title:e.$locale.baseText("multipleParameter.deleteItem")},on:{click:function(o){return e.deleteItem(n)}}}),e.sortable?t("div",[n!==0?t("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-up",title:e.$locale.baseText("multipleParameter.moveUp")},on:{click:function(o){return e.moveOptionUp(n)}}}):e._e(),n!==e.mutableValues.length-1?t("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-down",title:e.$locale.baseText("multipleParameter.moveDown")},on:{click:function(o){return e.moveOptionDown(n)}}}):e._e()],1):e._e()],1),e.parameter.type==="collection"?t("div",[t("collection-parameter",{attrs:{parameter:e.parameter,values:i,nodeValues:e.nodeValues,path:e.getPath(n),hideDelete:e.hideDelete,isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}})],1):t("div",[t("parameter-input-full",{staticClass:"duplicate-parameter-input-item",attrs:{parameter:e.parameter,value:i,displayOptions:!0,hideLabel:!0,path:e.getPath(n),inputSize:"small",isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}})],1)])}),t("div",{staticClass:"add-item-wrapper"},[e.mutableValues&&e.mutableValues.length===0||e.isReadOnly?t("div",{staticClass:"no-items-exist"},[t("n8n-text",{attrs:{size:"small"}},[e._v(e._s(e.$locale.baseText("multipleParameter.currentlyNoItemsExist")))])],1):e._e(),e.isReadOnly?e._e():t("n8n-button",{attrs:{type:"tertiary",block:"",label:e.addButtonText},on:{click:function(i){return e.addItem()}}})],1)],2)},yB=[],vB=_(gB,wB,yB,!1,null,"249a01fe",null,null),_B=vB.exports,OB=N(ie).extend({name:"ParameterInputList",components:{MultipleParameter:_B,ParameterInputFull:Kl,FixedCollectionParameter:()=>As(()=>import("./FixedCollectionParameter.1e2dcccb.js"),["assets/FixedCollectionParameter.1e2dcccb.js","assets/FixedCollectionParameter.47b75ec4.css","assets/vendor.a2fafdee.js","assets/n8n-workflow.4d086b10.js","assets/lodash-es.e05ea3b9.js","assets/axios.4a974fe3.js","assets/luxon.daa33f39.js","assets/n8n-design-system.670325b1.js","assets/n8n-design-system.4c7f4b23.css","assets/normalize-wheel.53b95207.js","assets/@fortawesome/vue-fontawesome.4443d979.js","assets/@fortawesome/fontawesome-svg-core.2d7f1ae5.js","assets/xss.ffb35cb9.js","assets/vue-typed-mixins.81797ea0.js","assets/@fortawesome/free-solid-svg-icons.4a1e939e.js","assets/@fortawesome/free-regular-svg-icons.9fb25f9a.js","assets/vue2-touch-events.f7c2b344.js","assets/v-click-outside.2a379eae.js","assets/vue-fragment.3d40e27f.js","assets/vue-agile.3c7c1e37.js","assets/vue-agile.db3fb5fe.css","assets/prismjs.95406fca.js","assets/flatted.12ebcbd8.js","assets/uuid.6335a3e0.js","assets/dateformat.a1136387.js","assets/monaco-editor.21485360.js","assets/monaco-editor.45667471.css","assets/quill.470e9400.js","assets/quill-autoformat.e2d87442.js","assets/fast-json-stable-stringify.d7c839ef.js","assets/vue-prism-editor.20a215ee.js","assets/esprima.67881ccb.js","assets/vue-i18n.517f429e.js","assets/timeago.js.677063e2.js","assets/file-saver.a22fc8cb.js","assets/jsplumb.1ecfd296.js","assets/vue2-teleport.e42b1fad.js","assets/vue-json-pretty.7b5bff4b.js"]),CollectionParameter:()=>As(()=>Promise.resolve().then(function(){return mB}),void 0),ImportParameter:wf},props:["nodeValues","parameters","path","hideDelete","indent","isReadOnly"],computed:{nodeTypeVersion(){return this.node?this.node.typeVersion:null},nodeTypeName(){return this.node?this.node.type:""},filteredParameters(){return this.parameters.filter(s=>this.displayNodeParameter(s))},filteredParameterNames(){return this.filteredParameters.map(s=>s.name)},node(){return this.$store.getters["ndv/activeNode"]},indexToShowSlotAt(){let s=0;const e=this.getCredentialsDependencies();return this.filteredParameters.forEach((t,i)=>{e.has(t.name)&&(s=i+1)}),s<this.filteredParameters.length?s:this.filteredParameters.length-1}},methods:{getCredentialsDependencies(){const s=new Set,e=this.$store.getters["nodeTypes/getNodeType"](this.node.type,this.node.typeVersion);if(e&&e.credentials)for(const t of e.credentials)t.displayOptions&&t.displayOptions.show&&Object.keys(t.displayOptions.show).forEach(i=>s.add(i));return s},multipleValues(s){return this.getArgument("multipleValues",s)===!0},getArgument(s,e){if(e.typeOptions!==void 0&&e.typeOptions[s]!==void 0)return e.typeOptions[s]},getPath(s){return(this.path?`${this.path}.`:"")+s},deleteOption(s){const e={name:this.getPath(s),value:void 0};this.$emit("valueChanged",e)},mustHideDuringCustomApiCall(s,e){return s&&s.displayOptions&&s.displayOptions.hide?!0:!["authentication","resource","operation",...Object.keys(e)].includes(s.name)},displayNodeParameter(s){if(s.type==="hidden"||this.isCustomApiCallSelected(this.nodeValues)&&this.mustHideDuringCustomApiCall(s,this.nodeValues))return!1;if(s.displayOptions===void 0)return!0;const e={};let t=this.nodeValues;this.path&&(t=ae.exports.get(this.nodeValues,this.path));const i=Object.keys(t);let n,o=0,r=!1;do{if(n=i.shift(),typeof t[n]=="string"&&t[n].charAt(0)==="=")if(t[n].includes("$parameter")&&i.some(a=>t[n].includes(a))){i.push(n);continue}else{try{e[n]=this.resolveExpression(t[n],e)}catch{e[n]=""}r=!0}else e[n]=t[n];if(o++>50)break}while(i.length!==0);return r===!0?this.path?(t=Se(this.nodeValues),ae.exports.set(t,this.path,e),this.displayParameter(t,s,this.path,this.node)):this.displayParameter(e,s,"",this.node):this.displayParameter(this.nodeValues,s,this.path,this.node)},valueChanged(s){this.$emit("valueChanged",s)},onNoticeAction(s){s==="activate"&&this.$emit("activate")}},watch:{filteredParameterNames(s,e){if(s!==void 0){for(const t of e)if(!s.includes(t)){const i={name:`${this.path}.${t}`,node:this.$store.getters["ndv/activeNode"].name,value:void 0};this.$emit("valueChanged",i)}}}}});var bB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"parameter-input-list-wrapper"},[e._l(e.filteredParameters,function(i,n){return t("div",{key:i.name,class:{indent:e.indent}},[e.indexToShowSlotAt===n?e._t("default"):e._e(),e.multipleValues(i)===!0&&i.type!=="fixedCollection"?t("div",{staticClass:"parameter-item"},[t("multiple-parameter",{attrs:{parameter:i,values:e.getParameterValue(e.nodeValues,i.name,e.path),nodeValues:e.nodeValues,path:e.getPath(i.name),isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}})],1):i.type==="curlImport"&&e.nodeTypeName==="n8n-nodes-base.httpRequest"&&e.nodeTypeVersion>=3?t("import-parameter",{attrs:{isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}}):i.type==="notice"?t("n8n-notice",{staticClass:"parameter-item",attrs:{content:e.$locale.nodeText().inputLabelDisplayName(i,e.path)},on:{action:e.onNoticeAction}}):["collection","fixedCollection"].includes(i.type)?t("div",{staticClass:"multi-parameter"},[e.hideDelete!==!0&&!e.isReadOnly?t("div",{staticClass:"delete-option clickable",attrs:{title:e.$locale.baseText("parameterInputList.delete")}},[t("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:e.$locale.baseText("parameterInputList.parameterOptions")},on:{click:function(o){return e.deleteOption(i.name)}}})],1):e._e(),t("n8n-input-label",{attrs:{label:e.$locale.nodeText().inputLabelDisplayName(i,e.path),tooltipText:e.$locale.nodeText().inputLabelDescription(i,e.path),size:"small",underline:!0,color:"text-dark"}}),i.type==="collection"?t("collection-parameter",{attrs:{parameter:i,values:e.getParameterValue(e.nodeValues,i.name,e.path),nodeValues:e.nodeValues,path:e.getPath(i.name),isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}}):i.type==="fixedCollection"?t("fixed-collection-parameter",{attrs:{parameter:i,values:e.getParameterValue(e.nodeValues,i.name,e.path),nodeValues:e.nodeValues,path:e.getPath(i.name),isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}}):e._e()],1):e.displayNodeParameter(i)?t("div",{staticClass:"parameter-item"},[e.hideDelete!==!0&&!e.isReadOnly?t("div",{staticClass:"delete-option clickable",attrs:{title:e.$locale.baseText("parameterInputList.delete")}},[t("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:e.$locale.baseText("parameterInputList.deleteParameter")},on:{click:function(o){return e.deleteOption(i.name)}}})],1):e._e(),t("parameter-input-full",{attrs:{parameter:i,value:e.getParameterValue(e.nodeValues,i.name,e.path),displayOptions:!0,path:e.getPath(i.name),isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}})],1):e._e()],2)}),e.filteredParameters.length===0?t("div",{class:{indent:e.indent}},[e._t("default")],2):e._e()],2)},xB=[],$B=_(OB,bB,xB,!1,null,null,null,null),yw=$B.exports,TB=Object.freeze(Object.defineProperty({__proto__:null,default:yw},Symbol.toStringTag,{value:"Module"})),kB=N(ve).extend({name:"NodeSettingsTabs",props:{value:{type:String},nodeType:{},sessionId:{type:String}},computed:{activeNode(){return this.$store.getters["ndv/activeNode"]},documentationUrl(){var i,n,o,r;const s=this.nodeType;if(!s)return"";if(s.documentationUrl&&s.documentationUrl.startsWith("http"))return s.documentationUrl;const e="?utm_source=n8n_app&utm_medium=node_settings_modal-credential_link&utm_campaign="+s.name,t=(r=(o=(n=(i=s.codex)==null?void 0:i.resources)==null?void 0:n.primaryDocumentation)==null?void 0:o[0])==null?void 0:r.url;return t?t+e:this.isCommunityNode?`${Gp}${s.name.split(".")[0]}`:$_+e},isCommunityNode(){const s=this.nodeType;return s?ll(s.name):!1},packageName(){return this.nodeType.name.split(".")[0]},options(){const s=[{label:this.$locale.baseText("nodeSettings.parameters"),value:"params"}];this.documentationUrl&&s.push({label:this.$locale.baseText("nodeSettings.docs"),value:"docs",href:this.documentationUrl}),this.isCommunityNode&&s.push({icon:"cube",value:"communityNode",align:"right",tooltip:this.$locale.baseText("generic.communityNode.tooltip",{interpolate:{docUrl:Ys,packageName:this.packageName}})});const e=!this.isCommunityNode;return s.push({icon:"cog",value:"settings",align:e?"right":void 0}),s}},methods:{onTabSelect(s){s==="docs"&&this.nodeType&&(this.$externalHooks().run("dataDisplay.onDocumentationUrlClick",{nodeType:this.nodeType,documentationUrl:this.documentationUrl}),this.$telemetry.track("User clicked ndv link",{node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:"main",type:"docs"})),s==="settings"&&this.nodeType&&this.$telemetry.track("User viewed node settings",{node_type:this.nodeType.name,workflow_id:this.$store.getters.workflowId}),(s==="settings"||s==="params")&&this.$emit("input",s)},onTooltipClick(s,e){s==="communityNode"&&e.target.localName==="a"&&this.$telemetry.track("user clicked cnr docs link",{source:"node details view"})}}});var SB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-tabs",{attrs:{options:e.options,value:e.value},on:{input:e.onTabSelect,tooltipClick:e.onTooltipClick}})},EB=[],CB=_(kB,SB,EB,!1,null,null,null,null),NB=CB.exports,PB=N(ui,V,ie).extend({name:"NodeWebhooks",props:["node","nodeType"],data(){return{isMinimized:this.nodeType&&this.nodeType.name!==xt,showUrlFor:"test"}},computed:{webhooksNode(){return this.nodeType===null||this.nodeType.webhooks===void 0?[]:this.nodeType.webhooks.filter(s=>s.restartWebhook!==!0)}},methods:{copyWebhookUrl(s){const e=this.getWebhookUrlDisplay(s);this.copyToClipboard(e),this.$showMessage({title:this.$locale.baseText("nodeWebhooks.showMessage.title"),type:"success"}),this.$telemetry.track("User copied webhook URL",{pane:"parameters",type:`${this.showUrlFor} url`})},getWebhookUrlDisplay(s){return this.node?this.getWebhookUrl(s,this.node,this.showUrlFor):""}},watch:{node(){this.isMinimized=this.nodeType.name!==xt}}});var DB=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.webhooksNode.length?t("div",{staticClass:"webhooks"},[t("div",{staticClass:"clickable headline",class:{expanded:!e.isMinimized},attrs:{title:e.isMinimized?e.$locale.baseText("nodeWebhooks.clickToDisplayWebhookUrls"):e.$locale.baseText("nodeWebhooks.clickToHideWebhookUrls")},on:{click:function(i){e.isMinimized=!e.isMinimized}}},[t("font-awesome-icon",{staticClass:"minimize-button minimize-icon",attrs:{icon:"angle-down"}}),e._v(" "+e._s(e.$locale.baseText("nodeWebhooks.webhookUrls"))+" ")],1),t("el-collapse-transition",[e.isMinimized?e._e():t("div",{staticClass:"node-webhooks"},[t("div",{staticClass:"url-selection"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("n8n-radio-buttons",{attrs:{options:[{label:this.$locale.baseText("nodeWebhooks.testUrl"),value:"test"},{label:this.$locale.baseText("nodeWebhooks.productionUrl"),value:"production"}]},model:{value:e.showUrlFor,callback:function(i){e.showUrlFor=i},expression:"showUrlFor"}})],1)],1)],1),e._l(e.webhooksNode,function(i,n){return t("n8n-tooltip",{key:n,staticClass:"item",attrs:{content:e.$locale.baseText("nodeWebhooks.clickToCopyWebhookUrls"),placement:"left"}},[t("div",{staticClass:"webhook-wrapper"},[t("div",{staticClass:"http-field"},[t("div",{staticClass:"http-method"},[e._v(" "+e._s(e.getWebhookExpressionValue(i,"httpMethod"))),t("br")])]),t("div",{staticClass:"url-field"},[t("div",{staticClass:"webhook-url left-ellipsis clickable",on:{click:function(o){return e.copyWebhookUrl(i)}}},[e._v(" "+e._s(e.getWebhookUrlDisplay(i))),t("br")])])])])})],2)])],1):e._e()},IB=[],AB=_(PB,DB,IB,!1,null,"f5d479bb",null,null),RB=AB.exports;const an=m.extend({computed:{pinData(){return this.node?this.$store.getters.pinDataByNodeName(this.node.name):void 0},hasPinData(){return!!this.node&&typeof this.pinData!="undefined"},isPinDataNodeType(){return!!this.node&&!nO.includes(this.node.type)}},methods:{isValidPinDataJSON(s){try{return JSON.parse(s),!0}catch(e){const t=this.$locale.baseText("runData.editOutputInvalid"),i=new RegExp(/JSON\.parse:|of the JSON data/,"g"),n=e.message.replace(i,"").trim(),o=/at position (\d+)/,r=e.message.match(o);if(e.message=n.charAt(0).toUpperCase()+n.slice(1),e.message=e.message.replace("Unexpected token ' in JSON",this.$locale.baseText("runData.editOutputInvalid.singleQuote")),r){const a=parseInt(r[1],10),l=(s.slice(0,a).match(/\n/g)||[]).length;e.message=e.message.replace(o,this.$locale.baseText("runData.editOutputInvalid.atPosition",{interpolate:{position:`${a}`}})),e.message=`${this.$locale.baseText("runData.editOutputInvalid.onLine",{interpolate:{line:`${l+1}`}})} ${e.message}`}return this.$showError(e,t),!1}},isValidPinDataSize(s){return typeof s=="object"&&(s=JSON.stringify(s)),this.$store.getters.pinDataSize+Ii(s)>__?(this.$showError(new Error(this.$locale.baseText("ndv.pinData.error.tooLarge.description")),this.$locale.baseText("ndv.pinData.error.tooLarge.title")),!1):!0}}}),De=new m;var MB=N(Hl,an).extend({props:{nodeName:{type:String},disabled:{type:Boolean,default:!1},label:{type:String},type:{type:String},size:{type:String},transparent:{type:Boolean,default:!1},telemetrySource:{type:String}},computed:{node(){return this.$store.getters.getNodeByName(this.nodeName)},nodeType(){return this.node?this.$store.getters["nodeTypes/getNodeType"](this.node.type,this.node.typeVersion):null},nodeRunning(){const s=this.$store.getters.executedNode,e=this.$store.getters.executingNode;return this.workflowRunning&&(e===this.node.name||s===this.node.name)},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},isTriggerNode(){return this.$store.getters["nodeTypes/isTriggerNode"](this.node.type)},isManualTriggerNode(){return Boolean(this.nodeType&&this.nodeType.name===Fo)},isPollingTypeNode(){return!!(this.nodeType&&this.nodeType.polling)},isScheduleTrigger(){return!!(this.nodeType&&this.nodeType.group.includes("schedule"))},isWebhookNode(){return Boolean(this.nodeType&&this.nodeType.name===xt)},isListeningForEvents(){const s=this.$store.getters.executionWaitingForWebhook,e=this.$store.getters.executedNode;return this.node&&!this.node.disabled&&this.isTriggerNode&&s&&(!e||e===this.nodeName)},isListeningForWorkflowEvents(){return this.nodeRunning&&this.isTriggerNode&&!this.isScheduleTrigger&&!this.isManualTriggerNode},hasIssues(){return Boolean(this.node&&this.node.issues&&(this.node.issues.parameters||this.node.issues.credentials))},disabledHint(){return this.isListeningForEvents?"":this.isTriggerNode&&this.node.disabled?this.$locale.baseText("ndv.execute.nodeIsDisabled"):this.isTriggerNode&&this.hasIssues?this.$store.getters["ndv/activeNode"]&&this.$store.getters["ndv/activeNode"].name!==this.nodeName?this.$locale.baseText("ndv.execute.fixPrevious"):this.$locale.baseText("ndv.execute.requiredFieldsMissing"):this.workflowRunning&&!this.nodeRunning?this.$locale.baseText("ndv.execute.workflowAlreadyRunning"):""},buttonLabel(){return this.isListeningForEvents||this.isListeningForWorkflowEvents?this.$locale.baseText("ndv.execute.stopListening"):this.label?this.label:this.isWebhookNode?this.$locale.baseText("ndv.execute.listenForTestEvent"):this.isPollingTypeNode||this.nodeType&&this.nodeType.mockManualExecution?this.$locale.baseText("ndv.execute.fetchEvent"):this.isTriggerNode&&!this.isScheduleTrigger&&!this.isManualTriggerNode?this.$locale.baseText("ndv.execute.listenForEvent"):this.$locale.baseText("ndv.execute.executeNode")}},methods:{async stopWaitingForWebhook(){try{await this.restApi().removeTestWebhook(this.$store.getters.workflowId)}catch(s){this.$showError(s,this.$locale.baseText("ndv.execute.stopWaitingForWebhook.error"));return}},async onClick(){if(this.isListeningForEvents)this.stopWaitingForWebhook();else if(this.isListeningForWorkflowEvents)this.$emit("stopExecution");else{let s=!1;if(this.hasPinData&&(s=await this.confirmMessage(this.$locale.baseText("ndv.pinData.unpinAndExecute.description"),this.$locale.baseText("ndv.pinData.unpinAndExecute.title"),null,this.$locale.baseText("ndv.pinData.unpinAndExecute.confirm"),this.$locale.baseText("ndv.pinData.unpinAndExecute.cancel")),s&&(De.$emit("data-unpinning",{source:"unpin-and-execute-modal"}),this.$store.commit("unpinData",{node:this.node}))),!this.hasPinData||s){const e={node_type:this.nodeType?this.nodeType.name:null,workflow_id:this.$store.getters.workflowId,source:this.telemetrySource};this.$telemetry.track("User clicked execute node button",e),this.$externalHooks().run("nodeExecuteButton.onClick",e),this.runWorkflow(this.nodeName,"RunData.ExecuteNodeButton"),this.$emit("execute")}}}}}),WB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-tooltip",{attrs:{placement:"bottom",disabled:!e.disabledHint}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.disabledHint))]),t("div",[t("n8n-button",{attrs:{loading:e.nodeRunning&&!e.isListeningForEvents&&!e.isListeningForWorkflowEvents,disabled:e.disabled||!!e.disabledHint,label:e.buttonLabel,type:e.type,size:e.size,transparentBackground:e.transparent},on:{click:e.onClick}})],1)])},LB=[],QB=_(MB,WB,LB,!1,null,null,null,null),Jl=QB.exports,BB=N(ve,ct).extend({name:"NodeSettings",components:{NodeTitle:rB,NodeCredentials:fl,ParameterInputFull:Kl,ParameterInputList:yw,NodeSettingsTabs:NB,NodeWebhooks:RB,NodeExecuteButton:Jl},computed:{isCurlImportModalOpen(){return this.$store.getters["ui/isModalOpen"](Gt)},nodeTypeName(){if(this.nodeType){const s=this.$locale.shortNodeType(this.nodeType.name);return this.$locale.headerText({key:`headers.${s}.displayName`,fallback:this.nodeType.name})}return""},nodeTypeDescription(){if(this.nodeType&&this.nodeType.description){const s=this.$locale.shortNodeType(this.nodeType.name);return this.$locale.headerText({key:`headers.${s}.description`,fallback:this.nodeType.description})}else return this.$locale.baseText("nodeSettings.noDescriptionFound")},headerStyle(){return this.node?{"background-color":this.node.color}:{}},node(){return this.$store.getters["ndv/activeNode"]},parametersSetting(){return this.parameters.filter(s=>s.isNodeSetting)},parametersNoneSetting(){return this.parameters.filter(s=>!s.isNodeSetting)},parameters(){return this.nodeType===null?[]:this.nodeType.properties},outputPanelEditMode(){return this.$store.getters["ndv/outputPanelEditMode"]},isCommunityNode(){return ll(this.node.type)},isTriggerNode(){return this.$store.getters["nodeTypes/isTriggerNode"](this.node.type)}},props:{eventBus:{},dragging:{type:Boolean},sessionId:{type:String},nodeType:{type:Object},isReadOnly:{type:Boolean},blockUI:{type:Boolean,default:!1}},data(){return{nodeValid:!0,nodeColor:null,openPanel:"params",nodeValues:{color:"#ff0000",alwaysOutputData:!1,executeOnce:!1,notesInFlow:!1,continueOnFail:!1,retryOnFail:!1,maxTries:3,waitBetweenTries:1e3,notes:"",parameters:{}},nodeSettings:[{displayName:this.$locale.baseText("nodeSettings.alwaysOutputData.displayName"),name:"alwaysOutputData",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.alwaysOutputData.description")},{displayName:this.$locale.baseText("nodeSettings.executeOnce.displayName"),name:"executeOnce",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.executeOnce.description")},{displayName:this.$locale.baseText("nodeSettings.retryOnFail.displayName"),name:"retryOnFail",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.retryOnFail.description")},{displayName:this.$locale.baseText("nodeSettings.maxTries.displayName"),name:"maxTries",type:"number",typeOptions:{minValue:2,maxValue:5},default:3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:this.$locale.baseText("nodeSettings.maxTries.description")},{displayName:this.$locale.baseText("nodeSettings.waitBetweenTries.displayName"),name:"waitBetweenTries",type:"number",typeOptions:{minValue:0,maxValue:5e3},default:1e3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:this.$locale.baseText("nodeSettings.waitBetweenTries.description")},{displayName:this.$locale.baseText("nodeSettings.continueOnFail.displayName"),name:"continueOnFail",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.continueOnFail.description")},{displayName:this.$locale.baseText("nodeSettings.notes.displayName"),name:"notes",type:"string",typeOptions:{rows:5},default:"",noDataExpression:!0,description:this.$locale.baseText("nodeSettings.notes.description")},{displayName:this.$locale.baseText("nodeSettings.notesInFlow.displayName"),name:"notesInFlow",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.notesInFlow.description")}],COMMUNITY_NODES_INSTALLATION_DOCS_URL:Ys,CUSTOM_NODES_DOCS_URL:P_,MAIN_NODE_PANEL_WIDTH:Us}},watch:{node(s,e){this.setNodeValues()},isCurlImportModalOpen(s,e){if(s===!1){let t=this.$store.getters["ui/getHttpNodeParameters"];if(!t)return;try{t=JSON.parse(t),this.valueChanged({node:this.node.name,name:"parameters",value:t}),this.$store.dispatch("ui/setHttpNodeParameters",{parameters:""})}catch{}}}},methods:{onWorkflowActivate(){this.$emit("activate")},onNodeExecute(){this.$emit("execute")},setValue(s,e){const t=s.split(".");let i=t.pop(),n=!1;if(i!==void 0&&i.includes("[")){const o=i.match(/(.*)\[(\d+)\]$/);o&&(t.push(o[1]),i=o[2],n=!0)}if(t.length===0)e===null?m.delete(this.nodeValues,i):m.set(this.nodeValues,i,e);else if(e===null){let o=ae.exports.get(this.nodeValues,t.join("."));m.delete(o,i),n===!0&&o.length===0&&(i=t.pop(),o=ae.exports.get(this.nodeValues,t.join(".")),m.delete(o,i))}else typeof e=="object"?m.set(ae.exports.get(this.nodeValues,t.join(".")),i,Se(e)):m.set(ae.exports.get(this.nodeValues,t.join(".")),i,e)},credentialSelected(s){this.$store.commit("updateNodeProperties",s);const e=this.$store.getters.getNodeByName(s.name);this.updateNodeCredentialIssues(e),this.$externalHooks().run("nodeSettings.credentialSelected",{updateInformation:s})},nameChanged(s){this.valueChanged({value:s,name:"name"})},valueChanged(s){let e;s.hasOwnProperty("value")?e=s.value:e=ae.exports.get(this.nodeValues,s.name);const t=s.node||this.node.name,i=this.$store.getters.getNodeByName(t);if(s.name==="name"){const n={value:e,oldValue:t,name:s.name};this.$emit("valueChanged",n)}else if(s.name==="parameters"){const n=this.$store.getters["nodeTypes/getNodeType"](i.type,i.typeVersion);if(!n)return;let o=Ht(n.properties,i.parameters,!1,!1,i);const r=Object.assign({},o);o=Se(o);for(const l of Object.keys(s.value)){e=s.value[l];const c=l.split(".").slice(1).join("."),d=c.match(/(.*)\[(\d+)\]$/);if(s[l]===void 0&&d!==null){const u=d[1],h=d[2],p=ae.exports.get(o,u);Array.isArray(p)&&(p.splice(parseInt(h,10),1),m.set(o,u,p))}else e===void 0?ae.exports.unset(o,c):ae.exports.set(o,c,e);this.$externalHooks().run("nodeSettings.valueChanged",{parameterPath:c,newValue:e,parameters:this.parameters,oldNodeParameters:r})}o=Ht(n.properties,o,!0,!1,i);for(const l of Object.keys(o))o&&o[l]!==null&&o[l]!==void 0&&this.setValue(`parameters.${l}`,o[l]);const a={name:i.name,value:o};this.$store.commit("setNodeParameters",a),this.updateNodeParameterIssues(i,n),this.updateNodeCredentialIssues(i)}else if(s.name.startsWith("parameters.")){const n=this.$store.getters["nodeTypes/getNodeType"](i.type,i.typeVersion);if(!n)return;let o=Ht(n.properties,i.parameters,!1,!1,i);const r=Object.assign({},o);o=Se(o);const a=s.name.split(".").slice(1).join("."),l=a.match(/(.*)\[(\d+)\]$/);if(s.value===void 0&&l!==null){const d=l[1],u=l[2],h=ae.exports.get(o,d);Array.isArray(h)&&(h.splice(parseInt(u,10),1),m.set(o,d,h))}else e===void 0?ae.exports.unset(o,a):ae.exports.set(o,a,e);o=Ht(n.properties,o,!0,!1,i);for(const d of Object.keys(o))o&&o[d]!==null&&o[d]!==void 0&&this.setValue(`parameters.${d}`,o[d]);const c={name:i.name,value:o};this.$store.commit("setNodeParameters",c),this.$externalHooks().run("nodeSettings.valueChanged",{parameterPath:a,newValue:e,parameters:this.parameters,oldNodeParameters:r}),this.updateNodeParameterIssues(i,n),this.updateNodeCredentialIssues(i)}else{m.set(this.nodeValues,s.name,e);const n={name:i.name,key:s.name,value:e};this.$store.commit("setNodeValue",n)}},setNodeValues(){if(!!this.node)if(this.nodeType!==null){this.nodeValid=!0;const s=[];this.node.color&&(s.push("color"),m.set(this.nodeValues,"color",this.node.color)),this.node.notes&&(s.push("notes"),m.set(this.nodeValues,"notes",this.node.notes)),this.node.alwaysOutputData&&(s.push("alwaysOutputData"),m.set(this.nodeValues,"alwaysOutputData",this.node.alwaysOutputData)),this.node.executeOnce&&(s.push("executeOnce"),m.set(this.nodeValues,"executeOnce",this.node.executeOnce)),this.node.continueOnFail&&(s.push("continueOnFail"),m.set(this.nodeValues,"continueOnFail",this.node.continueOnFail)),this.node.notesInFlow&&(s.push("notesInFlow"),m.set(this.nodeValues,"notesInFlow",this.node.notesInFlow)),this.node.retryOnFail&&(s.push("retryOnFail"),m.set(this.nodeValues,"retryOnFail",this.node.retryOnFail)),this.node.maxTries&&(s.push("maxTries"),m.set(this.nodeValues,"maxTries",this.node.maxTries)),this.node.waitBetweenTries&&(s.push("waitBetweenTries"),m.set(this.nodeValues,"waitBetweenTries",this.node.waitBetweenTries));for(const e of this.nodeSettings)s.includes(e.name)||m.set(this.nodeValues,e.name,e.default);m.set(this.nodeValues,"parameters",Se(this.node.parameters))}else this.nodeValid=!1},onMissingNodeTextClick(s){s.target.localName==="a"&&this.$telemetry.track("user clicked cnr browse button",{source:"cnr missing node modal"})},onMissingNodeLearnMoreLinkClick(){this.$telemetry.track("user clicked cnr docs link",{source:"missing node modal source",package_name:this.node.type.split(".")[0],node_type:this.node.type})},onStopExecution(){this.$emit("stopExecution")}},mounted(){this.setNodeValues(),this.eventBus&&this.eventBus.$on("openSettings",()=>{this.openPanel="settings"})}});const UB="_header_1pn0y_1",VB="_warningIcon_1pn0y_5",FB="_descriptionContainer_1pn0y_10";var jB={header:UB,warningIcon:VB,descriptionContainer:FB};var zB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{"node-settings":!0,dragging:e.dragging},on:{keydown:function(i){i.stopPropagation()}}},[t("div",{class:e.$style.header},[t("div",{staticClass:"header-side-menu"},[t("NodeTitle",{staticClass:"node-name",attrs:{value:e.node&&e.node.name,nodeType:e.nodeType,isReadOnly:e.isReadOnly},on:{input:e.nameChanged}}),e.isReadOnly?e._e():t("div",[e.blockUI?e._e():t("NodeExecuteButton",{attrs:{nodeName:e.node.name,disabled:e.outputPanelEditMode.enabled&&!e.isTriggerNode,size:"small",telemetrySource:"parameters"},on:{execute:e.onNodeExecute,stopExecution:e.onStopExecution}})],1)],1),e.node&&e.nodeValid?t("NodeSettingsTabs",{attrs:{nodeType:e.nodeType,sessionId:e.sessionId},model:{value:e.openPanel,callback:function(i){e.openPanel=i},expression:"openPanel"}}):e._e()],1),e.node&&!e.nodeValid?t("div",{staticClass:"node-is-not-valid"},[t("p",{class:e.$style.warningIcon},[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1),t("div",{staticClass:"missingNodeTitleContainer mt-s mb-xs"},[t("n8n-text",{attrs:{size:"large",color:"text-dark",bold:""}},[e._v(" "+e._s(e.$locale.baseText("nodeSettings.communityNodeUnknown.title"))+" ")])],1),e.isCommunityNode?t("div",{class:e.$style.descriptionContainer},[t("div",{staticClass:"mb-l"},[t("i18n",{attrs:{path:"nodeSettings.communityNodeUnknown.description",tag:"span"},on:{click:e.onMissingNodeTextClick},scopedSlots:e._u([{key:"action",fn:function(){return[t("a",{attrs:{href:`https://www.npmjs.com/package/${e.node.type.split(".")[0]}`,target:"_blank"}},[e._v(e._s(e.node.type.split(".")[0]))])]},proxy:!0}],null,!1,2018941802)})],1),t("n8n-link",{attrs:{to:e.COMMUNITY_NODES_INSTALLATION_DOCS_URL},on:{click:e.onMissingNodeLearnMoreLinkClick}},[e._v(" "+e._s(e.$locale.baseText("nodeSettings.communityNodeUnknown.installLink.text"))+" ")])],1):t("i18n",{attrs:{path:"nodeSettings.nodeTypeUnknown.description",tag:"span"},scopedSlots:e._u([{key:"action",fn:function(){return[t("a",{attrs:{href:e.CUSTOM_NODES_DOCS_URL,target:"_blank"},domProps:{textContent:e._s(e.$locale.baseText("nodeSettings.nodeTypeUnknown.description.customNode"))}})]},proxy:!0}],null,!1,895425313)})],1):e._e(),e.node&&e.nodeValid?t("div",{staticClass:"node-parameters-wrapper"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.openPanel==="params",expression:"openPanel === 'params'"}]},[t("node-webhooks",{attrs:{node:e.node,nodeType:e.nodeType}}),t("parameter-input-list",{attrs:{parameters:e.parametersNoneSetting,hideDelete:!0,nodeValues:e.nodeValues,isReadOnly:e.isReadOnly,path:"parameters"},on:{valueChanged:e.valueChanged,activate:e.onWorkflowActivate}},[t("node-credentials",{attrs:{node:e.node},on:{credentialSelected:e.credentialSelected}})],1),e.parametersNoneSetting.length===0?t("div",{staticClass:"no-parameters"},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("nodeSettings.thisNodeDoesNotHaveAnyParameters"))+" ")])],1):e._e(),e.isCustomApiCallSelected(e.nodeValues)?t("div",{staticClass:"parameter-item parameter-notice"},[t("n8n-notice",{attrs:{content:e.$locale.baseText("nodeSettings.useTheHttpRequestNode",{interpolate:{nodeTypeDisplayName:e.nodeType.displayName}})}})],1):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.openPanel==="settings",expression:"openPanel === 'settings'"}]},[t("parameter-input-list",{attrs:{parameters:e.parametersSetting,nodeValues:e.nodeValues,isReadOnly:e.isReadOnly,path:"parameters"},on:{valueChanged:e.valueChanged}}),t("parameter-input-list",{attrs:{parameters:e.nodeSettings,hideDelete:!0,nodeValues:e.nodeValues,isReadOnly:e.isReadOnly,path:""},on:{valueChanged:e.valueChanged}})],1)]):e._e(),t("n8n-block-ui",{attrs:{show:e.blockUI}})],1)},GB=[];const Ch={$style:jB};function HB(s){for(var e in Ch)this[e]=Ch[e]}var qB=_(BB,zB,GB,!1,HB,null,null,null),vw=qB.exports,XB=m.extend({name:"draggable",components:{Teleport:h_},props:{disabled:{type:Boolean},type:{type:String},data:{type:String},tag:{type:String,default:"div"},targetDataKey:{type:String}},data(){const s={x:-100,y:-100};return{isDragging:!1,draggablePosition:s,draggingEl:null,draggableStyle:{transform:`translate(${s.x}px, ${s.y}px)`},animationFrameId:0}},computed:{canDrop(){return this.$store.getters["ndv/canDraggableDrop"]},stickyPosition(){return this.$store.getters["ndv/draggableStickyPos"]}},methods:{setDraggableStyle(){this.draggableStyle={transform:`translate(${this.draggablePosition.x}px, ${this.draggablePosition.y}px)`}},onDragStart(s){this.disabled||(this.draggingEl=s.target,!(this.targetDataKey&&this.draggingEl&&this.draggingEl.dataset.target!==this.targetDataKey)&&(s.preventDefault(),s.stopPropagation(),this.isDragging=!1,this.draggablePosition={x:s.pageX,y:s.pageY},this.setDraggableStyle(),window.addEventListener("mousemove",this.onDrag),window.addEventListener("mouseup",this.onDragEnd)))},onDrag(s){if(s.preventDefault(),s.stopPropagation(),!this.disabled){if(!this.isDragging){this.isDragging=!0;const e=this.targetDataKey&&this.draggingEl?this.draggingEl.dataset.value:this.data||"";this.$store.commit("ndv/draggableStartDragging",{type:this.type,data:e}),this.$emit("dragstart",this.draggingEl),document.body.style.cursor="grabbing"}this.animationFrameId=window.requestAnimationFrame(()=>{this.canDrop&&this.stickyPosition?this.draggablePosition={x:this.stickyPosition[0],y:this.stickyPosition[1]}:this.draggablePosition={x:s.pageX,y:s.pageY},this.setDraggableStyle(),this.$emit("drag",this.draggablePosition)})}},onDragEnd(){this.disabled||(document.body.style.cursor="unset",window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.onDragEnd),window.cancelAnimationFrame(this.animationFrameId),setTimeout(()=>{this.$emit("dragend",this.draggingEl),this.isDragging=!1,this.draggingEl=null,this.$store.commit("ndv/draggableStopDragging")},0))}}});const YB="_dragging_176yl_1",ZB="_draggable_176yl_6";var KB={dragging:YB,draggable:ZB,"draggable-data-transfer":"_draggable-data-transfer_176yl_13"},JB=function(){var e=this,t=e._self._c;return e._self._setupProxy,t(e.tag,{ref:"wrapper",tag:"component",class:{[e.$style.dragging]:e.isDragging},on:{mousedown:e.onDragStart}},[e._t("default",null,{isDragging:e.isDragging}),t("Teleport",{attrs:{to:"body"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],ref:"draggable",class:e.$style.draggable,style:e.draggableStyle},[e._t("preview",null,{canDrop:e.canDrop,el:e.draggingEl})],2)])],2)},eU=[];const Nh={$style:KB};function tU(s){for(var e in Nh)this[e]=Nh[e]}var sU=_(XB,JB,eU,!1,tU,null,null,null),ec=sU.exports,iU=m.extend({components:{Draggable:ec},props:{canMoveRight:{type:Boolean},canMoveLeft:{type:Boolean}},methods:{onDrag(s){this.$emit("drag",s)},onDragStart(){this.$emit("dragstart")},onDragEnd(){this.$emit("dragend")}}});const nU="_dragContainer_4aml8_1",oU="_dragButton_4aml8_5",rU="_leftArrow_4aml8_19 _arrow_4aml8_27",aU="_rightArrow_4aml8_19 _arrow_4aml8_27",lU="_visible_4aml8_23",cU="_arrow_4aml8_27",dU="_grid_4aml8_45";var uU={dragContainer:nU,dragButton:oU,leftArrow:rU,rightArrow:aU,visible:lU,arrow:cU,grid:dU},hU=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Draggable",{class:e.$style.dragContainer,attrs:{type:"panel-resize"},on:{drag:e.onDrag,dragstart:e.onDragStart,dragend:e.onDragEnd},scopedSlots:e._u([{key:"default",fn:function({isDragging:i}){return[t("div",{class:{[e.$style.dragButton]:!0}},[e.canMoveLeft?t("span",{class:{[e.$style.leftArrow]:!0,[e.$style.visible]:i}},[t("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1):e._e(),e.canMoveRight?t("span",{class:{[e.$style.rightArrow]:!0,[e.$style.visible]:i}},[t("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1):e._e(),t("div",{class:e.$style.grid},[t("div",[t("div"),t("div"),t("div"),t("div"),t("div")]),t("div",[t("div"),t("div"),t("div"),t("div"),t("div")])])])]}}])})},pU=[];const Ph={$style:uU};function fU(s){for(var e in Ph)this[e]=Ph[e]}var mU=_(iU,hU,pU,!1,fU,null,null,null),gU=mU.exports;const ms=24,Dh=80,Qs=280,wU=320,yU=420,vU={regular:Us,dragless:Us,unknown:Us,inputless:Us,wide:Us*2};var _U=N(dt).extend({name:"NDVDraggablePanels",components:{PanelDragButton:gU},props:{isDraggable:{type:Boolean},hideInputAndOutput:{type:Boolean},position:{type:Number},nodeType:{type:Object,default:()=>({})}},data(){return{windowWidth:1,isDragging:!1,MIN_PANEL_WIDTH:Qs,initialized:!1}},mounted(){this.setTotalWidth(),this.mainPanelDimensions.relativeLeft===1&&this.mainPanelDimensions.relativeRight===1&&(this.setMainPanelWidth(),this.setPositions(this.getInitialLeftPosition(this.mainPanelDimensions.relativeWidth)),this.restorePositionData()),window.addEventListener("resize",this.setTotalWidth),this.$emit("init",{position:this.mainPanelDimensions.relativeLeft}),setTimeout(()=>{this.initialized=!0},0)},destroyed(){window.removeEventListener("resize",this.setTotalWidth)},computed:{mainPanelDimensions(){return this.$store.getters["ndv/mainPanelDimensions"](this.currentNodePaneType)},supportedResizeDirections(){const s=["right"];return this.isDraggable&&s.push("left"),s},currentNodePaneType(){return this.hasInputSlot?this.isDraggable?this.nodeType===null?"unknown":ae.exports.get(this,"nodeType.parameterPane")||"regular":"dragless":"inputless"},hasInputSlot(){return this.$slots.input!==void 0},inputPanelMargin(){return this.pxToRelativeWidth(Dh)},minWindowWidth(){return 2*(ms+Dh)+Qs},minimumLeftPosition(){return this.windowWidth<this.minWindowWidth?this.pxToRelativeWidth(1):this.hasInputSlot?this.pxToRelativeWidth(ms+20)+this.inputPanelMargin:this.pxToRelativeWidth(ms)},maximumRightPosition(){return this.windowWidth<this.minWindowWidth?this.pxToRelativeWidth(1):this.pxToRelativeWidth(ms+20)+this.inputPanelMargin},canMoveLeft(){return this.mainPanelDimensions.relativeLeft>this.minimumLeftPosition},canMoveRight(){return this.mainPanelDimensions.relativeRight>this.maximumRightPosition},mainPanelStyles(){return{left:`${this.relativeWidthToPx(this.mainPanelDimensions.relativeLeft)}px`,right:`${this.relativeWidthToPx(this.mainPanelDimensions.relativeRight)}px`}},inputPanelStyles(){return{right:`${this.relativeWidthToPx(this.calculatedPositions.inputPanelRelativeRight)}px`}},outputPanelStyles(){return{left:`${this.relativeWidthToPx(this.calculatedPositions.outputPanelRelativeLeft)}px`,transform:`translateX(-${this.relativeWidthToPx(this.outputPanelRelativeTranslate)}px)`}},calculatedPositions(){const s=this.$slots.input!==void 0,e=this.mainPanelDimensions.relativeLeft+this.mainPanelDimensions.relativeWidth;return{inputPanelRelativeRight:s?1-e+this.mainPanelDimensions.relativeWidth:1-this.pxToRelativeWidth(ms),outputPanelRelativeLeft:e}},outputPanelRelativeTranslate(){const s=1-this.pxToRelativeWidth(Qs+ms),e=this.calculatedPositions.outputPanelRelativeLeft-s;return e>0?e:0},hasDoubleWidth(){return ae.exports.get(this,"nodeType.parameterPane")==="wide"},fixedPanelWidth(){const s=this.hasDoubleWidth?2:1;return this.windowWidth>1700?yU*s:wU*s},isBelowMinWidthMainPanel(){const s=this.pxToRelativeWidth(Qs);return this.mainPanelDimensions.relativeWidth<s}},watch:{windowWidth(s){const e=this.pxToRelativeWidth(Qs);this.isBelowMinWidthMainPanel&&this.setMainPanelWidth(e);const t=this.minimumLeftPosition>this.mainPanelDimensions.relativeLeft,i=this.maximumRightPosition>this.mainPanelDimensions.relativeRight;s>this.minWindowWidth&&t&&i&&(this.setMainPanelWidth(e),this.setPositions(this.getInitialLeftPosition(this.mainPanelDimensions.relativeWidth))),this.setPositions(this.mainPanelDimensions.relativeLeft)}},methods:{getInitialLeftPosition(s){return this.currentNodePaneType==="dragless"?this.pxToRelativeWidth(ms+1+this.fixedPanelWidth):this.hasInputSlot?.5-s/2:this.minimumLeftPosition},setMainPanelWidth(s){const e=s||this.pxToRelativeWidth(vU[this.currentNodePaneType]);this.$store.commit("ndv/setMainPanelDimensions",{panelType:this.currentNodePaneType,dimensions:{relativeWidth:e}})},setPositions(s){const e=s||1-this.calculatedPositions.inputPanelRelativeRight,t=1-e-this.mainPanelDimensions.relativeWidth,i=this.maximumRightPosition>t,n=this.minimumLeftPosition>e,o=this.currentNodePaneType==="inputless";if(n){this.$store.commit("ndv/setMainPanelDimensions",{panelType:this.currentNodePaneType,dimensions:{relativeLeft:this.minimumLeftPosition,relativeRight:1-this.mainPanelDimensions.relativeWidth-this.minimumLeftPosition}});return}if(i){this.$store.commit("ndv/setMainPanelDimensions",{panelType:this.currentNodePaneType,dimensions:{relativeLeft:1-this.mainPanelDimensions.relativeWidth-this.maximumRightPosition,relativeRight:this.maximumRightPosition}});return}this.$store.commit("ndv/setMainPanelDimensions",{panelType:this.currentNodePaneType,dimensions:{relativeLeft:o?this.minimumLeftPosition:e,relativeRight:t}})},pxToRelativeWidth(s){return s/this.windowWidth},relativeWidthToPx(s){return s*this.windowWidth},onResizeStart(){this.setTotalWidth()},onResizeEnd(){this.storePositionData()},onResizeDebounced(s){this.initialized&&this.callDebounced("onResize",{debounceTime:10,trailing:!0},s)},onResize({direction:s,x:e,width:t}){const i=this.pxToRelativeWidth(e),n=this.pxToRelativeWidth(t);s==="left"&&i<=this.minimumLeftPosition||s==="right"&&1-i<=this.maximumRightPosition||t<=Qs||(this.setMainPanelWidth(n),this.setPositions(s==="left"?i:this.mainPanelDimensions.relativeLeft))},restorePositionData(){const s=window.localStorage.getItem(`${kc}_${this.currentNodePaneType}`);if(s){const e=parseFloat(s);this.setMainPanelWidth(e);const t=this.getInitialLeftPosition(e);return this.setPositions(t),!0}return!1},storePositionData(){window.localStorage.setItem(`${kc}_${this.currentNodePaneType}`,this.mainPanelDimensions.relativeWidth.toString())},onDragStart(){this.isDragging=!0,this.$emit("dragstart",{position:this.mainPanelDimensions.relativeLeft})},onDrag(s){const e=this.pxToRelativeWidth(s.x)-this.mainPanelDimensions.relativeWidth/2;this.setPositions(e)},onDragEnd(){setTimeout(()=>{this.isDragging=!1,this.$emit("dragend",{windowWidth:this.windowWidth,position:this.mainPanelDimensions.relativeLeft})},0),this.storePositionData()},setTotalWidth(){this.windowWidth=window.innerWidth},close(){this.$emit("close")}}});const OU="_dataPanel_12iul_1",bU="_inputPanel_12iul_10 _dataPanel_12iul_1",xU="_outputPanel_12iul_18 _dataPanel_12iul_1",$U="_mainPanel_12iul_26",TU="_draggable_12iul_30",kU="_mainPanelInner_12iul_34",SU="_dragging_12iul_41",EU="_dragButtonContainer_12iul_50",CU="_visible_12iul_66";var NU={dataPanel:OU,inputPanel:bU,outputPanel:xU,mainPanel:$U,draggable:TU,mainPanelInner:kU,dragging:SU,dragButtonContainer:EU,visible:CU},PU=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e.hideInputAndOutput?e._e():t("div",{class:e.$style.inputPanel,style:e.inputPanelStyles},[e._t("input")],2),e.hideInputAndOutput?e._e():t("div",{class:e.$style.outputPanel,style:e.outputPanelStyles},[e._t("output")],2),t("div",{class:e.$style.mainPanel,style:e.mainPanelStyles},[t("n8n-resize-wrapper",{attrs:{isResizingEnabled:e.currentNodePaneType!=="unknown",width:e.relativeWidthToPx(e.mainPanelDimensions.relativeWidth),minWidth:e.MIN_PANEL_WIDTH,gridSize:20,supportedDirections:e.supportedResizeDirections},on:{resize:e.onResizeDebounced,resizestart:e.onResizeStart,resizeend:e.onResizeEnd}},[t("div",{class:e.$style.dragButtonContainer},[!e.hideInputAndOutput&&e.isDraggable?t("PanelDragButton",{class:{[e.$style.draggable]:!0,[e.$style.visible]:e.isDragging},attrs:{canMoveLeft:e.canMoveLeft,canMoveRight:e.canMoveRight},on:{dragstart:e.onDragStart,drag:e.onDrag,dragend:e.onDragEnd}}):e._e()],1),t("div",{class:{[e.$style.mainPanelInner]:!0,[e.$style.dragging]:e.isDragging}},[e._t("main")],2)])],1)])},DU=[];const Ih={$style:NU};function IU(s){for(var e in Ih)this[e]=Ih[e]}var AU=_(_U,PU,DU,!1,IU,null,null,null),RU=AU.exports,MU=N(Ce).extend({name:"BinaryDataDisplayEmbed",props:["binaryData"],data(){return{isLoading:!0,embedSource:"",error:!1}},async mounted(){if(!this.binaryData.id){this.embedSource="data:"+this.binaryData.mimeType+";base64,"+this.binaryData.data,this.isLoading=!1;return}try{const s=await this.restApi().getBinaryBufferString(this.binaryData.id);this.embedSource="data:"+this.binaryData.mimeType+";base64,"+s,this.isLoading=!1}catch{this.isLoading=!1,this.error=!0}},methods:{embedClass(){return this.binaryData!==null&&this.binaryData.mimeType!==void 0&&this.binaryData.mimeType.startsWith("image")?["image"]:["other"]}}});var WU=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e.isLoading?t("div",[e._v(" Loading binary data... ")]):e.error?t("div",[e._v(" Error loading binary data ")]):t("span",[e.binaryData.mimeType&&e.binaryData.mimeType.startsWith("video/")?t("video",{attrs:{controls:"",autoplay:""}},[t("source",{attrs:{src:e.embedSource,type:e.binaryData.mimeType}}),e._v(" "+e._s(e.$locale.baseText("binaryDataDisplay.yourBrowserDoesNotSupport"))+" ")]):t("embed",{staticClass:"binary-data",class:e.embedClass(),attrs:{src:e.embedSource}})])])},LU=[],QU=_(MU,WU,LU,!1,null,null,null,null),BU=QU.exports,UU=N(ct,Ce).extend({name:"BinaryDataDisplay",components:{BinaryDataDisplayEmbed:BU},props:["displayData","windowVisible"],computed:{binaryData(){const s=this.getBinaryData(this.workflowRunData,this.displayData.node,this.displayData.runIndex,this.displayData.outputIndex);return s.length===0||this.displayData.index>=s.length||s[this.displayData.index][this.displayData.key]===void 0?null:s[this.displayData.index][this.displayData.key]},embedClass(){return this.binaryData!==null&&this.binaryData.mimeType!==void 0&&this.binaryData.mimeType.startsWith("image")?["image"]:["other"]},workflowRunData(){const s=this.$store.getters.getWorkflowExecution;return s===null?null:s.data.resultData.runData}},methods:{closeWindow(){return this.$emit("close"),!1}}});var VU=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.windowVisible?t("div",{staticClass:"binary-data-window"},[t("n8n-button",{staticClass:"binary-data-window-back",attrs:{size:"small",title:e.$locale.baseText("binaryDataDisplay.backToOverviewPage"),icon:"arrow-left",label:e.$locale.baseText("binaryDataDisplay.backToList")},on:{click:function(i){return i.stopPropagation(),e.closeWindow.apply(null,arguments)}}}),t("div",{staticClass:"binary-data-window-wrapper"},[e.binaryData?t("BinaryDataDisplayEmbed",{attrs:{binaryData:e.binaryData}}):t("div",[e._v(" "+e._s(e.$locale.baseText("binaryDataDisplay.noDataFoundToDisplay"))+" ")])],1)],1):e._e()},FU=[],jU=_(UU,VU,FU,!1,null,null,null,null),zU=jU.exports,GU=N(ui,V).extend({name:"NodeErrorView",props:["error"],components:{VueJsonPretty:jp},computed:{displayCause(){return JSON.stringify(this.error.cause).length<zp},parameters(){const s=this.$store.getters["ndv/activeNode"];if(!s)return[];const e=this.$store.getters["nodeTypes/getNodeType"](s.type,s.typeVersion);return e===null?[]:e.properties}},methods:{replacePlaceholders(s,e){const t=this.parameterDisplayName(s,!1),i=this.parameterDisplayName(s,!0);return e.replace(/%%PARAMETER%%/g,t).replace(/%%PARAMETER_FULL%%/g,i)},getErrorDescription(){if(!this.error.context||!this.error.context.descriptionTemplate)return xs(this.error.description);const s=this.parameterDisplayName(this.error.context.parameter);return xs(this.error.context.descriptionTemplate.replace(/%%PARAMETER%%/g,s))},getErrorMessage(){const s=this.$locale.baseText("nodeErrorView.error")+": ";if(!this.error.context||!this.error.context.messageTemplate)return s+this.error.message;const e=this.parameterDisplayName(this.error.context.parameter);return s+this.error.context.messageTemplate.replace(/%%PARAMETER%%/g,e)},parameterDisplayName(s,e=!0){try{const t=this.parameterName(this.parameters,s.split("."));if(!t.length)throw new Error;return e===!1?t.pop().displayName:t.map(i=>i.displayName).join(" > ")}catch{return`Could not find parameter "${s}"`}},parameterName(s,e){let t=e.shift();if(t===void 0)return[];const i=t.match(/(.*)\[([\d])\]$/);i!==null&&i.length>0&&(t=i[1]);const n=s.find(o=>o.name===t);if(n===void 0)throw new Error(`Could not find parameter "${t}"`);return e.length===0?[n]:n.hasOwnProperty("options")?[n,...this.parameterName(n.options,e)]:n.hasOwnProperty("values")?[n,...this.parameterName(n.values,e)]:[n]},copyCause(){this.copyToClipboard(JSON.stringify(this.error.cause)),this.copySuccess()},copySuccess(){this.$showMessage({title:this.$locale.baseText("nodeErrorView.showMessage.title"),type:"info"})}}});var HU=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{staticClass:"error-header"},[t("div",{staticClass:"error-message"},[e._v(e._s(e.getErrorMessage()))]),e.error.description?t("div",{staticClass:"error-description",domProps:{innerHTML:e._s(e.getErrorDescription())}}):e._e()]),t("details",[t("summary",{staticClass:"error-details__summary"},[t("font-awesome-icon",{staticClass:"error-details__icon",attrs:{icon:"angle-right"}}),e._v(" "+e._s(e.$locale.baseText("nodeErrorView.details"))+" ")],1),t("div",{staticClass:"error-details__content"},[e.error.context&&e.error.context.causeDetailed?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",[e._v(" "+e._s(e.error.context.causeDetailed)+" ")])])],1):e._e(),e.error.timestamp?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.time")))])]),t("div",[e._v(" "+e._s(new Date(e.error.timestamp).toLocaleString())+" ")])])],1):e._e(),e.error.context&&e.error.context.itemIndex!==void 0?t("div",{staticClass:"el-card box-card is-never-shadow el-card__body"},[t("span",{staticClass:"error-details__summary"},[e._v(e._s(e.$locale.baseText("nodeErrorView.itemIndex"))+":")]),e._v(" "+e._s(e.error.context.itemIndex)+" "),e.error.context.runIndex?t("span",[e._v(" | "),t("span",{staticClass:"error-details__summary"},[e._v(e._s(e.$locale.baseText("nodeErrorView.itemIndex"))+":")]),e._v(" "+e._s(e.error.context.runIndex)+" ")]):e._e(),e.error.context.parameter?t("span",[e._v(" | "),t("span",{staticClass:"error-details__summary"},[e._v(e._s(e.$locale.baseText("nodeErrorView.inParameter"))+":")]),e._v(" "+e._s(e.parameterDisplayName(e.error.context.parameter))+" ")]):e._e()]):e._e(),e.error.httpCode?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.httpCode")))])]),t("div",[e._v(" "+e._s(e.error.httpCode)+" ")])])],1):e._e(),e.error.cause?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.cause")))]),t("br"),t("span",{staticClass:"box-card__subtitle"},[e._v(e._s(e.$locale.baseText("nodeErrorView.dataBelowMayContain")))])]),t("div",[e.displayCause?t("div",{staticClass:"copy-button"},[t("n8n-icon-button",{attrs:{title:e.$locale.baseText("nodeErrorView.copyToClipboard"),icon:"copy"},on:{click:e.copyCause}})],1):e._e(),e.displayCause?t("vue-json-pretty",{staticClass:"json-data",attrs:{data:e.error.cause,deep:3,showLength:!0,selectableType:"single",path:"error"}}):t("span",[t("font-awesome-icon",{attrs:{icon:"info-circle"}}),e._v(e._s(e.$locale.baseText("nodeErrorView.theErrorCauseIsTooLargeToBeDisplayed"))+" ")],1)],1)])],1):e._e(),e.error.stack?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix box-card__title",attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.stack")))])]),t("div",[t("pre",[t("code",[e._v(e._s(e.error.stack))])])])])],1):e._e()])])])},qU=[],XU=_(GU,HU,qU,!1,null,null,null,null),YU=XU.exports;const Ah=40;var ZU=N(ve).extend({name:"run-data-table",components:{Draggable:ec},props:{node:{type:Object},inputData:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number},runIndex:{type:Number},outputIndex:{type:Number},totalRuns:{type:Number},pageOffset:{type:Number},hasDefaultHoverState:{type:Boolean}},data(){return{activeColumn:-1,draggedColumn:!1,draggingPath:null,hoveringPath:null,mappingHintVisible:!1,activeRow:null,columnLimitExceeded:!1}},mounted(){if(this.tableData&&this.tableData.columns&&this.$refs.draggable){const s=this.$refs.draggable.$refs.wrapper;s&&this.$emit("mounted",{avgRowHeight:s.offsetHeight/this.tableData.data.length})}},computed:{hoveringItem(){return this.$store.getters["ndv/hoveringItem"]},pairedItemMappings(){return this.$store.getters.workflowExecutionPairedItemMappings},tableData(){return this.convertToTable(this.inputData)}},methods:{shorten:cl,isHoveringRow(s){if(s===this.activeRow)return!0;const e=this.pageOffset+s;if(e===0&&!this.hoveringItem&&this.hasDefaultHoverState&&this.distanceFromActive===1)return!0;const t=so(this.node.name,this.runIndex||0,this.outputIndex||0,e);if(!this.hoveringItem||!this.pairedItemMappings[t])return!1;const i=so(this.hoveringItem.nodeName,this.hoveringItem.runIndex,this.hoveringItem.outputIndex,this.hoveringItem.itemIndex);return this.pairedItemMappings[t].has(i)},onMouseEnterCell(s){const e=s.target;if(e&&this.mappingEnabled){const t=e.dataset.col;t&&!isNaN(parseInt(t,10))&&(this.activeColumn=parseInt(t,10))}if(e){const t=e.dataset.row;t&&!isNaN(parseInt(t,10))&&(this.activeRow=parseInt(t,10),this.$emit("activeRowChanged",this.pageOffset+this.activeRow))}},onMouseLeaveCell(){this.activeColumn=-1,this.activeRow=null,this.$emit("activeRowChanged",null)},onMouseEnterKey(s,e){this.hoveringPath=this.getCellExpression(s,e)},onMouseLeaveKey(){this.hoveringPath=null},isHovering(s,e){const t=this.getCellExpression(s,e);return this.hoveringPath===t},getExpression(s){return this.node?this.distanceFromActive===1?`{{ $json["${s}"] }}`:`{{ $node["${this.node.name}"].json["${s}"] }}`:""},getPathNameFromTarget(s){return s?s.dataset.name:""},getCellPathName(s,e){const t=s[s.length-1];return typeof t=="string"?t:s.length>1?`${s[s.length-2]}[${t}]`:`${this.tableData.columns[e]}[${t}]`},getCellExpression(s,e){if(!this.node)return"";const t=s.reduce((n,o)=>typeof o=="number"?`${n}[${o}]`:`${n}["${o}"]`,""),i=this.tableData.columns[e];return this.distanceFromActive===1?`{{ $json["${i}"]${t} }}`:`{{ $node["${this.node.name}"].json["${i}"]${t} }}`},isEmpty(s){return s===""||Array.isArray(s)&&s.length===0||typeof s=="object"&&s!==null&&Object.keys(s).length===0||s==null},getValueToRender(s){return s===""?this.$locale.baseText("runData.emptyString"):typeof s=="string"?s.replaceAll(`
`,"\\n"):Array.isArray(s)&&s.length===0?this.$locale.baseText("runData.emptyArray"):typeof s=="object"&&s!==null&&Object.keys(s).length===0?this.$locale.baseText("runData.emptyObject"):s==null?`[${s}]`:s},onDragStart(){this.draggedColumn=!0,this.$store.commit("ndv/resetMappingTelemetry")},onCellDragStart(s){s&&s.dataset.value&&(this.draggingPath=s.dataset.value),this.onDragStart()},onCellDragEnd(s){this.draggingPath=null,this.onDragEnd(s.dataset.name||"","tree",s.dataset.depth||"0")},isDraggingKey(s,e){if(!!this.draggingPath)return this.draggingPath===this.getCellExpression(s,e)},onDragEnd(s,e,t="0"){setTimeout(()=>{const i=this.$store.getters["ndv/mappingTelemetry"],n={src_node_type:this.node.type,src_field_name:s,src_nodes_back:this.distanceFromActive,src_run_index:this.runIndex,src_runs_total:this.totalRuns,src_field_nest_level:parseInt(t,10),src_view:"table",src_element:e,success:!1,...i};this.$externalHooks().run("runDataTable.onDragEnd",n),this.$telemetry.track("User dragged data for mapping",n)},1e3)},isSimple(s){return typeof s!="object"||s===null||Array.isArray(s)&&s.length===0||typeof s=="object"&&Object.keys(s).length===0},hasJsonInColumn(s){return this.tableData.hasJson[this.tableData.columns[s]]},convertToTable(s){const e=[],t=[];let i,n,o;const r={};return s.forEach(a=>{if(!a.hasOwnProperty("json"))return;o=a.json,n=[];const l=Object.keys(o||{});l.length>Ah?(this.columnLimitExceeded=!0,i=l.slice(0,Ah)):i=l,t.forEach(c=>{o.hasOwnProperty(c)?(n.push(o[c]),i.splice(i.indexOf(c),1),r[c]=r[c]||typeof o[c]=="object"&&Object.keys(o[c]||{}).length>0||!1):n.push(null)}),i.forEach(c=>{t.push(c),n.push(o[c]),r[c]=r[c]||typeof o[c]=="object"&&Object.keys(o[c]||{}).length>0||!1}),e.push(n)}),e.forEach(a=>{t.length>a.length&&a.push(...new Array(t.length-a.length))}),{hasJson:r,columns:t,data:e}},switchToJsonView(){this.$emit("displayModeChange","json")}}}),KU="/{{BASE_PATH}}/static/data-mapping-gif.gif";const JU="_dataDisplay_1jdar_1",eV="_table_1jdar_14",tV="_nodeClass_1jdar_60",sV="_emptyCell_1jdar_64",iV="_header_1jdar_68",nV="_draggableHeader_1jdar_80",oV="_dragButton_1jdar_84",rV="_draggingHeader_1jdar_88",aV="_activeHeader_1jdar_92",lV="_dragPill_1jdar_101",cV="_droppablePill_1jdar_110",dV="_defaultPill_1jdar_114",uV="_dataKey_1jdar_120",hV="_value_1jdar_129",pV="_nestedValue_1jdar_133 _value_1jdar_129",fV="_mappable_1jdar_138",mV="_empty_1jdar_64",gV="_limitColWidth_1jdar_146",wV="_minColWidth_1jdar_150",yV="_hoveringKey_1jdar_154",vV="_draggingKey_1jdar_158",_V="_tableRightMargin_1jdar_162",OV="_hoveringRow_1jdar_170",bV="_warningTooltip_1jdar_174";var xV={dataDisplay:JU,table:eV,nodeClass:tV,emptyCell:sV,header:iV,draggableHeader:nV,dragButton:oV,draggingHeader:rV,activeHeader:aV,dragPill:lV,droppablePill:cV,defaultPill:dV,dataKey:uV,value:hV,nestedValue:pV,mappable:fV,empty:mV,limitColWidth:gV,minColWidth:wV,hoveringKey:yV,draggingKey:vV,tableRightMargin:_V,hoveringRow:OV,warningTooltip:bV},$V=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.dataDisplay},[e.tableData.columns&&e.tableData.columns.length===0?t("table",{class:e.$style.table},[t("tr",[t("th",{class:e.$style.emptyCell}),t("th",{class:e.$style.tableRightMargin})]),e._l(e.tableData.data,function(i,n){return t("tr",{key:n,class:{[e.$style.hoveringRow]:e.isHoveringRow(n)}},[t("td",{attrs:{"data-row":n,"data-col":0},on:{mouseenter:e.onMouseEnterCell,mouseleave:e.onMouseLeaveCell}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("runData.emptyItemHint")))])],1),t("td",{class:e.$style.tableRightMargin})])})],2):t("table",{class:e.$style.table},[t("thead",[t("tr",[e._l(e.tableData.columns||[],function(i,n){return t("th",{key:i},[t("n8n-tooltip",{attrs:{placement:"bottom-start",disabled:!e.mappingEnabled,"open-delay":1e3}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("img",{attrs:{src:KU}}),e._v(" "+e._s(e.$locale.baseText("dataMapping.dragColumnToFieldHint"))+" ")]),t("draggable",{attrs:{type:"mapping",data:e.getExpression(i),disabled:!e.mappingEnabled},on:{dragstart:e.onDragStart,dragend:o=>e.onDragEnd(o,"column")},scopedSlots:e._u([{key:"preview",fn:function({canDrop:o}){return[t("div",{class:[e.$style.dragPill,o?e.$style.droppablePill:e.$style.defaultPill]},[e._v(" "+e._s(e.$locale.baseText("dataMapping.mapKeyToField",{interpolate:{name:e.shorten(i,16,2)}}))+" ")])]}},{key:"default",fn:function({isDragging:o}){return[t("div",{class:{[e.$style.header]:!0,[e.$style.draggableHeader]:e.mappingEnabled,[e.$style.activeHeader]:n===e.activeColumn&&e.mappingEnabled,[e.$style.draggingHeader]:o}},[t("span",[e._v(e._s(i||"\xA0"))]),t("div",{class:e.$style.dragButton},[t("font-awesome-icon",{attrs:{icon:"grip-vertical"}})],1)])]}}],null,!0)})],1)],1)}),e.columnLimitExceeded?t("th",{class:e.$style.header},[t("n8n-tooltip",{attrs:{placement:"bottom-end"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("i18n",{attrs:{path:"dataMapping.tableView.tableColumnsExceeded.tooltip"}},[t("a",{on:{click:e.switchToJsonView}},[e._v(e._s(e.$locale.baseText("dataMapping.tableView.tableColumnsExceeded.tooltip.link")))])])],1),t("span",[t("font-awesome-icon",{class:e.$style.warningTooltip,attrs:{icon:"exclamation-triangle"}}),e._v(" "+e._s(e.$locale.baseText("dataMapping.tableView.tableColumnsExceeded"))+" ")],1)])],1):e._e(),t("th",{class:e.$style.tableRightMargin})],2)]),t("draggable",{ref:"draggable",attrs:{tag:"tbody",type:"mapping",targetDataKey:"mappable",disabled:!e.mappingEnabled},on:{dragstart:e.onCellDragStart,dragend:e.onCellDragEnd},scopedSlots:e._u([{key:"preview",fn:function({canDrop:i,el:n}){return[t("div",{class:[e.$style.dragPill,i?e.$style.droppablePill:e.$style.defaultPill]},[e._v(" "+e._s(e.$locale.baseText(e.tableData.data.length>1?"dataMapping.mapAllKeysToField":"dataMapping.mapKeyToField",{interpolate:{name:e.shorten(e.getPathNameFromTarget(n)||"",16,2)}}))+" ")])]}}])},[e._l(e.tableData.data,function(i,n){return t("tr",{key:n,class:{[e.$style.hoveringRow]:e.isHoveringRow(n)}},[e._l(i,function(o,r){return t("td",{key:r,class:e.hasJsonInColumn(r)?e.$style.minColWidth:e.$style.limitColWidth,attrs:{"data-row":n,"data-col":r},on:{mouseenter:e.onMouseEnterCell,mouseleave:e.onMouseLeaveCell}},[e.isSimple(o)?t("span",{class:{[e.$style.value]:!0,[e.$style.empty]:e.isEmpty(o)}},[e._v(e._s(e.getValueToRender(o)))]):t("n8n-tree",{attrs:{nodeClass:e.$style.nodeClass,value:o},scopedSlots:e._u([{key:"label",fn:function({label:a,path:l}){return[t("span",{class:{[e.$style.hoveringKey]:e.mappingEnabled&&e.isHovering(l,r),[e.$style.draggingKey]:e.isDraggingKey(l,r),[e.$style.dataKey]:!0,[e.$style.mappable]:e.mappingEnabled},attrs:{"data-target":"mappable","data-name":e.getCellPathName(l,r),"data-value":e.getCellExpression(l,r),"data-depth":l.length},on:{mouseenter:()=>e.onMouseEnterKey(l,r),mouseleave:e.onMouseLeaveKey}},[e._v(e._s(a||e.$locale.baseText("runData.unnamedField")))])]}},{key:"value",fn:function({value:a}){return[t("span",{class:{[e.$style.nestedValue]:!0,[e.$style.empty]:e.isEmpty(a)}},[e._v(e._s(e.getValueToRender(a)))])]}}],null,!0)})],1)}),e.columnLimitExceeded?t("td"):e._e(),t("td",{class:e.$style.tableRightMargin})],2)})],2)],1)])},TV=[];const Rh={$style:xV};function kV(s){for(var e in Rh)this[e]=Rh[e]}var SV=_(ZU,$V,TV,!1,kV,null,null,null),EV=SV.exports;const CV=()=>As(()=>import("./RunDataJsonActions.f32fe07d.js"),["assets/RunDataJsonActions.f32fe07d.js","assets/RunDataJsonActions.e3473b6d.css","assets/vue-typed-mixins.81797ea0.js","assets/vendor.a2fafdee.js","assets/jsonpath.ffbbd05e.js","assets/axios.4a974fe3.js","assets/n8n-design-system.670325b1.js","assets/n8n-design-system.4c7f4b23.css","assets/normalize-wheel.53b95207.js","assets/@fortawesome/vue-fontawesome.4443d979.js","assets/@fortawesome/fontawesome-svg-core.2d7f1ae5.js","assets/xss.ffb35cb9.js","assets/@fortawesome/free-solid-svg-icons.4a1e939e.js","assets/@fortawesome/free-regular-svg-icons.9fb25f9a.js","assets/vue2-touch-events.f7c2b344.js","assets/v-click-outside.2a379eae.js","assets/vue-fragment.3d40e27f.js","assets/vue-agile.3c7c1e37.js","assets/vue-agile.db3fb5fe.css","assets/lodash-es.e05ea3b9.js","assets/prismjs.95406fca.js","assets/n8n-workflow.4d086b10.js","assets/luxon.daa33f39.js","assets/flatted.12ebcbd8.js","assets/uuid.6335a3e0.js","assets/dateformat.a1136387.js","assets/monaco-editor.21485360.js","assets/monaco-editor.45667471.css","assets/quill.470e9400.js","assets/quill-autoformat.e2d87442.js","assets/fast-json-stable-stringify.d7c839ef.js","assets/vue-prism-editor.20a215ee.js","assets/esprima.67881ccb.js","assets/vue-i18n.517f429e.js","assets/timeago.js.677063e2.js","assets/file-saver.a22fc8cb.js","assets/jsplumb.1ecfd296.js","assets/vue2-teleport.e42b1fad.js","assets/vue-json-pretty.7b5bff4b.js"]);var NV=N(ve).extend({name:"run-data-json",components:{VueJsonPretty:jp,Draggable:ec,runDataJsonActions:CV},props:{editMode:{type:Object},currentOutputIndex:{type:Number},sessionId:{type:String},paneType:{type:String},node:{type:Object},inputData:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number},showMappingHint:{type:Boolean},runIndex:{type:Number},totalRuns:{type:Number}},data(){return{selectedJsonPath:null,mappingHintVisible:!1,showHintWithDelay:!1,draggingPath:null,displayMode:"json"}},mounted(){this.showMappingHint&&(this.mappingHintVisible=!0,setTimeout(()=>{this.mappingHintVisible=!1},6e3)),this.showMappingHint&&this.showHint&&setTimeout(()=>{this.showHintWithDelay=this.showHint,this.$telemetry.track("User viewed JSON mapping tooltip",{type:"param focus"})},500)},computed:{jsonData(){return Bn(this.inputData)},showHint(){return!this.draggingPath&&(this.showMappingHint&&this.mappingHintVisible||window.localStorage.getItem(js)!=="true")}},methods:{getShortKey(s){return s?cl(s.dataset.name||"",16,2):""},getJsonParameterPath(s){return`{{ ${bx(s).replace(/^(\["?\d"?])/,this.distanceFromActive===1?"$json":`$node["${this.node.name}"].json`)} }}`},onDragStart(s){s&&s.dataset.path&&(this.draggingPath=s.dataset.path),this.$store.commit("ndv/resetMappingTelemetry")},onDragEnd(s){this.draggingPath=null,setTimeout(()=>{const e=this.$store.getters["ndv/mappingTelemetry"],t={src_node_type:this.node.type,src_field_name:s.dataset.name||"",src_nodes_back:this.distanceFromActive,src_run_index:this.runIndex,src_runs_total:this.totalRuns,src_field_nest_level:s.dataset.depth||0,src_view:"json",src_element:s,success:!1,...e};this.$externalHooks().run("runDataJson.onDragEnd",t),this.$telemetry.track("User dragged data for mapping",t)},1e3)},getContent(s){return ra(s)&&!Ox(s)?`"${s}"`:s}}});const PV="_jsonDisplay_1a36b_1",DV="_mappable_1a36b_22",IV="_dragged_1a36b_29",AV="_dragPill_1a36b_33",RV="_droppablePill_1a36b_42",MV="_defaultPill_1a36b_46";var WV={jsonDisplay:PV,mappable:DV,dragged:IV,dragPill:AV,droppablePill:RV,defaultPill:MV};var LV=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.jsonDisplay},[e.editMode.enabled?e._e():t("run-data-json-actions",{attrs:{node:e.node,sessioId:e.sessionId,displayMode:e.displayMode,distanceFromActive:e.distanceFromActive,selectedJsonPath:e.selectedJsonPath,jsonData:e.jsonData,paneType:e.paneType}}),t("draggable",{ref:"draggable",attrs:{type:"mapping",targetDataKey:"mappable",disabled:!e.mappingEnabled},on:{dragstart:e.onDragStart,dragend:e.onDragEnd},scopedSlots:e._u([{key:"preview",fn:function({canDrop:i,el:n}){return[t("div",{class:[e.$style.dragPill,i?e.$style.droppablePill:e.$style.defaultPill]},[e._v(" "+e._s(e.$locale.baseText("dataMapping.mapKeyToField",{interpolate:{name:e.getShortKey(n)}}))+" ")])]}}])},[[t("vue-json-pretty",{staticClass:"json-data",attrs:{data:e.jsonData,deep:10,showLength:!0,"selected-value":e.selectedJsonPath,rootPath:"",selectableType:"single"},on:{"update:selectedValue":function(i){e.selectedJsonPath=i},"update:selected-value":function(i){e.selectedJsonPath=i}},scopedSlots:e._u([{key:"nodeKey",fn:function({node:i}){return[t("span",{class:{[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===i.path},attrs:{"data-target":"mappable","data-value":e.getJsonParameterPath(i.path),"data-name":i.key,"data-path":i.path,"data-depth":i.level}},[e._v('"'+e._s(i.key)+'"')])]}},{key:"nodeValue",fn:function({node:i}){return[t("span",[e._v(e._s(e.getContent(i.content)))])]}}])})]],2)],1)},QV=[];const Mh={$style:WV};function BV(s){for(var e in Mh)this[e]=Mh[e]}var UV=_(NV,LV,QV,!1,BV,null,null,null),VV=UV.exports,FV=N(ui,ve,be,ct,an).extend({name:"RunData",components:{BinaryDataDisplay:zU,NodeErrorView:YU,WarningTooltip:jl,CodeEditor:mf,RunDataTable:EV,RunDataJson:VV},props:{nodeUi:{type:Object},runIndex:{type:Number},linkedRuns:{type:Boolean},canLinkRuns:{type:Boolean},tooMuchDataTitle:{type:String},noDataInBranchMessage:{type:String},isExecuting:{type:Boolean},executingMessage:{type:String},sessionId:{type:String},paneType:{type:String},overrideOutputs:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number},showMappingHint:{type:Boolean},blockUI:{type:Boolean,default:!1}},data(){return{binaryDataPreviewActive:!1,dataSize:0,showData:!1,outputIndex:0,binaryDataDisplayVisible:!1,binaryDataDisplayData:null,MAX_DISPLAY_DATA_SIZE:zp,MAX_DISPLAY_ITEMS_AUTO_ALL:O_,currentPage:1,pageSize:10,pageSizes:[10,25,50,100],eventBus:De,pinDataDiscoveryTooltipVisible:!1,isControlledPinDataTooltip:!1}},mounted(){this.init(),this.isPaneTypeInput||(this.eventBus.$on("data-pinning-error",this.onDataPinningError),this.eventBus.$on("data-unpinning",this.onDataUnpinning),localStorage.getItem(ur)||this.showPinDataDiscoveryTooltip(this.jsonData)),this.$store.commit("ndv/setNDVBranchIndex",{pane:this.paneType,branchIndex:this.currentOutputIndex})},destroyed(){this.hidePinDataDiscoveryTooltip(),this.eventBus.$off("data-pinning-error",this.onDataPinningError),this.eventBus.$off("data-unpinning",this.onDataUnpinning)},computed:{activeNode(){return this.$store.getters["ndv/activeNode"]},dataPinningDocsUrl(){return k_},dataEditingDocsUrl(){return S_},displayMode(){return this.$store.getters["ndv/getPanelDisplayMode"](this.paneType)},node(){return this.nodeUi||null},nodeType(){return this.node?this.$store.getters["nodeTypes/getNodeType"](this.node.type,this.node.typeVersion):null},isTriggerNode(){return this.$store.getters["nodeTypes/isTriggerNode"](this.node.type)},canPinData(){return!this.isPaneTypeInput&&this.isPinDataNodeType&&!(this.binaryData&&this.binaryData.length>0)},buttons(){const s=[{label:this.$locale.baseText("runData.table"),value:"table"},{label:this.$locale.baseText("runData.json"),value:"json"}];return this.binaryData.length?[...s,{label:this.$locale.baseText("runData.binary"),value:"binary"}]:s},hasNodeRun(){return Boolean(!this.isExecuting&&this.node&&(this.workflowRunData&&this.workflowRunData.hasOwnProperty(this.node.name)||this.hasPinData))},subworkflowExecutionError(){return this.$store.getters.subworkflowExecutionError},hasSubworkflowExecutionError(){return Boolean(this.subworkflowExecutionError)},hasRunError(){return Boolean(this.node&&this.workflowRunData&&this.workflowRunData[this.node.name]&&this.workflowRunData[this.node.name][this.runIndex]&&this.workflowRunData[this.node.name][this.runIndex].error)},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunData(){if(this.workflowExecution===null)return null;const s=this.workflowExecution.data;return s&&s.resultData?s.resultData.runData:null},dataCount(){return this.getDataCount(this.runIndex,this.currentOutputIndex)},dataSizeInMB(){return(this.dataSize/1024/1e3).toLocaleString()},maxOutputIndex(){if(this.node===null)return 0;const s=this.workflowRunData;if(s===null||!s.hasOwnProperty(this.node.name)||s[this.node.name].length<this.runIndex)return 0;if(s[this.node.name][this.runIndex]){const e=s[this.node.name][this.runIndex].data;if(e&&e.main)return e.main.length-1}return 0},currentPageOffset(){return this.pageSize*(this.currentPage-1)},maxRunIndex(){if(this.node===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.node.name)?0:s[this.node.name].length?s[this.node.name].length-1:0},rawInputData(){let s=[];return this.node&&(s=this.getNodeInputData(this.node,this.runIndex,this.currentOutputIndex)),s.length===0||!Array.isArray(s)?[]:s},inputData(){let s=this.rawInputData;this.node&&this.pinData&&(s=Array.isArray(this.pinData)?this.pinData.map(t=>({json:t})):[{json:this.pinData}]);const e=this.pageSize*(this.currentPage-1);return s=s.slice(e,e+this.pageSize),s},jsonData(){return Bn(this.inputData)},binaryData(){return this.node?this.getBinaryData(this.workflowRunData,this.node.name,this.runIndex,this.currentOutputIndex).filter(e=>Boolean(e&&Object.keys(e).length)):[]},currentOutputIndex(){return this.overrideOutputs&&this.overrideOutputs.length&&!this.overrideOutputs.includes(this.outputIndex)?this.overrideOutputs[0]:this.outputIndex},branches(){function s(t){return t.charAt(0).toLocaleUpperCase()+t.slice(1)}const e=[];for(let t=0;t<=this.maxOutputIndex;t++){if(this.overrideOutputs&&!this.overrideOutputs.includes(t))continue;const i=this.getDataCount(this.runIndex,t),n=this.$locale.baseText("ndv.output.items",{adjustToNumber:i});let o=this.getOutputName(t);`${o}`==`${t}`?o=`${this.$locale.baseText("ndv.output")} ${o}`:o=s(`${this.getOutputName(t)} ${this.$locale.baseText("ndv.output.branch")}`),e.push({label:i?`${o} (${i} ${n})`:o,value:t})}return e},editMode(){return this.isPaneTypeInput?{enabled:!1,value:""}:this.$store.getters["ndv/outputPanelEditMode"]},isPaneTypeInput(){return this.paneType==="input"}},methods:{onItemHover(s){if(s===null){this.$emit("itemHover",null);return}this.$emit("itemHover",{outputIndex:this.currentOutputIndex,itemIndex:s})},onClickDataPinningDocsLink(){this.$telemetry.track("User clicked ndv link",{workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,node_type:this.activeNode.type,pane:"output",type:"data-pinning-docs"})},showPinDataDiscoveryTooltip(s){!this.isTriggerNode||s&&s.length>0&&(this.pinDataDiscoveryComplete(),setTimeout(()=>{this.isControlledPinDataTooltip=!0,this.pinDataDiscoveryTooltipVisible=!0,this.eventBus.$emit("data-pinning-discovery",{isTooltipVisible:!0})},500))},hidePinDataDiscoveryTooltip(){this.pinDataDiscoveryTooltipVisible&&(this.isControlledPinDataTooltip=!1,this.pinDataDiscoveryTooltipVisible=!1,this.eventBus.$emit("data-pinning-discovery",{isTooltipVisible:!1}))},pinDataDiscoveryComplete(){localStorage.setItem(ur,"true"),localStorage.setItem(na,"true")},enterEditMode({origin:s}){const e=this.pinData?Lc(this.pinData):Bn(this.rawInputData),t=e.length>0?e:YO;this.$store.commit("ndv/setOutputPanelEditModeEnabled",!0),this.$store.commit("ndv/setOutputPanelEditModeValue",JSON.stringify(t,null,2)),this.$telemetry.track("User opened ndv edit state",{node_type:this.activeNode.type,click_type:s==="editIconButton"?"button":"link",session_id:this.sessionId,run_index:this.runIndex,is_output_present:this.hasNodeRun||this.hasPinData,view:!this.hasNodeRun&&!this.hasPinData?"undefined":this.displayMode,is_data_pinned:this.hasPinData})},onClickCancelEdit(){this.$store.commit("ndv/setOutputPanelEditModeEnabled",!1),this.$store.commit("ndv/setOutputPanelEditModeValue",""),this.onExitEditMode({type:"cancel"})},onClickSaveEdit(){const{value:s}=this.editMode;if(this.clearAllStickyNotifications(),!this.isValidPinDataSize(s)){this.onDataPinningError({errorType:"data-too-large",source:"save-edit"});return}if(!this.isValidPinDataJSON(s)){this.onDataPinningError({errorType:"invalid-json",source:"save-edit"});return}this.$store.commit("ndv/setOutputPanelEditModeEnabled",!1),this.$store.commit("pinData",{node:this.node,data:Lc(s)}),this.onDataPinningSuccess({source:"save-edit"}),this.onExitEditMode({type:"save"})},onExitEditMode({type:s}){this.$telemetry.track("User closed ndv edit state",{node_type:this.activeNode.type,session_id:this.sessionId,run_index:this.runIndex,view:this.displayMode,type:s})},onDataUnpinning({source:s}){this.$telemetry.track("User unpinned ndv data",{node_type:this.activeNode.type,session_id:this.sessionId,run_index:this.runIndex,source:s,data_size:Ii(this.pinData)})},onDataPinningSuccess({source:s}){const e={pinning_source:s,node_type:this.activeNode.type,session_id:this.sessionId,data_size:Ii(this.pinData),view:this.displayMode,run_index:this.runIndex};this.$externalHooks().run("runData.onDataPinningSuccess",e),this.$telemetry.track("Ndv data pinning success",e)},onDataPinningError({errorType:s,source:e}){this.$telemetry.track("Ndv data pinning failure",{pinning_source:e,node_type:this.activeNode.type,session_id:this.sessionId,data_size:Ii(this.pinData),view:this.displayMode,run_index:this.runIndex,error_type:s})},async onTogglePinData({source:s}){if(s==="pin-icon-click"){const t={node_type:this.activeNode.type,session_id:this.sessionId,run_index:this.runIndex,view:!this.hasNodeRun&&!this.hasPinData?"none":this.displayMode};this.$externalHooks().run("runData.onTogglePinData",t),this.$telemetry.track("User clicked pin data icon",t)}if(this.updateNodeParameterIssues(this.node),this.hasPinData){this.onDataUnpinning({source:s}),this.$store.commit("unpinData",{node:this.node});return}const e=Bn(this.rawInputData);if(!this.isValidPinDataSize(e)){this.onDataPinningError({errorType:"data-too-large",source:"pin-icon-click"});return}this.onDataPinningSuccess({source:"pin-icon-click"}),this.$store.commit("pinData",{node:this.node,data:e}),this.maxRunIndex>0&&this.$showToast({title:this.$locale.baseText("ndv.pinData.pin.multipleRuns.title",{interpolate:{index:`${this.runIndex}`}}),message:this.$locale.baseText("ndv.pinData.pin.multipleRuns.description"),type:"success",duration:2e3}),this.hidePinDataDiscoveryTooltip(),this.pinDataDiscoveryComplete()},switchToBinary(){this.onDisplayModeChange("binary")},onBranchChange(s){this.outputIndex=s,this.$telemetry.track("User changed ndv branch",{session_id:this.sessionId,branch_index:s,node_type:this.activeNode.type,node_type_input_selection:this.nodeType?this.nodeType.name:"",pane:this.paneType})},showTooMuchData(){this.showData=!0,this.$telemetry.track("User clicked ndv button",{node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:this.paneType,type:"showTooMuchData"})},linkRun(){this.$emit("linkRun")},unlinkRun(){this.$emit("unlinkRun")},onCurrentPageChange(){this.$telemetry.track("User changed ndv page",{node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:this.paneType,page_selected:this.currentPage,page_size:this.pageSize,items_total:this.dataCount})},onPageSizeChange(s){this.pageSize=s;const e=Math.ceil(this.dataCount/this.pageSize);e<this.currentPage&&(this.currentPage=e),this.$telemetry.track("User changed ndv page size",{node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:this.paneType,page_selected:this.currentPage,page_size:this.pageSize,items_total:this.dataCount})},onDisplayModeChange(s){const e=this.displayMode;this.$store.commit("ndv/setPanelDisplayMode",{pane:this.paneType,mode:s});const t=this.$refs.dataContainer;if(t){const i=t.children[0];i&&i.scrollTo(0,0)}this.closeBinaryDataDisplay(),this.$externalHooks().run("runData.displayModeChanged",{newValue:s,oldValue:e}),this.activeNode&&this.$telemetry.track("User changed ndv item view",{previous_view:e,new_view:s,node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:this.paneType})},getRunLabel(s){let e=0;for(let n=0;n<=this.maxOutputIndex;n++)e+=this.getDataCount(s-1,n);const t=this.$locale.baseText("ndv.output.items",{adjustToNumber:e}),i=e>0?` (${e} ${t})`:"";return s+this.$locale.baseText("ndv.output.of")+(this.maxRunIndex+1)+i},getDataCount(s,e){if(this.pinData)return this.pinData.length;if(this.node===null)return 0;const t=this.workflowRunData;return t===null||!t.hasOwnProperty(this.node.name)||t[this.node.name].length<=s?0:t[this.node.name][s].hasOwnProperty("error")?1:!t[this.node.name][s].hasOwnProperty("data")||t[this.node.name][s].data===void 0?0:this.getMainInputData(t[this.node.name][s].data,e).length},init(){this.outputIndex=0,this.refreshDataSize(),this.closeBinaryDataDisplay(),this.binaryData.length>0?this.$store.commit("ndv/setPanelDisplayMode",{pane:this.paneType,mode:"binary"}):this.displayMode==="binary"&&this.$store.commit("ndv/setPanelDisplayMode",{pane:this.paneType,mode:"table"})},closeBinaryDataDisplay(){this.binaryDataDisplayVisible=!1,this.binaryDataDisplayData=null},clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},isDownloadable(s,e){const t=this.binaryData[s][e];return!!(t.mimeType&&t.fileName)},async downloadBinaryData(s,e){const t=this.binaryData[s][e];let i="data:"+t.mimeType+";base64,";t.id?i+=await this.restApi().getBinaryBufferString(t.id):i+=t.data;const o=await(await fetch(i)).blob();Fp.exports.saveAs(o,t.fileName)},displayBinaryData(s,e){this.binaryDataDisplayVisible=!0,this.binaryDataDisplayData={node:this.node.name,runIndex:this.runIndex,outputIndex:this.currentOutputIndex,index:s,key:e}},getOutputName(s){if(this.node===null)return s+1;const e=this.nodeType;return!e||!e.outputNames||e.outputNames.length<=s?s+1:e.outputNames[s]},refreshDataSize(){this.showData=!1;const s=this.getNodeInputData(this.node,this.runIndex,this.currentOutputIndex),e=this.pageSize*(this.currentPage-1),t=s.slice(e,e+this.pageSize).map(i=>i.json);this.dataSize=JSON.stringify(t).length,this.dataSize<this.MAX_DISPLAY_DATA_SIZE&&(this.showData=!0)},onRunIndexChange(s){this.$emit("runChange",s)},enableNode(){if(this.node){const s={name:this.node.name,properties:{disabled:!this.node.disabled}};this.$store.commit("updateNodeProperties",s)}},goToErroredNode(){this.node&&this.$store.commit("ndv/setActiveNodeName",this.node.name)}},watch:{node(){this.init()},inputData:{handler(s){this.paneType&&s&&this.$store.commit("ndv/setNDVPanelDataIsEmpty",{panel:this.paneType,isEmpty:s.every(e=>oa(e.json))})},immediate:!0,deep:!0},jsonData(s){this.refreshDataSize(),localStorage.getItem(ur)||this.showPinDataDiscoveryTooltip(s)},binaryData(s,e){s.length&&!e.length&&this.displayMode!=="binary"?this.switchToBinary():!s.length&&this.displayMode==="binary"&&this.onDisplayModeChange("table")},currentOutputIndex(s){this.$store.commit("ndv/setNDVBranchIndex",{pane:this.paneType,branchIndex:s})}}});const jV="_infoIcon_4tnfi_1",zV="_center_4tnfi_5",GV="_container_4tnfi_19",HV="_header_4tnfi_36",qV="_dataDisplay_4tnfi_58",XV="_tabs_4tnfi_70",YV="_itemsCount_4tnfi_74",ZV="_runSelector_4tnfi_79",KV="_pagination_4tnfi_90",JV="_pageSizeSelector_4tnfi_100",eF="_binaryIndex_4tnfi_106",tF="_binaryRow_4tnfi_123",sF="_binaryCell_4tnfi_128",iF="_binaryHeader_4tnfi_140",nF="_binaryButtonContainer_4tnfi_149",oF="_binaryValue_4tnfi_160",rF="_displayModes_4tnfi_165",aF="_spinner_4tnfi_179",lF="_stretchVertically_4tnfi_228",cF="_uiBlocker_4tnfi_232";var dF={infoIcon:jV,center:zV,container:GV,"pinned-data-callout":"_pinned-data-callout_4tnfi_28",header:HV,"data-container":"_data-container_4tnfi_50","actions-group":"_actions-group_4tnfi_54",dataDisplay:qV,tabs:XV,itemsCount:YV,runSelector:ZV,pagination:KV,pageSizeSelector:JV,binaryIndex:eF,binaryRow:tF,binaryCell:sF,binaryHeader:iF,binaryButtonContainer:nF,binaryValue:oF,displayModes:rF,"tooltip-container":"_tooltip-container_4tnfi_171","pin-data-button":"_pin-data-button_4tnfi_175",spinner:aF,"edit-mode":"_edit-mode_4tnfi_190","edit-mode-body":"_edit-mode-body_4tnfi_200","edit-mode-footer":"_edit-mode-footer_4tnfi_207","edit-mode-footer-infotip":"_edit-mode-footer-infotip_4tnfi_215","edit-mode-actions":"_edit-mode-actions_4tnfi_221",stretchVertically:lF,uiBlocker:cF},uF=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[e.canPinData&&e.hasPinData&&!e.editMode.enabled?t("n8n-callout",{class:e.$style["pinned-data-callout"],attrs:{theme:"secondary",icon:"thumbtack"},scopedSlots:e._u([{key:"trailingContent",fn:function(){return[t("n8n-link",{attrs:{to:e.dataPinningDocsUrl,size:"small",theme:"secondary",bold:"",underline:""},on:{click:e.onClickDataPinningDocsLink}},[e._v(" "+e._s(e.$locale.baseText("runData.pindata.learnMore"))+" ")])]},proxy:!0}],null,!1,1222290153)},[e._v(" "+e._s(e.$locale.baseText("runData.pindata.thisDataIsPinned"))+" "),e.isReadOnly?e._e():t("span",{staticClass:"ml-4xs"},[t("n8n-link",{attrs:{theme:"secondary",size:"small",underline:"",bold:""},on:{click:function(i){return e.onTogglePinData({source:"banner-link"})}}},[e._v(" "+e._s(e.$locale.baseText("runData.pindata.unpin"))+" ")])],1)]):e._e(),t("BinaryDataDisplay",{attrs:{windowVisible:e.binaryDataDisplayVisible,displayData:e.binaryDataDisplayData},on:{close:e.closeBinaryDataDisplay}}),t("div",{class:e.$style.header},[e._t("header"),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasRunError,expression:"!hasRunError"}],class:e.$style.displayModes,on:{click:function(i){i.stopPropagation()}}},[t("n8n-radio-buttons",{directives:[{name:"show",rawName:"v-show",value:e.hasNodeRun&&(e.jsonData&&e.jsonData.length>0||e.binaryData&&e.binaryData.length>0)&&!e.editMode.enabled,expression:"hasNodeRun && ((jsonData && jsonData.length > 0) || (binaryData && binaryData.length > 0)) && !editMode.enabled"}],attrs:{value:e.displayMode,options:e.buttons},on:{input:e.onDisplayModeChange}}),e.canPinData&&!e.isReadOnly?t("n8n-icon-button",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],staticClass:"ml-2xs",attrs:{title:e.$locale.baseText("runData.editOutput"),circle:!1,disabled:e.node.disabled,icon:"pencil-alt",type:"tertiary"},on:{click:function(i){return e.enterEditMode({origin:"editIconButton"})}}}):e._e(),e.canPinData&&e.jsonData&&e.jsonData.length>0?t("n8n-tooltip",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],attrs:{placement:"bottom-end",value:e.pinDataDiscoveryTooltipVisible,manual:e.isControlledPinDataTooltip},scopedSlots:e._u([e.isControlledPinDataTooltip?{key:"content",fn:function(){return[t("div",{class:e.$style["tooltip-container"]},[e._v(" "+e._s(e.$locale.baseText("node.discovery.pinData.ndv"))+" ")])]},proxy:!0}:{key:"content",fn:function(){return[t("div",{class:e.$style["tooltip-container"]},[t("strong",[e._v(e._s(e.$locale.baseText("ndv.pinData.pin.title")))]),t("n8n-text",{attrs:{size:"small",tag:"p"}},[e._v(" "+e._s(e.$locale.baseText("ndv.pinData.pin.description"))+" "),t("n8n-link",{attrs:{to:e.dataPinningDocsUrl,size:"small"}},[e._v(" "+e._s(e.$locale.baseText("ndv.pinData.pin.link"))+" ")])],1)],1)]},proxy:!0}],null,!0)},[t("n8n-icon-button",{class:["ml-2xs",e.$style["pin-data-button"]],attrs:{type:"tertiary",active:e.hasPinData,icon:"thumbtack",disabled:e.editMode.enabled||e.inputData.length===0&&!e.hasPinData||e.isReadOnly},on:{click:function(i){return e.onTogglePinData({source:"pin-icon-click"})}}})],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.editMode.enabled,expression:"editMode.enabled"}],class:e.$style["edit-mode-actions"]},[t("n8n-button",{attrs:{type:"tertiary",label:e.$locale.baseText("runData.editor.cancel")},on:{click:e.onClickCancelEdit}}),t("n8n-button",{staticClass:"ml-2xs",attrs:{type:"primary",label:e.$locale.baseText("runData.editor.save")},on:{click:e.onClickSaveEdit}})],1)],1)],2),e.maxRunIndex>0?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],class:e.$style.runSelector},[t("n8n-select",{attrs:{size:"small",value:e.runIndex,"popper-append-to-body":""},on:{input:e.onRunIndexChange,click:function(i){i.stopPropagation()}}},[t("template",{slot:"prepend"},[e._v(e._s(e.$locale.baseText("ndv.output.run")))]),e._l(e.maxRunIndex+1,function(i){return t("n8n-option",{key:i,attrs:{label:e.getRunLabel(i),value:i-1}})})],2),e.canLinkRuns?t("n8n-tooltip",{attrs:{placement:"right",content:e.$locale.baseText(e.linkedRuns?"runData.unlinking.hint":"runData.linking.hint")}},[e.linkedRuns?t("n8n-icon-button",{attrs:{icon:"unlink",text:"",type:"tertiary",size:"small"},on:{click:e.unlinkRun}}):t("n8n-icon-button",{attrs:{icon:"link",text:"",type:"tertiary",size:"small"},on:{click:e.linkRun}})],1):e._e(),e._t("run-info")],2):e._e(),e.maxOutputIndex>0&&e.branches.length>1?t("div",{class:{[e.$style.tabs]:e.displayMode==="table"}},[t("n8n-tabs",{attrs:{value:e.currentOutputIndex,options:e.branches},on:{input:e.onBranchChange}})],1):e.hasNodeRun&&e.dataCount>0&&e.maxRunIndex===0?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],class:e.$style.itemsCount},[t("n8n-text",[e._v(" "+e._s(e.dataCount)+" "+e._s(e.$locale.baseText("ndv.output.items",{adjustToNumber:e.dataCount}))+" ")])],1):e._e(),t("div",{ref:"dataContainer",class:e.$style["data-container"]},[e.isExecuting?t("div",{class:e.$style.center},[t("div",{class:e.$style.spinner},[t("n8n-spinner",{attrs:{type:"ring"}})],1),t("n8n-text",[e._v(e._s(e.executingMessage))])],1):e.editMode.enabled?t("div",{class:e.$style["edit-mode"]},[t("div",{class:[e.$style["edit-mode-body"],"ignore-key-press"]},[t("code-editor",{attrs:{value:e.editMode.value,options:{scrollBeyondLastLine:!1},type:"json"},on:{input:function(i){return e.$store.commit("ndv/setOutputPanelEditModeValue",i)}}})],1),t("div",{class:e.$style["edit-mode-footer"]},[t("n8n-info-tip",{class:e.$style["edit-mode-footer-infotip"],attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("runData.editor.copyDataInfo"))+" "),t("n8n-link",{attrs:{to:e.dataEditingDocsUrl,size:"small"}},[e._v(" "+e._s(e.$locale.baseText("generic.learnMore"))+" ")])],1)],1)]):e.paneType==="output"&&e.hasSubworkflowExecutionError?t("div",{class:e.$style.stretchVertically},[t("NodeErrorView",{class:e.$style.errorDisplay,attrs:{error:e.subworkflowExecutionError}})],1):e.hasNodeRun?e.paneType==="input"&&e.node.disabled?t("div",{class:e.$style.center},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("ndv.input.disabled",{interpolate:{nodeName:e.node.name}}))+" "),t("n8n-link",{on:{click:e.enableNode}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.disabled.cta"))+" ")])],1)],1):e.hasNodeRun&&e.hasRunError?t("div",{class:e.$style.stretchVertically},[e.isPaneTypeInput?t("n8n-text",{class:e.$style.center,attrs:{size:"large",tag:"p",bold:""}},[e._v(" "+e._s(e.$locale.baseText("nodeErrorView.inputPanel.previousNodeError.title",{interpolate:{nodeName:e.node.name}}))+" "),t("n8n-link",{on:{click:e.goToErroredNode}},[e._v(" "+e._s(e.$locale.baseText("nodeErrorView.inputPanel.previousNodeError.text"))+" ")])],1):t("NodeErrorView",{class:e.$style.dataDisplay,attrs:{error:e.workflowRunData[e.node.name][e.runIndex].error}})],1):e.hasNodeRun&&e.jsonData&&e.jsonData.length===0&&e.branches.length>1?t("div",{class:e.$style.center},[t("n8n-text",[e._v(" "+e._s(e.noDataInBranchMessage)+" ")])],1):e.hasNodeRun&&e.jsonData&&e.jsonData.length===0?t("div",{class:e.$style.center},[e._t("no-output-data")],2):e.hasNodeRun&&!e.showData?t("div",{class:e.$style.center},[t("n8n-text",{attrs:{bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.tooMuchDataTitle))]),t("n8n-text",{attrs:{align:"center",tag:"div"}},[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("ndv.output.tooMuchData.message",{interpolate:{size:e.dataSizeInMB}}))}})]),t("n8n-button",{attrs:{outline:"",label:e.$locale.baseText("ndv.output.tooMuchData.showDataAnyway")},on:{click:e.showTooMuchData}})],1):e.hasNodeRun&&e.displayMode==="table"&&e.binaryData.length>0&&e.jsonData.length===1&&Object.keys(e.jsonData[0]||{}).length===0?t("div",{class:e.$style.center},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("runData.switchToBinary.info"))+" "),t("a",{on:{click:e.switchToBinary}},[e._v(" "+e._s(e.$locale.baseText("runData.switchToBinary.binary"))+" ")])])],1):e.hasNodeRun&&e.displayMode==="table"?t("run-data-table",{staticClass:"ph-no-capture",attrs:{node:e.node,inputData:e.inputData,mappingEnabled:e.mappingEnabled,distanceFromActive:e.distanceFromActive,showMappingHint:e.showMappingHint,runIndex:e.runIndex,pageOffset:e.currentPageOffset,totalRuns:e.maxRunIndex,hasDefaultHoverState:e.paneType==="input"},on:{mounted:function(i){return e.$emit("tableMounted",i)},activeRowChanged:e.onItemHover,displayModeChange:e.onDisplayModeChange}}):e.hasNodeRun&&e.displayMode==="json"?t("run-data-json",{staticClass:"ph-no-capture",attrs:{paneType:e.paneType,editMode:e.editMode,currentOutputIndex:e.currentOutputIndex,sessioId:e.sessionId,node:e.node,inputData:e.inputData,mappingEnabled:e.mappingEnabled,distanceFromActive:e.distanceFromActive,showMappingHint:e.showMappingHint,runIndex:e.runIndex,totalRuns:e.maxRunIndex}}):e.displayMode==="binary"&&e.binaryData.length===0?t("div",{class:e.$style.center},[t("n8n-text",{attrs:{align:"center",tag:"div"}},[e._v(e._s(e.$locale.baseText("runData.noBinaryDataFound")))])],1):e.displayMode==="binary"?t("div",{class:e.$style.dataDisplay},e._l(e.binaryData,function(i,n){return t("div",{key:n},[e.binaryData.length>1?t("div",{class:e.$style.binaryIndex},[t("div",[e._v(" "+e._s(n+1)+" ")])]):e._e(),t("div",{class:e.$style.binaryRow},e._l(i,function(o,r){return t("div",{key:n+"_"+r,class:e.$style.binaryCell},[t("div",[t("div",{class:e.$style.binaryHeader},[e._v(" "+e._s(r)+" ")]),o.fileName?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.fileName"))+": ")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(o.fileName))])]):e._e(),o.directory?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.directory"))+": ")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(o.directory))])]):e._e(),o.fileExtension?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.fileExtension"))+":")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(o.fileExtension))])]):e._e(),o.mimeType?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.mimeType"))+": ")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(o.mimeType))])]):e._e(),t("div",{class:e.$style.binaryButtonContainer},[t("n8n-button",{staticClass:"binary-data-show-data-button",attrs:{size:"small",label:e.$locale.baseText("runData.showBinaryData")},on:{click:function(a){return e.displayBinaryData(n,r)}}}),e.isDownloadable(n,r)?t("n8n-button",{staticClass:"binary-data-show-data-button",attrs:{size:"small",type:"secondary",label:e.$locale.baseText("runData.downloadBinaryData")},on:{click:function(a){return e.downloadBinaryData(n,r)}}}):e._e()],1)])])}),0)])}),0):e._e():t("div",{class:e.$style.center},[e._t("node-not-run")],2)],1),e.hasNodeRun&&!e.hasRunError&&e.dataCount>e.pageSize?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],class:e.$style.pagination},[t("el-pagination",{attrs:{background:"","hide-on-single-page":!0,"current-page":e.currentPage,"pager-count":5,"page-size":e.pageSize,layout:"prev, pager, next",total:e.dataCount},on:{"update:currentPage":function(i){e.currentPage=i},"update:current-page":function(i){e.currentPage=i},"current-change":e.onCurrentPageChange}}),t("div",{class:e.$style.pageSizeSelector},[t("n8n-select",{attrs:{size:"mini",value:e.pageSize,"popper-append-to-body":""},on:{input:e.onPageSizeChange}},[t("template",{slot:"prepend"},[e._v(e._s(e.$locale.baseText("ndv.output.pageSize")))]),e._l(e.pageSizes,function(i){return t("n8n-option",{key:i,attrs:{label:i,value:i}})}),t("n8n-option",{attrs:{label:e.$locale.baseText("ndv.output.all"),value:e.dataCount}})],2)],1)],1):e._e(),t("n8n-block-ui",{class:e.$style.uiBlocker,attrs:{show:e.blockUI}})],1)},hF=[];const Wh={$style:dF};function pF(s){for(var e in Wh)this[e]=Wh[e]}var fF=_(FV,uF,hF,!1,pF,null,null,null),_w=fF.exports,mF=m.extend({props:{taskData:{}},computed:{runTaskData(){return this.taskData},runMetadata(){return this.runTaskData?{executionTime:this.runTaskData.executionTime,startTime:new Date(this.runTaskData.startTime).toLocaleString()}:null}}}),gF=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.runMetadata?t("n8n-info-tip",{attrs:{type:"tooltip",theme:"info-light",tooltipPlacement:"right"}},[t("div",[t("n8n-text",{attrs:{bold:!0,size:"small"}},[e._v(e._s(e.$locale.baseText("runData.startTime")+":"))]),e._v(" "+e._s(e.runMetadata.startTime)),t("br"),t("n8n-text",{attrs:{bold:!0,size:"small"}},[e._v(e._s(e.$locale.baseText("runData.executionTime")+":"))]),e._v(" "+e._s(e.runMetadata.executionTime)+" "+e._s(e.$locale.baseText("runData.ms"))+" ")],1)]):e._e()},wF=[],yF=_(mF,gF,wF,!1,null,null,null,null),vF=yF.exports,_F=N(an).extend({name:"OutputPanel",components:{RunData:_w,RunInfo:vF},props:{runIndex:{type:Number},isReadOnly:{type:Boolean},linkedRuns:{type:Boolean},canLinkRuns:{type:Boolean},sessionId:{type:String},blockUI:{type:Boolean,default:!1}},computed:{node(){return this.$store.getters["ndv/activeNode"]},nodeType(){return this.node?this.$store.getters["nodeTypes/getNodeType"](this.node.type,this.node.typeVersion):null},isTriggerNode(){return this.$store.getters["nodeTypes/isTriggerNode"](this.node.type)},isPollingTypeNode(){return!!(this.nodeType&&this.nodeType.polling)},isScheduleTrigger(){return!!(this.nodeType&&this.nodeType.group.includes("schedule"))},isNodeRunning(){const s=this.$store.getters.executingNode;return this.node&&s===this.node.name},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunData(){if(this.workflowExecution===null)return null;const s=this.workflowExecution.data;return!s||!s.resultData||!s.resultData.runData?null:s.resultData.runData},hasNodeRun(){return this.$store.getters.subworkflowExecutionError?!0:Boolean(this.node&&this.workflowRunData&&this.workflowRunData.hasOwnProperty(this.node.name))},runTaskData(){if(!this.node||this.workflowExecution===null)return null;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.node.name)||s[this.node.name].length<=this.runIndex?null:s[this.node.name][this.runIndex]},runsCount(){if(this.node===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.node.name)?0:s[this.node.name].length?s[this.node.name].length:0},staleData(){if(!this.node)return!1;const s=this.$store.getters.getParametersLastUpdated(this.node.name);if(!s||!this.runTaskData)return!1;const e=this.runTaskData.startTime;return s>e},outputPanelEditMode(){return this.$store.getters["ndv/outputPanelEditMode"]},canPinData(){return this.isPinDataNodeType&&!this.isReadOnly}},methods:{insertTestData(){this.$refs.runData&&(this.$refs.runData.enterEditMode({origin:"insertTestDataLink"}),this.$telemetry.track("User clicked ndv link",{workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,node_type:this.node.type,pane:"output",type:"insert-test-data"}))},onLinkRun(){this.$emit("linkRun")},onUnlinkRun(){this.$emit("unlinkRun")},openSettings(){this.$emit("openSettings"),this.$telemetry.track("User clicked ndv link",{node_type:this.node.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:"output",type:"settings"})},onRunIndexChange(s){this.$emit("runChange",s)}}});const OF="_titleSection_h23fa_1",bF="_title_h23fa_1";var xF={titleSection:OF,title:bF},$F=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("RunData",{ref:"runData",attrs:{nodeUi:e.node,runIndex:e.runIndex,linkedRuns:e.linkedRuns,canLinkRuns:e.canLinkRuns,tooMuchDataTitle:e.$locale.baseText("ndv.output.tooMuchData.title"),noDataInBranchMessage:e.$locale.baseText("ndv.output.noOutputDataInBranch"),isExecuting:e.isNodeRunning,executingMessage:e.$locale.baseText("ndv.output.executing"),sessionId:e.sessionId,isReadOnly:e.isReadOnly,blockUI:e.blockUI,paneType:"output"},on:{runChange:e.onRunIndexChange,linkRun:e.onLinkRun,unlinkRun:e.onUnlinkRun,tableMounted:function(i){return e.$emit("tableMounted",i)},itemHover:function(i){return e.$emit("itemHover",i)}},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.titleSection},[t("span",{class:e.$style.title},[e._v(" "+e._s(e.$locale.baseText(e.outputPanelEditMode.enabled?"ndv.output.edit":"ndv.output"))+" ")]),!e.hasPinData&&e.runsCount===1?t("RunInfo",{directives:[{name:"show",rawName:"v-show",value:!e.outputPanelEditMode.enabled,expression:"!outputPanelEditMode.enabled"}],attrs:{taskData:e.runTaskData}}):e._e(),e.hasNodeRun&&e.staleData?t("n8n-info-tip",{attrs:{theme:"warning",type:"tooltip",tooltipPlacement:"right"}},[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText(e.hasPinData?"ndv.output.staleDataWarning.pinData":"ndv.output.staleDataWarning.regular"))}})]],2):e._e()],1)]},proxy:!0},{key:"node-not-run",fn:function(){return[e.workflowRunning&&!e.isTriggerNode?t("n8n-text",[e._v(e._s(e.$locale.baseText("ndv.output.waitingToRun")))]):e._e(),e.workflowRunning?e._e():t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("ndv.output.runNodeHint"))+" "),e.canPinData?t("span",{on:{click:e.insertTestData}},[t("br"),e._v(" "+e._s(e.$locale.baseText("generic.or"))+" "),t("n8n-text",{attrs:{tag:"a",size:"medium",color:"primary"}},[e._v(" "+e._s(e.$locale.baseText("ndv.output.insertTestData"))+" ")])],1):e._e()])]},proxy:!0},{key:"no-output-data",fn:function(){return[t("n8n-text",{attrs:{bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.output.noOutputData.title")))]),t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("ndv.output.noOutputData.message"))+" "),t("a",{on:{click:e.openSettings}},[e._v(e._s(e.$locale.baseText("ndv.output.noOutputData.message.settings")))]),e._v(" "+e._s(e.$locale.baseText("ndv.output.noOutputData.message.settingsOption"))+" ")])]},proxy:!0},!e.hasPinData&&e.runsCount>1?{key:"run-info",fn:function(){return[t("RunInfo",{attrs:{taskData:e.runTaskData}})]},proxy:!0}:null],null,!0)})},TF=[];const Lh={$style:xF};function kF(s){for(var e in Lh)this[e]=Lh[e]}var SF=_(_F,$F,TF,!1,kF,null,null,null),EF=SF.exports;const CF={};var NF=function(){var e=this,t=e._self._c;return t("svg",{attrs:{width:"112",height:"80",viewBox:"0 0 112 80",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask0_489_46042",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"112",height:"80"}},[t("rect",{attrs:{width:"112",height:"80",fill:"url(#paint0_linear_489_46042)"}})]),t("g",{attrs:{mask:"url(#mask0_489_46042)"}},[t("rect",{attrs:{x:"-0.5",width:"112",height:"80",fill:"url(#pattern0)","fill-opacity":"0.6"}})]),t("defs",[t("pattern",{attrs:{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"}},[t("use",{attrs:{"xlink:href":"#image0_489_46042",transform:"scale(0.00357143 0.005)"}})]),t("linearGradient",{attrs:{id:"paint0_linear_489_46042",x1:"90.5",y1:"40.4494",x2:"112.5",y2:"40.4494",gradientUnits:"userSpaceOnUse"}},[t("stop"),t("stop",{attrs:{offset:"1","stop-color":"white","stop-opacity":"0"}})],1),t("image",{attrs:{id:"image0_489_46042",width:"280",height:"200","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABhdSURBVHgB7d0JcFTVngbw/72d4IYa0Ie4IK2llgpodNwtB9AaxVILF7ZxynkgWupojaRwASXQGEBqEAI8LXfBpZQS9IFabjMFkXFfijCKyqjQqIiKShCUpdP3vvPdpXP7pjtk6dPdSX+/qlPpJX07UfrL/yz3XEOIPJNiswaZkbKBtkiluC0qRB1gCJW86ntmjzYM81YvWIhyhgFTwlCxGJGyBcJKhTQxhUrSpJraKSpcVgjDhTQqEyo5U+6prbVExmV6TnWT6ixbnuxmSZ262xCLVTUIUTsxYEoMKpdM4aKCZV5ZUmIMFMoljsGUkMk1c9RArjE39HBchcuYadVVdUKUYwyYEjEhVhstj8gqdbMi8HA8kpTBqmqJC5EGHOQtEeVlMkXSw6WB4UK6cQymBKB6UYMso4OPWYZMrWG4kGasYEpAmWGHB3Xj0ydVzRUizRgwJcAwjaFpD9gyVYjygAHTxTndo9Bium2WLBWiPGDAdHFlkWT4/KK6uVzrQnnCgOniDNuIBu/blr1aiPKEAdPF2Xba1DQeYfVCecOAISJtGDBEpA0Dhoi0YcAQkTYMGCLShgFDRNowYIhIGwYMEWnDgCEibRgwRKQNA4aItGHAEJE2DBgi0oYBQ0TaMGCISBsGDBFpw4AhIm0YMESkDQOGiLRhwBCRNgwYItKGAUNE2jBgiEgbBgwRacOAISJtGDBEpA0Dhoi0YcAQkTYMGCLShgFDRNowYIhIGwYMEWnDgCEibRgwRKQNA4aItGHAEJE2DBgi0oYBQ0TaMGCISBsGDBFpw4AhIm0YMESkDQOGiLRhwBCRNgwYItKGAUNE2jBgiEgbBgwRacOAISJtGDBEpA0Dhoi0YcAQkTYMGCLShgFDRNowYIhIGwYMEWnDgCEibRgwRKQNA4aItGHAEJE2DBgi0oYBQ0TaMGCISBsGDBFpw4AhIm0YMESkDQOGiLRhwBCRNgwYItKGAUNE2hhCXc7ll19eUVZWNto0zYFGJDLIamys8J+LRMrilpWst217WSKRqFu6dGlciDRhwHQho0aNilqWVavC4/I2vGyhCpqpDBrSISLUJYwcOfJWFS6vq5vHS9tURiKRcf3795c1a9a8JUQ5xAqmk0N3qLy8/O/q5iDpIMMwlu7evXuMqmYahCgHOMjbyalwWSE5CBdA18o7HlFOsIvUiY0YMaJWfWnLeEtr9FbdpQrVXXpDiDqIXaROavjw4aPVlwWiiapmBi9ZsqROiDqAXaTOa4popMZjtIUXlQ4GTCfkVS9R0SvqvQ9RuzFgOqe/Sn7k632oi+IYTCfjTUtvkTxJJBI9OG1N7cUKppMpKyurlDzK9/tR18KA6Xzy+oG3LCsqRO3EgOl8KiSPTNOMClE7MWCISJsyIUcsVlvRGJEVhm3Nq5k8fqEUr3wPuHKAl9qNFYwnFqtqMND9MMwF1TW16yfXzLl1Qqw2KkXGtu245Fe9ELUTAybAaPprHbXFmFsekfXV02oX3BX7r6KZSUkmk3WSR42NjQwYajcGTIBl2aubPWjL6EikfJWqalZU3zN7tBSYtyalTvJAVUt1XANDHcExmDTofmRdezhIdZ8GqaCZYog9d3fSWDYzVhWXwnhScrRFQ0sMw3hSiDqAFUyAZUi8Fd9W8O5TIpFYqr7ERa/44sWLFwpRBzBggiJm28YbCtR9QrfFsqwq0WuqEHUQz0UKwFR1MiIdOc8nns/u01VXXTXXNM1bJcdUeM174YUXxglRBzFgQlQ1goDp+GpZQxYmGxPzZsTu0DYL4534iC0uc9lNq1ddo1OEKAfYRQoYpyoYI1djG6r7ZEbKF+CYogm6Smo8ZjA265YcwHFwPCHKkZKrYPCB31cSUTEjlaYtUSNi9rVtqTTcqiUqOWKLzCtLql5XrCov07zDhg2LqYBo9y53akq6asmSJXOFKIe6ZMDEYvdGG6W80jKNioiYJ6vfUs38qDBxA0T7yYJqNqpq+qSqvH9YceG1xsZGBE1bNorihddIm04ZMMEqJILAMFWI2E5wYCwiKoUTV0E2Zlp1VZ0UEIImmUwOUjeHRiKRSnU76j9nlpU1WI2NdapieUuF0UIupCOdijZgUIXslkhFhq5MVPRWIQ3tOb4KlnrVJboiVrjFdxlNmjo7ZphmqutkW9bUaVPGx4QoDwq6ktfvyhimEVV/W/uiKyNuFVKRVC110SbEoJ2zNGywMZ1sSL2dtLdahlFvGtKgwqEe4aCmqqNqqnp9Ww6Y7/EWos5Ca8Bk6cpExa1CoipEdJVQ6Ko0uCFibbAMM94tIvWSkPieQgAho6aqpbUKNd5C1Bl0OGCaDaiaUpHelSlv+mZbcimuWr1t2RvUoGbcNiSOKkQ91pCDSiIuex7LccZbVLjUhR5vT2bm9r8MUZHYY8CgCqmQnRVZujKpKiTVnclTV0b0QlBFsz2ZZbzFCH0N3w4dIo3Riu/Z0+NERScVMM5Je1nWhiRlb21dGcGHWQWHWLJahVVDa7syOjlVkZn5Nw6Nt4S/yQg0LGJECJ+n2nGqdVPtO9XeUW2lagnZw4+R4bYdeE8GDRW9VMCURcoX2PhA5HhA1WvNujLFNtsSZBjetg12+mfYErtq+uTx86QpQFIvkab/ZOgTnqlajWpniBssQY2qrVJtumornMOK9BQ3jE5XrY9q3VXbodo61d5U7TPVtgeO4QcNQ4aKWipgsNmS+qvdnnNaAl2ZtAHVhmIOkZbYKmCM9HCJJ3bvGjtz2sT/FffDv7e4/+3wTegl7lJtt3f/JHHD5VzVjH333Ve6deuGZfjYHU62b99eZts2gmS+ajHVvlZtjGqjVNsnw4+DkxkfVW2OapuF1Qx1IoExmBY3W1LPFV9XRhcracUjpulUMKq8WP3Lr1uGPzx/Gk6CPFu1gaqdrNrB4lYjP6n2iWr/p9pG1W5X7Z9UM4499li59NJL5ZRTTnFC5ssvv5Tly5fL+++/L7t370alMkO1TaqdYqr36969uxx44IG42Bm2xpStW7fK77//fqAKpPHiVkYIpR+897Wl5WBh6FDBNQWMaSJAFhZgQLXYGNbO5AZzn4gkLWv+199+O23xgr/tpR7/V9VuUK1fhtdcLW43BhXOaart07NnT5kzZ44MGTLECQxABTN06FAZM2aM1NfXI817oyFcEEbnn3++DBgwwAmZbdu2yTvvvCNvvPGGbN68WRVU9s3ijt9sFbdqOki1fcUNEoTfL9I0rhOsbogKJhUw06qrcEZuTs7K7exmzpy49a7qe8feWzPxKXErh39TrVq1ngiLCjWv1qNHD+ybggpDGhoasMtcf/X8ieJ9sC+88EI599xzU+ECuH3MMcfIyJEjETCpxw8++GCpqqqSa665RtCl8g0fPlzuuusuWbRoEaoZHOhKcSumY8Ttgh0pbjWD6ul/xJ39+i3wq7CKoYLinrzpUlPNM9xwwQAtQuM/VeuJILjgggucdvTRRzsVyTfffCPLli2T9957D1VHauD3zDPPdLpFYfvtt5+cdtppTpD8+eefzmP9+vWTgQMHpoULoAq69tpr5e2333a6S8r54obLaaHDXqTaNar9TbUnVPtVguGC8SSDBQ3lHwOmueA0MwZdMRN01D777COnnnqq1NTUON2ZIHRr7rzzTidkfAcddJBEIpHmB1cfdARV37595YsvvnAeQ0X0l7/8JeMPc8IJJ8ghhxwin3/+ObZU6KUe6uUfPxqNyo4dO2TdunXGzp07D1UP/4dq34hbiWJ2Cq8x8J4MGSoEbjjVJLhQLhgwGNB1xkVQuYTDBc444ww5++yz5YADDkg9tv/++zthkgnCChUQIITQ3cLxM8FxjjrqKCkvb1oRjdCZMWOGzJs3zxnnufrqq3ENaTyFMZ1LxR2ANv3fif0kKhRWMOnCC+XQMMDrjJ+EuzC+vfbay+n2YEB2zZo1zmP+1HQme++9t1OV+LdRwQTHasJQ7SBg1MyTc//mm2+W66+/3jk+xoHw3GuvvSabNm3CQfp4zRmLsdWkO+sWKhRWMJkFF9JhdsYZL9m4cWPWF5x++ulOpeGHSksBg0BCFwdQoWTrHvmOOOKIVAWDMBoxYkTq2KhcevXq5by3Zz9xK5iI83uoAEL3yKlibNYylF8MmHTh6sWfoXEGWT/99NPUwGwYxkMwJY1qA10m3M80BgPoEmGGqbKy0hkMRmsJxn4wOIxQwXuEAwlhhuDx74obMs7vkFRjMIwVKhR2kVzBpf7BbhICZr1qW5LJZA/MGK1du9ZZOBeGLs5ll13mTEPj9mGHHeaPizSDQBg8eLAzZoNqpn///tISjPvMmjVLNmzYIIMGDWr2PN4Hx/Eg1RAyTsBgkDdVubCzRHnGgMkcLH4Fg9vbxK1iBm7evNlZhZspYODII4902h7fUH3QES4ImdbA2M+wYcOcGSNUMpkEwsw/uT01yEtUKKXeRco0c4SG2ZgrVLtRtb+KNxGDBXXvvvsuVtZKvmEMBqGUrdsVkgpIO5k0/HMK2FWifCvlCiZT5YJp6RGqjVXtEO++3+Vwzg/CepS6ujpnlW2RMkKNqGBYwTRVLvuLe8byveIurouKGzKYkUktcME09EsvveSvrC16lhAVTqlWMMHqxe9O3CbuuT7OdMzxxx/vnAmNLsknn3wiK1eudNah7Nq1ywmZVatWZRxwLQScsrBz507/LjIFJz2ygqGCK+Uukj8Iiq/YcW6keOFyww03yN133+2sUcHgKaqV5557TqZOnepMU3/77bfO1gvFEjDougWmzxEuu4WoCJRiwGSaLbpANWdxyVlnnSUPPfRQ2gswuDp27Fhn1ezEiROdr63xww8/yPr16+Wcc85ptugOA8aYkcIpAlg3Ex68xZQ0zrg++eSTpU+fPi0O7qKCCXTZEC47hKgIlOoYTDBk8MnFMlhnqewll1yS8QVYeYvl+Y8++qjMnDnTmTZuCVb94gzp8847T6qrq9OeQxg888wzcvHFF8tNN90kL7/8ctrzv/zyi0yYMEGuvPJKufHGG+Wrr75q8b3QbcNrPOgrdY4BIurySrmCQbj660XKvcdSS/gzwXPXXXedtAbGabBXjG3bznYLQVjP8v333zu3f/vtN6fLFYSw2LJli1Mpff3119hms8X3QsD8+uuv/l30lRAwzsw0l2pTIZXav7/wJUX8CuYP8SZc8IHvTBBgCKA//vjDuStuBfO7EBWBUvwDF5xd8cdgUttNrlu3TjqTRCIh8Xg8dVfczaawCTnX1VHBlXIFHewqob/iBAy6NnYnOusYAYOBZA+ql58leOUBNQvGVXdUKFxo58In1Pmrj5W6GP/o8IEDs0aYRtYFa3NwlrcH/SR/TwlWMFRwpV7B+PChxEhrI3bzf/7556WjsGudHzLZtnjoKExPYzr7448/9h/CANL/S9OpR9gvk0FDBVPKARP84KHEeEu89SNPPPFEh09oxJYNfsDoqmAwsPvqq6/6U9T42dHVQ1Cmn9+In4NbNVABlGLAhK/57DcsRomrlvzoo4/kvvvuS21RWawwIP3444/7dzG4i8vMImgwI8YTqKngSi1ggpdd9ZvlNVwxEbvxO4tO8MFdunRpq1ft5hsGonH6gjfrhSTEJWhxWYNguLCLRAVV6l0kS9JD5lVxr87oLFybPXu2rFixQnINXSd/gygERXtCDCdfPvvss/5d9JH+W7Ufpel3SS20S80gsZtEeVaqXaRgwwCJ5X3FwMsDqq3CN+JcICzz/+CDDySXcF6Rv8UlBmrb2hVbvXq1cyVIbxNyTK9jqTACxgo1VjBUUKVawQS7R37I+A19DlwhcR0++NiWAdce+uyzzySXgicvtqWCQWU1efJk5+cS9+fHz/uCuDNIflimmmFGbFYuVCilXMH4H0L/Q9no3cbXD1Wbr9pm7LPyyiuvSG1tbcFX+SKIHnzwQXn99df9hzCw+4i4ewYHQ5KDvFQUSn0Mxg+a4IcTAYM+CwZfZqm2BetYsDYGlcN3333XqoMfeuihqbUwuMJAEK4qgEuXADb0Dp9giX1ounfv7rwWx8HF2QAXV3vssceCXaoHxb3o/W7v5/ZD0g9PB8dfqFBatYN0F5TppMdwQ/g0iLv0/sxEIlGOcEFFc+KJJ2a91KsPwYFrUGNnPGy5cPjhh6eewxoZvB7PY9OqK664wgkVHwIFe9DgciWjRo2Sk046yTkDe/z48c64kKdO3IDBVQ8QLAlJr8KcKmbg4Iv+WQXVoFTA2PZbK+verBOiPCjVHe0QHn6I+GMwqOYS3vP+SZAIl9dU66Vme67fsmVL+YIFC+Tnn3+W6dOnOxdZywZVysiRI51qI3ypEYy/IHjuuOOO8DWNUq+96KKLnMua4Htx//777xesz/HOk8Ks0Qxxt2VISnq4sItERaPUr4sUnk0KngDp38bWB4vFvUb1v2/durUcm36j4sBMznHHHZf14AiOcHgEZbvWNaDK8a9XjbGXxYsXC05j8Dyh2iZp6hZlC5emlbxEBVDKAROsYvzxiuAVHYMnIP+k2jOq7VIVxLXbt2/f++mnn3bOMbrttttkwIABohO23sSWDN5sE6qVl6SpagmHS7ARFVSpn02daU1MIktDyDyl2gMqZLbhPKCnnnpKbr/9dmeLh/ZAcNxyyy3Su3dv6devnzz88MPBKiUF2zFg1zoPRpl/C/1smWaQRNhFogLjpWObPoTBv/jB7pIEvqK7hDUn+LTfotoBb775pnOdJAziBi5Av0c//vijzJ8/Xx544AHn/k8//SRTpkxxFt5hn97gda2xQXjghMmNkh4o4XDh+AsVDW7Zmnm62p+V8S8BEqwWMLD6d9UeVu1nDLouX77cuYxJa2FbTgQTAsZ7b6e7g5BZtGiRfPjhh2lnYKN6CWyCtUOyj70EqxeigmPAuIJdinDQBMPGb9jg5RPVPseLsGQfVUZrYYOoWbNmOVPP4p5cWe8dy8a1r1ER4Zh+qIQueWJK5vEWW9g1oiLDLlKTTFPXRuh5/3vQsO2ds7k2LkPiX4wNMLUcvg4SwgLbW2ItDS7g5p16gLDCiU4LVTtBtR5qILcPVuuiizRkyBBnvQwqG7zWg+s3ZQsXdo2oqDBg0vkBgg+tXymINL9YW3DTcKfL88gjj8iLL77oBAMWygXHUABjK9iKEwHj7aGLY8dVW6baN+IO3PZW7SpVDVXgTO4lS5Y44zp4XWBXvL7e+zJYqOgxYJoLhox4t4NB4y/CA2clNFb34vrVbYBuF1IG+898JE1ncmO7CKzK+xd1zB5r167N1IXtJu51nFi9UNFjwGQWDhlfsILBtDVOisSJRPuGno9I8038cUzMPmHnf8wEYd+ZleKGjR8MOJtyobhbX1aqdqB3LASQf0lY7PD9hzBYqBNgwGQXDBm/e+QP/vrXUkIFgg98T0m/UmQ3aQqi4DQ4ggELXbBvrn/1xeDMD74f4YNFfW94x8WxEt7rMO6zSTKfDsCQoaLDgGlZeLVveJUvQgZBgS5LRJoCxsxwnEzbRPiDyb5gFwxVzEbJvAgwKaxgqBNgwLROOBwQMqb31YcP/Z4CxsrS/IDwqx5T0isgW9L3rOGCOuoUGDB7FuyCBM9bagw8jsf8cMk2/tJSwPiCYzzB2apM+9bwrGkqegyY1guGCzQGHiuTpqom05VagwETDppgQISnws0Mr/cXAPK8Iyp6DJjWC6/2Dd72181ASwETrmQyVR/h7SLCxwhu88kxGCpqDJjWCa/ytaR5WIR3xAu/Pjzj01LA7Cmk2DWiToEB03Z+mJiB28GAEckcMMHbVuhxO/S6TCHlf1+msGLQUFFiwLSeX8X4ty1pHiit2TouU7cmU8BI6Lad5StR0WLAtE0wCMKDs209RkvPtTY8GDJU1Bgw7WNnuW+04TVEXR4DJrcYIkQB3HCKiLRhwBCRNgwYItKGAUNE2jBgiEgbBgwRacOAISJtGDBdnGFI2gWbjIjZV4jyhAHTxdmGHU9/QKJClCcMmC6uLBmpDz1UOS5W2/qLaBN1AAOmi4vFquLiXuDNV7GfaY0WojxgwJQA27KeDN43DXOoEOUBA6YElNnmwtBDg6rvmT1OiDRjwJQAdJNssdOqGDHMKRNitVEh0ogBUyLKkkZMfQlOWVeUR2QFQ4Z0YsCUCGew15CpoYejCJlJNbWDhEiDtmz1SF2ACpOY+p8+pdkThixMNMrUme6sE1FOMGBK0KSaOXMNMW7N8vRSNe20LGkl62fE7qgXog5gwJSorJUMUQ4xYEoYxl7UP4AF6mZUiDRgwJBU31M7Wv1LQDUTFaIcYsBQSmx6bWVjo3W5mOZAww2bqBB1wD8AobUpv0xPqN8AAAAASUVORK5CYII="}})],1)])},PF=[],DF=_(CF,NF,PF,!1,null,null,null,null),IF=DF.exports,AF=N(ie).extend({name:"InputPanel",components:{RunData:_w,NodeExecuteButton:Jl,WireMeUp:IF},props:{currentNodeName:{type:String},runIndex:{type:Number},linkedRuns:{type:Boolean},workflow:{},canLinkRuns:{type:Boolean},sessionId:{type:String},readOnly:{type:Boolean}},data(){return{showDraggableHintWithDelay:!1,draggableHintShown:!1}},computed:{focusedMappableInput(){return this.$store.getters["ndv/focusedMappableInput"]},isUserOnboarded(){return window.localStorage.getItem(js)==="true"},showDraggableHint(){const s=[di,Fo,A_,U_];return!this.currentNode||s.includes(this.currentNode.type)?!1:!!this.focusedMappableInput&&!this.isUserOnboarded},isExecutingPrevious(){if(!this.workflowRunning)return!1;const s=this.$store.getters.executedNode,e=this.$store.getters.executingNode;return this.activeNode&&s===this.activeNode.name&&this.activeNode.name!==e?!0:e||s?!!this.parentNodes.find(t=>t.name===e||t.name===s):!1},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},currentWorkflow(){return this.workflow},activeNode(){return this.$store.getters["ndv/activeNode"]},currentNode(){return this.$store.getters.getNodeByName(this.currentNodeName)},connectedCurrentNodeOutputs(){const s=this.parentNodes.find(({name:e})=>e===this.currentNodeName);if(s)return s.indicies},parentNodes(){if(!this.activeNode)return[];const s=this.workflow.getParentNodesByDepth(this.activeNode.name);return s.filter(({name:e},t)=>this.activeNode&&e!==this.activeNode.name&&s.findIndex(i=>i.name===e)===t)},currentNodeDepth(){const s=this.parentNodes.find(e=>this.currentNode&&e.name===this.currentNode.name);return s?s.depth:-1},activeNodeType(){return this.activeNode?this.$store.getters["nodeTypes/getNodeType"](this.activeNode.type,this.activeNode.typeVersion):null},isMultiInputNode(){return this.activeNodeType!==null&&this.activeNodeType.inputs.length>1}},methods:{getMultipleNodesText(s){if(!s||!this.isMultiInputNode||!this.activeNode||this.activeNodeType===null||this.activeNodeType.inputNames===void 0)return"";const i=(this.currentWorkflow.connectionsByDestinationNode[this.activeNode.name].main||[]).reduce((n,o,r)=>o[0]&&o[0].node===s?[...n,r]:n,[]).map(n=>this.activeNodeType&&this.activeNodeType.inputNames&&this.activeNodeType.inputNames[n]);return i.length===0?"":`(${i.join(" & ")})`},onNodeExecute(){this.$emit("execute"),this.activeNode&&this.$telemetry.track("User clicked ndv button",{node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:"input",type:"executePrevious"})},onRunIndexChange(s){this.$emit("runChange",s)},onLinkRun(){this.$emit("linkRun")},onUnlinkRun(){this.$emit("unlinkRun")},onSelect(s){const e=this.parentNodes.findIndex(t=>t.name===s)+1;this.$emit("select",s,e)},onConnectionHelpClick(){this.activeNode&&this.$telemetry.track("User clicked ndv link",{node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:"input",type:"not-connected-help"})},truncate(s){const e=s.substring(0,30);return e.length<s.length?`${e}...`:e}},watch:{showDraggableHint(s,e){s&&!e?setTimeout(()=>{this.draggableHintShown||(this.showDraggableHintWithDelay=this.showDraggableHint,this.showDraggableHintWithDelay&&(this.draggableHintShown=!0,this.$telemetry.track("User viewed data mapping tooltip",{type:"unexecuted input pane"})))},1e3):s||(this.showDraggableHintWithDelay=!1)}}});const RF="_titleSection_oexbi_1",MF="_noOutputData_oexbi_9",WF="_notConnected_oexbi_19",LF="_title_oexbi_1";var QF={titleSection:RF,noOutputData:MF,notConnected:WF,title:LF};var BF=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("RunData",{attrs:{nodeUi:e.currentNode,runIndex:e.runIndex,linkedRuns:e.linkedRuns,canLinkRuns:e.canLinkRuns,tooMuchDataTitle:e.$locale.baseText("ndv.input.tooMuchData.title"),noDataInBranchMessage:e.$locale.baseText("ndv.input.noOutputDataInBranch"),isExecuting:e.isExecutingPrevious,executingMessage:e.$locale.baseText("ndv.input.executingPrevious"),sessionId:e.sessionId,overrideOutputs:e.connectedCurrentNodeOutputs,mappingEnabled:!e.readOnly,showMappingHint:e.draggableHintShown,distanceFromActive:e.currentNodeDepth,paneType:"input"},on:{itemHover:function(i){return e.$emit("itemHover",i)},linkRun:e.onLinkRun,unlinkRun:e.onUnlinkRun,runChange:e.onRunIndexChange,tableMounted:function(i){return e.$emit("tableMounted",i)}},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.titleSection},[e.parentNodes.length?t("n8n-select",{attrs:{"popper-append-to-body":!0,size:"small",value:e.currentNodeName,"no-data-text":e.$locale.baseText("ndv.input.noNodesFound"),placeholder:e.$locale.baseText("ndv.input.parentNodes"),filterable:""},on:{input:e.onSelect}},[t("template",{slot:"prepend"},[t("span",{class:e.$style.title},[e._v(e._s(e.$locale.baseText("ndv.input")))])]),e._l(e.parentNodes,function(i){return t("n8n-option",{key:i.name,staticClass:"node-option",attrs:{value:i.name,label:`${e.truncate(i.name)} ${e.getMultipleNodesText(i.name)}`}},[e._v(" "+e._s(e.truncate(i.name))+"\xA0 "),e.getMultipleNodesText(i.name)?t("span",[e._v(e._s(e.getMultipleNodesText(i.name)))]):t("span",[e._v(e._s(e.$locale.baseText("ndv.input.nodeDistance",{adjustToNumber:i.depth})))])])})],2):t("span",{class:e.$style.title},[e._v(e._s(e.$locale.baseText("ndv.input")))])],1)]},proxy:!0},{key:"node-not-run",fn:function(){return[e.parentNodes.length?t("div",{class:e.$style.noOutputData},[t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.input.noOutputData.title")))]),e.readOnly?e._e():t("n8n-tooltip",{attrs:{manual:!0,value:e.showDraggableHint&&e.showDraggableHintWithDelay}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$locale.baseText("dataMapping.dragFromPreviousHint",{interpolate:{name:e.focusedMappableInput}}))},slot:"content"}),t("NodeExecuteButton",{attrs:{type:"secondary",transparent:!0,nodeName:e.currentNodeName,label:e.$locale.baseText("ndv.input.noOutputData.executePrevious"),telemetrySource:"inputs"},on:{execute:e.onNodeExecute}})],1),e.readOnly?e._e():t("n8n-text",{attrs:{tag:"div",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.noOutputData.hint"))+" ")])],1):t("div",{class:e.$style.notConnected},[t("div",[t("WireMeUp")],1),t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.input.notConnected.title")))]),t("n8n-text",{attrs:{tag:"div"}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.notConnected.message"))+" "),t("a",{attrs:{href:"https://docs.n8n.io/workflows/connections/",target:"_blank"},on:{click:e.onConnectionHelpClick}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.notConnected.learnMore"))+" ")])])],1)]},proxy:!0},{key:"no-output-data",fn:function(){return[t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.input.noOutputData")))])]},proxy:!0}])})},UF=[];const Qh={$style:QF};function VF(s){for(var e in Qh)this[e]=Qh[e]}var FF=_(AF,BF,UF,!1,VF,"34c6498b",null,null),jF=FF.exports,zF=N(ie,ui,V).extend({name:"TriggerPanel",components:{NodeExecuteButton:Jl,CopyInput:ul,NodeIcon:pi},props:{nodeName:{type:String},sessionId:{type:String}},computed:{node(){return this.$store.getters.getNodeByName(this.nodeName)},nodeType(){return this.node?this.$store.getters["nodeTypes/getNodeType"](this.node.type,this.node.typeVersion):null},hasIssues(){return Boolean(this.node&&this.node.issues&&(this.node.issues.parameters||this.node.issues.credentials))},serviceName(){return this.nodeType?$s(this.nodeType):""},isWebhookNode(){return Boolean(this.node&&this.node.type===xt)},webhookHttpMethod(){if(!(!this.node||!this.nodeType||!this.nodeType.webhooks||!this.nodeType.webhooks.length))return this.getWebhookExpressionValue(this.nodeType.webhooks[0],"httpMethod")},webhookTestUrl(){if(!(!this.node||!this.nodeType||!this.nodeType.webhooks||!this.nodeType.webhooks.length))return this.getWebhookUrl(this.nodeType.webhooks[0],this.node,"test")},webhookProdUrl(){if(!(!this.node||!this.nodeType||!this.nodeType.webhooks||!this.nodeType.webhooks.length))return this.getWebhookUrl(this.nodeType.webhooks[0],this.node,"prod")},isWebhookBasedNode(){return Boolean(this.nodeType&&this.nodeType.webhooks&&this.nodeType.webhooks.length)},isPollingNode(){return Boolean(this.nodeType&&this.nodeType.polling)},isListeningForEvents(){const s=this.$store.getters.executionWaitingForWebhook,e=this.$store.getters.executedNode;return!!this.node&&!this.node.disabled&&this.isWebhookBasedNode&&s&&(!e||e===this.nodeName)},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},isActivelyPolling(){const s=this.$store.getters.executedNode;return this.workflowRunning&&this.isPollingNode&&this.nodeName===s},isWorkflowActive(){return this.$store.getters.isActive},header(){const s=this.nodeType?$s(this.nodeType):"";return this.isActivelyPolling?this.$locale.baseText("ndv.trigger.pollingNode.fetchingEvent"):this.nodeType&&this.nodeType.triggerPanel&&typeof this.nodeType.triggerPanel.header=="string"?this.nodeType.triggerPanel.header:this.isWebhookBasedNode?this.$locale.baseText("ndv.trigger.webhookBasedNode.action",{interpolate:{name:s}}):""},subheader(){const s=this.nodeType?$s(this.nodeType):"";return this.isActivelyPolling?this.$locale.baseText("ndv.trigger.pollingNode.fetchingHint",{interpolate:{name:s}}):""},executionsHelp(){if(this.nodeType&&this.nodeType.triggerPanel&&this.nodeType.triggerPanel.executionsHelp!==void 0){if(typeof this.nodeType.triggerPanel.executionsHelp=="string")return this.nodeType.triggerPanel.executionsHelp;if(!this.isWorkflowActive&&this.nodeType.triggerPanel.executionsHelp.inactive)return this.nodeType.triggerPanel.executionsHelp.inactive;if(this.isWorkflowActive&&this.nodeType.triggerPanel.executionsHelp.active)return this.nodeType.triggerPanel.executionsHelp.active}return this.isWebhookBasedNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.webhookBasedNode.executionsHelp.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.webhookBasedNode.executionsHelp.inactive",{interpolate:{service:this.serviceName}}):this.isPollingNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.pollingNode.executionsHelp.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.pollingNode.executionsHelp.inactive",{interpolate:{service:this.serviceName}}):""},activationHint(){if(this.isActivelyPolling)return"";if(this.nodeType&&this.nodeType.triggerPanel&&this.nodeType.triggerPanel.activationHint){if(typeof this.nodeType.triggerPanel.activationHint=="string")return this.nodeType.triggerPanel.activationHint;if(!this.isWorkflowActive&&typeof this.nodeType.triggerPanel.activationHint.inactive=="string")return this.nodeType.triggerPanel.activationHint.inactive;if(this.isWorkflowActive&&typeof this.nodeType.triggerPanel.activationHint.active=="string")return this.nodeType.triggerPanel.activationHint.active}return this.isWebhookBasedNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.webhookBasedNode.activationHint.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.webhookBasedNode.activationHint.inactive",{interpolate:{service:this.serviceName}}):this.isPollingNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.pollingNode.activationHint.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.pollingNode.activationHint.inactive",{interpolate:{service:this.serviceName}}):""}},methods:{expandExecutionHelp(){this.$refs.help&&this.$refs.help.$emit("expand")},onLinkClick(s){if(!s.target)return;const e=s.target;e.localName==="a"&&e.dataset&&e.dataset.key&&(s.stopPropagation(),s.preventDefault(),e.dataset.key==="activate"?this.$emit("activate"):e.dataset.key==="executions"?(this.$telemetry.track("User clicked ndv link",{workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:"input",type:"open-executions-log"}),this.$store.commit("ndv/setActiveNodeName",null),this.$store.dispatch("ui/openModal",Zi)):e.dataset.key==="settings"&&this.$store.dispatch("ui/openModal",Lt))},onTestLinkCopied(){this.$telemetry.track("User copied webhook URL",{pane:"inputs",type:"test url"})},onNodeExecute(){this.$emit("execute")}}});const GF="_container_1evnm_1",HF="_header_1evnm_18",qF="_action_1evnm_25",XF="_shake_1evnm_29",YF="_accordion_1evnm_50";var ZF={container:GF,header:HF,action:qF,shake:XF,accordion:YF};var KF=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.hasIssues?t("div",{key:"empty"}):e.isListeningForEvents?t("div",{key:"listening"},[t("n8n-pulse",[t("NodeIcon",{attrs:{nodeType:e.nodeType,size:40}})],1),e.isWebhookNode?t("div",[t("n8n-text",{staticClass:"mb-2xs",attrs:{tag:"div",size:"large",color:"text-dark",bold:""}},[e._v(e._s(e.$locale.baseText("ndv.trigger.webhookNode.listening")))]),t("div",{class:[e.$style.shake,"mb-xs"]},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("ndv.trigger.webhookNode.requestHint",{interpolate:{type:this.webhookHttpMethod}}))+" ")])],1),t("CopyInput",{staticClass:"mb-2xl",attrs:{value:e.webhookTestUrl,toastTitle:e.$locale.baseText("ndv.trigger.copiedTestUrl"),size:"medium",collapse:!0,"copy-button-text":e.$locale.baseText("generic.clickToCopy")},on:{copy:e.onTestLinkCopied}}),t("NodeExecuteButton",{attrs:{nodeName:e.nodeName,size:"medium",telemetrySource:"inputs"},on:{execute:e.onNodeExecute}})],1):t("div",[t("n8n-text",{staticClass:"mb-2xs",attrs:{tag:"div",size:"large",color:"text-dark",bold:""}},[e._v(e._s(e.$locale.baseText("ndv.trigger.webhookBasedNode.listening")))]),t("div",{class:[e.$style.shake,"mb-xs"]},[t("n8n-text",{attrs:{tag:"div"}},[e._v(" "+e._s(e.$locale.baseText("ndv.trigger.webhookBasedNode.serviceHint",{interpolate:{service:e.serviceName}}))+" ")])],1)],1)],1):t("div",{key:"default"},[e.isActivelyPolling?t("div",{staticClass:"mb-xl"},[t("n8n-spinner",{attrs:{type:"ring"}})],1):e._e(),t("div",{class:e.$style.action},[t("div",{class:e.$style.header},[e.header?t("n8n-heading",{attrs:{tag:"h1",bold:""}},[e._v(" "+e._s(e.header)+" ")]):e._e(),e.subheader?t("n8n-text",[t("span",{domProps:{textContent:e._s(e.subheader)}})]):e._e()],1),t("NodeExecuteButton",{attrs:{nodeName:e.nodeName,size:"medium",telemetrySource:"inputs"},on:{execute:e.onNodeExecute}})],1),e.activationHint?t("n8n-text",{attrs:{size:"small"},on:{click:e.onLinkClick}},[t("span",{domProps:{innerHTML:e._s(e.activationHint)}}),e._v("\xA0 ")]):e._e(),e.activationHint&&e.executionsHelp?t("n8n-link",{attrs:{size:"small"},on:{click:e.expandExecutionHelp}},[e._v(e._s(e.$locale.baseText("ndv.trigger.moreInfo")))]):e._e(),e.executionsHelp?t("n8n-info-accordion",{ref:"help",class:e.$style.accordion,attrs:{title:e.$locale.baseText("ndv.trigger.executionsHint.question"),description:e.executionsHelp},on:{click:e.onLinkClick}}):e._e()],1)])],1)},JF=[];const Bh={$style:ZF};function e8(s){for(var e in Bh)this[e]=Bh[e]}var t8=_(zF,KF,JF,!1,e8,"6c0aefa4",null,null),s8=t8.exports,i8=N(ve,ct,ie,qg,an).extend({name:"NodeDetailsView",components:{NodeSettings:vw,InputPanel:jF,OutputPanel:EF,NDVDraggablePanels:RU,TriggerPanel:s8},props:{readOnly:{type:Boolean},renaming:{type:Boolean}},data(){return{settingsEventBus:new m,runInputIndex:-1,runOutputIndex:-1,isLinkingEnabled:!0,selectedInput:void 0,triggerWaitingWarningEnabled:!1,isDragging:!1,mainPanelPosition:0,pinDataDiscoveryTooltipVisible:!1,avgInputRowHeight:0,avgOutputRowHeight:0,hasForeignCredential:!1}},mounted(){this.$store.commit("ndv/setNDVSessionId"),De.$on("data-pinning-discovery",({isTooltipVisible:s})=>{this.pinDataDiscoveryTooltipVisible=s})},destroyed(){De.$off("data-pinning-discovery")},computed:{...F(["executionWaitingForWebhook"]),sessionId(){return this.$store.getters["ndv/ndvSessionId"]},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},showTriggerWaitingWarning(){return this.triggerWaitingWarningEnabled&&!!this.activeNodeType&&!this.activeNodeType.group.includes("trigger")&&this.workflowRunning&&this.executionWaitingForWebhook},activeNode(){return this.$store.getters["ndv/activeNode"]},inputNodeName(){return this.selectedInput||this.parentNode},inputNode(){return this.inputNodeName?this.$store.getters.getNodeByName(this.inputNodeName):null},activeNodeType(){return this.activeNode?this.$store.getters["nodeTypes/getNodeType"](this.activeNode.type,this.activeNode.typeVersion):null},showTriggerPanel(){var i,n,o,r;const s=!!((n=(i=this.activeNodeType)==null?void 0:i.webhooks)!=null&&n.length),e=(o=this.activeNodeType)==null?void 0:o.polling,t=!!((r=this.activeNodeType)!=null&&r.triggerPanel);return!this.readOnly&&this.isTriggerNode&&(s||e||t)},workflow(){return this.getCurrentWorkflow()},parentNodes(){return this.activeNode?this.workflow.getParentNodesByDepth(this.activeNode.name,1).map(({name:s})=>s)||[]:[]},parentNode(){return this.parentNodes[0]},isTriggerNode(){return!!this.activeNodeType&&(this.activeNodeType.group.includes("trigger")||this.activeNodeType.name===di)},isActiveStickyNode(){return!!this.$store.getters["ndv/activeNode"]&&this.$store.getters["ndv/activeNode"].type===nt},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunData(){if(this.workflowExecution===null)return null;const s=this.workflowExecution.data;return s&&s.resultData?s.resultData.runData:null},maxOutputRun(){if(this.activeNode===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.activeNode.name)?0:s[this.activeNode.name].length?s[this.activeNode.name].length-1:0},outputRun(){return this.runOutputIndex===-1?this.maxOutputRun:Math.min(this.runOutputIndex,this.maxOutputRun)},maxInputRun(){if(this.inputNode===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.inputNode.name)?0:s[this.inputNode.name].length?s[this.inputNode.name].length-1:0},inputRun(){return this.isLinkingEnabled&&this.maxOutputRun===this.maxInputRun?this.outputRun:this.runInputIndex===-1?this.maxInputRun:Math.min(this.runInputIndex,this.maxInputRun)},canLinkRuns(){return this.maxOutputRun>0&&this.maxOutputRun===this.maxInputRun},linked(){return this.isLinkingEnabled&&this.canLinkRuns},inputPanelMargin(){return this.isTriggerNode?0:80},featureRequestUrl(){return this.activeNodeType?`${HO}${this.activeNodeType.name}`:""},outputPanelEditMode(){return this.$store.getters["ndv/outputPanelEditMode"]},isWorkflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},isExecutionWaitingForWebhook(){return this.$store.getters.executionWaitingForWebhook},blockUi(){return this.isWorkflowRunning||this.isExecutionWaitingForWebhook}},watch:{activeNode(s){s&&!this.isActiveStickyNode&&(this.runInputIndex=-1,this.runOutputIndex=-1,this.isLinkingEnabled=!0,this.selectedInput=void 0,this.triggerWaitingWarningEnabled=!1,this.avgOutputRowHeight=0,this.avgInputRowHeight=0,setTimeout(()=>{this.$store.commit("ndv/setNDVSessionId")},0),this.$externalHooks().run("dataDisplay.nodeTypeChanged",{nodeSubtitle:this.getNodeSubtitle(s,this.activeNodeType,this.getCurrentWorkflow())}),this.checkForeignCredentials(),setTimeout(()=>{if(this.activeNode){const e=this.$store.getters.outgoingConnectionsByNodeName(this.activeNode.name);this.$telemetry.track("User opened node modal",{node_type:this.activeNodeType?this.activeNodeType.name:"",workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,parameters_pane_position:this.mainPanelPosition,input_first_connector_runs:this.maxInputRun,output_first_connector_runs:this.maxOutputRun,selected_view_inputs:this.isTriggerNode?"trigger":this.$store.getters["ndv/inputPanelDisplayMode"],selected_view_outputs:this.$store.getters["ndv/outputPanelDisplayMode"],input_connectors:this.parentNodes.length,output_connectors:e&&e.main&&e.main.length,input_displayed_run_index:this.inputRun,output_displayed_run_index:this.outputRun,data_pinning_tooltip_presented:this.pinDataDiscoveryTooltipVisible,input_displayed_row_height_avg:this.avgInputRowHeight,output_displayed_row_height_avg:this.avgOutputRowHeight})}},2e3)),window.top&&!this.isActiveStickyNode&&window.top.postMessage(JSON.stringify({command:s?"openNDV":"closeNDV"}),"*")},maxOutputRun(){this.runOutputIndex=-1},maxInputRun(){this.runInputIndex=-1},inputNodeName(s){setTimeout(()=>{this.$store.commit("ndv/setInputNodeName",s)},0)},inputRun(){setTimeout(()=>{this.$store.commit("ndv/setInputRunIndex",this.inputRun)},0)}},methods:{onInputItemHover(s){if(!this.inputNodeName)return;if(s===null){this.$store.commit("ndv/setHoveringItem",null);return}const e={nodeName:this.inputNodeName,runIndex:this.inputRun,outputIndex:s.outputIndex,itemIndex:s.itemIndex};this.$store.commit("ndv/setHoveringItem",e)},onOutputItemHover(s){if(s===null||!this.activeNode){this.$store.commit("ndv/setHoveringItem",null);return}const e={nodeName:this.activeNode.name,runIndex:this.outputRun,outputIndex:s.outputIndex,itemIndex:s.itemIndex};this.$store.commit("ndv/setHoveringItem",e)},onInputTableMounted(s){this.avgInputRowHeight=s.avgRowHeight},onOutputTableMounted(s){this.avgOutputRowHeight=s.avgRowHeight},onWorkflowActivate(){this.$store.commit("ndv/setActiveNodeName",null),setTimeout(()=>{this.activateCurrentWorkflow("ndv")},1e3)},onFeatureRequestClick(){window.open(this.featureRequestUrl,"_blank"),this.activeNode&&this.$telemetry.track("User clicked ndv link",{node_type:this.activeNode.type,workflow_id:this.$store.getters.workflowId,session_id:this.sessionId,pane:"main",type:"i-wish-this-node-would"})},onPanelsInit(s){this.mainPanelPosition=s.position},onDragStart(s){this.isDragging=!0,this.mainPanelPosition=s.position},onDragEnd(s){this.isDragging=!1,this.$telemetry.track("User moved parameters pane",{window_width:s.windowWidth,start_position:this.mainPanelPosition,end_position:s.position,node_type:this.activeNodeType?this.activeNodeType.name:"",session_id:this.sessionId,workflow_id:this.$store.getters.workflowId}),this.mainPanelPosition=s.position},onLinkRunToInput(){this.runOutputIndex=this.runInputIndex,this.isLinkingEnabled=!0,this.trackLinking("input")},onLinkRunToOutput(){this.isLinkingEnabled=!0,this.trackLinking("output")},onUnlinkRun(s){this.runInputIndex=this.runOutputIndex,this.isLinkingEnabled=!1,this.trackLinking(s)},trackLinking(s){this.$telemetry.track("User changed ndv run linking",{node_type:this.activeNodeType?this.activeNodeType.name:"",session_id:this.sessionId,linked:this.linked,pane:s})},onNodeExecute(){setTimeout(()=>{!this.activeNode||!this.workflowRunning||(this.triggerWaitingWarningEnabled=!0)},1e3)},openSettings(){this.settingsEventBus.$emit("openSettings")},valueChanged(s){this.$emit("valueChanged",s)},nodeTypeSelected(s){this.$emit("nodeTypeSelected",s)},async close(){if(!this.isDragging){if(this.outputPanelEditMode.enabled){if(await this.confirmMessage("",this.$locale.baseText("ndv.pinData.beforeClosing.title"),null,this.$locale.baseText("ndv.pinData.beforeClosing.confirm"),this.$locale.baseText("ndv.pinData.beforeClosing.cancel"))){const{value:e}=this.outputPanelEditMode;if(!this.isValidPinDataSize(e)){De.$emit("data-pinning-error",{errorType:"data-too-large",source:"on-ndv-close-modal"});return}if(!this.isValidPinDataJSON(e)){De.$emit("data-pinning-error",{errorType:"invalid-json",source:"on-ndv-close-modal"});return}this.$store.commit("pinData",{node:this.activeNode,data:Lp(e)})}this.$store.commit("ndv/setOutputPanelEditModeEnabled",!1)}this.$externalHooks().run("dataDisplay.nodeEditingFinished"),this.$telemetry.track("User closed node modal",{node_type:this.activeNodeType?this.activeNodeType.name:"",session_id:this.sessionId,workflow_id:this.$store.getters.workflowId}),this.triggerWaitingWarningEnabled=!1,this.$store.commit("ndv/setActiveNodeName",null),this.$store.commit("ndv/resetNDVSessionId")}},onRunOutputIndexChange(s){this.runOutputIndex=s,this.trackRunChange(s,"output")},onRunInputIndexChange(s){this.runInputIndex=s,this.linked&&(this.runOutputIndex=s),this.trackRunChange(s,"input")},trackRunChange(s,e){this.$telemetry.track("User changed ndv run dropdown",{session_id:this.sessionId,run_index:s,node_type:this.activeNodeType?this.activeNodeType.name:"",pane:e})},onInputSelect(s,e){this.runInputIndex=-1,this.isLinkingEnabled=!0,this.selectedInput=s,this.$telemetry.track("User changed ndv input dropdown",{node_type:this.activeNode?this.activeNode.type:"",session_id:this.sessionId,workflow_id:this.$store.getters.workflowId,selection_value:e,input_node_type:this.inputNode?this.inputNode.type:""})},checkForeignCredentials(){var s;if(this.activeNode){const e=this.getNodeCredentialIssues(this.activeNode);this.hasForeignCredential=!!((s=e==null?void 0:e.credentials)!=null&&s.foreign)}},onStopExecution(){this.$emit("stopExecution")}}});const n8="_modalBackground_1cu57_1",o8="_triggerWarning_1cu57_6",r8="_backToCanvas_1cu57_10",a8="_featureRequest_1cu57_28";var l8={modalBackground:n8,triggerWarning:o8,backToCanvas:r8,featureRequest:a8},c8=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-dialog",{staticClass:"ndv-wrapper",attrs:{visible:(!!e.activeNode||e.renaming)&&!e.isActiveStickyNode,"before-close":e.close,"show-close":!1,"custom-class":"data-display-wrapper",width:"auto","append-to-body":""}},[t("n8n-tooltip",{attrs:{placement:"bottom-start",value:e.showTriggerWaitingWarning,disabled:!e.showTriggerWaitingWarning,manual:""}},[t("div",{class:e.$style.triggerWarning,attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$locale.baseText("ndv.backToCanvas.waitingForTriggerWarning"))+" ")]),t("div",{class:e.$style.backToCanvas,on:{click:e.close}},[t("n8n-icon",{attrs:{icon:"arrow-left",color:"text-xlight",size:"medium"}}),t("n8n-text",{attrs:{color:"text-xlight",size:"medium",bold:!0}},[e._v(" "+e._s(e.$locale.baseText("ndv.backToCanvas"))+" ")])],1)]),e.activeNode?t("div",{staticClass:"data-display"},[t("div",{class:e.$style.modalBackground,on:{click:e.close}}),t("NDVDraggablePanels",{attrs:{isTriggerNode:e.isTriggerNode,hideInputAndOutput:e.activeNodeType===null,position:e.isTriggerNode&&!e.showTriggerPanel?0:void 0,isDraggable:!e.isTriggerNode,nodeType:e.activeNodeType},on:{close:e.close,init:e.onPanelsInit,dragstart:e.onDragStart,dragend:e.onDragEnd},scopedSlots:e._u([{key:"input",fn:function(){return[e.showTriggerPanel?t("TriggerPanel",{attrs:{nodeName:e.activeNode.name,sessionId:e.sessionId},on:{execute:e.onNodeExecute,activate:e.onWorkflowActivate}}):e.isTriggerNode?e._e():t("InputPanel",{attrs:{workflow:e.workflow,canLinkRuns:e.canLinkRuns,runIndex:e.inputRun,linkedRuns:e.linked,currentNodeName:e.inputNodeName,sessionId:e.sessionId,readOnly:e.readOnly||e.hasForeignCredential},on:{linkRun:e.onLinkRunToInput,unlinkRun:()=>e.onUnlinkRun("input"),runChange:e.onRunInputIndexChange,openSettings:e.openSettings,select:e.onInputSelect,execute:e.onNodeExecute,tableMounted:e.onInputTableMounted,itemHover:e.onInputItemHover}})]},proxy:!0},{key:"output",fn:function(){return[t("OutputPanel",{attrs:{canLinkRuns:e.canLinkRuns,runIndex:e.outputRun,linkedRuns:e.linked,sessionId:e.sessionId,isReadOnly:e.readOnly||e.hasForeignCredential,blockUI:e.blockUi&&e.isTriggerNode},on:{linkRun:e.onLinkRunToOutput,unlinkRun:()=>e.onUnlinkRun("output"),runChange:e.onRunOutputIndexChange,openSettings:e.openSettings,tableMounted:e.onOutputTableMounted,itemHover:e.onOutputItemHover}})]},proxy:!0},{key:"main",fn:function(){return[t("NodeSettings",{attrs:{eventBus:e.settingsEventBus,dragging:e.isDragging,sessionId:e.sessionId,nodeType:e.activeNodeType,isReadOnly:e.readOnly||e.hasForeignCredential,blockUI:e.blockUi&&e.showTriggerPanel},on:{valueChanged:e.valueChanged,execute:e.onNodeExecute,stopExecution:e.onStopExecution,activate:e.onWorkflowActivate}}),e.featureRequestUrl?t("a",{class:e.$style.featureRequest,attrs:{target:"_blank"},on:{click:e.onFeatureRequestClick}},[t("font-awesome-icon",{attrs:{icon:"lightbulb"}}),e._v(" "+e._s(e.$locale.baseText("ndv.featureRequest"))+" ")],1):e._e()]},proxy:!0}],null,!1,2113916617)})],1):e._e()],1)},d8=[];const Uh={$style:l8};function u8(s){for(var e in Uh)this[e]=Uh[e]}var h8=_(i8,c8,d8,!1,u8,null,null,null),p8=h8.exports;const Ow=N(ql).extend({mounted(){if(this.data!==null)try{this.__addNode(this.data)}catch{}},computed:{data(){return this.$store.getters.getNodeByName(this.name)},nodeId(){return this.data.id}},props:{name:{type:String},instance:{type:Object},isReadOnly:{type:Boolean},isActive:{type:Boolean},hideActions:{type:Boolean},disableSelecting:{type:Boolean},showCustomTooltip:{type:Boolean}},methods:{__addInputEndpoints(s,e){let t;const i={};e.inputs.forEach((n,o)=>{i.hasOwnProperty(n)?i[n]++:i[n]=0,t=i[n];const r=vh.input[e.inputs.length][t],a={uuid:Ha(this.nodeId,t),anchor:r,maxConnections:-1,endpoint:"Rectangle",endpointStyle:_h(e,"--color-foreground-xdark"),endpointHoverStyle:_h(e,"--color-primary"),isSource:!1,isTarget:!this.isReadOnly&&e.inputs.length>1,parameters:{nodeId:this.nodeId,type:n,index:t},enabled:!this.isReadOnly,cssClass:"rect-input-endpoint",dragAllowedWhenFull:!0,dropOptions:{tolerance:"touch",hoverClass:"dropHover"}};e.inputNames&&(a.overlays=[S2(e.inputNames[t])]);const l=this.instance.addEndpoint(this.nodeId,a);Array.isArray(l)||(l.__meta={nodeName:s.name,nodeId:this.nodeId,index:o,totalEndpoints:e.inputs.length})})},__addOutputEndpoints(s,e){let t;const i={};e.outputs.forEach((n,o)=>{i.hasOwnProperty(n)?i[n]++:i[n]=0,t=i[n];const r=vh.output[e.outputs.length][t],a={uuid:Io(this.nodeId,t),anchor:r,maxConnections:-1,endpoint:"Dot",endpointStyle:Oh(e,"--color-foreground-xdark"),endpointHoverStyle:Oh(e,"--color-primary"),isSource:!0,isTarget:!1,enabled:!this.isReadOnly,parameters:{nodeId:this.nodeId,type:n,index:t},cssClass:"dot-output-endpoint",dragAllowedWhenFull:!1,dragProxy:["Rectangle",{width:1,height:1,strokeWidth:0}]};e.outputNames&&(a.overlays=[E2(e.outputNames[t])]);const l=this.instance.addEndpoint(this.nodeId,{...a});if(Array.isArray(l)||(l.__meta={nodeName:s.name,nodeId:this.nodeId,index:o,totalEndpoints:e.outputs.length}),!this.isReadOnly){const c={uuid:Io(this.nodeId,t),anchor:r,maxConnections:-1,endpoint:"N8nPlus",isSource:!0,isTarget:!1,enabled:!this.isReadOnly,endpointStyle:{fill:Ge("--color-xdark"),outlineStroke:"none",hover:!1,showOutputLabel:e.outputs.length===1,size:e.outputs.length>=3?"small":"medium",hoverMessage:this.$locale.baseText("nodeBase.clickToAddNodeOrDragToConnect")},endpointHoverStyle:{fill:Ge("--color-primary"),outlineStroke:"none",hover:!0},parameters:{nodeId:this.nodeId,type:n,index:t},cssClass:"plus-draggable-endpoint",dragAllowedWhenFull:!1,dragProxy:["Rectangle",{width:1,height:1,strokeWidth:0}]},d=this.instance.addEndpoint(this.nodeId,c);Array.isArray(d)||(d.__meta={nodeName:s.name,nodeId:this.nodeId,index:o,totalEndpoints:e.outputs.length})}})},__makeInstanceDraggable(s){this.instance.draggable(this.nodeId,{grid:[Ze,Ze],start:e=>{if(this.isReadOnly===!0)return!1;this.dragging=!0;const t=this.$store.getters.isNodeSelected(this.data.name),i=this.data.name;return this.data.type===nt&&!t&&setTimeout(()=>{this.$emit("nodeSelected",i,!1,!0)},0),e.e&&!t&&(this.instance.clearDragSelection(),this.$store.commit("resetSelectedNodes")),this.$store.commit("addActiveAction","dragActive"),!0},stop:e=>{if(this.dragging=!1,this.$store.getters.isActionActive("dragActive")){const t=this.$store.getters.getSelectedNodes.slice();t.map(o=>o.name).includes(this.data.name)||t.push(this.data);let n;t.forEach(o=>{const r=document.getElementById(o.id);if(r===null)return;n=[parseInt(r.style.left.slice(0,-2),10),parseInt(r.style.top.slice(0,-2),10)];const a={name:o.name,properties:{position:n}};this.$store.commit("updateNodeProperties",a)}),this.$emit("moved",s)}},filter:".node-description, .node-description .node-name, .node-description .node-subtitle"})},__addNode(s){let e=this.$store.getters["nodeTypes/getNodeType"](s.type,s.typeVersion);e||(e=this.$store.getters["nodeTypes/getNodeType"](j_)),this.__addInputEndpoints(s,e),this.__addOutputEndpoints(s,e),this.__makeInstanceDraggable(s)},touchEnd(s){this.isTouchDevice&&this.$store.getters.isActionActive("dragActive")&&this.$store.commit("removeActiveAction","dragActive")},mouseLeftClick(s){const e=s.path||s.composedPath&&s.composedPath();for(let t=0;t<e.length;t++)if(e[t].className&&typeof e[t].className=="string"&&e[t].className.includes("no-select-on-click"))return;this.isTouchDevice||(this.$store.getters.isActionActive("dragActive")?this.$store.commit("removeActiveAction","dragActive"):(this.isCtrlKeyPressed(s)||this.$emit("deselectAllNodes"),this.$store.getters.isNodeSelected(this.data.name)?this.$emit("deselectNode",this.name):this.$emit("nodeSelected",this.name)))}}});var f8=N(ve,Ow,ct,ie,an,dt).extend({name:"Node",components:{TitledList:pl,NodeIcon:pi},computed:{isDuplicatable(){return this.nodeType?this.nodeType.maxNodes===void 0||this.sameTypeNodes.length<this.nodeType.maxNodes:!0},isScheduledGroup(){var s;return((s=this.nodeType)==null?void 0:s.group.includes("schedule"))===!0},nodeRunData(){return this.$store.getters.getWorkflowResultDataByNodeName(this.data.name)},hasIssues(){return this.hasPinData?!1:!!(this.data.issues!==void 0&&Object.keys(this.data.issues).length)},workflowDataItems(){const s=this.nodeRunData;return s===null?0:s.length},canvasOffsetPosition(){return this.$store.getters.getNodeViewOffsetPosition},getTriggerNodeTooltip(){if(this.nodeType!==null&&this.nodeType.hasOwnProperty("eventTriggerDescription")){const s=this.$locale.shortNodeType(this.nodeType.name),{eventTriggerDescription:e}=this.nodeType;return this.$locale.nodeText().eventTriggerDescription(s,e||"")}else return this.$locale.baseText("node.waitingForYouToCreateAnEventIn",{interpolate:{nodeType:this.nodeType?$s(this.nodeType):""}})},isPollingTypeNode(){return!!(this.nodeType&&this.nodeType.polling)},isExecuting(){return this.$store.getters.executingNode===this.data.name},isSingleActiveTriggerNode(){return this.$store.getters.workflowTriggerNodes.filter(e=>{const t=this.$store.getters["nodeTypes/getNodeType"](e.type,e.typeVersion);return t&&t.eventTriggerDescription!==""&&!e.disabled}).length===1},isManualTypeNode(){return this.data.type===Fo},isTriggerNode(){return this.$store.getters["nodeTypes/isTriggerNode"](this.data.type)},isTriggerNodeTooltipEmpty(){return this.nodeType!==null?this.nodeType.eventTriggerDescription==="":!1},isNodeDisabled(){return this.node&&this.node.disabled},nodeType(){return this.data&&this.$store.getters["nodeTypes/getNodeType"](this.data.type,this.data.typeVersion)},node(){return this.$store.getters.nodesByName[this.name]},sameTypeNodes(){return this.$store.getters.allNodes.filter(s=>s.type===this.data.type)},nodeClass(){return{"node-box":!0,disabled:this.data.disabled,executing:this.isExecuting}},nodeIssues(){return this.data.issues===void 0?[]:Bp(this.data.issues,this.data)},nodeDisabledIcon(){return this.data.disabled===!1?"pause":"play"},position(){return this.node?this.node.position:[0,0]},showDisabledLinethrough(){return!!(this.data.disabled&&this.nodeType&&this.nodeType.inputs.length===1&&this.nodeType.outputs.length===1)},nodePosition(){return{left:this.position[0]+"px",top:this.position[1]+"px"}},shortNodeType(){return this.$locale.shortNodeType(this.data.type)},nodeTitle(){return this.data.name==="Start"?this.$locale.headerText({key:"headers.start.displayName",fallback:"Start"}):this.data.name},waiting(){const s=this.$store.getters.getWorkflowExecution;if(s&&s.waitTill){const e=ae.exports.get(s,"data.resultData.lastNodeExecuted");if(this.name===e){const t=new Date(s.waitTill);return t.toISOString()===ef?this.$locale.baseText("node.theNodeIsWaitingIndefinitelyForAnIncomingWebhookCall"):this.$locale.baseText("node.nodeIsWaitingTill",{interpolate:{date:t.toLocaleDateString(),time:t.toLocaleTimeString()}})}}},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},nodeStyle(){let s=Ge("--color-foreground-xdark");return this.data.disabled?s=Ge("--color-foreground-base"):this.isExecuting||(this.hasIssues?s=Ge("--color-danger"):this.waiting||this.hasPinData?s=Ge("--color-secondary"):this.workflowDataItems&&(s=Ge("--color-success"))),{"border-color":s}},isSelected(){return this.$store.getters.getSelectedNodes.find(s=>s.name===this.data.name)},shiftOutputCount(){return!!(this.nodeType&&this.nodeType.outputs.length>2)},shouldShowTriggerTooltip(){return!!this.node&&this.isTriggerNode&&!this.isPollingTypeNode&&!this.isNodeDisabled&&this.workflowRunning&&this.workflowDataItems===0&&this.isSingleActiveTriggerNode&&!this.isTriggerNodeTooltipEmpty&&!this.hasIssues&&!this.dragging}},watch:{isActive(s,e){!s&&e&&this.setSubtitle()},canvasOffsetPosition(){this.showTriggerNodeTooltip&&(this.showTriggerNodeTooltip=!1,setTimeout(()=>{this.showTriggerNodeTooltip=this.shouldShowTriggerTooltip},200)),this.pinDataDiscoveryTooltipVisible&&(this.pinDataDiscoveryTooltipVisible=!1,setTimeout(()=>{this.pinDataDiscoveryTooltipVisible=!0},200))},shouldShowTriggerTooltip(s){s?setTimeout(()=>{this.showTriggerNodeTooltip=this.shouldShowTriggerTooltip},2500):this.showTriggerNodeTooltip=!1},nodeRunData(s){this.$emit("run",{name:this.data.name,data:s,waiting:!!this.waiting})}},created(){localStorage.getItem(na)||(this.unwatchWorkflowDataItems=this.$watch("workflowDataItems",e=>{this.showPinDataDiscoveryTooltip(e)}))},mounted(){this.setSubtitle(),this.nodeRunData&&setTimeout(()=>{this.$emit("run",{name:this.data&&this.data.name,data:this.nodeRunData,waiting:!!this.waiting})},0)},data(){return{isTouchActive:!1,nodeSubtitle:"",showTriggerNodeTooltip:!1,pinDataDiscoveryTooltipVisible:!1,dragging:!1,unwatchWorkflowDataItems:()=>{}}},methods:{showPinDataDiscoveryTooltip(s){!this.isTriggerNode||this.isManualTypeNode||this.isScheduledGroup||s===0||(localStorage.setItem(na,"true"),this.pinDataDiscoveryTooltipVisible=!0,this.unwatchWorkflowDataItems())},setSubtitle(){const s=this.getNodeSubtitle(this.data,this.nodeType,this.getCurrentWorkflow())||"";this.nodeSubtitle=s.includes(Xs)?"":s},disableNode(){this.disableNodes([this.data]),this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"disable",workflow_id:this.$store.getters.workflowId})},executeNode(){this.$emit("runWorkflow",this.data.name,"Node.executeNode"),this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"execute",workflow_id:this.$store.getters.workflowId})},deleteNode(){this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"delete",workflow_id:this.$store.getters.workflowId}),m.nextTick(()=>{this.$emit("removeNode",this.data.name)})},duplicateNode(){this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"duplicate",workflow_id:this.$store.getters.workflowId}),m.nextTick(()=>{this.$emit("duplicateNode",this.data.name)})},onClick(s){this.callDebounced("onClickDebounced",{debounceTime:300,trailing:!0},s)},onClickDebounced(s){s.detail>=2?this.setNodeActive():this.mouseLeftClick(s)},setNodeActive(){this.$store.commit("ndv/setActiveNodeName",this.data.name),this.pinDataDiscoveryTooltipVisible=!1},touchStart(){this.isTouchDevice===!0&&this.isMacOs===!1&&this.isTouchActive===!1&&(this.isTouchActive=!0,setTimeout(()=>{this.isTouchActive=!1},2e3))}}});var m8=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"node-wrapper",style:e.nodePosition,attrs:{id:e.nodeId}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelected,expression:"isSelected"}],staticClass:"select-background"}),t("div",{ref:e.data.name,class:{"node-default":!0,"touch-active":e.isTouchActive,"is-touch-device":e.isTouchDevice},attrs:{"data-name":e.data.name}},[t("div",{directives:[{name:"touch",rawName:"v-touch:start",value:e.touchStart,expression:"touchStart",arg:"start"},{name:"touch",rawName:"v-touch:end",value:e.touchEnd,expression:"touchEnd",arg:"end"}],class:e.nodeClass,style:e.nodeStyle,on:{click:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&i.button!==0?null:e.onClick.apply(null,arguments)}}},[e.data.disabled?e._e():t("div",{class:{"node-info-icon":!0,"shift-icon":e.shiftOutputCount}},[e.hasIssues?t("div",{staticClass:"node-issues"},[t("n8n-tooltip",{attrs:{placement:"bottom"}},[t("titled-list",{attrs:{slot:"content",title:`${e.$locale.baseText("node.issues")}:`,items:e.nodeIssues},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):e.waiting?t("div",{staticClass:"waiting"},[t("n8n-tooltip",{attrs:{placement:"bottom"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.waiting)},slot:"content"}),t("font-awesome-icon",{attrs:{icon:"clock"}})],1)],1):e.hasPinData?t("span",{staticClass:"node-pin-data-icon"},[t("font-awesome-icon",{attrs:{icon:"thumbtack"}}),e.workflowDataItems>1?t("span",{staticClass:"items-count"},[e._v(" "+e._s(e.workflowDataItems))]):e._e()],1):e.workflowDataItems?t("span",{staticClass:"data-count"},[t("font-awesome-icon",{attrs:{icon:"check"}}),e.workflowDataItems>1?t("span",{staticClass:"items-count"},[e._v(" "+e._s(e.workflowDataItems))]):e._e()],1):e._e()]),t("div",{staticClass:"node-executing-info",attrs:{title:e.$locale.baseText("node.nodeIsExecuting")}},[t("font-awesome-icon",{attrs:{icon:"sync-alt",spin:""}})],1),t("div",{staticClass:"node-trigger-tooltip__wrapper"},[t("n8n-tooltip",{attrs:{placement:"top",manual:"",value:e.showTriggerNodeTooltip,"popper-class":"node-trigger-tooltip__wrapper--item"}},[t("div",{attrs:{slot:"content"},domProps:{textContent:e._s(e.getTriggerNodeTooltip)},slot:"content"}),t("span")]),e.isTriggerNode?t("n8n-tooltip",{attrs:{placement:"top",manual:"",value:e.pinDataDiscoveryTooltipVisible,"popper-class":"node-trigger-tooltip__wrapper--item"},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(e.$locale.baseText("node.discovery.pinData.canvas"))+" ")]},proxy:!0}],null,!1,917840377)},[t("span")]):e._e()],1),t("NodeIcon",{staticClass:"node-icon",attrs:{nodeType:e.nodeType,size:40,shrink:!1,disabled:this.data.disabled}})],1),e.isReadOnly?e._e():t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideActions,expression:"!hideActions"}],staticClass:"node-options no-select-on-click"},[t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.deleteNode,expression:"deleteNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.deleteNode")}},[t("font-awesome-icon",{attrs:{icon:"trash"}})],1),t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.disableNode,expression:"disableNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.activateDeactivateNode")}},[t("font-awesome-icon",{attrs:{icon:e.nodeDisabledIcon}})],1),e.isDuplicatable?t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.duplicateNode,expression:"duplicateNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.duplicateNode")}},[t("font-awesome-icon",{attrs:{icon:"clone"}})],1):e._e(),t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.setNodeActive,expression:"setNodeActive",arg:"tap"}],staticClass:"option touch",attrs:{title:e.$locale.baseText("node.editNode")}},[t("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"cog"}})],1),e.workflowRunning?e._e():t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.executeNode,expression:"executeNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.executeNode")}},[t("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"play-circle"}})],1)]),e.showDisabledLinethrough?t("div",{class:{"disabled-linethrough":!0,success:e.workflowDataItems>0}}):e._e()]),t("div",{staticClass:"node-description"},[t("div",{staticClass:"node-name ph-no-capture",attrs:{title:e.nodeTitle}},[t("p",[e._v(" "+e._s(e.nodeTitle)+" ")]),e.data.disabled?t("p",[e._v(" ("+e._s(e.$locale.baseText("node.disabled"))+") ")]):e._e()]),e.nodeSubtitle!==void 0?t("div",{staticClass:"node-subtitle",attrs:{title:e.nodeSubtitle}},[e._v(" "+e._s(e.nodeSubtitle)+" ")]):e._e()])])},g8=[],w8=_(f8,m8,g8,!1,null,"32ce9072",null,null),y8=w8.exports,v8=N(ve,Ow,ct,ie).extend({name:"Sticky",props:{nodeViewScale:{type:Number},gridSize:{type:Number}},computed:{defaultText(){if(!this.nodeType)return"";const e=this.nodeType.properties.find(t=>t.name==="content");return e&&ra(e.default)?e.default:""},isSelected(){return this.$store.getters.getSelectedNodes.find(s=>s.name===this.data.name)},nodeType(){return this.data&&this.$store.getters["nodeTypes/getNodeType"](this.data.type,this.data.typeVersion)},node(){return this.$store.getters.nodesByName[this.name]},position(){return this.node?this.node.position:[0,0]},height(){return this.node&&zs(this.node.parameters.height)?this.node.parameters.height:0},width(){return this.node&&zs(this.node.parameters.width)?this.node.parameters.width:0},stickySize(){return{height:this.height+"px",width:this.width+"px"}},stickyPosition(){return{left:this.position[0]+"px",top:this.position[1]+"px",zIndex:this.isActive?9999999:-1*Math.floor(this.height*this.width/1e3)}},showActions(){return!(this.hideActions||this.isReadOnly||this.workflowRunning||this.isResizing)},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")}},data(){return{isResizing:!1,isTouchActive:!1}},methods:{deleteNode(){m.nextTick(()=>{this.$emit("removeNode",this.data.name)})},onEdit(s){s&&!this.isActive&&this.node?this.$store.commit("ndv/setActiveNodeName",this.node.name):this.isActive&&!s&&this.$store.commit("ndv/setActiveNodeName",null)},onMarkdownClick(s,e){if(s){const t=this.name===Xa,i=s.querySelector('img[alt="n8n quickstart video"'),n=t&&i?"welcome_video":t&&s.getAttribute("href")==="/templates"?"templates":"other";this.$telemetry.track("User clicked note link",{type:n})}},onInputChange(s){this.setParameters({content:s})},onResizeStart(){this.isResizing=!0,!this.isSelected&&this.node&&this.$emit("nodeSelected",this.node.name,!1,!0),this.node&&this.instance.destroyDraggable(this.node.id)},onResize({height:s,width:e,dX:t,dY:i}){!this.node||((t!==0||i!==0)&&this.setPosition([this.node.position[0]+(t||0),this.node.position[1]+(i||0)]),this.setParameters({height:s,width:e}))},onResizeEnd(){this.isResizing=!1,this.__makeInstanceDraggable(this.data)},setParameters(s){if(this.node){const e={content:ra(s.content)?s.content:this.node.parameters.content,height:zs(s.height)?s.height:this.node.parameters.height,width:zs(s.width)?s.width:this.node.parameters.width},t={name:this.node.name,value:e};this.$store.commit("setNodeParameters",t)}},setPosition(s){if(!this.node)return;const e={name:this.node.name,properties:{position:s}};this.$store.commit("updateNodeProperties",e)},touchStart(){this.isTouchDevice===!0&&this.isMacOs===!1&&this.isTouchActive===!1&&(this.isTouchActive=!0,setTimeout(()=>{this.isTouchActive=!1},2e3))}}});var _8=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"sticky",staticClass:"sticky-wrapper",style:e.stickyPosition,attrs:{id:e.nodeId}},[t("div",{class:{"sticky-default":!0,"touch-active":e.isTouchActive,"is-touch-device":e.isTouchDevice},style:e.stickySize},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelected,expression:"isSelected"}],staticClass:"select-sticky-background"}),t("div",{directives:[{name:"touch",rawName:"v-touch:start",value:e.touchStart,expression:"touchStart",arg:"start"},{name:"touch",rawName:"v-touch:end",value:e.touchEnd,expression:"touchEnd",arg:"end"}],ref:e.data.name,staticClass:"sticky-box",attrs:{"data-name":e.data.name},on:{click:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&i.button!==0?null:e.mouseLeftClick.apply(null,arguments)}}},[t("n8n-sticky",{attrs:{content:e.node.parameters.content,height:e.node.parameters.height,width:e.node.parameters.width,scale:e.nodeViewScale,id:e.node.id,readOnly:e.isReadOnly,defaultText:e.defaultText,editMode:e.isActive&&!e.isReadOnly,gridSize:e.gridSize},on:{"update:content":function(i){return e.$set(e.node.parameters,"content",i)},input:e.onInputChange,edit:e.onEdit,resizestart:e.onResizeStart,resize:e.onResize,resizeend:e.onResizeEnd,"markdown-click":e.onMarkdownClick}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showActions,expression:"showActions"}],staticClass:"sticky-options no-select-on-click"},[t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.deleteNode,expression:"deleteNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.deleteNode")}},[t("font-awesome-icon",{attrs:{icon:"trash"}})],1)])])])},O8=[],b8=_(v8,_8,O8,!1,null,"3aa5a23c",null,null),x8=b8.exports,$8=m.extend({name:"CanvasAddButton",props:{showTooltip:{type:Boolean},position:{type:Array}},computed:{containerCssVars(){const s=this.position;return{"--trigger-placeholder-left-position":`${s[0]}px`,"--trigger-placeholder-top-position":`${s[1]}px`}},isScrimActive(){return this.$store.getters["nodeCreator/showScrim"]}}});const T8="_container_1y183_1",k8="_button_1y183_13",S8="_tooltip_1y183_34",E8="_label_1y183_38";var C8={container:T8,button:k8,tooltip:S8,label:E8},N8=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"container",class:e.$style.container,style:e.containerCssVars},[t("n8n-tooltip",{attrs:{placement:"top",value:e.showTooltip,manual:"",disabled:e.isScrimActive,"popper-class":e.$style.tooltip,"open-delay":700},scopedSlots:e._u([{key:"content",fn:function(){return[t("p",{domProps:{textContent:e._s(e.$locale.baseText("nodeView.canvasAddButton.addATriggerNodeBeforeExecuting"))}})]},proxy:!0}])},[t("button",{class:e.$style.button,on:{click:function(i){return e.$emit("click")}}},[t("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1)]),t("p",{class:e.$style.label,domProps:{textContent:e._s(e.$locale.baseText("nodeView.canvasAddButton.addFirstStep"))}})],1)},P8=[];const Vh={$style:C8};function D8(s){for(var e in Vh)this[e]=Vh[e]}var I8=_($8,N8,P8,!1,D8,null,null,null),A8=I8.exports;(function(){var s=window,e=s.jsPlumb,t=s.jsPlumbUtil,i=s.Biltong,n="Straight",o="Arc";const r=function(y){y=y||{},this.type="N8nCustom",y.stub=y.stub==null?30:y.stub;var S=e.Connectors.AbstractConnector.apply(this,arguments),T=0,$=0,D,P=y.midpoint==null?.5:y.midpoint,M=y.alwaysRespectStubs===!0,R=y.loopbackVerticalLength||0,L=null,G=null,Z=y.cornerRadius!=null?y.cornerRadius:0,ne=y.loopbackMinimum||100,he=.4,_e=40,Y=y.targetGap||0,te=y.stub||0;this.setTargetEndpoint=function(x){this.overrideTargetEndpoint=x},this.resetTargetEndpoint=function(){this.overrideTargetEndpoint=null},this._compute=function(x,b){const C=v(b,{targetGap:Y,stub:te,overrideTargetEndpoint:this.overrideTargetEndpoint,getEndpointOffset:y.getEndpointOffset});Object.keys(C).forEach(W=>{x[W]=C[W]}),C.tx<0?this._computeFlowchart(C):this._computeBezier(C)},this._computeBezier=function(x){var b=x.sourcePos,C=x.targetPos,W=Math.abs(b[0]-C[0])-x.targetGap,Q=Math.abs(b[1]-C[1]),q,oe,ue=b[0]<C[0]?W:0,me=b[1]<C[1]?Q:0,ge=b[0]<C[0]?0:W,ut=b[1]<C[1]?0:Q;x.ySpan<=20||x.ySpan<=100&&x.xSpan<=100?$=.1:$=x.xSpan*he+_e,q=a([ue,me],b,C,x.sourceEndpoint,x.targetEndpoint,x.so,x.to,$,T),oe=a([ge,ut],C,b,x.targetEndpoint,x.sourceEndpoint,x.to,x.so,$,T),S.addSegment(this,"Bezier",{x1:ue,y1:me,x2:ge,y2:ut,cp1x:q[0],cp1y:q[1],cp2x:oe[0],cp2y:oe[1]})};const le=function(x,b,C,W){if(!(L===b&&G===C)){var Q=L==null?W.sx:L,q=G==null?W.sy:G,oe=Q===b?"v":"h";L=b,G=C,x.push([Q,q,b,C,oe])}};this._computeFlowchart=function(x){D=[],L=null,G=null;var b=w(x,{alwaysRespectStubs:M});le(D,b[0],b[1],x);var C=g(x,b,{midpoint:P,loopbackMinimum:ne,loopbackVerticalLength:R});if(C)for(var W=0;W<C.length;W++)le(D,C[W][0],C[W][1],x);le(D,b[2],b[3],x),le(D,x.tx,x.ty,x),h(S,this,D,x,Z)}};e.Connectors.N8nCustom=r,t.extend(e.Connectors.N8nCustom,e.Connectors.AbstractConnector);function a(y,S,T,$,D,P,M,R,L){var G=P[0]!==M[0]||P[1]===M[1],Z=[];return G?(M[0]===0?Z.push(T[0]<S[0]?y[0]+L:y[0]-L):Z.push(y[0]+R*M[0]),M[1]===0?Z.push(T[1]<S[1]?y[1]+L:y[1]-L):Z.push(y[1]+R*P[1])):(P[0]===0?Z.push(S[0]<T[0]?y[0]+L:y[0]-L):Z.push(y[0]-R*P[0]),P[1]===0?Z.push(S[1]<T[1]?y[1]+L:y[1]-L):Z.push(y[1]+R*M[1])),Z}function l(y){return y<0?-1:y===0?0:1}function c(y){return[l(y[2]-y[0]),l(y[3]-y[1])]}function d(y){return Math.sqrt(Math.pow(y[0]-y[2],2)+Math.pow(y[1]-y[3],2))}function u(y){var S=[];return S.push.apply(S,y),S}function h(y,S,T,$,D){for(var P=null,M,R,L,G=0;G<T.length-1;G++){if(P=P||u(T[G]),M=u(T[G+1]),R=c(P),L=c(M),D>0&&P[4]!==M[4]){var Z=Math.min(d(P),d(M)),ne=Math.min(D,Z/2);P[2]-=R[0]*ne,P[3]-=R[1]*ne,M[0]+=L[0]*ne,M[1]+=L[1]*ne;var he=R[1]===L[0]&&L[0]===1||R[1]===L[0]&&L[0]===0&&R[0]!==L[1]||R[1]===L[0]&&L[0]===-1,_e=M[1]>P[3]?1:-1,Y=M[0]>P[2]?1:-1,te=_e===Y,le=te&&he||!te&&!he?M[0]:P[2],x=te&&he||!te&&!he?P[3]:M[1];y.addSegment(S,n,{x1:P[0],y1:P[1],x2:P[2],y2:P[3]}),y.addSegment(S,o,{r:ne,x1:P[2],y1:P[3],x2:M[0],y2:M[1],cx:le,cy:x,ac:he})}else{var b=P[2]===P[0]?0:P[2]>P[0]?$.lw/2:-($.lw/2),C=P[3]===P[1]?0:P[3]>P[1]?$.lw/2:-($.lw/2);y.addSegment(S,n,{x1:P[0]-b,y1:P[1]-C,x2:P[2]+b,y2:P[3]+C})}P=M}M!=null&&y.addSegment(S,n,{x1:M[0],y1:M[1],x2:M[2],y2:M[3]})}const p={opposite:function(y,{axis:S,startStub:T,endStub:$,idx:D,midx:P,midy:M}){var R=y,L=R["is"+S.toUpperCase()+"GreaterThanStubTimes2"];if(!L||R.so[D]===1&&T>$||R.so[D]===-1&&T<$)return{x:[[T,M],[$,M]],y:[[P,T],[P,$]]}[S];if(R.so[D]===1&&T<$||R.so[D]===-1&&T>$)return{x:[[P,R.sy],[P,R.ty]],y:[[R.sx,M],[R.tx,M]]}[S]}},f={opposite:function(y,{axis:S,alwaysRespectStubs:T}){var $=y,D=S==="x"?0:1,P={x:function(){return $.so[D]===1&&($.startStubX>$.endStubX&&$.tx>$.startStubX||$.sx>$.endStubX&&$.tx>$.sx)||$.so[D]===-1&&($.startStubX<$.endStubX&&$.tx<$.startStubX||$.sx<$.endStubX&&$.tx<$.sx)},y:function(){return $.so[D]===1&&($.startStubY>$.endStubY&&$.ty>$.startStubY||$.sy>$.endStubY&&$.ty>$.sy)||$.so[D]===-1&&($.startStubY<$.endStubY&&$.ty<$.startStubY||$.sy<$.endStubY&&$.ty<$.sy)}};return!T&&P[S]()?{x:[(y.sx+y.tx)/2,y.startStubY,(y.sx+y.tx)/2,y.endStubY],y:[y.startStubX,(y.sy+y.ty)/2,y.endStubX,(y.sy+y.ty)/2]}[S]:[y.startStubX,y.startStubY,y.endStubX,y.endStubY]}};function w(y,{alwaysRespectStubs:S}){return f.opposite(y,{axis:y.sourceAxis,alwaysRespectStubs:S})}function g(y,S,{midpoint:T,loopbackVerticalLength:$,loopbackMinimum:D}){const P=y.sourceAxis,M=y.sourceAxis==="x"?0:1,R=y.sourceAxis==="x"?1:0,L=S[M],G=S[R],Z=S[M+2],ne=S[R+2],he=y.endStubX-y.startStubX,_e=y.endStubY-y.startStubY,Y=-1;var te=y.startStubX+(y.endStubX-y.startStubX)*T,le;return _e>=0||he<-1*D?le=y.startStubY-(he<0?Y*$:0):le=y.startStubY+(y.endStubY-y.startStubY)*T,p.opposite(y,{axis:P,startStub:L,otherStartStub:G,endStub:Z,otherEndStub:ne,idx:M,oidx:R,midx:te,midy:le})}function v(y,{targetGap:S,stub:T,overrideTargetEndpoint:$,getEndpointOffset:D}){let{targetPos:P,targetEndpoint:M}=y;$&&(P=$.anchor.getCurrentLocation(),M=$);const R=0;T=T||0;const L=t.isArray(T)?T[0]:T,G=t.isArray(T)?T[1]:T;var Z=i.quadrant(y.sourcePos,P),ne=P[0]<y.sourcePos[0],he=P[1]<y.sourcePos[1],_e=y.strokeWidth||1,Y=y.sourceEndpoint.anchor.getOrientation(y.sourceEndpoint),te=M.anchor.getOrientation(M),le=ne?P[0]:y.sourcePos[0],x=he?P[1]:y.sourcePos[1],b=Math.abs(P[0]-y.sourcePos[0]),C=Math.abs(P[1]-y.sourcePos[1]);if(Y[0]===0&&Y[1]===0||te[0]===0&&te[1]===0){var W=b>C?0:1,Q=[1,0][W];Y=[],te=[],Y[W]=y.sourcePos[W]>P[W]?-1:1,te[W]=y.sourcePos[W]>P[W]?1:-1,Y[Q]=0,te[Q]=0}const q=ne?b+R*Y[0]:R*Y[0],oe=he?C+R*Y[1]:R*Y[1],ue=ne?S*te[0]:b+S*te[0],me=he?S*te[1]:C+S*te[1],ge=Y[0]*te[0]+Y[1]*te[1],ut=L+(D&&y.sourceEndpoint?D(y.sourceEndpoint):0),yt=G+(D&&M?D(M):0);var Vt={sx:q,sy:oe,tx:ue,ty:me,lw:_e,xSpan:Math.abs(ue-q),ySpan:Math.abs(me-oe),mx:(q+ue)/2,my:(oe+me)/2,so:Y,to:te,x:le,y:x,w:b,h:C,segment:Z,startStubX:q+Y[0]*ut,startStubY:oe+Y[1]*ut,endStubX:ue+te[0]*yt,endStubY:me+te[1]*yt,isXGreaterThanStubTimes2:Math.abs(q-ue)>ut+yt,isYGreaterThanStubTimes2:Math.abs(oe-me)>ut+yt,opposite:ge===-1,perpendicular:ge===0,orthogonal:ge===1,sourceAxis:Y[0]===0?"y":"x",points:[le,x,b,C,q,oe,ue,me],stubs:[ut,yt],anchorOrientation:"opposite",sourceEndpoint:y.sourceEndpoint,targetEndpoint:M,sourcePos:y.sourcePos,targetPos:M.anchor.getCurrentLocation(),targetGap:S};return Vt}}).call(typeof window!="undefined"?window:globalThis);(function(){var s=window,e=s.jsPlumb,t=s.jsPlumbUtil,i=function(n){e.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};t.extend(i,e.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(n){this._jsPlumb.displayElements.push(n)}}),e.Endpoints.N8nPlus=function(n){e.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="N8nPlus",this.label="",this.labelOffset=0,this.size="medium",this.showOutputLabel=!0;const o={medium:24,small:18},r=40;i.apply(this,arguments);var a=n.cssClass?" "+n.cssClass:"";this.canvas=e.createElement("div",{display:"block",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+a+" plus-endpoint"),this.canvas.innerHTML=`
			<div class="plus-stalk">
				<div class="connection-run-items-label">
					<span class="floating"></span>
				</div>
			</div>

			<div class="plus-container">
				<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-plus">
					<path fill="currentColor" d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z" class=""></path>
				</svg>
				<div class="drop-hover-message">
					Click to add node</br>
					or drag to connect
				</div>
			</div>
		`,this.canvas.addEventListener("click",f=>{this._jsPlumb.instance.fire("plusEndpointClick",n.endpoint,f)}),this._jsPlumb.instance.appendElement(this.canvas);const l=this.canvas.querySelector(".plus-container"),c=l.querySelector(".drop-hover-message"),d=this.canvas.querySelector(".plus-stalk"),u=this.canvas.querySelector(".plus-stalk span");this.setSuccessOutput=f=>{this.canvas.classList.add("success"),this.showOutputLabel&&(u.textContent=f,this.label=f,this.labelOffset=u.offsetWidth,d.style.width=`${r+this.labelOffset}px`,this._jsPlumb&&this._jsPlumb.instance&&!this._jsPlumb.instance.isSuspendDrawing()&&n.endpoint.repaint())},this.clearSuccessOutput=()=>{this.canvas.classList.remove("success"),u.textContent="",this.label="",this.labelOffset=0,d.style.width=`${r}px`,n.endpoint.repaint()};const h=()=>{const w=n.endpoint.connections;return w.length?!!w.find(g=>g&&g.targetId&&g.targetId.startsWith("jsPlumb")):!1},p=()=>{const f=n.endpoint;return f.connections.length>=1?!0:!!this._jsPlumb.instance.getConnections({source:f.elementId}).find(v=>{if(!v||!v.endpoints||!v.endpoints.length||!v.endpoints[0])return!1;const y=v.endpoints[0];return y===f||y.getUuid()===f.getUuid()})};this.paint=function(f,w){p()?this.canvas.classList.add("hidden"):(this.canvas.classList.remove("hidden"),l.style.color=f.fill,l.style["border-color"]=f.fill,c.style.display=f.hover?"inline":"none"),t.sizeElement(this.canvas,this.x,this.y,this.w,this.h)},this._compute=(f,w,g,v)=>{this.size=g.size||this.size,this.showOutputLabel=!!g.showOutputLabel,this.hoverMessage!==g.hoverMessage&&(this.hoverMessage=g.hoverMessage,c.innerHTML=g.hoverMessage),this.size!=="medium"&&l.classList.add(this.size),setTimeout(()=>{this.label&&!this.labelOffset&&this.setSuccessOutput(this.label)},0);const y=[f[0]+r+this.labelOffset,f[1]-o[this.size]/2,o[this.size],o[this.size]];return h()?y:p()?[0,0,0,0]:y}},t.extend(e.Endpoints.N8nPlus,[e.Endpoints.AbstractEndpoint,i],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),e.Endpoints.svg.N8nPlus=e.Endpoints.N8nPlus})();var R8=N(ui,ve,be,F2,j2,Ce,V,fi,ie,Hl,z2,Yg,dt).extend({name:"NodeView",components:{NodeDetailsView:p8,Node:y8,NodeCreator:()=>As(()=>import("./NodeCreator.86de8db6.js"),["assets/NodeCreator.86de8db6.js","assets/NodeCreator.62345588.css","assets/vendor.a2fafdee.js","assets/n8n-design-system.670325b1.js","assets/n8n-design-system.4c7f4b23.css","assets/normalize-wheel.53b95207.js","assets/axios.4a974fe3.js","assets/@fortawesome/vue-fontawesome.4443d979.js","assets/@fortawesome/fontawesome-svg-core.2d7f1ae5.js","assets/xss.ffb35cb9.js","assets/vue-typed-mixins.81797ea0.js","assets/lodash-es.e05ea3b9.js","assets/@fortawesome/free-solid-svg-icons.4a1e939e.js","assets/@fortawesome/free-regular-svg-icons.9fb25f9a.js","assets/vue2-touch-events.f7c2b344.js","assets/v-click-outside.2a379eae.js","assets/vue-fragment.3d40e27f.js","assets/vue-agile.3c7c1e37.js","assets/vue-agile.db3fb5fe.css","assets/prismjs.95406fca.js","assets/n8n-workflow.4d086b10.js","assets/luxon.daa33f39.js","assets/flatted.12ebcbd8.js","assets/uuid.6335a3e0.js","assets/dateformat.a1136387.js","assets/monaco-editor.21485360.js","assets/monaco-editor.45667471.css","assets/quill.470e9400.js","assets/quill-autoformat.e2d87442.js","assets/fast-json-stable-stringify.d7c839ef.js","assets/vue-prism-editor.20a215ee.js","assets/esprima.67881ccb.js","assets/vue-i18n.517f429e.js","assets/timeago.js.677063e2.js","assets/file-saver.a22fc8cb.js","assets/jsplumb.1ecfd296.js","assets/vue2-teleport.e42b1fad.js","assets/vue-json-pretty.7b5bff4b.js"]),NodeSettings:vw,Sticky:x8,CanvasAddButton:A8,NodeCreation:()=>As(()=>import("./NodeCreation.30d8a400.js"),["assets/NodeCreation.30d8a400.js","assets/NodeCreation.7386fd1b.css","assets/vendor.a2fafdee.js","assets/n8n-design-system.670325b1.js","assets/n8n-design-system.4c7f4b23.css","assets/normalize-wheel.53b95207.js","assets/axios.4a974fe3.js","assets/@fortawesome/vue-fontawesome.4443d979.js","assets/@fortawesome/fontawesome-svg-core.2d7f1ae5.js","assets/xss.ffb35cb9.js","assets/vue-typed-mixins.81797ea0.js","assets/@fortawesome/free-solid-svg-icons.4a1e939e.js","assets/@fortawesome/free-regular-svg-icons.9fb25f9a.js","assets/vue2-touch-events.f7c2b344.js","assets/v-click-outside.2a379eae.js","assets/vue-fragment.3d40e27f.js","assets/vue-agile.3c7c1e37.js","assets/vue-agile.db3fb5fe.css","assets/lodash-es.e05ea3b9.js","assets/prismjs.95406fca.js","assets/n8n-workflow.4d086b10.js","assets/luxon.daa33f39.js","assets/flatted.12ebcbd8.js","assets/uuid.6335a3e0.js","assets/dateformat.a1136387.js","assets/monaco-editor.21485360.js","assets/monaco-editor.45667471.css","assets/quill.470e9400.js","assets/quill-autoformat.e2d87442.js","assets/fast-json-stable-stringify.d7c839ef.js","assets/vue-prism-editor.20a215ee.js","assets/esprima.67881ccb.js","assets/vue-i18n.517f429e.js","assets/timeago.js.677063e2.js","assets/file-saver.a22fc8cb.js","assets/jsplumb.1ecfd296.js","assets/vue2-teleport.e42b1fad.js","assets/vue-json-pretty.7b5bff4b.js"])},errorCaptured:(s,e,t)=>{console.error("errorCaptured"),console.error(s)},watch:{$route(s,e){const t=aa(s),i=!this.$store.getters["ui/isNodeViewInitialized"];let n=e.params.name!==s.params.name&&!(e.params.name==="new"&&this.currentWorkflow===fe)&&s.params.action!=="workflowSave";const o=s.name===O.TEMPLATE_IMPORT;if((t===Le.WORKFLOW||o)&&(n||i||o)){if(this.startLoading(),i){const r=this.$store.getters.getStateIsDirty;this.resetWorkspace(),this.$store.commit("setStateDirty",r)}this.initView().then(()=>{this.stopLoading(),this.blankRedirect&&(this.blankRedirect=!1)})}t===Le.EXECUTIONS&&(n=e.params.name!==s.params.name&&!(s.params.name==="new"&&e.params.name===void 0),n&&this.$store.commit("ui/setNodeViewInitialized",!1))},activeNode(){this.createNodeActive=!1},containsTrigger(s){s===!1?this.setRecenteredCanvasAddButtonPosition(this.getNodeViewOffsetPosition):this.tryToAddWelcomeSticky()}},async beforeRouteLeave(s,e,t){if(aa(s))t();else{if(e.name===O.TEMPLATE_IMPORT){t();return}if(this.$store.getters.getStateIsDirty){const o=await this.confirmModal(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),"warning",this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),!0);o===to?(await this.saveCurrentWorkflow({},!1)&&this.$store.dispatch("settings/fetchPromptsData"),this.$store.commit("setStateDirty",!1),t()):o===nl?(this.$store.commit("setStateDirty",!1),t()):o===eo&&t(!1)}else t()}},computed:{...F("users",["currentUser"]),...F("ui",["sidebarMenuCollapsed"]),...F("settings",["isOnboardingCallPromptFeatureEnabled"]),defaultLocale(){return this.$store.getters.defaultLocale},isEnglishLocale(){return this.defaultLocale==="en"},...F(["nativelyNumberSuffixedDefaults"]),activeNode(){return this.$store.getters["ndv/activeNode"]},executionWaitingForWebhook(){return this.$store.getters.executionWaitingForWebhook},isDemo(){return this.$route.name===O.DEMO},isExecutionView(){return this.$route.name===O.EXECUTION},showCanvasAddButton(){return this.loadingService===null&&!this.containsTrigger&&!this.isDemo&&!this.isExecutionView},lastSelectedNode(){return this.$store.getters.lastSelectedNode},nodes(){return this.$store.getters.allNodes},runButtonText(){return this.workflowRunning?this.executionWaitingForWebhook?this.$locale.baseText("nodeView.runButtonText.waitingForTriggerEvent"):this.$locale.baseText("nodeView.runButtonText.executingWorkflow"):this.$locale.baseText("nodeView.runButtonText.executeWorkflow")},workflowStyle(){const s=this.getNodeViewOffsetPosition;return{left:s[0]+"px",top:s[1]+"px"}},canvasAddButtonStyle(){return{"pointer-events":this.createNodeActive?"none":"all"}},backgroundStyle(){return R2(this.nodeViewScale,this.$store.getters.getNodeViewOffsetPosition,this.isExecutionPreview)},workflowClasses(){const s=[];return this.ctrlKeyPressed&&(this.$store.getters.isNodeViewMoveInProgress===!0?s.push("move-in-process"):s.push("move-active")),(this.selectActive||this.ctrlKeyPressed)&&s.push("do-not-select"),s},workflowExecution(){return this.$store.getters.getWorkflowExecution},workflowRunning(){return this.$store.getters.isActionActive("workflowRunning")},currentWorkflow(){return this.$route.params.name||this.$store.getters.workflowId},workflowName(){return this.$store.getters.workflowName},allTriggersDisabled(){return this.triggerNodes.filter(e=>e.disabled).length===this.triggerNodes.length},triggerNodes(){return this.nodes.filter(s=>s.type===di||this.$store.getters["nodeTypes/isTriggerNode"](s.type))},containsTrigger(){return this.triggerNodes.length>0},isExecutionDisabled(){return!this.containsTrigger||this.allTriggersDisabled},getNodeViewOffsetPosition(){return this.$store.getters.getNodeViewOffsetPosition}},data(){return{GRID_SIZE:Ze,STICKY_NODE_TYPE:nt,createNodeActive:!1,instance:c_.jsPlumb.getInstance(),lastSelectedConnection:null,lastClickPosition:[450,450],nodeViewScale:1,ctrlKeyPressed:!1,stopExecutionInProgress:!1,blankRedirect:!1,credentialsUpdated:!1,newNodeInsertPosition:null,pullConnActiveNodeName:null,pullConnActive:!1,dropPrevented:!1,renamingActive:!1,showStickyButton:!1,isExecutionPreview:!1,showTriggerMissingTooltip:!1,canvasAddButtonPosition:[1,1],workflowData:null}},beforeDestroy(){this.resetWorkspace(),document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp),this.unregisterCustomAction("showNodeCreator")},methods:{showTriggerMissingToltip(s){this.showTriggerMissingTooltip=s},onRunNode(s,e){const t=this.$store.getters.getNodeByName(s),i={node_type:t?t.type:null,workflow_id:this.$store.getters.workflowId,source:"canvas"};this.$telemetry.track("User clicked execute node button",i),this.$externalHooks().run("nodeView.onRunNode",i),this.runWorkflow(s,e)},async onRunWorkflow(){this.getWorkflowDataToSave().then(s=>{const e={workflow_id:this.$store.getters.workflowId,node_graph_string:JSON.stringify(Pi(s,this.getNodeTypes()).nodeGraph)};this.$telemetry.track("User clicked execute workflow button",e),this.$externalHooks().run("nodeView.onRunWorkflow",e)}),await this.runWorkflow()},onRunContainerClick(){if(this.containsTrigger&&!this.allTriggersDisabled)return;const s=this.containsTrigger&&this.allTriggersDisabled?this.$locale.baseText("nodeView.addOrEnableTriggerNode"):this.$locale.baseText("nodeView.addATriggerNodeFirst");this.registerCustomAction("showNodeCreator",()=>this.showTriggerCreator("no_trigger_execution_tooltip"));const e=this.$showMessage({type:"info",title:this.$locale.baseText("nodeView.cantExecuteNoTrigger"),message:s,duration:3e3,onClick:()=>setTimeout(()=>{this.createNodeActive&&e.close()},0)})},clearExecutionData(){this.$store.commit("setWorkflowExecutionData",null),this.updateNodesExecutionIssues()},translateName(s,e){return this.$locale.headerText({key:`headers.${this.$locale.shortNodeType(s)}.displayName`,fallback:e})},getUniqueNodeName({originalName:s,additionalUsedNames:e=[],type:t=""}){const i=this.$store.getters.allNodes.map(u=>u.name);if(s=this.isEnglishLocale?s:this.translateName(t,s),!i.includes(s)&&!e.includes(s))return s;let n=this.nativelyNumberSuffixedDefaults;n=this.isEnglishLocale?n:n.map(u=>{const h=u.toLowerCase().replace("_","");return this.translateName(h,u)});const o=n.find(u=>s.startsWith(u));let r,a,l,c,d=1;if(o)l=s.split(o).pop(),l&&(d=parseInt(l,10)),a=c=o;else{const u=s.match(/(.*\D+)(\d*)/);u===null?(d=parseInt(s,10),a="",c=a+d):([r,a,l]=u,l!==""&&(d=parseInt(l,10)),c=a)}for(;i.includes(c)||e.includes(c);)c=a+d++;return c},async onSaveKeyboardShortcut(){await this.saveCurrentWorkflow()&&this.$store.dispatch("settings/fetchPromptsData")},showTriggerCreator(s){this.createNodeActive||(this.$store.commit("nodeCreator/setSelectedType",ea),this.$store.commit("nodeCreator/setShowScrim",!0),this.onToggleNodeCreator({source:s,createNodeActive:!0}),this.$nextTick(()=>this.$store.commit("nodeCreator/setShowTabs",!1)))},async openExecution(s){var t,i;this.startLoading(),this.resetWorkspace();let e;try{e=await this.restApi().getExecution(s)}catch(n){this.$showError(n,this.$locale.baseText("nodeView.showError.openExecution.title"));return}if(e===void 0)throw new Error(`Execution with id "${s}" could not be found!`);if(this.$store.commit("setWorkflowName",{newName:e.workflowData.name,setStateDirty:!1}),this.$store.commit("setWorkflowId",fe),this.$store.commit("setWorkflowExecutionData",e),this.$store.commit("setWorkflowPinData",e.workflowData.pinData),await this.addNodes(Se(e.workflowData.nodes),Se(e.workflowData.connections)),this.$nextTick(()=>{this.zoomToFit(),this.$store.commit("setStateDirty",!1)}),this.$externalHooks().run("execution.open",{workflowId:e.workflowData.id,workflowName:e.workflowData.name,executionId:s}),this.$telemetry.track("User opened read-only execution",{workflow_id:e.workflowData.id,execution_mode:e.mode,execution_finished:e.finished}),!e.finished&&((i=(t=e.data)==null?void 0:t.resultData)==null?void 0:i.error)){let n=!1;if(e.data.resultData.runData){const o=e.data.resultData.runData;e:for(const r of Object.keys(o))for(const a of o[r])if(a.error){n=!0;break e}}if(!n){const o=e.data.resultData.error,r=this.$getExecutionError(e.data),a=o&&"node"in o&&o.node.type.startsWith("n8n-nodes-base");this.$showMessage({title:"Failed execution",message:r,type:"error"},a),e.data.resultData.error.stack&&(console.error(`Execution ${s} error:`),console.error(e.data.resultData.error.stack))}}e.waitTill&&this.$showMessage({title:this.$locale.baseText("nodeView.thisExecutionHasntFinishedYet"),message:`<a data-action="reload">${this.$locale.baseText("nodeView.refresh")}</a> ${this.$locale.baseText("nodeView.toSeeTheLatestStatus")}.<br/> <a href="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.wait/" target="_blank">${this.$locale.baseText("nodeView.moreInfo")}</a>`,type:"warning",duration:0}),this.stopLoading()},async importWorkflowExact(s){if(!s.workflow.nodes||!s.workflow.connections)throw new Error("Invalid workflow object");this.resetWorkspace(),s.workflow.nodes=Sh(s.workflow.nodes),await this.addNodes(s.workflow.nodes,s.workflow.connections),s.workflow.pinData&&this.$store.commit("setWorkflowPinData",s.workflow.pinData),this.$nextTick(()=>{this.zoomToFit()})},async openWorkflowTemplate(s){this.startLoading(),this.setLoadingText(this.$locale.baseText("nodeView.loadingTemplate")),this.resetWorkspace(),this.$store.commit("workflows/setCurrentWorkflowExecutions",[]),this.$store.commit("workflows/setActiveWorkflowExecution",null);let e;try{if(this.$externalHooks().run("template.requested",{templateId:s}),e=await this.$store.dispatch("templates/getWorkflowTemplate",s),!e)throw new Error(this.$locale.baseText("nodeView.workflowTemplateWithIdCouldNotBeFound",{interpolate:{templateId:s}}))}catch(t){this.$showError(t,this.$locale.baseText("nodeView.couldntImportWorkflow")),this.$router.replace({name:O.NEW_WORKFLOW});return}e.workflow.nodes=Sh(e.workflow.nodes),this.blankRedirect=!0,this.$router.replace({name:O.NEW_WORKFLOW,query:{templateId:s}}),await this.addNodes(e.workflow.nodes,e.workflow.connections),this.workflowData=await this.$store.dispatch("workflows/getNewWorkflowData",e.name),this.$nextTick(()=>{this.zoomToFit(),this.$store.commit("setStateDirty",!0)}),this.$externalHooks().run("template.open",{templateId:s,templateName:e.name,workflow:e.workflow}),this.stopLoading()},async openWorkflow(s){this.startLoading(),this.resetWorkspace();let e;try{e=await this.restApi().getWorkflow(s)}catch(n){this.$showError(n,this.$locale.baseText("nodeView.showError.openWorkflow.title"));return}if(!e)throw new Error(this.$locale.baseText("nodeView.workflowWithIdCouldNotBeFound",{interpolate:{workflowId:s}}));this.$store.commit("setActive",e.active||!1),this.$store.commit("setWorkflowId",s),this.$store.commit("setWorkflowName",{newName:e.name,setStateDirty:!1}),this.$store.commit("setWorkflowSettings",e.settings||{}),this.$store.commit("setWorkflowPinData",e.pinData||{}),this.$store.commit("setWorkflowHash",e.hash);const t=e.tags||[];this.$store.commit("tags/upsertTags",t);const i=t.map(n=>n.id);return this.$store.commit("setWorkflowTagIds",i||[]),await this.addNodes(e.nodes,e.connections),this.credentialsUpdated||this.$store.commit("setStateDirty",!1),this.zoomToFit(),this.$externalHooks().run("workflow.open",{workflowId:s,workflowName:e.name}),this.$store.commit("workflows/setActiveWorkflowExecution",null),this.stopLoading(),e},touchTap(s){this.isTouchDevice&&this.mouseDown(s)},mouseDown(s){this.lastClickPosition=this.getMousePositionWithinNodeView(s),this.mouseDownMouseSelect(s),this.mouseDownMoveWorkflow(s),this.createNodeActive=!1},mouseUp(s){this.mouseUpMouseSelect(s),this.mouseUpMoveWorkflow(s)},wheelScroll(s){if(s.ctrlKey){s.deltaY>0?this.zoomOut():this.zoomIn(),s.preventDefault();return}this.wheelMoveWorkflow(s)},keyUp(s){s.key===this.controlKeyCode&&(this.ctrlKeyPressed=!1)},async keyDown(s){const e=s.path||s.composedPath&&s.composedPath();for(const t of e)if(t.className&&typeof t.className=="string"&&t.className.includes("ignore-key-press"))return;if(!window.document.body.classList.contains("el-popup-parent--hidden")){if(s.key==="Escape"){this.createNodeActive=!1,this.activeNode&&(this.$externalHooks().run("dataDisplay.nodeEditingFinished"),this.$store.commit("ndv/setActiveNodeName",null));return}if(!this.activeNode){if(s.key==="d")this.callDebounced("deactivateSelectedNode",{debounceTime:350});else if(s.key==="Delete"||s.key==="Backspace")s.stopPropagation(),s.preventDefault(),this.callDebounced("deleteSelectedNodes",{debounceTime:500});else if(s.key==="Tab")this.onToggleNodeCreator({source:"tab",createNodeActive:!this.createNodeActive&&!this.isReadOnly});else if(s.key===this.controlKeyCode)this.ctrlKeyPressed=!0;else if(s.key==="F2"&&!this.isReadOnly){const t=this.lastSelectedNode;t!==null&&t.type!==nt&&this.callDebounced("renameNodePrompt",{debounceTime:1500},t.name)}else if((s.key==="="||s.key==="+")&&!this.isCtrlKeyPressed(s))this.zoomIn();else if((s.key==="_"||s.key==="-")&&!this.isCtrlKeyPressed(s))this.zoomOut();else if(s.key==="0"&&!this.isCtrlKeyPressed(s))this.resetZoom();else if(s.key==="1"&&!this.isCtrlKeyPressed(s))this.zoomToFit();else if(s.key==="a"&&this.isCtrlKeyPressed(s))s.stopPropagation(),s.preventDefault(),this.callDebounced("selectAllNodes",{debounceTime:1e3});else if(s.key==="c"&&this.isCtrlKeyPressed(s))this.callDebounced("copySelectedNodes",{debounceTime:1e3});else if(s.key==="x"&&this.isCtrlKeyPressed(s))s.stopPropagation(),s.preventDefault(),this.callDebounced("cutSelectedNodes",{debounceTime:1e3});else if(s.key==="n"&&this.isCtrlKeyPressed(s)&&s.altKey){if(s.stopPropagation(),s.preventDefault(),this.isDemo)return;this.$router.currentRoute.name===O.NEW_WORKFLOW?this.$root.$emit("newWorkflow"):this.$router.push({name:O.NEW_WORKFLOW}),this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.keyDown.title"),type:"success"})}else if(s.key==="s"&&this.isCtrlKeyPressed(s)){if(s.stopPropagation(),s.preventDefault(),this.isReadOnly)return;this.callDebounced("onSaveKeyboardShortcut",{debounceTime:1e3})}else if(s.key==="Enter"){const t=this.lastSelectedNode;if(t!==null){if(t.type===nt&&this.isReadOnly)return;this.$store.commit("ndv/setActiveNodeName",t.name)}}else if(s.key==="ArrowRight"&&s.shiftKey)s.stopPropagation(),s.preventDefault(),this.callDebounced("selectDownstreamNodes",{debounceTime:1e3});else if(s.key==="ArrowRight"){const t=this.lastSelectedNode;if(t===null)return;const i=this.$store.getters.outgoingConnectionsByNodeName(t.name);if(i.main===void 0||i.main.length===0)return;this.callDebounced("nodeSelectedByName",{debounceTime:100},i.main[0][0].node,!1,!0)}else if(s.key==="ArrowLeft"&&s.shiftKey)s.stopPropagation(),s.preventDefault(),this.callDebounced("selectUpstreamNodes",{debounceTime:1e3});else if(s.key==="ArrowLeft"){const t=this.lastSelectedNode;if(t===null)return;const i=this.getCurrentWorkflow();if(!i.connectionsByDestinationNode.hasOwnProperty(t.name))return;const n=i.connectionsByDestinationNode[t.name];if(n.main===void 0||n.main.length===0)return;this.callDebounced("nodeSelectedByName",{debounceTime:100},n.main[0][0].node,!1,!0)}else if(["ArrowUp","ArrowDown"].includes(s.key)){const t=this.lastSelectedNode;if(t===null)return;const i=this.getCurrentWorkflow();if(!i.connectionsByDestinationNode.hasOwnProperty(t.name))return;const n=i.connectionsByDestinationNode[t.name];if(!Array.isArray(n.main)||!n.main.length)return;const o=n.main[0][0].node,r=this.$store.getters.outgoingConnectionsByNodeName(o);if(!Array.isArray(r.main)||!r.main.length)return;let a,l=s.key==="ArrowUp"?-99999999:99999999,c=null;for(const d of r.main)for(const u of d)u.node!==t.name&&(a=this.$store.getters.getNodeByName(u.node),s.key==="ArrowUp"?a.position[1]<=t.position[1]&&a.position[1]>l&&(c=a.name,l=a.position[1]):a.position[1]>=t.position[1]&&a.position[1]<l&&(c=a.name,l=a.position[1]));c!==null&&this.callDebounced("nodeSelectedByName",{debounceTime:100},c,!1,!0)}}}},deactivateSelectedNode(){!this.editAllowedCheck()||this.disableNodes(this.$store.getters.getSelectedNodes)},deleteSelectedNodes(){this.$store.getters.getSelectedNodes.map(e=>e.name).forEach(e=>{this.removeNode(e)})},selectAllNodes(){this.nodes.forEach(s=>{this.nodeSelectedByName(s.name)})},selectUpstreamNodes(){const s=this.lastSelectedNode;if(s===null)return;this.deselectAllNodes();const e=this.getCurrentWorkflow();for(const t of e.getParentNodes(s.name))this.nodeSelectedByName(t);this.nodeSelectedByName(s.name)},selectDownstreamNodes(){const s=this.lastSelectedNode;if(s===null)return;this.deselectAllNodes();const e=this.getCurrentWorkflow();for(const t of e.getChildNodes(s.name))this.nodeSelectedByName(t);this.nodeSelectedByName(s.name)},pushDownstreamNodes(s,e){const t=this.$store.getters.nodesByName[s],n=this.getCurrentWorkflow().getChildNodes(s);for(const o of n){const r=this.$store.getters.nodesByName[o];if(r.position[0]<t.position[0])continue;const a={name:o,properties:{position:[r.position[0]+e,r.position[1]]}};this.$store.commit("updateNodeProperties",a),this.onNodeMoved(r)}},cutSelectedNodes(){const s=!this.isReadOnly;this.copySelectedNodes(s),s&&this.deleteSelectedNodes()},copySelectedNodes(s){this.getSelectedNodesToSave().then(e=>{const t={meta:{instanceId:this.$store.getters.instanceId},...e},i=JSON.stringify(t,null,2);this.copyToClipboard(i),e.nodes.length>0&&(s||this.$showMessage({title:"Copied!",message:"",type:"success"}),this.$telemetry.track("User copied nodes",{node_types:e.nodes.map(n=>n.type),workflow_id:this.$store.getters.workflowId}))})},resetZoom(){const{scale:s,offset:e}=P2({scale:this.nodeViewScale,offset:this.getNodeViewOffsetPosition});this.setZoomLevel(s),this.$store.commit("setNodeViewOffsetPosition",{newOffset:e})},zoomIn(){const{scale:s,offset:[e,t]}=uw({scale:this.nodeViewScale,offset:this.getNodeViewOffsetPosition});this.setZoomLevel(s),this.$store.commit("setNodeViewOffsetPosition",{newOffset:[e,t]})},zoomOut(){const{scale:s,offset:[e,t]}=dw({scale:this.nodeViewScale,offset:this.getNodeViewOffsetPosition});this.setZoomLevel(s),this.$store.commit("setNodeViewOffsetPosition",{newOffset:[e,t]})},setZoomLevel(s){this.nodeViewScale=s;const e=this.$refs.nodeView;if(!e)return;const t="scale("+s+")";["webkit","moz","ms","o"].forEach(i=>{e.style[i+"Transform"]=t}),e.style.transform=t,this.instance.setZoom(s)},setRecenteredCanvasAddButtonPosition(s){const e=A2(this.nodeViewScale,s||[0,0]);e[0]-=Co/2,e[1]-=Co/2,this.canvasAddButtonPosition=Zt(this.nodes,e)},getPlaceholderTriggerNodeUI(){return this.setRecenteredCanvasAddButtonPosition(),{id:st(),...b2,position:this.canvasAddButtonPosition}},getNodesWithPlaceholderNode(){const s=this.$store.getters.allNodes;return this.containsTrigger?s:[this.getPlaceholderTriggerNodeUI(),...s]},zoomToFit(){const s=this.getNodesWithPlaceholderNode();if(s.length===0)return;const{zoomLevel:e,offset:t}=L2(s,!this.isDemo);this.setZoomLevel(e),this.$store.commit("setNodeViewOffsetPosition",{newOffset:t})},async stopExecution(){const s=this.$store.getters.activeExecutionId;if(s!==null){try{this.stopExecutionInProgress=!0,await this.restApi().stopCurrentExecution(s),this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.stopExecutionTry.title"),type:"success"})}catch(e){const t=await this.restApi().getExecution(s);if(t!=null&&t.finished){const i={data:t.data,finished:t.finished,mode:t.mode,startedAt:t.startedAt,stoppedAt:t.stoppedAt},n={data:i,executionId:s,retryOf:t.retryOf};this.$store.commit("finishActiveExecution",n),this.$titleSet(t.workflowData.name,"IDLE"),this.$store.commit("setExecutingNode",null),this.$store.commit("setWorkflowExecutionData",i),this.$store.commit("removeActiveAction","workflowRunning"),this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.stopExecutionCatch.title"),message:this.$locale.baseText("nodeView.showMessage.stopExecutionCatch.message"),type:"success"})}else this.$showError(e,this.$locale.baseText("nodeView.showError.stopExecution.title"))}this.stopExecutionInProgress=!1,this.getWorkflowDataToSave().then(e=>{const t={workflow_id:this.$store.getters.workflowId,node_graph_string:JSON.stringify(Pi(e,this.getNodeTypes()).nodeGraph)};this.$telemetry.track("User clicked stop workflow execution",t)})}},async stopWaitingForWebhook(){try{await this.restApi().removeTestWebhook(this.$store.getters.workflowId)}catch(s){this.$showError(s,this.$locale.baseText("nodeView.showError.stopWaitingForWebhook.title"));return}},async receivedCopyPasteData(s){let e;if(this.editAllowedCheck()!==!1){if(s.match(/^http[s]?:\/\/.*\.json$/i)){if(!this.editAllowedCheck()||!await this.confirmMessage(this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.message",{interpolate:{plainTextData:s}}),this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.headline"),"warning",this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.confirmButtonText"),this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.cancelButtonText"))||(e=await this.getWorkflowDataFromUrl(s),e===void 0))return}else try{if(e=JSON.parse(s),!this.editAllowedCheck())return}catch{return}return this.importWorkflowData(e,!1,"paste")}},async getWorkflowDataFromUrl(s){let e;this.startLoading();try{e=await this.restApi().getWorkflowFromUrl(s)}catch(t){this.stopLoading(),this.$showError(t,this.$locale.baseText("nodeView.showError.getWorkflowDataFromUrl.title"));return}return this.stopLoading(),e},async importWorkflowData(s,e=!0,t){if(!(!s.hasOwnProperty("nodes")||!s.hasOwnProperty("connections")))try{const i={};s.nodes&&s.nodes.forEach(l=>{if(l.id){const c=st();i[c]=l.id,l.id=c}else l.id=st()});const n=this.$store.getters.instanceId,o=JSON.stringify(Pi(s,this.getNodeTypes(),{nodeIdMap:i,sourceInstanceId:s.meta&&s.meta.instanceId!==n?s.meta.instanceId:""}).nodeGraph);t==="paste"?this.$telemetry.track("User pasted nodes",{workflow_id:this.$store.getters.workflowId,node_graph_string:o}):this.$telemetry.track("User imported workflow",{source:t,workflow_id:this.$store.getters.workflowId,node_graph_string:o}),this.deselectAllNodes(),this.updateNodePositions(s,Zt(this.nodes,this.lastClickPosition));const r=await this.addNodesToWorkflow(s);setTimeout(()=>{r.nodes.forEach(l=>{this.nodeSelectedByName(l.name)})}),s.pinData&&this.$store.commit("setWorkflowPinData",s.pinData);const a=this.$store.getters["settings/areTagsEnabled"];if(e&&a&&Array.isArray(s.tags)){const l=await this.$store.dispatch("tags/fetchAll"),c=new Set(l.map(f=>f.name)),d=s.tags,u=d.filter(f=>!c.has(f.name)),h=[];for(const f of u){const w=this.$store.dispatch("tags/create",f.name).then(g=>(l.push(g),g));h.push(w)}await Promise.all(h);const p=d.reduce((f,w)=>{const g=l.find(v=>v.name===w.name);return g&&f.push(g.id),f},[]);this.$store.commit("addWorkflowTagIds",p)}}catch(i){this.$showError(i,this.$locale.baseText("nodeView.showError.importWorkflowData.title"))}},onDragOver(s){s.preventDefault()},onDrop(s){if(!s.dataTransfer)return;const e=s.dataTransfer.getData("nodeTypeName");if(e){const t=this.getMousePositionWithinNodeView(s);this.addNode(e,{position:[t[0]-Wt/2,t[1]-Wt/2],dragAndDrop:!0}),this.createNodeActive=!1}},nodeDeselectedByName(s){const e=this.$store.getters.getNodeByName(s);e&&this.nodeDeselected(e)},nodeSelectedByName(s,e=!1,t){t===!0&&this.deselectAllNodes();const i=this.$store.getters.getNodeByName(s);i&&this.nodeSelected(i),this.$store.commit("setLastSelectedNode",i.name),this.$store.commit("setLastSelectedNodeOutputIndex",null),this.lastSelectedConnection=null,this.newNodeInsertPosition=null,e&&this.$store.commit("ndv/setActiveNodeName",i.name)},showMaxNodeTypeError(s){const e=s.maxNodes;this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.showMaxNodeTypeError.title"),message:this.$locale.baseText("nodeView.showMessage.showMaxNodeTypeError.message",{adjustToNumber:e,interpolate:{nodeTypeDataDisplayName:s.displayName}}),type:"error",duration:0})},async getNewNodeWithDefaultCredential(s){var i,n,o;const e={id:st(),name:s.defaults.name,type:s.name,typeVersion:Array.isArray(s.version)?s.version.slice(-1)[0]:s.version,position:[0,0],parameters:{}},t=s.credentials&&s.credentials.map(r=>this.$store.getters["credentials/getCredentialsByType"](r.name)).flat();if(t&&t.length===1){const r=t[0],a=this.$store.getters["credentials/getCredentialById"](r.id),l={id:a.id,name:a.name},c={[r.type]:l};await this.loadNodesProperties([e].map(h=>({name:h.type,version:h.typeVersion})));const d=this.$store.getters["nodeTypes/getNodeType"](e.type,e.typeVersion),u=Ht(d.properties,{},!0,!1,e);if(s.credentials){const h=s.credentials.find(f=>f.name===r.type);if((i=h==null?void 0:h.displayOptions)!=null&&i.hide)return e;const p=(n=h==null?void 0:h.displayOptions)==null?void 0:n.show;if(!p)return e.credentials=c,e;if(Object.keys(p).length===1&&p.authentication){e.credentials=c;let f={};for(const w of Object.keys(p)){if(u&&!u[w]){f={},e.credentials=void 0;break}const g=(o=p[w])==null?void 0:o[0];g&&typeof g=="string"&&(f[w]=g),e.parameters={...e.parameters,...f}}}}}return e},async injectNode(s,e={}){const t=this.$store.getters["nodeTypes/getNodeType"](s);if(t===null){this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.addNodeButton.title"),message:this.$locale.baseText("nodeView.showMessage.addNodeButton.message",{interpolate:{nodeTypeName:s}}),type:"error"});return}if(t.maxNodes!==void 0&&this.getNodeTypeCount(s)>=t.maxNodes){this.showMaxNodeTypeError(t);return}const i=await this.getNewNodeWithDefaultCredential(t),n=this.lastSelectedNode;if(e.position)i.position=Zt(this.getNodesWithPlaceholderNode(),e.position);else if(n){const o=this.lastSelectedConnection;if(o){const[r]=pw(o);r<=y2&&this.pushDownstreamNodes(n.name,yh)}if(this.newNodeInsertPosition)i.position=Zt(this.nodes,[this.newNodeInsertPosition[0]+Ze,this.newNodeInsertPosition[1]-Wt/2]),this.newNodeInsertPosition=null;else{let r=0;if(o){const a=this.$store.getters["nodeTypes/getNodeType"](n.type,n.typeVersion),l=[[-100,100],[-140,0,140],[-240,-100,100,240]];if(a&&a.outputs.length>1){const c=l[a.outputs.length-2],d=o.__meta?o.__meta.sourceOutputIndex:0;r=c[d]}}i.position=Zt(this.nodes,[n.position[0]+yh,n.position[1]+r],[100,0])}}else{const o=this.$store.getters["nodeTypes/isTriggerNode"](s)&&!this.containsTrigger?this.canvasAddButtonPosition:this.lastClickPosition;i.position=Zt(this.nodes,o)}if(i.name=this.getUniqueNodeName({originalName:i.name,type:i.type}),t.webhooks&&t.webhooks.length&&(i.webhookId=st()),await this.addNodes([i]),this.$store.commit("setStateDirty",!0),s===nt)this.$telemetry.trackNodesPanel("nodeView.addSticky",{workflow_id:this.$store.getters.workflowId});else{this.$externalHooks().run("nodeView.addNodeButton",{nodeTypeName:s});const o={node_type:s,workflow_id:this.$store.getters.workflowId,drag_and_drop:e.dragAndDrop};n&&(o.input_node_type=n.type),this.$telemetry.trackNodesPanel("nodeView.addNodeButton",o)}return this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(i.name,s!==nt)}),i},getConnection(s,e,t,i){const n=this.$store.getters.outgoingConnectionsByNodeName(s).main;if(n){const o=n[e];if(o)return o.find(r=>r.node===t&&r.index===i)}},connectTwoNodes(s,e,t,i){if(this.getConnection(s,e,t,i))return;const n=[{node:s,type:"main",index:e},{node:t,type:"main",index:i}];this.__addConnection(n,!0)},async addNode(s,e={}){if(!this.editAllowedCheck())return;const t=this.lastSelectedConnection,i=this.lastSelectedNode,n=this.$store.getters.lastSelectedNodeOutputIndex,o=await this.injectNode(s,e);if(!o)return;const r=n||0;if(i){if(await m.nextTick(),t&&t.__meta){this.__deleteJSPlumbConnection(t);const a=t.__meta.targetNodeName,l=t.__meta.targetOutputIndex;this.connectTwoNodes(o.name,0,a,l)}this.connectTwoNodes(i.name,r,o.name,0)}},initNodeView(){this.instance.importDefaults({Connector:x2,Endpoint:["Dot",{radius:5}],DragOptions:{cursor:"pointer",zIndex:5e3},PaintStyle:mi,HoverPaintStyle:cw,ConnectionOverlays:k2,Container:"#node-view"});const s=t=>{const i=this.$store.getters.getNodeById(t.sourceId);!i||(this.$store.commit("setLastSelectedNode",i.name),this.$store.commit("setLastSelectedNodeOutputIndex",t.index),this.newNodeInsertPosition=null,t.connection&&(this.lastSelectedConnection=t.connection),this.onToggleNodeCreator({source:t.eventSource,createNodeActive:!0}))};this.instance.bind("connectionAborted",t=>{try{if(this.dropPrevented){this.dropPrevented=!1;return}if(this.pullConnActiveNodeName){const n=this.$store.getters.getNodeById(t.sourceId).name,o=t.getParameters().index;this.connectTwoNodes(n,o,this.pullConnActiveNodeName,0),this.pullConnActiveNodeName=null;return}s({sourceId:t.sourceId,index:t.getParameters().index,eventSource:"node_connection_drop"})}catch(i){console.error(i)}}),this.instance.bind("beforeDrop",t=>{try{const i=t.connection.endpoints[0].getParameters(),n=t.dropEndpoint.getParameters(),o=this.$store.getters.getNodeById(i.nodeId).name,r=this.$store.getters.getNodeById(n.nodeId).name;return this.getConnection(o,i.index,r,n.index)?(this.dropPrevented=!0,this.pullConnActiveNodeName=null,!1):!0}catch(i){return console.error(i),!0}});let e=null;this.instance.bind("connection",t=>{try{const i=t.sourceEndpoint.getParameters(),n=t.targetEndpoint.getParameters(),o=this.$store.getters.getNodeById(i.nodeId).name,r=this.$store.getters.getNodeById(n.nodeId).name;if(t.connection.__meta={sourceNodeName:o,sourceOutputIndex:i.index,targetNodeName:r,targetOutputIndex:n.index},xi(t.connection),!this.isReadOnly){let a,l;t.connection.bind("mouseover",c=>{try{if(a!==void 0&&(clearTimeout(a),a=void 0),l||!t.connection||t.connection===e)return;xh(e),l=setTimeout(()=>{l=void 0,t.connection&&(e=t.connection,M2(t.connection))},150)}catch(d){console.error(d)}}),t.connection.bind("mouseout",c=>{try{if(a||(l&&(clearTimeout(l),l=void 0),!t.connection||e!==t.connection))return;a=setTimeout(()=>{a=void 0,t.connection&&e===t.connection&&(xh(e),e=null)},500)}catch(d){console.error(d)}}),V2(t.connection,()=>{e=null,this.__deleteJSPlumbConnection(t.connection)},()=>{setTimeout(()=>{s({sourceId:t.sourceId,index:i.index,connection:t.connection,eventSource:"node_connection_action"})},150)})}U2(t.targetEndpoint),this.$store.commit("addConnection",{connection:[{node:o,type:i.type,index:i.index},{node:r,type:n.type,index:n.index}],setStateDirty:!0})}catch(i){console.error(i)}}),this.instance.bind("connectionMoved",t=>{try{kh(t.originalTargetEndpoint);const i=t.originalSourceEndpoint.getParameters(),n=t.originalTargetEndpoint.getParameters(),o=[{node:this.$store.getters.getNodeById(i.nodeId).name,type:i.type,index:i.index},{node:this.$store.getters.getNodeById(n.nodeId).name,type:n.type,index:n.index}];this.__removeConnection(o,!1)}catch(i){console.error(i)}}),this.instance.bind("connectionDetached",t=>{try{if(kh(t.targetEndpoint),t.connection.removeOverlays(),this.__removeConnectionByConnectionInfo(t,!1),this.pullConnActiveNodeName){const n=this.$store.getters.getNodeById(t.connection.sourceId).name,o=t.connection.getParameters().index;this.connectTwoNodes(n,o,this.pullConnActiveNodeName,0),this.pullConnActiveNodeName=null}}catch(i){console.error(i)}}),this.instance.bind("connectionDrag",t=>{try{this.pullConnActiveNodeName=null,this.pullConnActive=!0,this.newNodeInsertPosition=null,xi(t);const i=[...document.querySelectorAll(".node-default")],n=r=>{if(!t)return;const a=document.querySelector(".jtk-endpoint.dropHover");if(a){Th(t,a._jsPlumb);return}const l=24;i.find(d=>{const{top:u,left:h,right:p,bottom:f}=d.getBoundingClientRect(),[w,g]=Do(r);if(u<=g&&f>=g&&h-l<=w&&p>=w){const v=d.dataset.name,y=this.$store.getters.getNodeByName(v);if(y){const S=this.$store.getters["nodeTypes/getNodeType"](y.type,y.typeVersion);if(S&&S.inputs&&S.inputs.length===1){this.pullConnActiveNodeName=y.name;const T=this.getInputEndpointUUID(v,0);if(T){const $=this.instance.getEndpoint(T);return Th(t,$),!0}}}}return!1})||(Q2(t),this.pullConnActiveNodeName=null)},o=r=>{this.pullConnActive=!1,this.newNodeInsertPosition=this.getMousePositionWithinNodeView(r),B2(t),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",n),window.addEventListener("touchmove",n),window.addEventListener("mouseup",o),window.addEventListener("touchend",n)}catch(i){console.error(i)}}),this.instance.bind("plusEndpointClick",t=>{t&&t.__meta&&s({sourceId:t.__meta.nodeId,index:t.__meta.index,eventSource:"plus_endpoint"})})},async newWorkflow(){this.startLoading(),await this.resetWorkspace(),this.workflowData=await this.$store.dispatch("workflows/getNewWorkflowData"),this.$store.commit("workflows/setCurrentWorkflowExecutions",[]),this.$store.commit("workflows/setActiveWorkflowExecution",null),this.$store.commit("setStateDirty",!1),this.setZoomLevel(1),this.zoomToFit()},tryToAddWelcomeSticky:d_(async function(){var e,t;const s=this.workflowData;if(((t=(e=window.posthog)==null?void 0:e.getFeatureFlag)==null?void 0:t.call(e,"welcome-note"))==="test"&&(s==null?void 0:s.onboardingFlowEnabled)&&!this.isReadOnly){const i=Ze+Wt;let n=[...this.triggerNodes[0].position];n[0]-=Hr.parameters.width+Ze*4,n=Zt(this.nodes,n,[i,i]),await this.addNodes([{id:st(),...Hr,parameters:{...Hr.parameters,content:this.$locale.baseText("onboardingWorkflow.stickyContent")},position:n}]),this.$telemetry.track("welcome note inserted")}this.$store.commit("ui/setNodeViewInitialized",!0),this.$store.commit("workflows/setActiveWorkflowExecution",null),this.stopLoading()}),async initView(){var s;if(this.$route.params.action==="workflowSave")return this.$store.commit("setStateDirty",!1),Promise.resolve();if(this.blankRedirect)this.blankRedirect=!1;else if(this.$route.name===O.TEMPLATE_IMPORT){const e=this.$route.params.id;await this.openWorkflowTemplate(e)}else if(this.isExecutionView){const e=this.$route.params.id;await this.openExecution(e)}else{if(this.$store.getters.getStateIsDirty){const i=await this.confirmModal(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),"warning",this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),!0);if(i===to)await this.saveCurrentWorkflow()&&this.$store.dispatch("settings/fetchPromptsData");else if(i===eo)return Promise.resolve()}let t=null;if(this.$route.params.name&&(t=this.$route.params.name),t!==null){const i=await this.restApi().getWorkflow(t);i?(this.$titleSet(i.name,"IDLE"),await this.openWorkflow(t)):(this.$router.push({name:O.NEW_WORKFLOW}),this.$showMessage({title:"Error",message:this.$locale.baseText("openWorkflow.workflowNotFoundError"),type:"error"}))}else((s=this.$route.meta)==null?void 0:s.nodeView)===!0&&await this.newWorkflow()}this.$store.commit("ui/setNodeViewInitialized",!0),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),window.addEventListener("beforeunload",e=>{if(!this.isDemo)if(this.$store.getters.getStateIsDirty===!0){const t=this.$locale.baseText("nodeView.itLooksLikeYouHaveBeenEditingSomething");return(e||window.event).returnValue=t,t}else{this.startLoading(this.$locale.baseText("nodeView.redirecting"));return}})},getOutputEndpointUUID(s,e){const t=this.$store.getters.getNodeByName(s);return t?Io(t.id,e):null},getInputEndpointUUID(s,e){const t=this.$store.getters.getNodeByName(s);return t?Ha(t.id,e):null},__addConnection(s,e=!1){if(e){const t=this.getOutputEndpointUUID(s[0].node,s[0].index),i=this.getInputEndpointUUID(s[1].node,s[1].index);if(!t||!i)return;const n=[t,i];this.instance.connect({uuids:n,detachable:!this.isReadOnly})}else{const t={connection:s,setStateDirty:!1};this.$store.commit("addConnection",t)}setTimeout(()=>{this.addPinDataConnections(this.$store.getters.pinData)})},__removeConnection(s,e=!1){if(e){const t=this.$store.getters.getNodeByName(s[0].node),i=this.$store.getters.getNodeByName(s[1].node);this.instance.getConnections({source:t,target:i}).forEach(o=>{this.__deleteJSPlumbConnection(o)})}this.$store.commit("removeConnection",{connection:s})},__deleteJSPlumbConnection(s){s.removeOverlays();const e=s.endpoints&&s.endpoints[0];this.pullConnActiveNodeName=null,this.instance.deleteConnection(s),e&&this.instance.getEndpoints(e.elementId).forEach(i=>i.repaint())},__removeConnectionByConnectionInfo(s,e=!1){const t=s.sourceEndpoint.getParameters(),i=this.$store.getters.getNodeById(t.nodeId),n=s.targetEndpoint.getParameters(),o=this.$store.getters.getNodeById(n.nodeId);if(i&&o){const r=[{node:i.name,type:t.type,index:t.index},{node:o.name,type:n.type,index:n.index}];e&&this.__deleteJSPlumbConnection(s.connection),this.$store.commit("removeConnection",{connection:r})}},async duplicateNode(s){if(!this.editAllowedCheck())return;const e=this.$store.getters.getNodeByName(s),t=this.$store.getters["nodeTypes/getNodeType"](e.type,e.typeVersion);if(t&&t.maxNodes!==void 0&&this.getNodeTypeCount(e.type)>=t.maxNodes){this.showMaxNodeTypeError(t);return}const i=Se(this.getNodeDataToSave(e));i.id=st(),i.name=this.getUniqueNodeName({originalName:i.name,type:i.type}),i.position=Zt(this.nodes,[e.position[0],e.position[1]+140],[0,140]),i.webhookId&&(i.webhookId=st()),await this.addNodes([i]);const n=this.$store.getters.pinDataByNodeName(s);n&&this.$store.commit("pinData",{node:i,data:n}),this.$store.commit("setStateDirty",!0),this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(i.name,!1)}),this.$telemetry.track("User duplicated node",{node_type:e.type,workflow_id:this.$store.getters.workflowId})},getJSPlumbConnection(s,e,t,i){const n=this.$store.getters.getNodeByName(s),o=this.$store.getters.getNodeByName(t);if(!n||!o)return;const r=n.id,a=o.id,l=Io(r,e),c=Ha(a,i);return this.instance.getConnections({source:r,target:a}).find(u=>{const h=u.getUuids();return h[0]===l&&h[1]===c})},getJSPlumbEndpoints(s){const e=this.$store.getters.getNodeByName(s);return this.instance.getEndpoints(e.id)},getPlusEndpoint(s,e){return this.getJSPlumbEndpoints(s).find(i=>i.type==="N8nPlus"&&i.__meta&&i.__meta.index===e)},getIncomingOutgoingConnections(s){const e=this.$store.getters.getNodeByName(s),t=this.instance.getConnections({source:e.id});return{incoming:this.instance.getConnections({target:e.id}),outgoing:t}},onNodeMoved(s){const{incoming:e,outgoing:t}=this.getIncomingOutgoingConnections(s.name);[...e,...t].forEach(i=>{ir(i),Zl(i)})},onNodeRun({name:s,data:e,waiting:t}){const i=this.$store.getters.pinData;if(i&&i[s])return;const n=s,r=this.$store.getters.getNodeByName(n).id;if(e===null||e.length===0||t){this.instance.getConnections({source:r}).forEach(u=>{xi(u)}),this.getJSPlumbEndpoints(n).forEach(u=>{u.type==="N8nPlus"&&u.endpoint.clearSuccessOutput()});return}const a=this.$store.getters.outgoingConnectionsByNodeName(n).main,l=W2(e,a||[]);Object.keys(l).forEach(c=>{Object.keys(l[c]).forEach(d=>{Object.keys(l[c][d]).forEach(u=>{if(d){const p=this.getJSPlumbConnection(n,parseInt(c,10),d,parseInt(u,10));if(p){const f=l[c][d][u];!f||!f.total?xi(p):$h(p,f)}}const h=this.getPlusEndpoint(n,parseInt(c,10));if(h&&h.endpoint){const p=l[c][Ti][0];p&&p.total>0?h.endpoint.setSuccessOutput(mw(p)):h.endpoint.clearSuccessOutput()}})})})},removeNode(s){if(!this.editAllowedCheck())return;const e=this.$store.getters.getNodeByName(s);if(!e)return;const t=[];if(t.includes(e.type)){let o=!1;for(const r of this.nodes)if(r.name!==e.name&&t.includes(r.type)){o=!0;break}if(!o)return}e.type===nt?this.$telemetry.track("User deleted workflow note",{workflow_id:this.$store.getters.workflowId,is_welcome_note:e.name===Xa}):(this.$externalHooks().run("node.deleteNode",{node:e}),this.$telemetry.track("User deleted node",{node_type:e.type,workflow_id:this.$store.getters.workflowId}));let i=!1;const n=this.$store.getters["nodeTypes/getNodeType"](e.type,e.typeVersion);if(n&&n.outputs.length===1&&n.inputs.length===1){const{incoming:o,outgoing:r}=this.getIncomingOutgoingConnections(e.name);if(o.length===1&&r.length===1){const a=o[0],l=r[0];if(a.__meta&&l.__meta){i=!0;const c=a.__meta.sourceNodeName,d=a.__meta.sourceOutputIndex,u=l.__meta.targetNodeName,h=l.__meta.targetOutputIndex;setTimeout(()=>{this.connectTwoNodes(c,d,u,h),i&&(this.instance.setSuspendDrawing(!1,!0),i=!1)},100)}}}setTimeout(()=>{this.instance.setSuspendDrawing(!0),this.instance.removeAllEndpoints(e.id),this.instance.destroyDraggable(e.id),this.$store.commit("removeAllNodeConnection",e),this.$store.commit("removeNode",e),this.$store.commit("clearNodeExecutionData",e.name),i||this.instance.setSuspendDrawing(!1,!0),this.$store.commit("removeNodeFromSelection",e)},0)},valueChanged(s){s.name==="name"&&s.oldValue&&this.renameNode(s.oldValue,s.value)},async renameNodePrompt(s){try{const e=this.$prompt(this.$locale.baseText("nodeView.prompt.newName")+":",this.$locale.baseText("nodeView.prompt.renameNode")+`: ${s}`,{customClass:"rename-prompt",confirmButtonText:this.$locale.baseText("nodeView.prompt.rename"),cancelButtonText:this.$locale.baseText("nodeView.prompt.cancel"),inputErrorMessage:this.$locale.baseText("nodeView.prompt.invalidName"),inputValue:s});await m.nextTick();const t=document.querySelector(".rename-prompt .el-input__inner");t&&(t.focus(),t.select());const i=await e;this.renameNode(s,i.value)}catch{}},async renameNode(s,e){if(s===e)return;const i=(this.activeNode&&this.activeNode.name)===s;i&&(this.renamingActive=!0),e=this.getUniqueNodeName({originalName:e});const n=this.getCurrentWorkflow(!0);n.renameNode(s,e),this.$store.commit("renameNodeSelectedAndExecution",{old:s,new:e}),this.deleteEveryEndpoint(),this.$store.commit("removeAllConnections"),this.$store.commit("removeAllNodes",{setStateDirty:!0}),await m.nextTick(),await this.addNodes(Object.values(n.nodes),n.connectionsBySourceNode),this.deselectAllNodes(),this.nodeSelectedByName(e),i&&(this.$store.commit("ndv/setActiveNodeName",e),this.renamingActive=!1)},deleteEveryEndpoint(){this.instance&&(this.$store.getters.allNodes.forEach(e=>{try{this.instance.destroyDraggable(e.id)}catch(t){console.error(t)}}),this.instance.deleteEveryEndpoint())},matchCredentials(s){!s.credentials||Object.entries(s.credentials).forEach(([e,t])=>{const i=this.$store.getters["credentials/getCredentialsByType"](e);if(typeof t=="string"&&(t={id:null,name:t},this.credentialsUpdated=!0),t.id){const o=t.id.toString(),r=i.find(a=>a.id===o);if(r){(r.name!==t.name||typeof t.id=="number")&&(s.credentials[e]={id:r.id,name:r.name},this.credentialsUpdated=!0);return}}s.credentials[e]=t;const n=i.filter(o=>o.name===t.name);n.length===1&&(s.credentials[e].id=n[0].id,this.credentialsUpdated=!0)})},async addNodes(s,e){if(!s||!s.length)return;await this.loadNodesProperties(s.map(n=>({name:n.type,version:n.typeVersion})));let t,i;if(s.forEach(n=>{if(n.id||(n.id=st()),t=this.$store.getters["nodeTypes/getNodeType"](n.type,n.typeVersion),n.hasOwnProperty("disabled")||(n.disabled=!1),n.hasOwnProperty("parameters")||(n.parameters={}),t!==null){let o=null;try{o=Ht(t.properties,n.parameters,!0,!1,n)}catch(r){console.error(this.$locale.baseText("nodeView.thereWasAProblemLoadingTheNodeParametersOfNode")+`: "${n.name}"`),console.error(r)}n.parameters=o!==null?o:{},n.type===xt&&n.parameters.path===""&&(n.parameters.path=n.webhookId)}this.matchCredentials(n),i=this.getNodeIssues(t,n),i!==null&&(n.issues=i),this.$store.commit("addNode",n)}),await m.nextTick(),this.instance.setSuspendDrawing(!0),e!==void 0){let n;for(const o of Object.keys(e))for(const r of Object.keys(e[o]))for(let a=0;a<e[o][r].length;a++){const l=e[o][r][a];!l||l.forEach(c=>{n=[{node:o,type:r,index:a},{node:c.node,type:c.type,index:c.index}],this.__addConnection(n,!0)})}}this.instance.setSuspendDrawing(!1,!0)},async addNodesToWorkflow(s){const e={},t=[];if(!s.nodes)throw new Error(this.$locale.baseText("nodeView.noNodesGivenToAdd"));const i=this.getNodeTypesMaxCount();let n,o;const r=[];await this.loadNodesProperties(s.nodes.map(g=>({name:g.type,version:g.typeVersion}))),s.nodes.forEach(g=>{if(i[g.type]!==void 0)if(i[g.type].exist>=i[g.type].max){e[g.name]=i[g.type].nodeNames[0];return}else i[g.type].exist+=1;n=g.name,o=this.getUniqueNodeName({originalName:g.name,additionalUsedNames:t,type:g.type}),t.push(o),e[n]=o,r.push(g)});const a={},l=s.connections,c=r.map(g=>g.name);let d,u,h,p,f;for(d of Object.keys(l)){if(!c.includes(d))continue;const g={};for(u of Object.keys(l[d]))for(g[u]=[],h=0;h<l[d][u].length;h++){const v=[];if(l[d][u][h])for(p=0;p<l[d][u][h].length;p++)f=l[d][u][h][p],c.includes(f.node)&&v.push(f);g[u].push(v)}a[d]=g}const w=this.getWorkflow(r,a);for(n in e)n!==e[n]&&w.renameNode(n,e[n]);return await this.addNodes(Object.values(w.nodes),w.connectionsBySourceNode),this.$store.commit("setStateDirty",!0),{nodes:Object.values(w.nodes),connections:w.connectionsBySourceNode}},getSelectedNodesToSave(){const s={nodes:[],connections:{}};let e;const t=[];for(const d of this.$store.getters.getSelectedNodes){try{e=this.getNodeDataToSave(d),t.push(d.name)}catch(u){return Promise.reject(u)}s.nodes.push(e)}let i,n,o,r,a,l,c;return s.nodes.forEach(d=>{if(n=this.$store.getters.outgoingConnectionsByNodeName(d.name),Object.keys(n).length!==0){c={};for(o of Object.keys(n))for(a=0;a<n[o].length;a++){for(i=[],r=0;r<n[o][a].length;r++)l=n[o][a][r],t.indexOf(l.node)!==-1&&i.push(l);i.length&&(c.hasOwnProperty(o)||(c[o]=[]),c[o][a]=i)}Object.keys(c).length&&(s.connections[d.name]=c)}}),Promise.resolve(s)},resetWorkspace(){return this.deleteEveryEndpoint(),this.executionWaitingForWebhook&&this.restApi().removeTestWebhook(this.$store.getters.workflowId).catch(()=>{}),this.$store.commit("removeAllConnections",{setStateDirty:!1}),this.$store.commit("removeAllNodes",{setStateDirty:!1,removePinData:!0}),this.$store.commit("setWorkflowExecutionData",null),this.$store.commit("resetAllNodesIssues"),this.$store.commit("setActive",!1),this.$store.commit("setWorkflowId",fe),this.$store.commit("setWorkflowName",{newName:"",setStateDirty:!1}),this.$store.commit("setWorkflowSettings",{}),this.$store.commit("setWorkflowTagIds",[]),this.$store.commit("setActiveExecutionId",null),this.$store.commit("setExecutingNode",null),this.$store.commit("removeActiveAction","workflowRunning"),this.$store.commit("setExecutionWaitingForWebhook",!1),this.$store.commit("resetSelectedNodes"),this.$store.commit("setNodeViewOffsetPosition",{newOffset:[0,0],setStateDirty:!1}),Promise.resolve()},async loadActiveWorkflows(){const s=await this.restApi().getActiveWorkflows();this.$store.commit("setActiveWorkflows",s)},async loadNodeTypes(){await this.$store.dispatch("nodeTypes/getNodeTypes")},async loadCredentialTypes(){await this.$store.dispatch("credentials/fetchCredentialTypes",!0)},async loadCredentials(){await this.$store.dispatch("credentials/fetchAllCredentials"),await this.$store.dispatch("credentials/fetchForeignCredentials")},async loadNodesProperties(s){const e=this.$store.getters["nodeTypes/allNodeTypes"],t=[];e.forEach(i=>{const n=Array.isArray(i.version)?i.version:[i.version];!!s.find(o=>o.name===i.name&&n.includes(o.version))&&!i.hasOwnProperty("properties")&&t.push({name:i.name,version:Array.isArray(i.version)?i.version.slice(-1)[0]:i.version})}),t.length>0&&(this.startLoading(),await this.$store.dispatch("nodeTypes/getNodesInformation",t),this.stopLoading())},async onPostMessageReceived(s){try{const e=JSON.parse(s.data);if(e&&e.command==="openWorkflow")try{await this.importWorkflowExact(e),this.isExecutionPreview=!1}catch(t){window.top&&window.top.postMessage(JSON.stringify({command:"error",message:this.$locale.baseText("openWorkflow.workflowImportError")}),"*"),this.$showMessage({title:this.$locale.baseText("openWorkflow.workflowImportError"),message:t.message,type:"error"})}else if(e&&e.command==="openExecution")try{await this.openExecution(e.executionId),this.isExecutionPreview=!0}catch(t){window.top&&window.top.postMessage(JSON.stringify({command:"error",message:this.$locale.baseText("nodeView.showError.openExecution.title")}),"*"),this.$showMessage({title:this.$locale.baseText("nodeView.showError.openExecution.title"),message:t.message,type:"error"})}}catch{}},async onImportWorkflowDataEvent(s){await this.importWorkflowData(s.data,void 0,"file")},async onImportWorkflowUrlEvent(s){const e=await this.getWorkflowDataFromUrl(s.url);e!==void 0&&await this.importWorkflowData(e,void 0,"url")},addPinDataConnections(s){Object.keys(s).forEach(e=>{const t=this.$store.getters.getNodeByName(e);if(!t)return;this.instance.getConnections({source:t.id}).forEach(n=>{$h(n,{total:s[e].length,iterations:0})})})},removePinDataConnections(s){Object.keys(s).forEach(e=>{const t=this.$store.getters.getNodeByName(e);if(!t)return;this.instance.getConnections({source:t.id}).forEach(xi)})},onToggleNodeCreator({source:s,createNodeActive:e}){e!==this.createNodeActive&&(this.containsTrigger||this.$store.commit("nodeCreator/setSelectedType",ea),this.createNodeActive=e,this.$externalHooks().run("nodeView.createNodeActiveChanged",{source:s,createNodeActive:e}),this.$telemetry.trackNodesPanel("nodeView.createNodeActiveChanged",{source:s,createNodeActive:e,workflow_id:this.$store.getters.workflowId}))},onAddNode({nodeTypeName:s,position:e}){this.addNode(s,{position:e})}},async mounted(){this.$titleReset(),window.addEventListener("message",this.onPostMessageReceived),this.$root.$on("importWorkflowData",this.onImportWorkflowDataEvent),this.$root.$on("newWorkflow",this.newWorkflow),this.$root.$on("importWorkflowUrl",this.onImportWorkflowUrlEvent),this.startLoading(),this.resetWorkspace();const s=[this.loadActiveWorkflows(),this.loadCredentials(),this.loadCredentialTypes()];this.$store.getters["nodeTypes/allNodeTypes"].length===0&&s.push(this.loadNodeTypes());try{await Promise.all(s)}catch(e){this.$showError(e,this.$locale.baseText("nodeView.showError.mounted1.title"),this.$locale.baseText("nodeView.showError.mounted1.message")+":");return}if(this.instance.ready(async()=>{try{try{this.initNodeView()}catch{}await this.initView(),window.top&&window.top.postMessage(JSON.stringify({command:"n8nReady",version:this.$store.getters.versionCli}),"*")}catch(e){this.$showError(e,this.$locale.baseText("nodeView.showError.mounted2.title"),this.$locale.baseText("nodeView.showError.mounted2.message")+":")}this.stopLoading(),setTimeout(()=>{this.$store.dispatch("users/showPersonalizationSurvey"),this.checkForNewVersions(),this.addPinDataConnections(this.$store.getters.pinData)},0)}),this.$externalHooks().run("nodeView.mount"),this.currentUser.personalizationAnswers!==null&&this.isOnboardingCallPromptFeatureEnabled&&jg(this.currentUser)<=of){const e=await this.$store.dispatch("ui/getNextOnboardingPrompt"),t=e.toast_sequence_number===1?rf:1e3;e.title&&e.description&&setTimeout(async()=>{this.$showToast({type:"info",title:e.title,message:e.description,duration:0,customClass:"clickable",closeOnClick:!0,onClick:()=>{this.$telemetry.track("user clicked onboarding toast",{seq_num:e.toast_sequence_number,title:e.title,description:e.description}),this.$store.commit("ui/openModal",Ki,{root:!0})}})},t)}De.$on("pin-data",this.addPinDataConnections),De.$on("unpin-data",this.removePinDataConnections)},activated(){this.$store.getters["ui/getAddFirstStepOnLoad"]&&this.showTriggerCreator("trigger_placeholder_button"),this.$store.commit("ui/setAddFirstStepOnLoad",!1),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),window.addEventListener("message",this.onPostMessageReceived),this.$root.$on("newWorkflow",this.newWorkflow),this.$root.$on("importWorkflowData",this.onImportWorkflowDataEvent),this.$root.$on("importWorkflowUrl",this.onImportWorkflowUrlEvent),De.$on("pin-data",this.addPinDataConnections),De.$on("unpin-data",this.removePinDataConnections)},deactivated(){document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp),window.removeEventListener("message",this.onPostMessageReceived),this.$root.$off("newWorkflow",this.newWorkflow),this.$root.$off("importWorkflowData",this.onImportWorkflowDataEvent),this.$root.$off("importWorkflowUrl",this.onImportWorkflowUrlEvent),De.$off("pin-data",this.addPinDataConnections),De.$off("unpin-data",this.removePinDataConnections)},destroyed(){this.resetWorkspace(),this.$store.commit("setStateDirty",!1),window.removeEventListener("message",this.onPostMessageReceived),this.$root.$off("newWorkflow",this.newWorkflow),this.$root.$off("importWorkflowData",this.onImportWorkflowDataEvent),this.$root.$off("importWorkflowUrl",this.onImportWorkflowUrlEvent),De.$off("pin-data",this.addPinDataConnections),De.$off("unpin-data",this.removePinDataConnections)}});const M8="_content_18fp0_1",W8="_shake_18fp0_8";var L8={content:M8,shake:W8},Q8=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.content},[t("div",{staticClass:"node-view-root",attrs:{id:"node-view-root"},on:{dragover:e.onDragOver,drop:e.onDrop}},[t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.touchTap,expression:"touchTap",arg:"tap"}],staticClass:"node-view-wrapper",class:e.workflowClasses,on:{touchstart:e.mouseDown,touchend:e.mouseUp,touchmove:e.mouseMoveNodeWorkflow,mousedown:e.mouseDown,mouseup:e.mouseUp,wheel:e.wheelScroll}},[t("div",{staticClass:"node-view-background",style:e.backgroundStyle,attrs:{id:"node-view-background"}}),t("div",{ref:"nodeView",staticClass:"node-view",style:e.workflowStyle,attrs:{id:"node-view"}},[t("canvas-add-button",{directives:[{name:"show",rawName:"v-show",value:e.showCanvasAddButton,expression:"showCanvasAddButton"}],style:e.canvasAddButtonStyle,attrs:{showTooltip:!e.containsTrigger&&e.showTriggerMissingTooltip,position:e.canvasAddButtonPosition},on:{click:function(i){return e.showTriggerCreator("trigger_placeholder_button")},"hook:mounted":e.setRecenteredCanvasAddButtonPosition}}),e._l(e.nodes,function(i){return t("div",{key:i.id},[i.type!==e.STICKY_NODE_TYPE?t("node",{key:`${i.id}_node`,attrs:{name:i.name,isReadOnly:e.isReadOnly,instance:e.instance,isActive:!!e.activeNode&&e.activeNode.name===i.name,hideActions:e.pullConnActive},on:{duplicateNode:e.duplicateNode,deselectAllNodes:e.deselectAllNodes,deselectNode:e.nodeDeselectedByName,nodeSelected:e.nodeSelectedByName,removeNode:e.removeNode,runWorkflow:e.onRunNode,moved:e.onNodeMoved,run:e.onNodeRun}},[t("span",{attrs:{slot:"custom-tooltip"},domProps:{textContent:e._s(e.$locale.baseText("nodeView.placeholderNode.addTriggerNodeBeforeExecuting"))},slot:"custom-tooltip"})]):t("sticky",{key:`${i.id}_sticky`,attrs:{name:i.name,isReadOnly:e.isReadOnly,instance:e.instance,isActive:!!e.activeNode&&e.activeNode.name===i.name,nodeViewScale:e.nodeViewScale,gridSize:e.GRID_SIZE,hideActions:e.pullConnActive},on:{deselectAllNodes:e.deselectAllNodes,deselectNode:e.nodeDeselectedByName,nodeSelected:e.nodeSelectedByName,removeNode:e.removeNode}})],1)})],2)]),t("node-details-view",{attrs:{readOnly:e.isReadOnly,renaming:e.renamingActive},on:{valueChanged:e.valueChanged,stopExecution:e.stopExecution}}),e.isReadOnly?e._e():t("node-creation",{attrs:{"create-node-active":e.createNodeActive,"node-view-scale":e.nodeViewScale},on:{toggleNodeCreator:e.onToggleNodeCreator,addNode:e.onAddNode}}),t("div",{class:{"zoom-menu":!0,"regular-zoom-menu":!e.isDemo,"demo-zoom-menu":e.isDemo,expanded:!e.sidebarMenuCollapsed}},[t("n8n-icon-button",{attrs:{type:"tertiary",size:"large",title:e.$locale.baseText("nodeView.zoomToFit"),icon:"expand"},on:{click:e.zoomToFit}}),t("n8n-icon-button",{attrs:{type:"tertiary",size:"large",title:e.$locale.baseText("nodeView.zoomIn"),icon:"search-plus"},on:{click:e.zoomIn}}),t("n8n-icon-button",{attrs:{type:"tertiary",size:"large",title:e.$locale.baseText("nodeView.zoomOut"),icon:"search-minus"},on:{click:e.zoomOut}}),e.nodeViewScale!==1&&!e.isDemo?t("n8n-icon-button",{attrs:{type:"tertiary",size:"large",title:e.$locale.baseText("nodeView.resetZoom"),icon:"undo"},on:{click:e.resetZoom}}):e._e()],1),e.isReadOnly?e._e():t("div",{staticClass:"workflow-execute-wrapper"},[t("span",{on:{mouseenter:function(i){return e.showTriggerMissingToltip(!0)},mouseleave:function(i){return e.showTriggerMissingToltip(!1)},click:e.onRunContainerClick}},[t("n8n-button",{attrs:{loading:e.workflowRunning,label:e.runButtonText,title:e.$locale.baseText("nodeView.executesTheWorkflowFromATriggerNode"),size:"large",icon:"play-circle",type:"primary",disabled:e.isExecutionDisabled},on:{click:function(i){return i.stopPropagation(),e.onRunWorkflow.apply(null,arguments)}}})],1),e.workflowRunning===!0&&!e.executionWaitingForWebhook?t("n8n-icon-button",{staticClass:"stop-execution",attrs:{icon:"stop",size:"large",type:"secondary",title:e.stopExecutionInProgress?e.$locale.baseText("nodeView.stoppingCurrentExecution"):e.$locale.baseText("nodeView.stopCurrentExecution"),loading:e.stopExecutionInProgress},on:{click:function(i){return i.stopPropagation(),e.stopExecution.apply(null,arguments)}}}):e._e(),e.workflowRunning===!0&&e.executionWaitingForWebhook===!0?t("n8n-icon-button",{staticClass:"stop-execution",attrs:{icon:"stop",size:"large",title:e.$locale.baseText("nodeView.stopWaitingForWebhookCall"),type:"secondary"},on:{click:function(i){return i.stopPropagation(),e.stopWaitingForWebhook.apply(null,arguments)}}}):e._e(),!e.isReadOnly&&e.workflowExecution&&!e.workflowRunning&&!e.allTriggersDisabled?t("n8n-icon-button",{attrs:{title:e.$locale.baseText("nodeView.deletesTheCurrentExecutionData"),icon:"trash",size:"large"},on:{click:function(i){return i.stopPropagation(),e.clearExecutionData.apply(null,arguments)}}}):e._e()],1)],1)])},B8=[];const Fh={$style:L8};function U8(s){for(var e in Fh)this[e]=Fh[e]}var V8=_(R8,Q8,B8,!1,U8,"82b779b2",null,null),$i=V8.exports;const tc=N(be).extend({computed:{executionId(){return this.$route.params.executionId},workflowName(){return this.$store.getters.workflowName},currentWorkflow(){return this.$route.params.name||this.$store.getters.workflowId},executions(){return this.$store.getters["workflows/currentWorkflowExecutions"]},activeExecution(){return this.$store.getters["workflows/getActiveWorkflowExecution"]}},methods:{getExecutionUIDetails(s){const e={name:"unknown",startTime:this.formatDate(new Date(s.startedAt)),label:"Status unknown",runningTime:""};return s.waitTill?(e.name="waiting",e.label=this.$locale.baseText("executionsList.waiting")):s.stoppedAt===void 0?(e.name="running",e.label=this.$locale.baseText("executionsList.running"),e.runningTime=this.displayTimer(new Date().getTime()-new Date(s.startedAt).getTime(),!0)):s.finished?(e.name="success",e.label=this.$locale.baseText("executionsList.succeeded"),s.stoppedAt&&(e.runningTime=this.displayTimer(new Date(s.stoppedAt).getTime()-new Date(s.startedAt).getTime(),!0))):s.stoppedAt!==null&&(e.name="error",e.label=this.$locale.baseText("executionsList.error"),s.stoppedAt&&(e.runningTime=this.displayTimer(new Date(s.stoppedAt).getTime()-new Date(s.startedAt).getTime(),!0))),e},formatDate(s){return s.getFullYear()===new Date().getFullYear()?ii(s.getTime(),'HH:MM:ss "on" d mmm'):ii(s.getTime(),'HH:MM:ss "on" d mmm yyyy')}}});var F8=N(tc,V,Ce).extend({name:"execution-card",data(){return{VIEWS:O}},props:{execution:{type:Object,required:!0},highlight:{type:Boolean,default:!1}},computed:{retryExecutionActions(){return[{id:"current-workflow",label:this.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow")},{id:"original-workflow",label:this.$locale.baseText("executionsList.retryWithOriginalWorkflow")}]},executionUIDetails(){return this.getExecutionUIDetails(this.execution)},isActive(){return this.execution.id===this.$route.params.executionId}},methods:{onRetryMenuItemSelect(s){this.$emit("retryExecution",{execution:this.execution,command:s})}}});const j8="_executionCard_1bkdh_1",z8="_active_1bkdh_5",G8="_executionStatus_1bkdh_9",H8="_executionLink_1bkdh_15",q8="_running_1bkdh_18",X8="_spinner_1bkdh_18",Y8="_statusLabel_1bkdh_25",Z8="_success_1bkdh_28",K8="_waiting_1bkdh_31",J8="_error_1bkdh_37",ej="_unknown_1bkdh_43",tj="_icon_1bkdh_60",sj="_icons_1bkdh_64",ij="_retry_1bkdh_72",nj="_manual_1bkdh_75";var oj={executionCard:j8,active:z8,executionStatus:G8,executionLink:H8,running:q8,spinner:X8,statusLabel:Y8,success:Z8,waiting:K8,error:J8,unknown:ej,icon:tj,icons:sj,retry:ij,manual:nj},rj=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{["execution-card"]:!0,[e.$style.executionCard]:!0,[e.$style.active]:e.isActive,[e.$style[e.executionUIDetails.name]]:!0,[e.$style.highlight]:e.highlight}},[t("router-link",{class:e.$style.executionLink,attrs:{to:{name:e.VIEWS.EXECUTION_PREVIEW,params:{workflowId:e.currentWorkflow,executionId:e.execution.id}}}},[t("div",{class:e.$style.description},[t("n8n-text",{attrs:{color:"text-dark",bold:!0,size:"medium"}},[e._v(e._s(e.executionUIDetails.startTime))]),t("div",{class:e.$style.executionStatus},[e.executionUIDetails.name==="running"?t("n8n-spinner",{class:[e.$style.spinner,"mr-4xs"],attrs:{size:"small"}}):e._e(),t("n8n-text",{class:e.$style.statusLabel,attrs:{size:"small"}},[e._v(e._s(e.executionUIDetails.label))]),e.executionUIDetails.name==="running"?t("n8n-text",{attrs:{color:e.isActive?"text-dark":"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeRunning",{interpolate:{time:e.executionUIDetails.runningTime}}))+" ")]):e.executionUIDetails.name!=="waiting"&&e.executionUIDetails.name!=="unknown"?t("n8n-text",{attrs:{color:e.isActive?"text-dark":"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeFinished",{interpolate:{time:e.executionUIDetails.runningTime}}))+" ")]):e._e()],1),e.execution.mode==="retry"?t("div",[t("n8n-text",{attrs:{color:e.isActive?"text-dark":"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.retry"))+" #"+e._s(e.execution.retryOf)+" ")])],1):e._e()],1),t("div",{class:e.$style.icons},[e.executionUIDetails.name==="error"?t("n8n-action-dropdown",{class:[e.$style.icon,e.$style.retry],attrs:{items:e.retryExecutionActions,activatorIcon:"redo"},on:{select:e.onRetryMenuItemSelect}}):e._e(),e.execution.mode==="manual"?t("font-awesome-icon",{class:[e.$style.icon,e.$style.manual],attrs:{title:e.$locale.baseText("executionsList.manual"),icon:"flask"}}):e._e()],1)])],1)},aj=[];const jh={$style:oj};function lj(s){for(var e in jh)this[e]=jh[e]}var cj=_(F8,rj,aj,!1,lj,null,null,null),dj=cj.exports,uj=N(ie).extend({name:"executions-info-accordion",props:{initiallyExpanded:{type:Boolean,default:!1}},data(){return{defaultValues:{saveFailedExecutions:"all",saveSuccessfulExecutions:"all",saveManualExecutions:!1},workflowSaveSettings:{saveFailedExecutions:!1,saveSuccessfulExecutions:!1,saveManualExecutions:!1}}},mounted(){this.defaultValues.saveFailedExecutions=this.$store.getters.saveDataErrorExecution,this.defaultValues.saveSuccessfulExecutions=this.$store.getters.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.$store.getters.saveManualExecutions,this.updateSettings(this.workflowSettings)},watch:{workflowSettings(s){this.updateSettings(s)}},computed:{accordionItems(){return[{id:"productionExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutions"),icon:this.productionExecutionsIcon.icon,iconColor:this.productionExecutionsIcon.color,tooltip:this.productionExecutionsStatus==="unknown"?this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutionsWarningTooltip"):null},{id:"manualExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.manualExecutions"),icon:this.workflowSaveSettings.saveManualExecutions?"check":"times",iconColor:this.workflowSaveSettings.saveManualExecutions?"success":"danger"}]},shouldExpandAccordion(){return this.initiallyExpanded===!1?!1:this.workflowSaveSettings.saveFailedExecutions===!1||this.workflowSaveSettings.saveSuccessfulExecutions===!1||this.workflowSaveSettings.saveManualExecutions===!1},productionExecutionsIcon(){return this.productionExecutionsStatus==="saving"?{icon:"check",color:"success"}:this.productionExecutionsStatus==="not-saving"?{icon:"times",color:"danger"}:{icon:"exclamation-triangle",color:"warning"}},productionExecutionsStatus(){return this.workflowSaveSettings.saveSuccessfulExecutions===this.workflowSaveSettings.saveFailedExecutions?this.workflowSaveSettings.saveSuccessfulExecutions===!0?"saving":"not-saving":"unknown"},workflowSettings(){return Se(this.$store.getters.workflowSettings)},accordionIcon(){return this.workflowSaveSettings.saveManualExecutions!==!0||this.productionExecutionsStatus!=="saving"?{icon:"exclamation-triangle",color:"warning"}:null},currentWorkflowId(){return this.$store.getters.workflowId},isNewWorkflow(){return!this.currentWorkflowId||this.currentWorkflowId===fe||this.currentWorkflowId==="new"},workflowName(){return this.$store.getters.workflowName},currentWorkflowTagIds(){return this.$store.getters.workflowTags}},methods:{updateSettings(s){this.workflowSaveSettings.saveFailedExecutions=s.saveDataErrorExecution!=="none",this.workflowSaveSettings.saveSuccessfulExecutions=s.saveDataSuccessExecution!=="none",this.workflowSaveSettings.saveManualExecutions=s.saveManualExecutions===void 0?this.defaultValues.saveManualExecutions:s.saveManualExecutions},onAccordionClick(s){s.target instanceof HTMLAnchorElement&&(s.preventDefault(),this.$store.dispatch("ui/openModal",Lt))},onItemTooltipClick(s,e){s==="productionExecutions"&&e.target instanceof HTMLAnchorElement&&(e.preventDefault(),this.$store.dispatch("ui/openModal",Lt))},openWorkflowSettings(s){this.$store.dispatch("ui/openModal",Lt)},async onSaveWorkflowClick(s){let e;this.currentWorkflowId!==fe?e=this.currentWorkflowId:this.$route.params.name&&this.$route.params.name!=="new"&&(e=this.$route.params.name),await this.saveCurrentWorkflow({id:e,name:this.workflowName,tags:this.currentWorkflowTagIds})&&this.$store.dispatch("settings/fetchPromptsData")}}});const hj="_accordion_14pzb_1",pj="_disabled_14pzb_27";var fj={accordion:hj,disabled:pj},mj=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-info-accordion",{class:[e.$style.accordion,"mt-2xl"],attrs:{title:e.$locale.baseText("executionsLandingPage.emptyState.accordion.title"),items:e.accordionItems,initiallyExpanded:e.shouldExpandAccordion,headerIcon:e.accordionIcon},on:{click:e.onAccordionClick,tooltipClick:e.onItemTooltipClick},scopedSlots:e._u([{key:"customContent",fn:function(){return[t("footer",{staticClass:"mt-2xs"},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer"))+" "),t("n8n-tooltip",{attrs:{disabled:!e.isNewWorkflow}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("n8n-link",{on:{click:function(i){return i.preventDefault(),e.onSaveWorkflowClick.apply(null,arguments)}}},[e._v(e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipLink")))]),e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipText"))+" ")],1),t("n8n-link",{class:{[e.$style.disabled]:e.isNewWorkflow},attrs:{size:"small"},on:{click:function(i){return i.preventDefault(),e.openWorkflowSettings.apply(null,arguments)}}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.settingsLink"))+" ")])],1)],1)]},proxy:!0}])})},gj=[];const zh={$style:fj};function wj(s){for(var e in zh)this[e]=zh[e]}var yj=_(uj,mj,gj,!1,wj,null,null,null),bw=yj.exports,vj=m.extend({name:"executions-sidebar",components:{ExecutionCard:dj,ExecutionsInfoAccordion:bw},props:{executions:{type:Array,required:!0},loading:{type:Boolean,default:!0},loadingMore:{type:Boolean,default:!1}},data(){return{VIEWS:O,filter:{status:""},autoRefresh:!1,autoRefreshInterval:void 0}},computed:{statusFilterApplied(){return this.filter.status!==""},executionStatuses(){return[{id:"error",name:this.$locale.baseText("executionsList.error")},{id:"running",name:this.$locale.baseText("executionsList.running")},{id:"success",name:this.$locale.baseText("executionsList.success")},{id:"waiting",name:this.$locale.baseText("executionsList.waiting")}]}},watch:{$route(s,e){e.name===O.EXECUTION_PREVIEW&&s.name===O.EXECUTION_HOME&&this.$router.go(-1)}},mounted(){this.autoRefresh=this.$store.getters["ui/isExecutionSidebarAutoRefreshOn"],this.autoRefresh&&(this.autoRefreshInterval=setInterval(()=>this.onRefresh(),4e3))},beforeDestroy(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0)},methods:{loadMore(){if(!this.loading){const s=this.$refs.executionList;if(s){const e=s.offsetHeight-(s.scrollHeight-s.scrollTop);e>-10&&e<10&&this.$emit("loadMore")}}},onRetryExecution(s){this.$emit("retryExecution",s)},onRefresh(){this.$emit("refresh")},onFilterChange(){this.$emit("filterUpdated",this.prepareFilter())},reloadExecutions(){this.$emit("reloadExecutions")},onAutoRefreshToggle(){this.$store.commit("ui/setExecutionsSidebarAutoRefresh",this.autoRefresh),this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0),this.autoRefresh&&(this.autoRefreshInterval=setInterval(()=>this.onRefresh(),4*1e3))},async resetFilters(){this.filter.status="",this.$emit("filterUpdated",this.prepareFilter())},prepareFilter(){return{finished:this.filter.status!=="running",status:this.filter.status}}}});const _j="_container_11z7d_1",Oj="_heading_11z7d_10",bj="_controls_11z7d_17",xj="_executionList_11z7d_29",$j="_infoAccordion_11z7d_47";var Tj={container:_j,heading:Oj,controls:bj,executionList:xj,infoAccordion:$j},kj=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:["executions-sidebar",e.$style.container]},[t("div",{class:e.$style.heading},[t("n8n-heading",{attrs:{tag:"h2",size:"medium",color:"text-dark"}},[e._v(" "+e._s(e.$locale.baseText("generic.executions"))+" ")])],1),t("div",{class:e.$style.controls},[t("el-checkbox",{on:{change:e.onAutoRefreshToggle},model:{value:e.autoRefresh,callback:function(i){e.autoRefresh=i},expression:"autoRefresh"}},[e._v(e._s(e.$locale.baseText("executionsList.autoRefresh")))]),t("n8n-popover",{attrs:{trigger:"click"}},[t("template",{slot:"reference"},[t("div",{class:e.$style.filterButton},[t("n8n-button",{attrs:{icon:"filter",type:"tertiary",size:"medium",active:e.statusFilterApplied}},[e.statusFilterApplied?t("n8n-badge",{staticClass:"mr-4xs",attrs:{theme:"primary"}},[e._v("1")]):e._e(),e._v(" "+e._s(e.$locale.baseText("executionsList.filters"))+" ")],1)],1)]),t("div",{class:e.$style["filters-dropdown"]},[t("div",{staticClass:"mb-s"},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("executions.ExecutionStatus"),bold:!1,size:"small",color:"text-base"}}),t("n8n-select",{ref:"typeInput",class:e.$style["type-input"],attrs:{size:"small",placeholder:e.$locale.baseText("generic.any")},on:{change:e.onFilterChange},model:{value:e.filter.status,callback:function(i){e.$set(e.filter,"status",i)},expression:"filter.status"}},e._l(e.executionStatuses,function(i){return t("n8n-option",{key:i.id,attrs:{label:i.name,value:i.id}})}),1)],1),e.statusFilterApplied?t("div",{class:[e.$style.filterMessage,"mt-s"]},[t("n8n-link",{on:{click:e.resetFilters}},[e._v(" "+e._s(e.$locale.baseText("generic.reset"))+" ")])],1):e._e()])],2)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.statusFilterApplied,expression:"statusFilterApplied"}],staticClass:"mb-xs"},[t("n8n-info-tip",{attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("generic.filtersApplied"))+" "),t("n8n-link",{attrs:{size:"small"},on:{click:e.resetFilters}},[e._v(" "+e._s(e.$locale.baseText("generic.resetAllFilters"))+" ")])],1)],1),t("div",{ref:"executionList",class:e.$style.executionList,on:{scroll:e.loadMore}},[e.loading?t("div",{staticClass:"mr-m"},[t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}}),t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}}),t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}})],1):e._l(e.executions,function(i){return t("execution-card",{key:i.id,attrs:{execution:i},on:{refresh:e.onRefresh,retryExecution:e.onRetryExecution}})}),e.loadingMore?t("div",{staticClass:"mr-m"},[t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}})],1):e._e()],2),t("div",{class:e.$style.infoAccordion},[t("executions-info-accordion",{attrs:{initiallyExpanded:!1}})],1)])},Sj=[];const Gh={$style:Tj};function Ej(s){for(var e in Gh)this[e]=Gh[e]}var Cj=_(vj,kj,Sj,!1,Ej,null,null,null),Nj=Cj.exports,Pj=N(Ce,V,tc,dt,ie).extend({name:"executions-page",components:{ExecutionsSidebar:Nj},data(){return{loading:!1,loadingMore:!1,filter:{finished:!0,status:""}}},computed:{hidePreview(){const s=this.executions.length===0&&this.filterApplied,e=this.filterApplied&&this.executions.find(t=>t.id===this.activeExecution.id)===void 0;return this.loading||s||e},showSidebar(){return this.executions.length===0?this.filterApplied:!0},filterApplied(){return this.filter.status!==""},workflowDataNotLoaded(){return this.$store.getters.workflowId===fe&&this.$store.getters.workflowName===""},loadedFinishedExecutionsCount(){return this.$store.getters["workflows/getAllLoadedFinishedExecutions"].length},totalFinishedExecutionsCount(){return this.$store.getters["workflows/getTotalFinishedExecutionsCount"]}},watch:{$route(s,e){const t=e.params.name!==s.params.name;if(this.initView(t),s.params.executionId){const i=this.$store.getters["workflows/getExecutionDataById"](s.params.executionId);i&&this.$store.commit("workflows/setActiveWorkflowExecution",i)}}},async beforeRouteLeave(s,e,t){if(!aa(s))if(this.$store.getters.getStateIsDirty){const o=await this.confirmModal(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),"warning",this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),!0);o===to?(await this.saveCurrentWorkflow({},!1)&&this.$store.dispatch("settings/fetchPromptsData"),this.$store.commit("setStateDirty",!1),t()):o===nl?(this.$store.commit("setStateDirty",!1),t()):o===eo&&t(!1)}else t();t()},async mounted(){this.loading=!0;const s=this.$route.params.name!==this.$store.getters.workflowId,e=this.$route.params.name==="new"&&this.$store.getters.workflowId===fe,t=s&&!e;await this.initView(t),t||await this.setExecutions(),this.loading=!1},methods:{async initView(s){s&&(this.$store.getters["nodeTypes/allNodeTypes"].length===0&&await this.$store.dispatch("nodeTypes/getNodeTypes"),await this.openWorkflow(this.$route.params.name),this.$store.commit("ui/setNodeViewInitialized",!1),this.setExecutions(),this.activeExecution&&this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.activeExecution.id}}).catch(()=>{}))},async onLoadMore(){this.loadingMore||this.callDebounced("loadMore",{debounceTime:1e3})},async loadMore(){if(this.filter.status==="running"||this.loadedFinishedExecutionsCount>=this.totalFinishedExecutionsCount)return;this.loadingMore=!0;let s;this.executions.length!==0&&(s=this.executions.slice(-1)[0].id);const e={workflowId:this.currentWorkflow};this.filter.status==="waiting"?e.waitTill=!0:this.filter.status!==""&&(e.finished=this.filter.status==="success");let t;try{t=await this.restApi().getPastExecutions(e,20,s)}catch(n){this.loadingMore=!1,this.$showError(n,this.$locale.baseText("executionsList.showError.loadMore.title"));return}t.results=t.results.map(n=>({...n,mode:n.mode}));const i=[...this.executions];for(const n of t.results)i.find(o=>o.id===n.id)===void 0&&i.push(n);this.$store.commit("workflows/setCurrentWorkflowExecutions",i),this.loadingMore=!1},async onDeleteCurrentExecution(){this.loading=!0;try{await this.restApi().deleteExecutions({ids:[this.$route.params.executionId]}),await this.setExecutions(),this.executions.length>0?(this.$store.commit("workflows/setActiveWorkflowExecution",this.executions[0]),this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.executions[0].id}}).catch(()=>{})):(this.$store.commit("workflows/setActiveWorkflowExecution",null),this.$router.push({name:O.EXECUTION_HOME,params:{name:this.currentWorkflow}}))}catch(s){this.loading=!1,this.$showError(s,this.$locale.baseText("executionsList.showError.handleDeleteSelected.title"));return}this.loading=!1,this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.handleDeleteSelected.title"),type:"success"})},onFilterUpdated(s){this.filter=s,this.setExecutions()},async setExecutions(){const s=await this.loadExecutions();this.$store.commit("workflows/setCurrentWorkflowExecutions",s),this.setActiveExecution()},async loadAutoRefresh(){const s=await this.loadExecutions();let e=[...this.executions];const t=e.map(r=>parseInt(r.id,10));let i=0;const n=[];let o=null;for(let r=s.length-1;r>=0;r--){const a=s[r],l=parseInt(a.id,10);if(i!==0&&isNaN(l)===!1&&l-i>1){const u=ae.exports.range(i+1,l);n.push(...u)}i=parseInt(a.id,10)||0;const c=t.indexOf(l);if(c!==-1){const u=e.find(f=>f.id===a.id),h=u&&u.finished===!1||(u==null?void 0:u.stoppedAt)===void 0,p=a.finished===!0||a.stoppedAt!==void 0;h&&p&&(e[c]=a,a.id===this.activeExecution.id&&(o=a));continue}let d;for(d=e.length-1;d>=0;d--)if(l<parseInt(e[d].id,10)){e.splice(d+1,0,a);break}d===-1&&e.unshift(a)}e=e.filter(r=>!n.includes(parseInt(r.id,10))&&i>=parseInt(r.id,10)),this.$store.commit("workflows/setCurrentWorkflowExecutions",e),o!==null?this.$store.commit("workflows/setActiveWorkflowExecution",o):e.find(a=>a.id===this.activeExecution.id)===void 0&&this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.executions[0].id}}).catch(()=>{})},async loadExecutions(){if(!this.currentWorkflow)return[];try{return await this.$store.dispatch("workflows/loadCurrentWorkflowExecutions",this.filter)}catch(s){return this.$showError(s,this.$locale.baseText("executionsList.showError.refreshData.title")),[]}},setActiveExecution(){const s=this.$route.params.executionId;if(s){const e=this.$store.getters["workflows/getExecutionDataById"](s);e&&this.$store.commit("workflows/setActiveWorkflowExecution",e)}this.$store.getters["workflows/getActiveWorkflowExecution"]===null&&this.executions.length>0&&(this.$store.commit("workflows/setActiveWorkflowExecution",this.executions[0]),this.$router.push({name:O.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.executions[0].id}}).catch(()=>{}))},async openWorkflow(s){await this.loadActiveWorkflows();let e;try{e=await this.restApi().getWorkflow(s)}catch(n){this.$showError(n,this.$locale.baseText("nodeView.showError.openWorkflow.title"));return}if(e===void 0)throw new Error(this.$locale.baseText("nodeView.workflowWithIdCouldNotBeFound",{interpolate:{workflowId:s}}));await this.addNodes(e.nodes,e.connections),this.$store.commit("setActive",e.active||!1),this.$store.commit("setWorkflowId",s),this.$store.commit("setWorkflowName",{newName:e.name,setStateDirty:!1}),this.$store.commit("setWorkflowSettings",e.settings||{}),this.$store.commit("setWorkflowPinData",e.pinData||{});const t=e.tags||[];this.$store.commit("tags/upsertTags",t);const i=t.map(n=>n.id);this.$store.commit("setWorkflowTagIds",i||[]),this.$store.commit("setWorkflowHash",e.hash),this.$externalHooks().run("workflow.open",{workflowId:s,workflowName:e.name}),this.$store.commit("setStateDirty",!1)},async addNodes(s,e){if(!s||!s.length)return;await this.loadNodesProperties(s.map(i=>({name:i.type,version:i.typeVersion})));let t;if(s.forEach(i=>{if(i.id||(i.id=st()),t=this.$store.getters["nodeTypes/getNodeType"](i.type,i.typeVersion),i.hasOwnProperty("disabled")||(i.disabled=!1),i.hasOwnProperty("parameters")||(i.parameters={}),t!==null){let n=null;try{n=Ht(t.properties,i.parameters,!0,!1,i)}catch(o){console.error(this.$locale.baseText("nodeView.thereWasAProblemLoadingTheNodeParametersOfNode")+`: "${i.name}"`),console.error(o)}i.parameters=n!==null?n:{},i.type===xt&&i.parameters.path===""&&(i.parameters.path=i.webhookId)}this.$store.commit("addNode",i)}),e!==void 0){let i;for(const n of Object.keys(e))for(const o of Object.keys(e[n]))for(let r=0;r<e[n][o].length;r++){const a=e[n][o][r];!a||a.forEach(l=>{i=[{node:n,type:o,index:r},{node:l.node,type:l.type,index:l.index}],this.$store.commit("addConnection",{connection:i,setStateDirty:!1})})}}},async loadNodesProperties(s){const e=this.$store.getters["nodeTypes/allNodeTypes"],t=[];e.forEach(i=>{const n=Array.isArray(i.version)?i.version:[i.version];!!s.find(o=>o.name===i.name&&n.includes(o.version))&&!i.hasOwnProperty("properties")&&t.push({name:i.name,version:Array.isArray(i.version)?i.version.slice(-1)[0]:i.version})}),t.length>0&&await this.$store.dispatch("nodeTypes/getNodesInformation",t)},async loadActiveWorkflows(){const s=await this.restApi().getActiveWorkflows();this.$store.commit("setActiveWorkflows",s)},async onRetryExecution(s){const e=s.command==="current-workflow";this.$showMessage({title:this.$locale.baseText("executionDetails.runningMessage"),type:"info",duration:2e3}),await this.retryExecution(s.execution,e),this.loadAutoRefresh(),this.$telemetry.track("User clicked retry execution button",{workflow_id:this.$store.getters.workflowId,execution_id:s.execution.id,retry_type:e?"current":"original"})},async retryExecution(s,e){try{await this.restApi().retryExecution(s.id,e)===!0?this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulTrue.title"),type:"success"}):this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulFalse.title"),type:"error"})}catch(t){this.$showError(t,this.$locale.baseText("executionsList.showError.retryExecution.title"))}}}});const Dj="_container_68eds_1",Ij="_content_68eds_6",Aj="_noResultsContainer_68eds_10";var Rj={container:Dj,content:Ij,noResultsContainer:Aj},Mj=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.loading?e._e():t("div",{class:e.$style.container},[e.showSidebar?t("executions-sidebar",{attrs:{executions:e.executions,loading:e.loading,loadingMore:e.loadingMore},on:{reloadExecutions:e.setExecutions,filterUpdated:e.onFilterUpdated,loadMore:e.loadMore,retryExecution:e.onRetryExecution,refresh:e.loadAutoRefresh}}):e._e(),e.hidePreview?e._e():t("div",{class:e.$style.content},[t("router-view",{attrs:{name:"executionPreview"},on:{deleteCurrentExecution:e.onDeleteCurrentExecution,retryExecution:e.onRetryExecution}})],1),e.executions.length===0&&e.filterApplied?t("div",{class:e.$style.noResultsContainer},[t("n8n-text",{attrs:{color:"text-base",size:"medium",align:"center"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.noResults"))+" ")])],1):e._e()],1)},Wj=[];const Hh={$style:Rj};function Lj(s){for(var e in Hh)this[e]=Hh[e]}var Qj=_(Pj,Mj,Wj,!1,Lj,null,null,null),Bj=Qj.exports,Uj=m.extend({name:"executions-landing-page",components:{ExecutionsInfoAccordion:bw},computed:{executionCount(){return this.$store.getters["workflows/currentWorkflowExecutions"].length},containsTrigger(){return this.$store.getters.workflowTriggerNodes.length>0},currentWorkflowId(){return this.$store.getters.workflowId}},methods:{onSetupFirstStep(s){this.$store.commit("ui/setAddFirstStepOnLoad",!0);const e=this.getWorkflowRoute();this.$router.push(e)},getWorkflowRoute(){const s=this.currentWorkflowId||this.$route.params.name;return s===fe?{name:O.NEW_WORKFLOW,params:{}}:{name:O.WORKFLOW,params:{name:s}}}}});const Vj="_container_acx6b_1",Fj="_messageContainer_acx6b_11",jj="_icon_acx6b_22";var zj={container:Vj,messageContainer:Fj,icon:jj},Gj=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:["workflow-executions-container",e.$style.container]},[e.executionCount===0?t("div",{class:[e.$style.messageContainer,e.$style.noExecutionsMessage]},[e.containsTrigger?t("div",[t("n8n-heading",{staticClass:"mb-2xs",attrs:{tag:"h2",size:"xlarge",color:"text-dark"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.heading"))+" ")]),t("n8n-text",{attrs:{size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.message"))+" ")]),t("executions-info-accordion")],1):t("div",[t("n8n-heading",{staticClass:"mb-2xs",attrs:{tag:"h2",size:"xlarge",color:"text-dark"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.noTrigger.heading"))+" ")]),t("n8n-text",{attrs:{size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.message"))+" ")]),t("n8n-button",{staticClass:"mt-l",attrs:{type:"tertiary",size:"large"},on:{click:e.onSetupFirstStep}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.noTrigger.buttonText"))+" ")])],1)]):e._e()])},Hj=[];const qh={$style:zj};function qj(s){for(var e in qh)this[e]=qh[e]}var Xj=_(Uj,Gj,Hj,!1,qj,null,null,null),Yj=Xj.exports,Zj=N(V).extend({name:"WorkflowPreview",props:{loading:{type:Boolean,default:!1},mode:{type:String,default:"workflow",validator:s=>["workflow","execution","medium"].includes(s)},workflow:{type:Object,required:!1},executionId:{type:String,required:!1},loaderType:{type:String,default:"image",validator:s=>["image","spinner"].includes(s)}},data(){return{nodeViewDetailsOpened:!1,ready:!1,insideIframe:!1,scrollX:0,scrollY:0}},computed:{showPreview(){return!this.loading&&(this.mode==="workflow"&&!!this.workflow||this.mode==="execution"&&!!this.executionId)&&this.ready}},methods:{onMouseEnter(){this.insideIframe=!0,this.scrollX=window.scrollX,this.scrollY=window.scrollY},onMouseLeave(){this.insideIframe=!1},loadWorkflow(){try{if(!this.workflow)throw new Error(this.$locale.baseText("workflowPreview.showError.missingWorkflow"));if(!this.workflow.nodes||!Array.isArray(this.workflow.nodes))throw new Error(this.$locale.baseText("workflowPreview.showError.arrayEmpty"));const s=this.$refs.preview_iframe;s.contentWindow&&s.contentWindow.postMessage(JSON.stringify({command:"openWorkflow",workflow:this.workflow}),"*")}catch(s){this.$showError(s,this.$locale.baseText("workflowPreview.showError.previewError.title"),this.$locale.baseText("workflowPreview.showError.previewError.message"))}},loadExecution(){try{if(!this.executionId)throw new Error(this.$locale.baseText("workflowPreview.showError.missingExecution"));const s=this.$refs.preview_iframe;s.contentWindow&&s.contentWindow.postMessage(JSON.stringify({command:"openExecution",executionId:this.executionId}),"*")}catch(s){this.$showError(s,this.$locale.baseText("workflowPreview.showError.previewError.title"),this.$locale.baseText("workflowPreview.executionMode.showError.previewError.message"))}},receiveMessage({data:s}){try{const e=JSON.parse(s);e.command==="n8nReady"?this.ready=!0:e.command==="openNDV"?this.nodeViewDetailsOpened=!0:e.command==="closeNDV"?this.nodeViewDetailsOpened=!1:e.command==="error"&&this.$emit("close")}catch{}},onDocumentScroll(){this.insideIframe&&window.scrollTo(this.scrollX,this.scrollY)}},watch:{showPreview(s){s&&(this.mode==="workflow"?this.loadWorkflow():this.mode==="execution"&&this.loadExecution())},executionId(s){this.mode==="execution"&&this.executionId&&this.loadExecution()}},mounted(){window.addEventListener("message",this.receiveMessage),document.addEventListener("scroll",this.onDocumentScroll)},beforeDestroy(){window.removeEventListener("message",this.receiveMessage),document.removeEventListener("scroll",this.onDocumentScroll)}});const Kj="_container_935xl_1",Jj="_workflow_935xl_8",ez="_show_935xl_14",tz="_openNDV_935xl_20",sz="_spinner_935xl_29",iz="_imageLoader_935xl_37",nz="_executionPreview_935xl_41";var oz={container:Kj,workflow:Jj,show:ez,openNDV:tz,spinner:sz,imageLoader:iz,executionPreview:nz},rz=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[e.loaderType==="image"&&!e.showPreview?t("div",{class:e.$style.imageLoader},[t("n8n-loading",{attrs:{loading:!e.showPreview,rows:1,variant:"image"}})],1):e.loaderType==="spinner"&&!e.showPreview?t("div",{class:e.$style.spinner},[t("n8n-spinner",{attrs:{type:"dots"}})],1):e._e(),t("iframe",{ref:"preview_iframe",class:{[e.$style.workflow]:!this.nodeViewDetailsOpened,[e.$style.executionPreview]:e.mode==="execution",[e.$style.openNDV]:this.nodeViewDetailsOpened,[e.$style.show]:this.showPreview},attrs:{src:"/workflows/demo"},on:{mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}})])},az=[];const Xh={$style:oz};function lz(s){for(var e in Xh)this[e]=Xh[e]}var cz=_(Zj,rz,az,!1,lz,null,null,null),xw=cz.exports,dz=N(Ce,V,tc).extend({name:"execution-preview",components:{WorkflowPreview:xw},data(){return{VIEWS:O}},computed:{executionUIDetails(){return this.activeExecution?this.getExecutionUIDetails(this.activeExecution):null},sidebarCollapsed(){return this.$store.getters["ui/sidebarMenuCollapsed"]}},methods:{async onDeleteExecution(){!await this.confirmMessage(this.$locale.baseText("executionDetails.confirmMessage.message"),this.$locale.baseText("executionDetails.confirmMessage.headline"),"warning",this.$locale.baseText("executionDetails.confirmMessage.confirmButtonText"),"")||this.$emit("deleteCurrentExecution")},handleRetryClick(s){this.$emit("retryExecution",{execution:this.activeExecution,command:s})}}});const uz="_previewContainer_1hryb_1",hz="_executionDetails_1hryb_6",pz="_sidebarCollapsed_1hryb_15",fz="_running_1hryb_19",mz="_spinner_1hryb_19",gz="_waiting_1hryb_23",wz="_success_1hryb_27",yz="_error_1hryb_31",vz="_runningInfo_1hryb_35",_z="_runningMessage_1hryb_47";var Oz={previewContainer:uz,executionDetails:hz,sidebarCollapsed:pz,running:fz,spinner:mz,waiting:gz,success:wz,error:yz,runningInfo:vz,runningMessage:_z},bz=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.executionUIDetails&&e.executionUIDetails.name==="running"?t("div",{class:e.$style.runningInfo},[t("div",{class:e.$style.spinner},[t("font-awesome-icon",{attrs:{icon:"spinner",spin:""}})],1),t("n8n-text",{class:e.$style.runningMessage},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningMessage"))+" ")])],1):t("div",{class:e.$style.previewContainer},[e.activeExecution?t("div",{class:{[e.$style.executionDetails]:!0,[e.$style.sidebarCollapsed]:e.sidebarCollapsed}},[t("div",[t("n8n-text",{attrs:{size:"large",color:"text-base",bold:!0}},[e._v(e._s(e.executionUIDetails.startTime))]),t("br"),e.executionUIDetails.name==="running"?t("n8n-spinner",{class:[e.$style.spinner,"mr-4xs"],attrs:{size:"small"}}):e._e(),t("n8n-text",{class:[e.$style.status,e.$style[e.executionUIDetails.name]],attrs:{size:"medium"}},[e._v(e._s(e.executionUIDetails.label))]),e.executionUIDetails.name==="running"?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeRunning",{interpolate:{time:e.executionUIDetails.runningTime}}))+" | ID#"+e._s(e.activeExecution.id)+" ")]):e.executionUIDetails.name!=="waiting"?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeFinished",{interpolate:{time:e.executionUIDetails.runningTime}}))+" | ID#"+e._s(e.activeExecution.id)+" ")]):e.executionUIDetails.name==="waiting"?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" | ID#"+e._s(e.activeExecution.id)+" ")]):e._e(),t("br"),e.activeExecution.mode==="retry"?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.retry"))+" "),t("router-link",{class:e.$style.executionLink,attrs:{to:{name:e.VIEWS.EXECUTION_PREVIEW,params:{workflowId:e.activeExecution.workflowId,executionId:e.activeExecution.retryOf}}}},[e._v(" #"+e._s(e.activeExecution.retryOf)+" ")])],1):e._e()],1),t("div",[e.executionUIDetails.name==="error"?t("el-dropdown",{staticClass:"mr-xs",attrs:{trigger:"click"},on:{command:e.handleRetryClick}},[t("span",{staticClass:"retry-button"},[t("n8n-icon-button",{attrs:{size:"large",type:"tertiary",title:e.$locale.baseText("executionsList.retryExecution"),icon:"redo"}})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"current-workflow"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow"))+" ")]),t("el-dropdown-item",{attrs:{command:"original-workflow"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithOriginalworkflow"))+" ")])],1)],1):e._e(),t("n8n-icon-button",{attrs:{title:e.$locale.baseText("executionDetails.deleteExecution"),icon:"trash",size:"large",type:"tertiary"},on:{click:e.onDeleteExecution}})],1)]):e._e(),t("workflow-preview",{attrs:{mode:"execution",loaderType:"spinner",executionId:e.executionId}})],1)},xz=[];const Yh={$style:Oz};function $z(s){for(var e in Yh)this[e]=Yh[e]}var Tz=_(dz,bz,xz,!1,$z,null,null,null),kz=Tz.exports,Sz=N(Gl,Zg).extend({name:"SettingsSidebar",computed:{...F("settings",["versionCli"]),settingsFakeDoorFeatures(){return this.$store.getters["ui/getFakeDoorByLocation"]("settings")},sidebarMenuItems(){const s=[{id:"settings-personal",icon:"user-circle",label:this.$locale.baseText("settings.personal"),position:"top",available:this.canAccessPersonalSettings(),activateOnRouteNames:[O.PERSONAL_SETTINGS]},{id:"settings-users",icon:"user-friends",label:this.$locale.baseText("settings.users"),position:"top",available:this.canAccessUsersSettings(),activateOnRouteNames:[O.USERS_SETTINGS]},{id:"settings-api",icon:"plug",label:this.$locale.baseText("settings.n8napi"),position:"top",available:this.canAccessApiSettings(),activateOnRouteNames:[O.API_SETTINGS]}];for(const e of this.settingsFakeDoorFeatures)e.uiLocations.includes("settings")&&s.push({id:e.id,icon:e.icon||"question",label:this.$locale.baseText(e.featureName),position:"top",available:!0,activateOnRoutePaths:[`/settings/coming-soon/${e.id}`]});return s.push({id:"settings-community-nodes",icon:"cube",label:this.$locale.baseText("settings.communityNodes"),position:"top",available:this.canAccessCommunityNodes(),activateOnRouteNames:[O.COMMUNITY_NODES]}),s}},mounted(){this.pushConnect()},methods:{canAccessPersonalSettings(){return this.canUserAccessRouteByName(O.PERSONAL_SETTINGS)},canAccessUsersSettings(){return this.canUserAccessRouteByName(O.USERS_SETTINGS)},canAccessCommunityNodes(){return this.canUserAccessRouteByName(O.COMMUNITY_NODES)},canAccessApiSettings(){return this.canUserAccessRouteByName(O.API_SETTINGS)},onVersionClick(){this.$store.dispatch("ui/openModal",Yi)},onReturn(){this.$router.push({name:O.HOMEPAGE})},openUpdatesPanel(){this.$store.dispatch("ui/openModal",Ns)},async handleSelect(s){switch(s){case"settings-personal":this.$router.currentRoute.name!==O.PERSONAL_SETTINGS&&this.$router.push({name:O.PERSONAL_SETTINGS});break;case"settings-users":this.$router.currentRoute.name!==O.USERS_SETTINGS&&this.$router.push({name:O.USERS_SETTINGS});break;case"settings-api":this.$router.currentRoute.name!==O.API_SETTINGS&&this.$router.push({name:O.API_SETTINGS});break;case"environments":case"logging":this.$router.push({name:O.FAKE_DOOR,params:{featureId:s}}).catch(()=>{});break;case"settings-community-nodes":this.$router.currentRoute.name!==O.COMMUNITY_NODES&&this.$router.push({name:O.COMMUNITY_NODES});break}}}});const Ez="_container_1thxr_1",Cz="_returnButton_1thxr_10",Nz="_updatesSubmenu_1thxr_19",Pz="_versionContainer_1thxr_19";var Dz={container:Ez,returnButton:Cz,updatesSubmenu:Nz,versionContainer:Pz},Iz=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("n8n-menu",{attrs:{items:e.sidebarMenuItems},on:{select:e.handleSelect},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.returnButton,on:{click:e.onReturn}},[t("i",{staticClass:"mr-xs"},[t("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1),t("n8n-heading",{class:e.$style.settingsHeading,attrs:{slot:"title",size:"large",bold:!0},slot:"title"},[e._v(e._s(e.$locale.baseText("settings")))])],1)]},proxy:!0},{key:"menuSuffix",fn:function(){return[t("div",{class:e.$style.versionContainer},[t("n8n-link",{attrs:{size:"small"},on:{click:e.onVersionClick}},[e._v(" "+e._s(e.$locale.baseText("settings.version"))+" "+e._s(e.versionCli)+" ")])],1)]},proxy:!0}])})],1)},Az=[];const Zh={$style:Dz};function Rz(s){for(var e in Zh)this[e]=Zh[e]}var Mz=_(Sz,Iz,Az,!1,Rz,null,null,null),Wz=Mz.exports,Lz=m.extend({name:"SettingsView",components:{SettingsSidebar:Wz}});const Qz="_container_11adc_1",Bz="_contentContainer_11adc_8 _container_11adc_1",Uz="_content_11adc_8";var Vz={container:Qz,contentContainer:Bz,content:Uz},Fz=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("SettingsSidebar"),t("div",{class:e.$style.contentContainer},[t("div",{class:e.$style.content},[e._t("default")],2)])],1)},jz=[];const Kh={$style:Vz};function zz(s){for(var e in Kh)this[e]=Kh[e]}var Gz=_(Lz,Fz,jz,!1,zz,null,null,null),Ws=Gz.exports,Hz=N(V).extend({name:"SettingsPersonalView",components:{SettingsView:Ws},data(){return{hasAnyChanges:!1,formInputs:null,formBus:new m,readyToSubmit:!1}},mounted(){this.formInputs=[{name:"firstName",initialValue:this.currentUser.firstName,properties:{label:this.$locale.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",initialValue:this.currentUser.lastName,properties:{label:this.$locale.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}},{name:"email",initialValue:this.currentUser.email,properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0}}]},computed:{currentUser(){return this.$store.getters["users/currentUser"]}},methods:{onInput(){this.hasAnyChanges=!0},onReadyToSubmit(s){this.readyToSubmit=s},async onSubmit(s){if(!!this.hasAnyChanges)try{await this.$store.dispatch("users/updateUser",{id:this.currentUser.id,firstName:s.firstName,lastName:s.lastName,email:s.email}),this.$showToast({title:this.$locale.baseText("settings.personal.personalSettingsUpdated"),message:"",type:"success"}),this.hasAnyChanges=!1}catch(e){this.$showError(e,this.$locale.baseText("settings.personal.personalSettingsUpdatedError"))}},onSaveClick(){this.formBus.$emit("submit")},openPasswordModal(){this.$store.dispatch("ui/openModal",Ao)}}});const qz="_container_e57u2_1",Xz="_header_e57u2_8",Yz="_user_e57u2_17",Zz="_username_e57u2_27",Kz="_sectionHeader_e57u2_39";var Jz={container:qz,header:Xz,user:Yz,username:Zz,sectionHeader:Kz},e5=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("SettingsView",[t("div",{class:e.$style.container},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(e.$locale.baseText("settings.personal.personalSettings")))]),t("div",{staticClass:"ph-no-capture",class:e.$style.user},[t("span",{class:e.$style.username},[t("n8n-text",{attrs:{color:"text-light"}},[e._v(e._s(e.currentUser.fullName))])],1),t("n8n-avatar",{attrs:{firstName:e.currentUser.firstName,lastName:e.currentUser.lastName,size:"large"}})],1)],1),t("div",[t("div",{class:e.$style.sectionHeader},[t("n8n-heading",{attrs:{size:"large"}},[e._v(e._s(e.$locale.baseText("settings.personal.basicInformation")))])],1),t("div",[e.formInputs?t("n8n-form-inputs",{attrs:{inputs:e.formInputs,eventBus:e.formBus},on:{input:e.onInput,ready:e.onReadyToSubmit,submit:e.onSubmit}}):e._e()],1)]),t("div",[t("div",{class:e.$style.sectionHeader},[t("n8n-heading",{attrs:{size:"large"}},[e._v(e._s(e.$locale.baseText("settings.personal.security")))])],1),t("div",[t("n8n-input-label",{attrs:{label:e.$locale.baseText("auth.password")}},[t("n8n-link",{on:{click:e.openPasswordModal}},[e._v(e._s(e.$locale.baseText("auth.changePassword")))])],1)],1)]),t("div",[t("n8n-button",{attrs:{float:"right",label:e.$locale.baseText("settings.personal.save"),size:"large",disabled:!e.hasAnyChanges||!e.readyToSubmit},on:{click:e.onSaveClick}})],1)])])},t5=[];const Jh={$style:Jz};function s5(s){for(var e in Jh)this[e]=Jh[e]}var i5=_(Hz,e5,t5,!1,s5,null,null,null),n5=i5.exports,o5=N(V).extend({name:"PageAlert",props:{message:{type:String,required:!0},popupClass:{type:String}},data(){return{alert:null}},mounted(){this.alert=this.$showAlert({message:xs(this.message),type:"warning",duration:0,showClose:!0,dangerouslyUseHTMLString:!0,customClass:this.popupClass||""})},beforeDestroy(){this.alert&&this.alert.close()}}),r5=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("fragment")},a5=[],l5=_(o5,r5,a5,!1,null,null,null,null),c5=l5.exports,d5=N(V).extend({name:"SettingsUsersView",components:{SettingsView:Ws,PageAlert:c5},async mounted(){this.showUMSetupWarning||await this.$store.dispatch("users/fetchUsers")},computed:{...F("users",["allUsers","currentUserId","showUMSetupWarning"]),...F("settings",["isSmtpSetup"])},methods:{redirectToSetup(){this.$router.push({name:O.SETUP})},onInvite(){this.$store.dispatch("ui/openModal",Mo)},async onDelete(s){const e=this.$store.getters["users/getUserById"];e(s)&&this.$store.dispatch("ui/openDeleteUserModal",{id:s})},async onReinvite(s){const e=this.$store.getters["users/getUserById"],t=e(s);if(t)try{await this.$store.dispatch("users/reinviteUser",{id:t.id}),this.$showToast({type:"success",title:this.$locale.baseText("settings.users.inviteResent"),message:this.$locale.baseText("settings.users.emailSentTo",{interpolate:{email:t.email||""}})})}catch(i){this.$showError(i,this.$locale.baseText("settings.users.userReinviteError"))}}}});const u5="_container_t6jjh_1",h5="_usersContainer_t6jjh_9",p5="_buttonContainer_t6jjh_16",f5="_setupInfoContainer_t6jjh_22",m5="_alert_t6jjh_26";var g5={container:u5,usersContainer:h5,buttonContainer:p5,setupInfoContainer:f5,alert:m5},w5=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("SettingsView",[t("div",{class:e.$style.container},[t("div",[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(e.$locale.baseText("settings.users")))]),e.showUMSetupWarning?e._e():t("div",{class:e.$style.buttonContainer},[t("n8n-tooltip",{attrs:{disabled:e.isSmtpSetup,placement:"bottom"}},[t("i18n",{attrs:{slot:"content",path:"settings.users.setupSMTPToInviteUsers",tag:"span"},slot:"content",scopedSlots:e._u([{key:"action",fn:function(){return[t("a",{attrs:{href:"https://docs.n8n.io/reference/user-management.html#step-one-smtp",target:"_blank"},domProps:{textContent:e._s(e.$locale.baseText("settings.users.setupSMTPToInviteUsers.instructions"))}})]},proxy:!0}],null,!1,2002913059)}),t("div",[t("n8n-button",{attrs:{label:e.$locale.baseText("settings.users.invite"),size:"large",disabled:!e.isSmtpSetup},on:{click:e.onInvite}})],1)],1)],1)],1),e.showUMSetupWarning?t("div",{class:e.$style.setupInfoContainer},[t("n8n-action-box",{attrs:{heading:e.$locale.baseText("settings.users.setupToInviteUsers"),buttonText:e.$locale.baseText("settings.users.setupMyAccount"),description:e.$locale.baseText("settings.users.setupToInviteUsersInfo")},on:{click:e.redirectToSetup}})],1):t("div",{class:e.$style.usersContainer},[e.isSmtpSetup?e._e():t("PageAlert",{attrs:{message:e.$locale.baseText("settings.users.smtpToAddUsersWarning"),popupClass:e.$style.alert}}),t("n8n-users-list",{attrs:{users:e.allUsers,currentUserId:e.currentUserId},on:{delete:e.onDelete,reinvite:e.onReinvite}})],1)])])},y5=[];const ep={$style:g5};function v5(s){for(var e in ep)this[e]=ep[e]}var _5=_(d5,w5,y5,!1,v5,null,null,null),O5=_5.exports,b5=N(V).extend({name:"CommunityPackageCard",props:{communityPackage:{type:Object},loading:{type:Boolean,default:!1}},data(){return{packageActions:[{label:this.$locale.baseText("settings.communityNodes.viewDocsAction.label"),value:At.VIEW_DOCS,type:"external-link"},{label:this.$locale.baseText("settings.communityNodes.uninstallAction.label"),value:At.UNINSTALL}]}},methods:{async onAction(s){switch(s){case At.VIEW_DOCS:this.$telemetry.track("user clicked to browse the cnr package documentation",{package_name:this.communityPackage.packageName,package_version:this.communityPackage.installedVersion}),window.open(`${Gp}${this.communityPackage.packageName}`,"_blank");break;case At.UNINSTALL:this.$store.dispatch("ui/openCommunityPackageUninstallConfirmModal",this.communityPackage.packageName);break}},onUpdateClick(){this.$store.dispatch("ui/openCommunityPackageUpdateConfirmModal",this.communityPackage.packageName)}}});const x5="_cardContainer_hpwak_1",$5="_packageCard_hpwak_9",T5="_cardSkeleton_hpwak_9",k5="_loader_hpwak_23",S5="_cardInfoContainer_hpwak_34",E5="_cardTitle_hpwak_39",C5="_cardSubtitle_hpwak_46",N5="_cardControlsContainer_hpwak_51",P5="_cardActions_hpwak_57";var D5={cardContainer:x5,packageCard:$5,cardSkeleton:T5,loader:k5,cardInfoContainer:S5,cardTitle:E5,cardSubtitle:C5,cardControlsContainer:N5,cardActions:P5},I5=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.cardContainer},[e.loading?t("div",{class:e.$style.cardSkeleton},[t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}}),t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}})],1):t("div",{class:e.$style.packageCard},[t("div",{class:e.$style.cardInfoContainer},[t("div",{class:e.$style.cardTitle},[t("n8n-text",{attrs:{bold:!0,size:"large"}},[e._v(e._s(e.communityPackage.packageName))])],1),t("div",{class:e.$style.cardSubtitle},[t("n8n-text",{attrs:{bold:!0,size:"small",color:"text-light"}},[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.packageNodes.label",{adjustToNumber:e.communityPackage.installedNodes.length}))+":\xA0 ")]),t("n8n-text",{attrs:{size:"small",color:"text-light"}},e._l(e.communityPackage.installedNodes,function(i,n){return t("span",{key:i.name},[e._v(" "+e._s(i.name)),n!=e.communityPackage.installedNodes.length-1?t("span",[e._v(",")]):e._e()])}),0)],1)]),t("div",{class:e.$style.cardControlsContainer},[t("n8n-text",{attrs:{bold:!0,size:"large",color:"text-light"}},[e._v(" v"+e._s(e.communityPackage.installedVersion)+" ")]),e.communityPackage.failedLoading===!0?t("n8n-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.failedToLoad.tooltip"))+" ")]),t("n8n-icon",{attrs:{icon:"exclamation-triangle",color:"danger",size:"large"}})],1):e.communityPackage.updateAvailable?t("n8n-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.updateAvailable.tooltip"))+" ")]),t("n8n-button",{attrs:{type:"outline",label:"Update"},on:{click:e.onUpdateClick}})],1):t("n8n-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.upToDate.tooltip"))+" ")]),t("n8n-icon",{attrs:{icon:"check-circle",color:"text-light",size:"large"}})],1),t("div",{class:e.$style.cardActions},[t("n8n-action-toggle",{attrs:{actions:e.packageActions},on:{action:e.onAction}})],1)],1)])])},A5=[];const tp={$style:D5};function R5(s){for(var e in tp)this[e]=tp[e]}var M5=_(b5,I5,A5,!1,R5,null,null,null),W5=M5.exports;const L5=31;var Q5=N(V).extend({name:"SettingsCommunityNodesView",components:{SettingsView:Ws,CommunityPackageCard:W5},data(){return{loading:!1}},async mounted(){try{this.$data.loading=!0,await this.$store.dispatch("communityNodes/fetchInstalledPackages");const s=this.getInstalledPackages,e=s.filter(t=>t.updateAvailable);this.$telemetry.track("user viewed cnr settings page",{num_of_packages_installed:s.length,installed_packages:s.map(t=>({package_name:t.packageName,package_version:t.installedVersion,package_nodes:t.installedNodes.map(i=>`${i.name}-v${i.latestVersion}`),is_update_available:t.updateAvailable!==void 0})),packages_to_update:e.map(t=>({package_name:t.packageName,package_version_current:t.installedVersion,package_version_available:t.updateAvailable})),number_of_updates_available:e.length})}catch(s){this.$showError(s,this.$locale.baseText("settings.communityNodes.fetchError.title"),this.$locale.baseText("settings.communityNodes.fetchError.message"))}finally{this.$data.loading=!1}try{await this.$store.dispatch("communityNodes/fetchAvailableCommunityPackageCount")}finally{this.$data.loading=!1}},computed:{...F("settings",["isNpmAvailable","isQueueModeEnabled"]),...F("communityNodes",["getInstalledPackages"]),getEmptyStateDescription(){const s=this.$store.getters["communityNodes/availablePackageCount"];return s<L5?this.$locale.baseText("settings.communityNodes.empty.description.no-packages",{interpolate:{docURL:Ys}}):this.$locale.baseText("settings.communityNodes.empty.description",{interpolate:{docURL:Ys,count:(Math.floor(s/10)*10).toString()}})},isDesktopDeployment(){return this.$store.getters["settings/isDesktopDeployment"]},shouldShowInstallButton(){return!this.isDesktopDeployment&&this.isNpmAvailable},actionBoxConfig(){return this.isDesktopDeployment?{calloutText:this.$locale.baseText("settings.communityNodes.notAvailableOnDesktop"),calloutTheme:"warning",hideButton:!0}:this.isNpmAvailable?this.isQueueModeEnabled?{calloutText:this.$locale.baseText("settings.communityNodes.queueMode.warning",{interpolate:{docURL:Ys}}),calloutTheme:"warning",hideButton:!0}:{calloutText:"",calloutTheme:"",hideButton:!1}:{calloutText:this.$locale.baseText("settings.communityNodes.npmUnavailable.warning",{interpolate:{npmUrl:C_}}),calloutTheme:"warning",hideButton:!0}}},methods:{openInstallModal(s){const e={is_empty_state:this.getInstalledPackages.length===0};this.$telemetry.track("user clicked cnr install button",e),this.$externalHooks().run("settingsCommunityNodesView.openInstallModal",e),this.$store.dispatch("ui/openModal",Uo)}}});const B5="_container_18kse_1",U5="_headingContainer_18kse_9",V5="_loadingContainer_18kse_14",F5="_actionBoxContainer_18kse_19",j5="_cardsContainer_18kse_23";var z5={container:B5,headingContainer:U5,loadingContainer:V5,actionBoxContainer:F5,cardsContainer:j5},G5=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("SettingsView",[t("div",{class:e.$style.container},[t("div",{class:e.$style.headingContainer},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(e.$locale.baseText("settings.communityNodes")))]),!e.isQueueModeEnabled&&e.getInstalledPackages.length>0&&!e.loading?t("n8n-button",{attrs:{label:e.$locale.baseText("settings.communityNodes.installModal.installButton.label"),size:"large"},on:{click:e.openInstallModal}}):e._e()],1),e.isQueueModeEnabled?t("div",{class:e.$style.actionBoxContainer},[t("n8n-action-box",{attrs:{heading:e.$locale.baseText("settings.communityNodes.empty.title"),description:e.getEmptyStateDescription,calloutText:e.actionBoxConfig.calloutText,calloutTheme:e.actionBoxConfig.calloutTheme}})],1):e.loading?t("div",{class:e.$style.cardsContainer},e._l(2,function(i){return t("community-package-card",{key:"index-"+i,attrs:{loading:!0}})}),1):e.getInstalledPackages.length===0?t("div",{class:e.$style.actionBoxContainer},[t("n8n-action-box",{attrs:{heading:e.$locale.baseText("settings.communityNodes.empty.title"),description:e.getEmptyStateDescription,buttonText:e.shouldShowInstallButton?e.$locale.baseText("settings.communityNodes.empty.installPackageLabel"):"",calloutText:e.actionBoxConfig.calloutText,calloutTheme:e.actionBoxConfig.calloutTheme},on:{click:e.openInstallModal}})],1):t("div",{class:e.$style.cardsContainer},e._l(e.getInstalledPackages,function(i){return t("community-package-card",{key:i.packageName,attrs:{communityPackage:i}})}),1)])])},H5=[];const sp={$style:z5};function q5(s){for(var e in sp)this[e]=sp[e]}var X5=_(Q5,G5,H5,!1,q5,null,null,null),Y5=X5.exports,Z5=N(V).extend({name:"SettingsPersonalView",components:{SettingsView:Ws,CopyInput:ul},data(){return{loading:!1,mounted:!1,apiKey:"",apiPlaygroundPath:""}},mounted(){this.getApiKey();const s=this.$store.getters.getBaseUrl,e=this.$store.getters["settings/publicApiPath"],t=this.$store.getters["settings/publicApiLatestVersion"];this.apiPlaygroundPath=`${s}${e}/v${t}/docs`},computed:{currentUser(){return this.$store.getters["users/currentUser"]}},methods:{async showDeleteModal(){await this.confirmMessage(this.$locale.baseText("settings.api.delete.description"),this.$locale.baseText("settings.api.delete.title"),null,this.$locale.baseText("settings.api.delete.button"),this.$locale.baseText("generic.cancel"))&&this.deleteApiKey()},async getApiKey(){try{this.apiKey=await this.$store.dispatch("settings/getApiKey")}catch(s){this.$showError(s,this.$locale.baseText("settings.api.view.error"))}finally{this.mounted=!0}},async createApiKey(){this.loading=!0;try{this.apiKey=await this.$store.dispatch("settings/createApiKey")}catch(s){this.$showError(s,this.$locale.baseText("settings.api.create.error"))}finally{this.loading=!1,this.$telemetry.track("User clicked create API key button")}},async deleteApiKey(){try{await this.$store.dispatch("settings/deleteApiKey"),this.$showMessage({title:this.$locale.baseText("settings.api.delete.toast"),type:"success"}),this.apiKey=""}catch(s){this.$showError(s,this.$locale.baseText("settings.api.delete.error"))}finally{this.$telemetry.track("User clicked delete API key button")}},onCopy(){this.$telemetry.track("User clicked copy API key button")}}});const K5="_container_1xc1f_1",J5="_header_1xc1f_5",e9="_card_1xc1f_14",t9="_hint_1xc1f_25";var s9={container:K5,header:J5,card:e9,delete:"_delete_1xc1f_18",hint:t9},i9=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("SettingsView",[t("div",{class:e.$style.container},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText("settings.api"))+" "),t("span",{style:{fontSize:"var(--font-size-s)",color:"var(--color-text-light)"}},[e._v(" ("+e._s(e.$locale.baseText("beta"))+") ")])])],1),e.apiKey?t("div",[t("p",{staticClass:"mb-s"},[t("n8n-info-tip",{attrs:{bold:!1}},[t("i18n",{attrs:{path:"settings.api.view.info",tag:"span"},scopedSlots:e._u([{key:"apiAction",fn:function(){return[t("a",{attrs:{href:"https://docs.n8n.io/api",target:"_blank"},domProps:{textContent:e._s(e.$locale.baseText("settings.api.view.info.api"))}})]},proxy:!0},{key:"webhookAction",fn:function(){return[t("a",{attrs:{href:"https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.webhook/",target:"_blank"},domProps:{textContent:e._s(e.$locale.baseText("settings.api.view.info.webhook"))}})]},proxy:!0}],null,!1,2486472501)})],1)],1),t("n8n-card",{staticClass:"mb-4xs",class:e.$style.card},[t("span",{class:e.$style.delete},[t("n8n-link",{attrs:{bold:!0},on:{click:e.showDeleteModal}},[e._v(" "+e._s(e.$locale.baseText("generic.delete"))+" ")])],1),t("div",{staticClass:"ph-no-capture"},[t("CopyInput",{attrs:{label:e.$locale.baseText("settings.api.view.myKey"),value:e.apiKey,"copy-button-text":e.$locale.baseText("generic.clickToCopy"),"toast-title":e.$locale.baseText("settings.api.view.copy.toast")},on:{copy:e.onCopy}})],1)]),t("div",{class:e.$style.hint},[t("n8n-text",{attrs:{size:"small"}},[e._v(" "+e._s(e.$locale.baseText("settings.api.view.tryapi"))+" ")]),t("n8n-link",{attrs:{to:e.apiPlaygroundPath,newWindow:!0,size:"small"}},[e._v(" "+e._s(e.$locale.baseText("settings.api.view.apiPlayground"))+" ")])],1)],1):e.mounted?t("n8n-action-box",{attrs:{buttonText:e.$locale.baseText(e.loading?"settings.api.create.button.loading":"settings.api.create.button"),description:e.$locale.baseText("settings.api.create.description")},on:{click:e.createApiKey}}):e._e()],1)])},n9=[];const ip={$style:s9};function o9(s){for(var e in ip)this[e]=ip[e]}var r9=_(Z5,i9,n9,!1,o9,null,null,null),a9=r9.exports,l9=m.extend({name:"SettingsFakeDoorView",components:{SettingsView:Ws,FeatureComingSoon:Fg},props:{featureId:{type:String,required:!0}},computed:{featureInfo(){return this.$store.getters["ui/getFakeDoorFeatures"][this.featureId]}},methods:{openLinkPage(){window.open(this.featureInfo.linkURL,"_blank")}}});const c9="_header_fa9t3_1";var d9={header:c9},u9=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("SettingsView",[t("FeatureComingSoon",{attrs:{featureId:e.featureId,showTitle:""}})],1)},h9=[];const np={$style:d9};function p9(s){for(var e in np)this[e]=np[e]}var f9=_(l9,u9,h9,!1,p9,null,null,null),m9=f9.exports,g9=N(V,Ce).extend({name:"SetupView",components:{AuthView:rn},async mounted(){const s=this.getAllCredentials(),e=this.getAllWorkflows();await Promise.all([s,e])},data(){return{FORM_CONFIG:{title:this.$locale.baseText("auth.setup.setupOwner"),buttonText:this.$locale.baseText("auth.setup.next"),secondaryButtonText:this.$locale.baseText("auth.setup.skipSetupTemporarily"),inputs:[{name:"email",properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0}},{name:"firstName",properties:{label:this.$locale.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",properties:{label:this.$locale.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.password"),type:"password",required:!0,validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"agree",properties:{label:this.$locale.baseText("auth.agreement.label"),type:"checkbox"}}]},loading:!1,workflowsCount:0,credentialsCount:0}},methods:{async getAllCredentials(){const s=await this.$store.dispatch("credentials/fetchAllCredentials");this.credentialsCount=s.length},async getAllWorkflows(){const s=await this.restApi().getWorkflows();this.workflowsCount=s.length},async confirmSetupOrGoBack(){if(this.workflowsCount===0&&this.credentialsCount===0)return!0;const s=this.workflowsCount>0?this.$locale.baseText("auth.setup.setupConfirmation.existingWorkflows",{adjustToNumber:this.workflowsCount}):"",e=this.credentialsCount>0?this.$locale.baseText("auth.setup.setupConfirmation.credentials",{adjustToNumber:this.credentialsCount}):"",t=s&&e?this.$locale.baseText("auth.setup.setupConfirmation.concatEntities",{interpolate:{workflows:s,credentials:e}}):s||e;return await this.confirmMessage(this.$locale.baseText("auth.setup.confirmOwnerSetupMessage",{interpolate:{entities:t}}),this.$locale.baseText("auth.setup.confirmOwnerSetup"),null,this.$locale.baseText("auth.setup.createAccount"),this.$locale.baseText("auth.setup.goBack"))},async onSubmit(s){try{if(!await this.confirmSetupOrGoBack())return;const t=this.$store.getters["settings/showSetupPage"];if(this.loading=!0,await this.$store.dispatch("users/createOwner",s),s.agree===!0)try{await this.$store.dispatch("ui/submitContactEmail",{email:s.email,agree:s.agree})}catch{}t?await this.$router.push({name:O.HOMEPAGE}):await this.$router.push({name:O.USERS_SETTINGS})}catch(e){this.$showError(e,this.$locale.baseText("auth.setup.settingUpOwnerError"))}this.loading=!1},async showSkipConfirmation(){await this.confirmMessage(this.$locale.baseText("auth.setup.ownerAccountBenefits"),this.$locale.baseText("auth.setup.skipOwnerSetupQuestion"),null,this.$locale.baseText("auth.setup.skipSetup"),this.$locale.baseText("auth.setup.goBack"))&&this.onSkip()},onSkip(){this.$store.dispatch("users/skipOwnerSetup"),this.$router.push({name:O.HOMEPAGE})}}}),w9=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.FORM_CONFIG,formLoading:e.loading},on:{submit:e.onSubmit,secondaryClick:e.showSkipConfirmation}})},y9=[],v9=_(g9,w9,y9,!1,null,null,null,null),_9=v9.exports,O9=N(V).extend({name:"SigninView",components:{AuthView:rn},data(){return{FORM_CONFIG:{title:this.$locale.baseText("auth.signin"),buttonText:this.$locale.baseText("auth.signin"),redirectText:this.$locale.baseText("forgotPassword"),redirectLink:"/forgot-password",inputs:[{name:"email",properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],showRequiredAsterisk:!1,validateOnBlur:!1,autocomplete:"email",capitalize:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.password"),type:"password",required:!0,showRequiredAsterisk:!1,validateOnBlur:!1,autocomplete:"current-password",capitalize:!0}}]},loading:!1}},methods:{async onSubmit(s){try{if(this.loading=!0,await this.$store.dispatch("users/loginWithCreds",s),this.clearAllStickyNotifications(),this.loading=!1,typeof this.$route.query.redirect=="string"){const e=decodeURIComponent(this.$route.query.redirect);if(e.startsWith("/")){this.$router.push(e);return}}this.$router.push({name:O.HOMEPAGE})}catch(e){this.$showError(e,this.$locale.baseText("auth.signin.error")),this.loading=!1}}}}),b9=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.FORM_CONFIG,formLoading:e.loading},on:{submit:e.onSubmit}})},x9=[],$9=_(O9,b9,x9,!1,null,null,null,null),T9=$9.exports,k9=N(V).extend({name:"SignupView",components:{AuthView:rn},data(){return{FORM_CONFIG:{title:this.$locale.baseText("auth.signup.setupYourAccount"),buttonText:this.$locale.baseText("auth.signup.finishAccountSetup"),inputs:[{name:"firstName",properties:{label:this.$locale.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",properties:{label:this.$locale.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.password"),type:"password",validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],required:!0,infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"agree",properties:{label:this.$locale.baseText("auth.agreement.label"),type:"checkbox"}}]},loading:!1,inviter:null}},async mounted(){const s=this.$route.query.inviterId,e=this.$route.query.inviteeId;try{if(!s||!e)throw new Error(this.$locale.baseText("auth.signup.missingTokenError"));const t=await this.$store.dispatch("users/validateSignupToken",{inviterId:s,inviteeId:e});this.inviter=t.inviter}catch(t){this.$showError(t,this.$locale.baseText("auth.signup.tokenValidationError")),this.$router.replace({name:O.SIGNIN})}},computed:{inviteMessage(){return this.inviter?this.$locale.baseText("settings.signup.signUpInviterInfo",{interpolate:{firstName:this.inviter.firstName,lastName:this.inviter.lastName}}):null}},methods:{async onSubmit(s){try{this.loading=!0;const e=this.$route.query.inviterId,t=this.$route.query.inviteeId;if(await this.$store.dispatch("users/signup",{...s,inviterId:e,inviteeId:t}),s.agree===!0)try{await this.$store.dispatch("ui/submitContactEmail",{email:s.email,agree:s.agree})}catch{}await this.$router.push({name:O.HOMEPAGE})}catch(e){this.$showError(e,this.$locale.baseText("auth.signup.setupYourAccountError"))}this.loading=!1}}}),S9=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.FORM_CONFIG,formLoading:e.loading,subtitle:e.inviteMessage},on:{submit:e.onSubmit}})},E9=[],C9=_(k9,S9,E9,!1,null,null,null,null),N9=C9.exports,P9=m.extend({name:"TemplateDetailsBlock",props:{title:{type:String}}});const D9="_block_czs8t_1",I9="_header_czs8t_5",A9="_content_czs8t_10";var R9={block:D9,header:I9,content:A9},M9=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.block},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{tag:"h3",size:"small",color:"text-base"}},[e._v(e._s(e.title))])],1),t("div",{class:e.$style.content},[e._t("default")],2)])},W9=[];const op={$style:R9};function L9(s){for(var e in op)this[e]=op[e]}var Q9=_(P9,M9,W9,!1,L9,null,null,null),B9=Q9.exports,U9=m.extend({name:"TemplateDetails",props:{blockTitle:{type:String},loading:{type:Boolean},template:{type:Object}},components:{NodeIcon:pi,TemplateDetailsBlock:B9},methods:{abbreviateNumber:hf,filterTemplateNodes:al,redirectToCategory(s){this.$store.commit("templates/resetSessionId"),this.$router.push(`/templates?categories=${s}`)},redirectToSearchPage(s){this.$store.commit("templates/resetSessionId"),this.$router.push(`/templates?search=${s.displayName}`)}}});const V9="_icons_1yw74_1",F9="_icon_1yw74_1",j9="_text_1yw74_12";var z9={icons:V9,icon:F9,text:j9},G9=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("n8n-loading",{attrs:{loading:e.loading,rows:5,variant:"p"}}),!e.loading&&e.template.nodes.length>0?t("template-details-block",{attrs:{title:e.blockTitle}},[t("div",{class:e.$style.icons},e._l(e.filterTemplateNodes(e.template.nodes),function(i){return t("div",{key:i.name,class:e.$style.icon},[t("NodeIcon",{attrs:{nodeType:i,size:24,showTooltip:!0},on:{click:function(n){return e.redirectToSearchPage(i)}}})],1)}),0)]):e._e(),!e.loading&&e.template.categories.length>0?t("template-details-block",{attrs:{title:e.$locale.baseText("template.details.categories")}},[t("n8n-tags",{attrs:{tags:e.template.categories},on:{click:e.redirectToCategory}})],1):e._e(),e.loading?e._e():t("template-details-block",{attrs:{title:e.$locale.baseText("template.details.details")}},[t("div",{class:e.$style.text},[t("n8n-text",{attrs:{size:"small",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("template.details.created"))+" "),t("TimeAgo",{attrs:{date:e.template.createdAt}}),t("span",[e._v(e._s(e.$locale.baseText("template.details.by")))]),e.template.user?t("span",[e._v(" "+e._s(e.template.user.username))]):t("span",[e._v(" n8n team")])],1)],1),t("div",{class:e.$style.text},[e.template.totalViews!==0?t("n8n-text",{attrs:{size:"small",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("template.details.viewed"))+" "+e._s(e.abbreviateNumber(e.template.totalViews))+" "+e._s(e.$locale.baseText("template.details.times"))+" ")]):e._e()],1)])],1)},H9=[];const rp={$style:z9};function q9(s){for(var e in rp)this[e]=rp[e]}var X9=_(U9,G9,H9,!1,q9,null,null,null),$w=X9.exports,Y9=N(be).extend({name:"NodeList",props:{nodes:{type:Array},limit:{type:Number,default:4},size:{type:String,default:"sm"}},components:{NodeIcon:pi},computed:{filteredCoreNodes(){return al(this.nodes)},hiddenNodes(){return this.filteredCoreNodes.length-this.countNodesToBeSliced(this.filteredCoreNodes)},slicedNodes(){return this.filteredCoreNodes.slice(0,this.countNodesToBeSliced(this.filteredCoreNodes))}},methods:{countNodesToBeSliced(s){return s.length>this.limit?this.limit-1:this.limit}}});const Z9="_list_10uzg_1",K9="_container_10uzg_9",J9="_sm_10uzg_14",e3="_md_10uzg_18",t3="_button_10uzg_22",s3="_buttonSm_10uzg_36",i3="_buttonMd_10uzg_43";var n3={list:Z9,container:K9,sm:J9,md:e3,button:t3,buttonSm:s3,buttonMd:i3},o3=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.list},[e._l(e.slicedNodes,function(i){return t("div",{key:i.name,class:[e.$style.container,e.$style[e.size]]},[t("NodeIcon",{attrs:{nodeType:i,size:e.size==="md"?24:18,showTooltip:!0}})],1)}),e.filteredCoreNodes.length>e.limit+1?t("div",{class:[e.$style.button,e.size==="md"?e.$style.buttonMd:e.$style.buttonSm]},[e._v(" +"+e._s(e.hiddenNodes)+" ")]):e._e()],2)},r3=[];const ap={$style:n3};function a3(s){for(var e in ap)this[e]=ap[e]}var l3=_(Y9,o3,r3,!1,a3,null,null,null),Tw=l3.exports,c3=N(be).extend({name:"TemplateCard",props:{lastItem:{type:Boolean,default:!1},firstItem:{type:Boolean,default:!1},workflow:{type:Object},useWorkflowButton:{type:Boolean},loading:{type:Boolean}},components:{NodeList:Tw},data(){return{nodesToBeShown:5}},methods:{filterTemplateNodes:al,abbreviateNumber:hf,countNodesToBeSliced(s){return s.length>this.nodesToBeShown?this.nodesToBeShown-1:this.nodesToBeShown},onUseWorkflowClick(s){this.$emit("useWorkflow",s)},onCardClick(s){this.$emit("click",s)}}});const d3="_nodes_cg1a9_1",u3="_icon_cg1a9_8",h3="_card_cg1a9_12",p3="_hideOnHover_cg1a9_23",f3="_buttonContainer_cg1a9_26",m3="_loaded_cg1a9_37",g3="_first_cg1a9_41",w3="_last_cg1a9_47",y3="_content_cg1a9_52",v3="_line_cg1a9_57",_3="_loading_cg1a9_63",O3="_nodesContainer_cg1a9_68";var b3={nodes:d3,icon:u3,card:h3,hideOnHover:p3,buttonContainer:f3,loaded:m3,first:g3,last:w3,content:y3,line:v3,loading:_3,nodesContainer:O3},x3=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:[e.$style.card,e.lastItem&&e.$style.last,e.firstItem&&e.$style.first,!e.loading&&e.$style.loaded],on:{click:e.onCardClick}},[e.loading?t("div",{class:e.$style.loading},[t("n8n-loading",{attrs:{rows:2,shrinkLast:!1,loading:e.loading}})],1):t("div",[t("n8n-heading",{attrs:{bold:!0,size:"small"}},[e._v(e._s(e.workflow.name))]),t("div",{class:e.$style.content},[e.workflow.totalViews?t("span",[t("n8n-text",{attrs:{size:"small",color:"text-light"}},[t("font-awesome-icon",{attrs:{icon:"eye"}}),e._v(" "+e._s(e.abbreviateNumber(e.workflow.totalViews))+" ")],1)],1):e._e(),e.workflow.totalViews?t("div",{class:e.$style.line,domProps:{textContent:e._s("|")}}):e._e(),t("n8n-text",{attrs:{size:"small",color:"text-light"}},[t("TimeAgo",{attrs:{date:e.workflow.createdAt}})],1),e.workflow.user?t("div",{class:e.$style.line,domProps:{textContent:e._s("|")}}):e._e(),e.workflow.user?t("n8n-text",{attrs:{size:"small",color:"text-light"}},[e._v("By "+e._s(e.workflow.user.username))]):e._e()],1)],1),e.loading?e._e():t("div",{class:[e.$style.nodesContainer,e.useWorkflowButton&&e.$style.hideOnHover]},[e.workflow.nodes?t("NodeList",{attrs:{nodes:e.workflow.nodes,limit:e.nodesToBeShown,size:"md"}}):e._e()],1),e.useWorkflowButton?t("div",{class:e.$style.buttonContainer},[e.useWorkflowButton?t("n8n-button",{attrs:{outline:"",label:"Use workflow"},on:{click:function(i){return i.stopPropagation(),e.onUseWorkflowClick.apply(null,arguments)}}}):e._e()],1):e._e()])},$3=[];const lp={$style:b3};function T3(s){for(var e in lp)this[e]=lp[e]}var k3=_(c3,x3,$3,!1,T3,null,null,null),nr=k3.exports,S3=N(be).extend({name:"TemplateList",props:{infiniteScrollEnabled:{type:Boolean,default:!1},loading:{type:Boolean},useWorkflowButton:{type:Boolean,default:!1},workflows:{type:Array},totalWorkflows:{type:Number}},mounted(){if(this.infiniteScrollEnabled){const s=document.getElementById("content");s&&s.addEventListener("scroll",this.onScroll)}},destroyed(){const s=document.getElementById("content");s&&s.removeEventListener("scroll",this.onScroll)},components:{TemplateCard:nr},methods:{onScroll(){const s=this.$refs.loader;if(!s||this.loading)return;const e=s.getBoundingClientRect();e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)&&this.$emit("loadMore")},onCardClick(s,e){this.$emit("openTemplate",{event:s,id:e})},onUseWorkflow(s,e){this.$emit("useWorkflow",{event:s,id:e})}}});const E3="_header_1ivn7_1",C3="_workflowButton_1ivn7_5",N3="_button_1ivn7_5",P3="_nodes_1ivn7_8";var D3={header:E3,workflowButton:C3,button:N3,nodes:P3},I3=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.loading||e.workflows.length?t("div",{class:e.$style.list},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{bold:!0,size:"medium",color:"text-light"}},[e._v(" "+e._s(e.$locale.baseText("templates.workflows"))+" "),!e.loading&&e.totalWorkflows?t("span",{domProps:{textContent:e._s(`(${e.totalWorkflows})`)}}):e._e()])],1),t("div",{class:e.$style.container},[e._l(e.workflows,function(i,n){return t("TemplateCard",{key:i.id,attrs:{workflow:i,firstItem:n===0,lastItem:n===e.workflows.length-1&&!e.loading,useWorkflowButton:e.useWorkflowButton},on:{click:o=>e.onCardClick(o,i.id),useWorkflow:o=>e.onUseWorkflow(o,i.id)}})}),e.infiniteScrollEnabled?t("div",{ref:"loader"}):e._e(),e.loading?t("div",e._l(4,function(i){return t("TemplateCard",{key:"index-"+i,attrs:{loading:!0,firstItem:e.workflows.length===0&&i===1,lastItem:i===4}})}),1):e._e()],2)]):e._e()},A3=[];const cp={$style:D3};function R3(s){for(var e in cp)this[e]=cp[e]}var M3=_(S3,I3,A3,!1,R3,null,null,null),kw=M3.exports,W3=m.extend({name:"TemplateList",data(){return{routeHasHistory:!1}},methods:{navigateTo(){this.routeHasHistory?this.$router.go(-1):this.$router.push({name:O.TEMPLATES})}},mounted(){window.history.state?this.routeHasHistory=!0:this.routeHasHistory=!1}});const L3="_wrapper_1g0gc_1",Q3="_icon_1g0gc_6",B3="_text_1g0gc_7";var U3={wrapper:L3,icon:Q3,text:B3},V3=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.wrapper,on:{click:e.navigateTo}},[t("font-awesome-icon",{class:e.$style.icon,attrs:{icon:"arrow-left"}}),t("div",{class:e.$style.text,domProps:{textContent:e._s(e.$locale.baseText("template.buttons.goBackButton"))}})],1)},F3=[];const dp={$style:U3};function j3(s){for(var e in dp)this[e]=dp[e]}var z3=_(W3,V3,F3,!1,j3,null,null,null),G3=z3.exports,H3=m.extend({name:"TemplatesView",components:{GoBackButton:G3},props:{goBackEnabled:{type:Boolean,default:!1}}});const q3="_template_1fmap_1",X3="_container_1fmap_6",Y3="_header_1fmap_17",Z3="_goBack_1fmap_23";var K3={template:q3,container:X3,header:Y3,goBack:Z3},J3=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.template},[t("div",{class:e.$style.container},[t("div",{class:e.$style.header},[e.goBackEnabled?t("div",{class:e.$style.goBack},[t("GoBackButton")],1):e._e(),e._t("header")],2),t("div",[e._t("content")],2)])])},eG=[];const up={$style:K3};function tG(s){for(var e in up)this[e]=up[e]}var sG=_(H3,J3,eG,!1,tG,null,null,null),sc=sG.exports,iG=N(ie).extend({name:"TemplatesCollectionView",components:{TemplateDetails:$w,TemplateList:kw,TemplatesView:sc},computed:{collection(){return this.$store.getters["templates/getCollectionById"](this.collectionId)},collectionId(){return this.$route.params.id},collectionWorkflows(){return this.collection?this.collection.workflows.map(({id:s})=>this.$store.getters["templates/getTemplateById"](s)):null}},data(){return{loading:!0,notFoundError:!1}},methods:{scrollToTop(){setTimeout(()=>{const s=document.getElementById("content");s&&s.scrollTo({top:0,behavior:"smooth"})},50)},onOpenTemplate({event:s,id:e}){this.navigateTo(s,O.TEMPLATE,e)},onUseWorkflow({event:s,id:e}){const t={template_id:e,wf_template_repo_session_id:this.$store.getters["templates/currentSessionId"],source:"collection"};this.$externalHooks().run("templatesCollectionView.onUseWorkflow",t),this.$telemetry.track("User inserted workflow template",t),this.navigateTo(s,O.TEMPLATE_IMPORT,e)},navigateTo(s,e,t){if(s.metaKey||s.ctrlKey){const i=this.$router.resolve({name:e,params:{id:t}});window.open(i.href,"_blank");return}else this.$router.push({name:e,params:{id:t}})}},watch:{collection(s){Bi(s?`n8n - Template collection: ${s.name}`:"n8n - Templates")}},async mounted(){if(this.scrollToTop(),this.collection&&this.collection.full){this.loading=!1;return}try{await this.$store.dispatch("templates/getCollectionById",this.collectionId)}catch{this.notFoundError=!0}this.loading=!1}});const nG="_wrapper_b0vqe_1",oG="_notFound_b0vqe_11",rG="_title_b0vqe_15",aG="_button_b0vqe_19",lG="_mainContent_b0vqe_23",cG="_markdown_b0vqe_34",dG="_details_b0vqe_38";var uG={wrapper:nG,notFound:oG,title:rG,button:aG,mainContent:lG,markdown:cG,details:dG},hG=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("TemplatesView",{attrs:{goBackEnabled:!0},scopedSlots:e._u([{key:"header",fn:function(){return[e.notFoundError?t("div",{class:e.$style.notFound},[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("templates.collectionsNotFound")))])],1):t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.title},[e.collection&&e.collection.name?t("n8n-heading",{attrs:{tag:"h1",size:"2xlarge"}},[e._v(" "+e._s(e.collection.name)+" ")]):e._e(),e.collection&&e.collection.name?t("n8n-text",{attrs:{color:"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("templates.collection"))+" ")]):e._e(),t("n8n-loading",{attrs:{loading:!e.collection||!e.collection.name,rows:2,variant:"h1"}})],1)])]},proxy:!0},e.notFoundError?null:{key:"content",fn:function(){return[t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.mainContent},[e.loading||e.collection&&e.collection.description?t("div",{class:e.$style.markdown},[t("n8n-markdown",{attrs:{content:e.collection&&e.collection.description,images:e.collection&&e.collection.image,loading:e.loading}})],1):e._e(),t("TemplateList",{attrs:{"infinite-scroll-enabled":!1,loading:e.loading,"use-workflow-button":!0,workflows:e.loading?[]:e.collectionWorkflows},on:{useWorkflow:e.onUseWorkflow,openTemplate:e.onOpenTemplate}})],1),t("div",{class:e.$style.details},[t("TemplateDetails",{attrs:{"block-title":e.$locale.baseText("template.details.appsInTheCollection"),loading:e.loading,template:e.collection}})],1)])]},proxy:!0}],null,!0)})},pG=[];const hp={$style:uG};function fG(s){for(var e in hp)this[e]=hp[e]}var mG=_(iG,hG,pG,!1,fG,null,null,null),gG=mG.exports,wG=N(ie).extend({name:"TemplatesWorkflowView",components:{TemplateDetails:$w,TemplatesView:sc,WorkflowPreview:xw},computed:{template(){return this.$store.getters["templates/getTemplateById"](this.templateId)},templateId(){return this.$route.params.id}},data(){return{loading:!0,showPreview:!0,notFoundError:!1}},methods:{openWorkflow(s,e){const t={source:"workflow",template_id:s,wf_template_repo_session_id:this.$store.getters["templates/currentSessionId"]};if(this.$externalHooks().run("templatesWorkflowView.openWorkflow",t),this.$telemetry.track("User inserted workflow template",t),e.metaKey||e.ctrlKey){const i=this.$router.resolve({name:O.TEMPLATE_IMPORT,params:{id:s}});window.open(i.href,"_blank");return}else this.$router.push({name:O.TEMPLATE_IMPORT,params:{id:s}})},onHidePreview(){this.showPreview=!1},scrollToTop(){const s=document.getElementById("content");s&&s.scrollTo({top:0})}},watch:{template(s){Bi(s?`n8n - Template template: ${s.name}`:"n8n - Templates")}},async mounted(){if(this.scrollToTop(),this.template&&this.template.full){this.loading=!1;return}try{await this.$store.dispatch("templates/getTemplateById",this.templateId)}catch{this.notFoundError=!0}this.loading=!1}});const yG="_wrapper_trbdo_1",vG="_notFound_trbdo_6",_G="_title_trbdo_10",OG="_button_trbdo_14",bG="_image_trbdo_18",xG="_content_trbdo_29",$G="_markdown_trbdo_40",TG="_details_trbdo_51";var kG={wrapper:yG,notFound:vG,title:_G,button:OG,image:bG,content:xG,markdown:$G,details:TG},SG=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("TemplatesView",{attrs:{goBackEnabled:!0},scopedSlots:e._u([{key:"header",fn:function(){return[e.notFoundError?t("div",{class:e.$style.notFound},[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("templates.workflowsNotFound")))])],1):t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.title},[e.template&&e.template.name?t("n8n-heading",{attrs:{tag:"h1",size:"2xlarge"}},[e._v(e._s(e.template.name))]):e._e(),e.template&&e.template.name?t("n8n-text",{attrs:{color:"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("generic.workflow"))+" ")]):e._e(),t("n8n-loading",{attrs:{loading:!e.template||!e.template.name,rows:2,variant:"h1"}})],1),t("div",{class:e.$style.button},[e.template?t("n8n-button",{attrs:{label:e.$locale.baseText("template.buttons.useThisWorkflowButton"),size:"large"},on:{click:function(i){return e.openWorkflow(e.template.id,i)}}}):e._e(),t("n8n-loading",{attrs:{loading:!e.template,rows:1,variant:"button"}})],1)])]},proxy:!0},e.notFoundError?null:{key:"content",fn:function(){return[t("div",{class:e.$style.image},[e.showPreview?t("WorkflowPreview",{attrs:{loading:e.loading,workflow:e.template&&e.template.workflow},on:{close:e.onHidePreview}}):e._e()],1),t("div",{class:e.$style.content},[t("div",{class:e.$style.markdown},[t("n8n-markdown",{attrs:{content:e.template&&e.template.description,images:e.template&&e.template.image,loading:e.loading}})],1),t("div",{class:e.$style.details},[t("TemplateDetails",{attrs:{"block-title":e.$locale.baseText("template.details.appsInTheWorkflow"),loading:e.loading,template:e.template}})],1)])]},proxy:!0}],null,!0)})},EG=[];const pp={$style:kG};function CG(s){for(var e in pp)this[e]=pp[e]}var NG=_(wG,SG,EG,!1,CG,null,null,null),PG=NG.exports,DG=N(be).extend({name:"Card",props:{loading:{type:Boolean},title:{type:String}}});const IG="_card_rtr81_1",AG="_title_rtr81_17";var RG={card:IG,title:AG},MG=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-card",e._g({class:e.$style.card,scopedSlots:e._u([e.loading?null:{key:"header",fn:function(){return[t("span",{class:e.$style.title,domProps:{textContent:e._s(e.title)}})]},proxy:!0},e.loading?null:{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0}],null,!0)},e.$listeners),[t("n8n-loading",{attrs:{loading:e.loading,rows:3,variant:"p"}})],1)},WG=[];const fp={$style:RG};function LG(s){for(var e in fp)this[e]=fp[e]}var QG=_(DG,MG,WG,!1,LG,null,null,null),Sw=QG.exports,BG=N(be).extend({name:"CollectionCard",props:{loading:{type:Boolean},collection:{type:Object}},components:{Card:Sw,NodeList:Tw},methods:{onClick(s){this.$emit("click",s)}}}),UG={},VG=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Card",{attrs:{loading:e.loading,title:e.collection.name},on:{click:e.onClick},scopedSlots:e._u([{key:"footer",fn:function(){return[t("n8n-text",{attrs:{size:"small",color:"text-light"}},[e._v(" "+e._s(e.collection.workflows.length)+" "+e._s(e.$locale.baseText("templates.workflows"))+" ")]),t("NodeList",{attrs:{nodes:e.collection.nodes,showMore:!1}})]},proxy:!0}])})},FG=[];const mp={$style:UG};function jG(s){for(var e in mp)this[e]=mp[e]}var zG=_(BG,VG,FG,!1,jG,null,null,null),GG=zG.exports,HG=N(be).extend({name:"CollectionsCarousel",props:{collections:{type:Array},loading:{type:Boolean}},watch:{collections(){setTimeout(()=>{this.updateCarouselScroll()},0)},loading(){setTimeout(()=>{this.updateCarouselScroll()},0)}},components:{Card:Sw,CollectionCard:GG,VueAgile:Rp},data(){return{carouselScrollPosition:0,cardWidth:240,scrollEnd:!1,listElement:null}},methods:{updateCarouselScroll(){if(this.listElement){this.carouselScrollPosition=Number(this.listElement.scrollLeft.toFixed());const s=this.listElement.clientWidth,e=this.listElement.scrollWidth,t=this.carouselScrollPosition;this.scrollEnd=e-s<=t+7}},onCardClick(s,e){this.$emit("openCollection",{event:s,id:e})},scrollLeft(){this.listElement&&this.listElement.scrollBy({left:-(this.cardWidth*2),top:0,behavior:"smooth"})},scrollRight(){this.listElement&&this.listElement.scrollBy({left:this.cardWidth*2,top:0,behavior:"smooth"})}},mounted(){this.$nextTick(()=>{const s=this.$refs.slider;!s||(this.listElement=s.$el.querySelector(".agile__list"),this.listElement&&this.listElement.addEventListener("scroll",this.updateCarouselScroll))})},beforeDestroy(){this.$refs.slider&&this.$refs.slider.destroy(),window.removeEventListener("scroll",this.updateCarouselScroll)}});const qG="_container_1lokv_1",XG="_button_1lokv_5",YG="_leftButton_1lokv_26 _button_1lokv_5",ZG="_rightButton_1lokv_35 _button_1lokv_5";var KG={container:qG,button:XG,leftButton:YG,rightButton:ZG};var JG=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading||e.collections.length,expression:"loading || collections.length"}],class:e.$style.container},[t("agile",{ref:"slider",attrs:{dots:!1,navButtons:!1,infinite:!1,"slides-to-show":4},on:{"after-change":e.updateCarouselScroll}},[e._l(e.loading?4:0,function(i){return t("Card",{key:`loading-${i}`,attrs:{loading:e.loading}})}),e._l(e.loading?[]:e.collections,function(i){return t("CollectionCard",{key:i.id,attrs:{collection:i},on:{click:n=>e.onCardClick(n,i.id)}})})],2),t("button",{directives:[{name:"show",rawName:"v-show",value:e.carouselScrollPosition>0,expression:"carouselScrollPosition > 0"}],class:e.$style.leftButton,on:{click:e.scrollLeft}},[t("font-awesome-icon",{attrs:{icon:"chevron-left"}})],1),t("button",{directives:[{name:"show",rawName:"v-show",value:!e.scrollEnd,expression:"!scrollEnd"}],class:e.$style.rightButton,on:{click:e.scrollRight}},[t("font-awesome-icon",{attrs:{icon:"chevron-right"}})],1)],1)},eH=[];const gp={$style:KG};function tH(s){for(var e in gp)this[e]=gp[e]}var sH=_(HG,JG,eH,!1,tH,null,null,null),iH=sH.exports,nH=N(be).extend({name:"TemplateFilters",props:{sortOnPopulate:{type:Boolean,default:!1},categories:{type:Array},expandLimit:{type:Number,default:12},loading:{type:Boolean},selected:{type:Array}},watch:{categories:{handler(s){if(!this.sortOnPopulate)this.sortedCategories=s;else{const e=this.selected||[],t=s.filter(({id:n})=>e.includes(n)),i=s.filter(({id:n})=>!e.includes(n));this.sortedCategories=t.concat(i)}},immediate:!0}},data(){return{collapsed:!0,sortedCategories:[]}},computed:{allSelected(){return this.selected.length===0}},methods:{collapseAction(){this.collapsed=!1},handleCheckboxChanged(s,e){this.$emit(s?"select":"clear",e.id)},isSelected(s){return this.selected.includes(s)},resetCategories(){this.$emit("clearAll")}}});const oH="_title_1sb10_1",rH="_categories_1sb10_6",aH="_item_1sb10_11",lH="_button_1sb10_18";var cH={title:oH,categories:rH,item:aH,button:lH};var dH=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"template-filters",class:e.$style.filters},[t("div",{class:e.$style.title,domProps:{textContent:e._s(e.$locale.baseText("templates.categoriesHeading"))}}),e.loading?t("div",{class:e.$style.list},[t("n8n-loading",{attrs:{loading:e.loading,rows:e.expandLimit}})],1):e._e(),e.loading?e._e():t("ul",{class:e.$style.categories},[t("li",{class:e.$style.item},[t("el-checkbox",{attrs:{label:e.$locale.baseText("templates.allCategories"),value:e.allSelected},on:{change:i=>e.resetCategories(i)}})],1),e._l(e.collapsed?e.sortedCategories.slice(0,e.expandLimit):e.sortedCategories,function(i){return t("li",{key:i.id,class:e.$style.item},[t("el-checkbox",{attrs:{label:i.name,value:e.isSelected(i.id)},on:{change:n=>e.handleCheckboxChanged(n,i)}})],1)})],2),e.sortedCategories.length>e.expandLimit&&e.collapsed&&!e.loading?t("div",{class:e.$style.button,on:{click:e.collapseAction}},[t("n8n-text",{attrs:{size:"small",color:"primary"}},[e._v(" + "+e._s(`${e.sortedCategories.length-e.expandLimit} more`)+" ")])],1):e._e()])},uH=[];const wp={$style:cH};function hH(s){for(var e in wp)this[e]=wp[e]}var pH=_(nH,dH,uH,!1,hH,null,null,null),fH=pH.exports,mH=N(be,dt).extend({name:"TemplatesSearchView",components:{CollectionsCarousel:iH,TemplateFilters:fH,TemplateList:kw,TemplatesView:sc},computed:{...F("templates",["allCategories","getSearchedWorkflowsTotal","getSearchedWorkflows","getSearchedCollections"]),...F("settings",["isTemplatesEndpointReachable"]),collections(){return this.getSearchedCollections(this.query)||[]},endOfSearchMessage(){return this.loadingWorkflows?null:this.workflows.length&&this.workflows.length>=this.totalWorkflows?this.$locale.baseText("templates.endResult"):!this.loadingCollections&&this.workflows.length===0&&this.collections.length===0?!this.isTemplatesEndpointReachable&&this.errorLoadingWorkflows?this.$locale.baseText("templates.connectionWarning"):this.$locale.baseText("templates.noSearchResults"):null},query(){return{categories:this.categories,search:this.search}},nothingFound(){return!this.loadingWorkflows&&!this.loadingCollections&&this.workflows.length===0&&this.collections.length===0},totalWorkflows(){return this.getSearchedWorkflowsTotal(this.query)},workflows(){return this.getSearchedWorkflows(this.query)||[]}},data(){return{areCategoriesPrepopulated:!1,categories:[],loading:!0,loadingCategories:!0,loadingCollections:!0,loadingWorkflows:!0,search:"",searchEventToTrack:null,errorLoadingWorkflows:!1}},methods:{onOpenCollection({event:s,id:e}){this.navigateTo(s,O.COLLECTION,e)},onOpenTemplate({event:s,id:e}){this.navigateTo(s,O.TEMPLATE,e)},navigateTo(s,e,t){if(s.metaKey||s.ctrlKey){const i=this.$router.resolve({name:e,params:{id:t}});window.open(i.href,"_blank");return}else this.$router.push({name:e,params:{id:t}})},updateSearch(){this.updateQueryParam(this.search,this.categories.join(",")),this.loadWorkflowsAndCollections(!1)},updateSearchTracking(s,e){!s||this.searchEventToTrack&&this.searchEventToTrack.search_string.length>s.length||(this.searchEventToTrack={search_string:s,workflow_results_count:this.getSearchedWorkflowsTotal({search:s,categories:e}),collection_results_count:this.getSearchedCollections({search:s,categories:e}).length,categories_applied:e.map(t=>this.$store.getters["templates/getCategoryById"](t)),wf_template_repo_session_id:this.$store.getters["templates/currentSessionId"]})},trackSearch(){this.searchEventToTrack&&(this.$telemetry.track("User searched workflow templates",this.searchEventToTrack),this.searchEventToTrack=null)},openNewWorkflow(){this.$store.commit("ui/setNodeViewInitialized",!1),this.$router.push({name:O.NEW_WORKFLOW})},onSearchInput(s){this.loadingWorkflows=!0,this.loadingCollections=!0,this.search=s,this.callDebounced("updateSearch",{debounceTime:500,trailing:!0}),s.length===0&&this.trackSearch()},onCategorySelected(s){this.categories=this.categories.concat(s),this.updateSearch(),this.trackCategories()},onCategoryUnselected(s){this.categories=this.categories.filter(e=>e!==s),this.updateSearch(),this.trackCategories()},onCategoriesCleared(){this.categories=[],this.updateSearch()},trackCategories(){this.categories.length&&this.$telemetry.track("User changed template filters",{search_string:this.search,categories_applied:this.categories.map(s=>this.$store.getters["templates/getCategoryById"](s)),wf_template_repo_session_id:this.$store.getters["templates/currentSessionId"]})},updateQueryParam(s,e){const t=Object.assign({},this.$route.query);e.length?t.categories=e:delete t.categories,s.length?t.search=s:delete t.search,this.$router.replace({query:t})},async onLoadMore(){if(!(this.workflows.length>=this.totalWorkflows))try{this.loadingWorkflows=!0,await this.$store.dispatch("templates/getMoreWorkflows",{categories:this.categories,search:this.search})}catch{this.$showMessage({title:"Error",message:"Could not load more workflows",type:"error"})}finally{this.loadingWorkflows=!1}},async loadCategories(){try{await this.$store.dispatch("templates/getCategories")}catch{}this.loadingCategories=!1},async loadCollections(){try{this.loadingCollections=!0,await this.$store.dispatch("templates/getCollections",{categories:this.categories,search:this.search})}catch{}this.loadingCollections=!1},async loadWorkflows(){try{this.loadingWorkflows=!0,await this.$store.dispatch("templates/getWorkflows",{search:this.search,categories:this.categories}),this.errorLoadingWorkflows=!1}catch{this.errorLoadingWorkflows=!0}this.loadingWorkflows=!1},async loadWorkflowsAndCollections(s){const e=this.search,t=[...this.categories];await Promise.all([this.loadWorkflows(),this.loadCollections()]),s||this.updateSearchTracking(e,t)},scrollTo(s,e="smooth"){setTimeout(()=>{const t=document.getElementById("content");t&&t.scrollTo({top:s,behavior:e})},0)}},watch:{workflows(s){s.length===0&&this.scrollTo(0)}},beforeRouteLeave(s,e,t){const i=document.getElementById("content");i&&this.$route.meta&&this.$route.meta.setScrollPosition&&typeof this.$route.meta.setScrollPosition=="function"&&this.$route.meta.setScrollPosition(i.scrollTop),this.trackSearch(),t()},async mounted(){Bi("n8n - Templates"),this.loadCategories(),this.loadWorkflowsAndCollections(!0),this.$store.dispatch("users/showPersonalizationSurvey"),setTimeout(()=>{this.$route.meta&&this.$route.meta.scrollOffset>0&&this.scrollTo(this.$route.meta.scrollOffset,"auto")},100)},async created(){this.$route.query.search&&typeof this.$route.query.search=="string"&&(this.search=this.$route.query.search),typeof this.$route.query.categories=="string"&&this.$route.query.categories.length&&(this.categories=this.$route.query.categories.split(",").map(s=>parseInt(s,10)),this.areCategoriesPrepopulated=!0)}});const gH="_wrapper_p9mwm_1",wH="_contentWrapper_p9mwm_6",yH="_filters_p9mwm_16",vH="_search_p9mwm_21",_H="_header_p9mwm_34";var OH={wrapper:gH,contentWrapper:wH,filters:yH,search:vH,header:_H},bH=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("TemplatesView",{scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.title},[t("n8n-heading",{attrs:{tag:"h1",size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText("templates.heading"))+" ")])],1),t("div",{class:e.$style.button},[t("n8n-button",{attrs:{size:"large",label:e.$locale.baseText("templates.newButton")},on:{click:e.openNewWorkflow}})],1)])]},proxy:!0},{key:"content",fn:function(){return[t("div",{class:e.$style.contentWrapper},[t("div",{class:e.$style.filters},[t("TemplateFilters",{attrs:{categories:e.allCategories,sortOnPopulate:e.areCategoriesPrepopulated,loading:e.loadingCategories,selected:e.categories},on:{clear:e.onCategoryUnselected,clearAll:e.onCategoriesCleared,select:e.onCategorySelected}})],1),t("div",{class:e.$style.search},[t("n8n-input",{attrs:{value:e.search,placeholder:e.$locale.baseText("templates.searchPlaceholder"),clearable:""},on:{input:e.onSearchInput,blur:e.trackSearch}},[t("font-awesome-icon",{attrs:{slot:"prefix",icon:"search"},slot:"prefix"})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.collections.length||e.loadingCollections,expression:"collections.length || loadingCollections"}],class:e.$style.carouselContainer},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{bold:!0,size:"medium",color:"text-light"}},[e._v(" "+e._s(e.$locale.baseText("templates.collections"))+" "),e.loadingCollections?e._e():t("span",{domProps:{textContent:e._s(`(${e.collections.length})`)}})])],1),t("CollectionsCarousel",{attrs:{collections:e.collections,loading:e.loadingCollections},on:{openCollection:e.onOpenCollection}})],1),t("TemplateList",{attrs:{"infinite-scroll-enabled":!0,loading:e.loadingWorkflows,"total-workflows":e.totalWorkflows,workflows:e.workflows},on:{loadMore:e.onLoadMore,openTemplate:e.onOpenTemplate}}),e.endOfSearchMessage?t("div",{class:e.$style.endText},[t("n8n-text",{attrs:{size:"medium",color:"text-base"}},[t("span",{domProps:{innerHTML:e._s(e.endOfSearchMessage)}})])],1):e._e()],1)])]},proxy:!0}])})},xH=[];const yp={$style:OH};function $H(s){for(var e in yp)this[e]=yp[e]}var TH=_(mH,bH,xH,!1,$H,null,null,null),kH=TH.exports,SH=m.extend({name:"PageViewLayout",data(){return{loading:!1}},computed:{sidebarMenuCollapsed(){return this.$store.getters["ui/sidebarMenuCollapsed"]}}});const EH="_wrapper_1e1sg_1",CH="_container_1e1sg_15",NH="_aside_1e1sg_25",PH="_content_1e1sg_39";var DH={wrapper:EH,container:CH,aside:NH,content:PH},IH=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:[e.$style.wrapper,!e.sidebarMenuCollapsed&&e.$style.expandedSidebar]},[t("div",{class:e.$style.container},[e.$slots.aside?t("aside",{class:e.$style.aside},[e._t("aside")],2):e._e(),t("main",{class:e.$style.content},[e._t("default")],2)])])},AH=[];const vp={$style:DH};function RH(s){for(var e in vp)this[e]=vp[e]}var MH=_(SH,IH,AH,!1,RH,null,null,null),ic=MH.exports;const WH="_wrapper_nguow_1",LH="_list_nguow_7",QH="_body_nguow_15";var BH={wrapper:WH,list:LH,body:QH};const UH={};var VH=function(){var e=this,t=e._self._c;return t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.list},[e.$slots.header?t("div",[e._t("header")],2):e._e(),t("div",{class:e.$style.body},[e._t("default")],2)])])},FH=[];const _p={$style:BH};function jH(s){for(var e in _p)this[e]=_p[e]}var zH=_(UH,VH,FH,!1,jH,null,null,null),nc=zH.exports,GH=m.extend({props:{value:{type:Boolean,default:!0},myResourcesLabel:{type:String,default:""},allResourcesLabel:{type:String,default:""}},computed:{menuItems(){return[{id:"owner",icon:"user",label:this.myResourcesLabel,position:"top"},{id:"all",icon:"globe-americas",label:this.allResourcesLabel,position:"top"}]}},methods:{onSelectOwner(s){this.$emit("input",s==="owner")}}});var HH=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-menu",{attrs:{items:e.menuItems,mode:"tabs",value:e.value?"owner":"all"},on:{input:e.onSelectOwner}})},qH=[],XH=_(GH,HH,qH,!1,null,"4ce67a7a",null,null),Ew=XH.exports,YH=m.extend({props:{value:{type:Object,default:()=>({})},keys:{type:Array,default:()=>[]},shareable:{type:Boolean,default:!0},reset:{type:Function}},data(){return{EnterpriseEditionFeature:Be}},computed:{currentUser(){return this.$store.getters["users/currentUser"]},allUsers(){return this.$store.getters["users/allUsers"]},ownedByUsers(){return this.allUsers.map(s=>s.id===this.value.sharedWith?{...s,disabled:!0}:s)},sharedWithUsers(){return this.allUsers.map(s=>s.id===this.value.ownedBy?{...s,disabled:!0}:s)},filtersLength(){let s=0;return this.keys.forEach(e=>{e!=="search"&&(s+=(Array.isArray(this.value[e])?this.value[e].length>0:this.value[e]!=="")?1:0)}),s},hasFilters(){return this.filtersLength>0}},methods:{setKeyValue(s,e){const t={...this.value,[s]:e};this.$emit("input",t)},resetFilters(){if(this.reset)this.reset();else{const s={...this.value};this.keys.forEach(e=>{s[e]=Array.isArray(this.value[e])?[]:""}),this.$emit("input",s)}}},watch:{filtersLength(s){this.$emit("update:filtersLength",s)}}}),ZH={"filter-button":"_filter-button_1tx0p_1","filters-dropdown":"_filters-dropdown_1tx0p_6","filters-dropdown-footer":"_filters-dropdown-footer_1tx0p_10"},KH=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-popover",{attrs:{trigger:"click"}},[t("template",{slot:"reference"},[t("n8n-button",{class:[e.$style["filter-button"],"ml-2xs"],attrs:{icon:"filter",type:"tertiary",size:"medium",active:e.hasFilters}},[t("n8n-badge",{directives:[{name:"show",rawName:"v-show",value:e.filtersLength>0,expression:"filtersLength > 0"}],staticClass:"mr-4xs",attrs:{theme:"primary"}},[e._v(" "+e._s(e.filtersLength)+" ")]),e._v(" "+e._s(e.$locale.baseText("forms.resourceFiltersDropdown.filters"))+" ")],1)],1),t("div",{class:e.$style["filters-dropdown"]},[e._t("default",null,{filters:e.value,setKeyValue:e.setKeyValue}),e.shareable?t("enterprise-edition",{staticClass:"mb-s",attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("forms.resourceFiltersDropdown.ownedBy"),bold:!1,size:"small",color:"text-base"}}),t("n8n-user-select",{attrs:{users:e.ownedByUsers,currentUserId:e.currentUser.id,value:e.value.ownedBy,size:"small"},on:{input:function(i){return e.setKeyValue("ownedBy",i)}}})],1):e._e(),e.shareable?t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("forms.resourceFiltersDropdown.sharedWith"),bold:!1,size:"small",color:"text-base"}}),t("n8n-user-select",{attrs:{users:e.sharedWithUsers,currentUserId:e.currentUser.id,value:e.value.sharedWith,size:"small"},on:{input:function(i){return e.setKeyValue("sharedWith",i)}}})],1):e._e(),e.hasFilters?t("div",{class:[e.$style["filters-dropdown-footer"],"mt-s"]},[t("n8n-link",{on:{click:e.resetFilters}},[e._v(" "+e._s(e.$locale.baseText("forms.resourceFiltersDropdown.reset"))+" ")])],1):e._e()],2)],2)},JH=[];const Op={$style:ZH};function e4(s){for(var e in Op)this[e]=Op[e]}var t4=_(YH,KH,JH,!1,e4,null,null,null),Cw=t4.exports,s4=N(V,dt).extend({name:"resources-list-layout",components:{TemplateCard:nr,PageViewLayout:ic,PageViewLayoutList:nc,ResourceOwnershipSelect:Ew,ResourceFiltersDropdown:Cw},props:{resourceKey:{type:String,default:""},resources:{type:Array,default:()=>[]},initialize:{type:Function,default:()=>()=>Promise.resolve()},filters:{type:Object,default:()=>({search:"",ownedBy:"",sharedWith:""})},additionalFiltersHandler:{type:Function},showAside:{type:Boolean,default:!0},shareable:{type:Boolean,default:!0}},data(){return{loading:!0,isOwnerSubview:!0,sortBy:"lastUpdated",hasFilters:!1,resettingFilters:!1,EnterpriseEditionFeature:Be}},computed:{currentUser(){return this.$store.getters["users/currentUser"]},allUsers(){return this.$store.getters["users/allUsers"]},subviewResources(){return this.shareable?this.resources.filter(s=>this.isOwnerSubview&&this.$store.getters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)?!!(s.ownedBy&&s.ownedBy.id===this.currentUser.id):!0):this.resources},filterKeys(){return Object.keys(this.filters)},filteredAndSortedSubviewResources(){return this.subviewResources.filter(e=>{let t=!0;if(this.filters.ownedBy&&(t=t&&!!(e.ownedBy&&e.ownedBy.id===this.filters.ownedBy)),this.filters.sharedWith&&(t=t&&!!(e.sharedWith&&e.sharedWith.find(i=>i.id===this.filters.sharedWith))),this.filters.search){const i=this.filters.search.toLowerCase();t=t&&e.name.toLowerCase().includes(i)}return this.additionalFiltersHandler&&(t=this.additionalFiltersHandler(e,this.filters,t)),t}).sort((e,t)=>{switch(this.sortBy){case"lastUpdated":return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf();case"lastCreated":return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf();case"nameAsc":return e.name.trim().localeCompare(t.name.trim());case"nameDesc":return t.name.localeCompare(e.name);default:return 0}})},resourcesNotOwned(){return this.resources.filter(s=>s.ownedBy&&s.ownedBy.id!==this.currentUser.id)}},methods:{async onMounted(){await this.initialize(),this.loading=!1,this.$nextTick(this.focusSearchInput)},resetFilters(){Object.keys(this.filters).forEach(s=>{this.filters[s]=Array.isArray(this.filters[s])?[]:""}),this.resettingFilters=!0,this.sendFiltersTelemetry("reset")},focusSearchInput(){this.$refs.search&&this.$refs.search.focus()},setOwnerSubview(s){this.isOwnerSubview=s},getTelemetrySubview(){return this.$locale.baseText(`${this.resourceKey}.menu.${this.isOwnerSubview?"my":"all"}`)},sendSubviewTelemetry(){this.$telemetry.track(`User changed ${this.resourceKey} sub view`,{sub_view:this.getTelemetrySubview()})},sendSortingTelemetry(){this.$telemetry.track(`User changed sorting in ${this.resourceKey} list`,{sub_view:this.getTelemetrySubview(),sorting:this.sortBy})},sendFiltersTelemetry(s){if(this.resettingFilters){if(s!=="reset")return;setTimeout(()=>this.resettingFilters=!1,1500)}const e=this.filters,t=[],i=[];Object.keys(e).forEach(n=>{e[n]&&(t.push(n),i.push(n==="search"?null:e[n]))}),this.$telemetry.track(`User set filters in ${this.resourceKey} list`,{filters_set:t,filter_values:i,sub_view:this.getTelemetrySubview(),[`${this.resourceKey}_total_in_view`]:this.subviewResources.length,[`${this.resourceKey}_after_filtering`]:this.filteredAndSortedSubviewResources.length})},onUpdateFiltersLength(s){this.hasFilters=s>0}},mounted(){this.onMounted()},watch:{isOwnerSubview(){this.sendSubviewTelemetry()},"filters.ownedBy"(s){s&&this.setOwnerSubview(!1),this.sendFiltersTelemetry("ownedBy")},"filters.sharedWith"(){this.sendFiltersTelemetry("sharedWith")},"filters.search"(){this.callDebounced("sendFiltersTelemetry",{debounceTime:1e3,trailing:!0},"search")},sortBy(){this.sendSortingTelemetry()}}});const i4="_search_2h94h_12",n4="_list_2h94h_16";var o4={"heading-wrapper":"_heading-wrapper_2h94h_1","filters-row":"_filters-row_2h94h_5",search:i4,list:n4,"sort-and-filter":"_sort-and-filter_2h94h_21","header-loading":"_header-loading_2h94h_28","card-loading":"_card-loading_2h94h_32"},r4=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("page-view-layout",{scopedSlots:e._u([e.showAside?{key:"aside",fn:function(){return[t("div",{class:[e.$style["heading-wrapper"],"mb-xs"]},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.heading`))+" ")])],1),t("div",{staticClass:"mt-xs mb-l"},[t("n8n-button",{attrs:{size:"large",block:""},on:{click:function(i){return e.$emit("click:add",i)}}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.add`))+" ")])],1),e.shareable?t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("resource-ownership-select",{attrs:{"my-resources-label":e.$locale.baseText(`${e.resourceKey}.menu.my`),"all-resources-label":e.$locale.baseText(`${e.resourceKey}.menu.all`)},model:{value:e.isOwnerSubview,callback:function(i){e.isOwnerSubview=i},expression:"isOwnerSubview"}})],1):e._e()]},proxy:!0}:null],null,!0)},[e.loading?t("div",[t("n8n-loading",{class:[e.$style["header-loading"],"mb-l"],attrs:{variant:"custom"}}),t("n8n-loading",{class:[e.$style["card-loading"],"mb-2xs"],attrs:{variant:"custom"}}),t("n8n-loading",{class:e.$style["card-loading"],attrs:{variant:"custom"}})],1):[e.resources.length===0?t("div",{staticClass:"ph-no-capture"},[e._t("empty",function(){return[t("n8n-action-box",{attrs:{emoji:"\u{1F44B}",heading:e.$locale.baseText(e.currentUser.firstName?`${e.resourceKey}.empty.heading`:`${e.resourceKey}.empty.heading.userNotSetup`,{interpolate:{name:e.currentUser.firstName}}),description:e.$locale.baseText(`${e.resourceKey}.empty.description`),buttonText:e.$locale.baseText(`${e.resourceKey}.empty.button`),buttonType:"secondary"},on:{click:function(i){return e.$emit("click:add",i)}}})]})],2):t("page-view-layout-list",{scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"mb-xs"},[t("div",{class:e.$style["filters-row"]},[t("n8n-input",{ref:"search",class:[e.$style.search,"mr-2xs"],attrs:{placeholder:e.$locale.baseText(`${e.resourceKey}.search.placeholder`),size:"medium",clearable:""},model:{value:e.filters.search,callback:function(i){e.$set(e.filters,"search",i)},expression:"filters.search"}},[t("n8n-icon",{attrs:{slot:"prefix",icon:"search"},slot:"prefix"})],1),t("div",{class:e.$style["sort-and-filter"]},[t("n8n-select",{attrs:{size:"medium"},model:{value:e.sortBy,callback:function(i){e.sortBy=i},expression:"sortBy"}},[t("n8n-option",{attrs:{value:"lastUpdated",label:e.$locale.baseText(`${e.resourceKey}.sort.lastUpdated`)}}),t("n8n-option",{attrs:{value:"lastCreated",label:e.$locale.baseText(`${e.resourceKey}.sort.lastCreated`)}}),t("n8n-option",{attrs:{value:"nameAsc",label:e.$locale.baseText(`${e.resourceKey}.sort.nameAsc`)}}),t("n8n-option",{attrs:{value:"nameDesc",label:e.$locale.baseText(`${e.resourceKey}.sort.nameDesc`)}})],1),t("resource-filters-dropdown",{attrs:{keys:e.filterKeys,reset:e.resetFilters,value:e.filters,shareable:e.shareable},on:{input:function(i){return e.$emit("update:filters",i)},"update:filtersLength":e.onUpdateFiltersLength},scopedSlots:e._u([{key:"default",fn:function(i){return[e._t("filters",null,null,i)]}}],null,!0)})],1)],1)])]},proxy:!0}])},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasFilters,expression:"hasFilters"}],staticClass:"mt-xs"},[t("n8n-info-tip",{attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.filters.active`))+" "),t("n8n-link",{attrs:{size:"small"},on:{click:e.resetFilters}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.filters.active.reset`))+" ")])],1)],1),t("div",{staticClass:"mt-xs mb-l"},[e.filteredAndSortedSubviewResources.length>0?t("ul",{class:[e.$style.list,"list-style-none"]},e._l(e.filteredAndSortedSubviewResources,function(i){return t("li",{key:i.id,staticClass:"mb-2xs"},[e._t("default",null,{data:i})],2)}),0):t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.noResults`))+" "),!e.hasFilters&&e.isOwnerSubview&&e.resourcesNotOwned.length>0?[e.filters.search?t("span",[e._v(" ("+e._s(e.$locale.baseText(`${e.resourceKey}.noResults.withSearch.switchToShared.preamble`))+" "),t("n8n-link",{on:{click:function(i){return e.setOwnerSubview(!1)}}},[e._v(e._s(e.$locale.baseText(`${e.resourceKey}.noResults.withSearch.switchToShared.link`)))]),e._v(") ")],1):t("span",[e._v(" ("+e._s(e.$locale.baseText(`${e.resourceKey}.noResults.switchToShared.preamble`))+" "),t("n8n-link",{on:{click:function(i){return e.setOwnerSubview(!1)}}},[e._v(e._s(e.$locale.baseText(`${e.resourceKey}.noResults.switchToShared.link`)))]),e._v(") ")],1)]:e._e()],2)],1)])]],2)},a4=[];const bp={$style:o4};function l4(s){for(var e in bp)this[e]=bp[e]}var c4=_(s4,r4,a4,!1,l4,null,null,null),Nw=c4.exports;const Sn={OPEN:"open",DELETE:"delete"};var d4=N(V).extend({data(){return{EnterpriseEditionFeature:Be}},components:{CredentialIcon:uf},props:{data:{type:Object,required:!0,default:()=>({id:"",createdAt:"",updatedAt:"",type:"",name:"",nodesAccess:[],sharedWith:[],ownedBy:{}})},readonly:{type:Boolean,default:!1}},computed:{currentUser(){return this.$store.getters["users/currentUser"]},credentialType(){return this.$store.getters["credentials/getCredentialTypeByName"](this.data.type)},credentialPermissions(){return zo(this.currentUser,this.data,this.$store)},actions(){return[{label:this.$locale.baseText("credentials.item.open"),value:Sn.OPEN}].concat(this.credentialPermissions.delete?[{label:this.$locale.baseText("credentials.item.delete"),value:Sn.DELETE}]:[])},formattedCreatedAtDate(){const s=new Date().getFullYear();return ii(this.data.createdAt,`d mmmm${this.data.createdAt.startsWith(s)?"":", yyyy"}`)}},methods:{async onClick(){this.$store.dispatch("ui/openExistingCredential",{id:this.data.id})},async onAction(s){s===Sn.OPEN?this.onClick():s===Sn.DELETE&&await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.message",{interpolate:{savedCredentialName:this.data.name}}),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText"))&&await this.$store.dispatch("credentials/deleteCredential",{id:this.data.id})}}}),u4={"card-link":"_card-link_1p68k_1","card-heading":"_card-heading_1p68k_9","card-actions":"_card-actions_1p68k_13"},h4=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-card",{class:e.$style["card-link"],on:{click:e.onClick},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("credential-icon",{attrs:{"credential-type-name":e.credentialType?e.credentialType.name:""}})]},proxy:!0},{key:"header",fn:function(){return[t("n8n-heading",{staticClass:"ph-no-capture",class:e.$style["card-heading"],attrs:{tag:"h2",bold:""}},[e._v(" "+e._s(e.data.name)+" ")])]},proxy:!0},{key:"append",fn:function(){return[t("div",{class:e.$style["card-actions"]},[t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[e.credentialPermissions.isOwner?t("n8n-badge",{staticClass:"mr-xs",attrs:{theme:"tertiary",bold:""}},[e._v(" "+e._s(e.$locale.baseText("credentials.item.owner"))+" ")]):e._e()],1),t("n8n-action-toggle",{attrs:{actions:e.actions,theme:"dark"},on:{action:e.onAction}})],1)]},proxy:!0}])},[t("n8n-text",{attrs:{color:"text-light",size:"small"}},[e.credentialType?t("span",[e._v(e._s(e.credentialType.displayName)+" | ")]):e._e(),t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[e._v(e._s(e.$locale.baseText("credentials.item.updated"))+" "),t("time-ago",{attrs:{date:e.data.updatedAt}}),e._v(" | ")],1),t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[e._v(e._s(e.$locale.baseText("credentials.item.created"))+" "+e._s(e.formattedCreatedAtDate)+" ")])])],1)},p4=[];const xp={$style:u4};function f4(s){for(var e in xp)this[e]=xp[e]}var m4=_(d4,h4,p4,!1,f4,null,null,null),g4=m4.exports,w4=N(V,dt).extend({name:"SettingsPersonalView",components:{ResourcesListLayout:Nw,TemplateCard:nr,PageViewLayout:ic,PageViewLayoutList:nc,SettingsView:Ws,CredentialCard:g4,ResourceOwnershipSelect:Ew,ResourceFiltersDropdown:Cw},data(){return{filters:{search:"",ownedBy:"",sharedWith:"",type:""}}},computed:{currentUser(){return this.$store.getters["users/currentUser"]},allUsers(){return this.$store.getters["users/allUsers"]},allCredentials(){return this.$store.getters["credentials/allCredentials"]},allCredentialTypes(){return this.$store.getters["credentials/allCredentialTypes"]},credentialTypesById(){return this.$store.getters["credentials/credentialTypesById"]}},methods:{addCredential(){this.$store.dispatch("ui/openModal",Ro),this.$telemetry.track("User clicked add cred button",{source:"Creds list"})},async initialize(){const s=[this.$store.dispatch("credentials/fetchAllCredentials"),this.$store.dispatch("credentials/fetchCredentialTypes")];this.$store.getters["nodeTypes/allNodeTypes"].length===0&&s.push(this.$store.dispatch("nodeTypes/getNodeTypes")),await Promise.all(s),this.$store.dispatch("users/fetchUsers")},onFilter(s,e,t){if(e.type.length>0&&(t=t&&e.type.includes(s.type)),e.search){const i=e.search.toLowerCase();t=t||this.credentialTypesById[s.type]&&this.credentialTypesById[s.type].displayName.toLowerCase().includes(i)}return t},sendFiltersTelemetry(s){this.$refs.layout.sendFiltersTelemetry(s)}},watch:{"filters.type"(){this.sendFiltersTelemetry("type")}}});const y4="_sidebarContainer_pm4w0_5";var v4={"type-input":"_type-input_pm4w0_1",sidebarContainer:y4},_4=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("resources-list-layout",{ref:"layout",attrs:{"resource-key":"credentials",resources:e.allCredentials,initialize:e.initialize,filters:e.filters,"additional-filters-handler":e.onFilter},on:{"click:add":e.addCredential,"update:filters":function(i){e.filters=i}},scopedSlots:e._u([{key:"default",fn:function({data:i}){return[t("credential-card",{attrs:{data:i}})]}},{key:"filters",fn:function({setKeyValue:i}){return[t("div",{staticClass:"mb-s"},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("credentials.filters.type"),bold:!1,size:"small",color:"text-base"}}),t("n8n-select",{ref:"typeInput",class:e.$style["type-input"],attrs:{value:e.filters.type,size:"small",multiple:"",filterable:""},on:{input:function(n){return i("type",n)}}},e._l(e.allCredentialTypes,function(n){return t("n8n-option",{key:n.name,attrs:{value:n.name,label:n.displayName}})}),1)],1)]}}])})},O4=[];const $p={$style:v4};function b4(s){for(var e in $p)this[e]=$p[e]}var x4=_(w4,_4,O4,!1,b4,null,null,null),$4=x4.exports;const Bs={OPEN:"open",DUPLICATE:"duplicate",DELETE:"delete"};var T4=N(V,Ce).extend({data(){return{EnterpriseEditionFeature:Be}},components:{WorkflowActivator:zl},props:{data:{type:Object,required:!0,default:()=>({id:"",createdAt:"",updatedAt:"",active:!1,connections:{},nodes:[],name:"",sharedWith:[],ownedBy:{}})},readonly:{type:Boolean,default:!1}},computed:{currentUser(){return this.$store.getters["users/currentUser"]},areTagsEnabled(){return this.$store.getters["settings/areTagsEnabled"]},credentialPermissions(){return Hb(this.currentUser,this.data,this.$store)},actions(){return[{label:this.$locale.baseText("workflows.item.open"),value:Bs.OPEN},{label:this.$locale.baseText("workflows.item.duplicate"),value:Bs.DUPLICATE}].concat(this.credentialPermissions.delete?[{label:this.$locale.baseText("workflows.item.delete"),value:Bs.DELETE}]:[])},formattedCreatedAtDate(){const s=new Date().getFullYear();return ii(this.data.createdAt,`d mmmm${this.data.createdAt.startsWith(s)?"":", yyyy"}`)}},methods:{async onClick(s){var e;if(s){if((e=this.$refs.activator)!=null&&e.$el.contains(s.target))return;if(s.metaKey||s.ctrlKey){const t=this.$router.resolve({name:O.WORKFLOW,params:{name:this.data.id}});window.open(t.href,"_blank");return}}this.$router.push({name:O.WORKFLOW,params:{name:this.data.id}})},onClickTag(s,e){e.stopPropagation(),this.$emit("click:tag",s,e)},async onAction(s){if(s===Bs.OPEN)await this.onClick();else if(s===Bs.DUPLICATE)await this.$store.dispatch("ui/openModalWithData",{name:Wo,data:{id:this.data.id,name:this.data.name,tags:(this.data.tags||[]).map(e=>e.id)}});else if(s===Bs.DELETE){if(await this.confirmMessage(this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.message",{interpolate:{workflowName:this.data.name}}),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.headline"),"warning",this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.confirmButtonText"),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.cancelButtonText"))===!1)return;try{await this.restApi().deleteWorkflow(this.data.id),this.$store.commit("deleteWorkflow",this.data.id)}catch(t){this.$showError(t,this.$locale.baseText("mainSidebar.showError.stopExecution.title"));return}this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleSelect1.title"),type:"success"})}}}});const k4="_cardLink_1j2h1_1",S4="_cardHeading_1j2h1_9",E4="_cardDescription_1j2h1_14",C4="_cardActions_1j2h1_20";var N4={cardLink:k4,cardHeading:S4,cardDescription:E4,cardActions:C4},P4=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-card",{class:e.$style.cardLink,on:{click:e.onClick},scopedSlots:e._u([{key:"header",fn:function(){return[t("n8n-heading",{staticClass:"ph-no-capture",class:e.$style.cardHeading,attrs:{tag:"h2",bold:""}},[e._v(" "+e._s(e.data.name)+" ")])]},proxy:!0},{key:"append",fn:function(){return[t("div",{class:e.$style.cardActions},[t("enterprise-edition",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[e.credentialPermissions.isOwner?t("n8n-badge",{staticClass:"mr-xs",attrs:{theme:"tertiary",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflows.item.owner"))+" ")]):e._e()],1),t("workflow-activator",{ref:"activator",staticClass:"mr-s",attrs:{"workflow-active":e.data.active,"workflow-id":e.data.id}}),t("n8n-action-toggle",{attrs:{actions:e.actions,theme:"dark"},on:{action:e.onAction}})],1)]},proxy:!0}])},[t("div",{class:e.$style.cardDescription},[t("n8n-text",{attrs:{color:"text-light",size:"small"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[e._v(e._s(e.$locale.baseText("workflows.item.updated"))+" "),t("time-ago",{attrs:{date:e.data.updatedAt}}),e._v(" | ")],1),t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}],staticClass:"mr-2xs"},[e._v(e._s(e.$locale.baseText("workflows.item.created"))+" "+e._s(e.formattedCreatedAtDate)+" ")]),e.areTagsEnabled&&e.data.tags&&e.data.tags.length>0?t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[t("n8n-tags",{attrs:{tags:e.data.tags,truncateAt:3,truncate:""},on:{click:e.onClickTag}})],1):e._e()])],1)])},D4=[];const Tp={$style:N4};function I4(s){for(var e in Tp)this[e]=Tp[e]}var A4=_(T4,P4,D4,!1,I4,null,null,null),R4=A4.exports,M4=N(V,dt).extend({name:"SettingsPersonalView",components:{ResourcesListLayout:Nw,TemplateCard:nr,PageViewLayout:ic,PageViewLayoutList:nc,SettingsView:Ws,WorkflowCard:R4,TagsDropdown:Fl},data(){return{filters:{search:"",ownedBy:"",sharedWith:"",tags:[]}}},computed:{currentUser(){return this.$store.getters["users/currentUser"]},areTagsEnabled(){return this.$store.getters["settings/areTagsEnabled"]},allWorkflows(){return this.$store.getters.allWorkflows}},methods:{addWorkflow(){this.$store.commit("ui/setNodeViewInitialized",!1),this.$router.push({name:O.NEW_WORKFLOW}),this.$telemetry.track("User clicked add workflow button",{source:"Workflows list"})},goToTemplates(){this.$router.push({name:O.TEMPLATES})},async initialize(){return this.$store.dispatch("users/fetchUsers"),await Promise.all([this.$store.dispatch("fetchAllWorkflows"),this.$store.dispatch("fetchActiveWorkflows")])},onClickTag(s,e){this.filters.tags.includes(s)||this.filters.tags.push(s)},onFilter(s,e,t){return this.areTagsEnabled&&e.tags.length>0&&(t=t&&e.tags.every(i=>{var n;return(n=s.tags)==null?void 0:n.find(o=>typeof o=="object"?`${o.id}`==`${i}`:`${o}`==`${i}`)})),t},sendFiltersTelemetry(s){this.$refs.layout.sendFiltersTelemetry(s)}},watch:{"filters.tags"(){this.sendFiltersTelemetry("tags")}},mounted(){this.$store.dispatch("users/showPersonalizationSurvey")}});const W4="_emptyStateCard_1bo2s_1",L4="_emptyStateCardIcon_1bo2s_11";var Q4={emptyStateCard:W4,emptyStateCardIcon:L4},B4=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("resources-list-layout",{ref:"layout",attrs:{"resource-key":"workflows",resources:e.allWorkflows,initialize:e.initialize,filters:e.filters,"additional-filters-handler":e.onFilter,"show-aside":e.allWorkflows.length>0,shareable:!1},on:{"click:add":e.addWorkflow,"update:filters":function(i){e.filters=i}},scopedSlots:e._u([{key:"default",fn:function({data:i}){return[t("workflow-card",{attrs:{data:i},on:{"click:tag":e.onClickTag}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"text-center mt-s"},[t("n8n-heading",{staticClass:"mb-2xs",attrs:{tag:"h2",size:"xlarge"}},[e._v(" "+e._s(e.$locale.baseText(e.currentUser.firstName?"workflows.empty.heading":"workflows.empty.heading.userNotSetup",{interpolate:{name:e.currentUser.firstName}}))+" ")]),t("n8n-text",{attrs:{size:"large",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("workflows.empty.description"))+" ")])],1),t("div",{staticClass:"text-center mt-2xl"},[t("n8n-card",{class:[e.$style.emptyStateCard,"mr-s"],attrs:{hoverable:""},on:{click:e.addWorkflow}},[t("n8n-icon",{class:e.$style.emptyStateCardIcon,attrs:{icon:"file"}}),t("n8n-text",{staticClass:"mt-xs",attrs:{size:"large",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("workflows.empty.startFromScratch"))+" ")])],1),t("n8n-card",{class:e.$style.emptyStateCard,attrs:{hoverable:""},on:{click:e.goToTemplates}},[t("n8n-icon",{class:e.$style.emptyStateCardIcon,attrs:{icon:"box-open"}}),t("n8n-text",{staticClass:"mt-xs",attrs:{size:"large",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("workflows.empty.browseTemplates"))+" ")])],1)],1)]},proxy:!0},{key:"filters",fn:function({setKeyValue:i}){return[e.areTagsEnabled?t("div",{staticClass:"mb-s"},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("workflows.filters.tags"),bold:!1,size:"small",color:"text-base"}}),t("TagsDropdown",{attrs:{placeholder:e.$locale.baseText("workflowOpen.filterWorkflows"),currentTagIds:e.filters.tags,createEnabled:!1},on:{update:function(n){return i("tags",n)}}})],1):e._e()]}}])})},U4=[];const kp={$style:Q4};function V4(s){for(var e in kp)this[e]=kp[e]}var F4=_(M4,B4,U4,!1,V4,null,null,null),j4=F4.exports;async function z4(s,{onlyLatest:e}={onlyLatest:!1}){return j(s,"GET","/node-types",{onlyLatest:e})}async function G4(s){return j(s,"GET","/node-translation-headers")}async function H4(s,e){return j(s,"POST","/node-types",{nodeInfos:e})}async function q4(s,e){return j(s,"GET","/node-parameter-options",e)}async function X4(s,e){return j(s,"GET","/nodes-list-search",e)}const En=(s,e,t,i)=>{s[t]||(s[t]={}),s[t][i]||(s[t][i]={triggerCount:0,regularCount:0,nodes:[]});const n=e.group.includes("trigger");n&&s[t][i].triggerCount++,n||s[t][i].regularCount++,s[t][i].nodes.push({type:"node",key:`${t}_${e.name}`,category:t,properties:{nodeType:e,subcategory:i},includedByTrigger:n,includedByRegular:!n})},Y4=(s,e)=>[...s].sort((i,n)=>i.displayName>n.displayName?1:-1).reduce((i,n)=>(e.includes(n.name)&&En(i,n,sa,lr),!n.codex||!n.codex.categories?(En(i,n,ta,lr),i):(n.codex.categories.forEach(o=>{const r=o.trim(),a=n.codex&&n.codex.subcategories&&n.codex.subcategories[r]?n.codex.subcategories[r]:null;if(a===null||a.length===0){En(i,n,r,lr);return}a.forEach(l=>{En(i,n,r,l)})}),i)),{}),Z4=s=>{const e=[Jr,yc,ta,sa],i=Object.keys(s).filter(n=>!e.includes(n));return i.sort(),[Jr,yc,sa,...i,ta]},K4=s=>Z4(s).reduce((t,i)=>{if(!s[i])return t;const n={type:"category",key:i,category:i,properties:{expanded:!1}},o=Object.keys(s[i]);if(o.length===1){const a=s[i][o[0]];return a.triggerCount>0&&(n.includedByTrigger=a.triggerCount>0),a.regularCount>0&&(n.includedByRegular=a.regularCount>0),[...t,n,...a.nodes]}o.sort();const r=o.reduce((a,l)=>{const c={type:"subcategory",key:`${i}_${l}`,category:i,properties:{subcategory:l,description:oO[i][l]},includedByTrigger:s[i][l].triggerCount>0,includedByRegular:s[i][l].regularCount>0};return c.includedByTrigger&&(n.includedByTrigger=!0),c.includedByRegular&&(n.includedByRegular=!0),a.push(c),a},[]);return[...t,n,...r]},[]),J4={namespaced:!0,state:{nodeTypes:{}},getters:{allNodeTypes:s=>Object.values(s.nodeTypes).reduce((e,t)=>{const n=Object.keys(t).map(Number).map(o=>t[o]);return[...e,...n]},[]),allLatestNodeTypes:s=>Object.values(s.nodeTypes).reduce((e,t)=>{const i=Object.keys(t).map(Number),n=t[Math.max(...i)];return n?[...e,n]:e},[]),getNodeType:s=>(e,t)=>{const i=s.nodeTypes[e];if(!i)return null;const n=Object.keys(i).map(Number);return i[t||Math.max(...n)]||null},isTriggerNode:(s,e)=>t=>{const i=e.getNodeType(t);return!!(i&&i.group.includes("trigger"))},visibleNodeTypes:(s,e)=>e.allLatestNodeTypes.filter(t=>!t.hidden),categoriesWithNodes:(s,e,t,i)=>Y4(e.visibleNodeTypes,i["users/personalizedNodeTypes"]),categorizedItems:(s,e)=>K4(e.categoriesWithNodes)},mutations:{setNodeTypes(s,e=[]){const t=e.reduce((i,n)=>{const o=eq(n);if(o.length===0){const r={[b_]:n};return i[n.name]=r,i}for(const r of o)i[n.name]?i[n.name][r]=n:i[n.name]={[r]:n};return i},{...s.nodeTypes});m.set(s,"nodeTypes",t)},removeNodeTypes(s,e){s.nodeTypes=e.reduce((t,i)=>yb(i.name,t),s.nodeTypes)}},actions:{async getFullNodesProperties(s,e){await s.dispatch("credentials/fetchCredentialTypes",!0);const t=await s.dispatch("getNodesInformation",e);s.commit("setNodeTypes",t)},async getNodeTypes(s){const e=await z4(s.rootGetters.getRestApiContext);e.length&&s.commit("setNodeTypes",e)},async getNodeTranslationHeaders(s){const e=await G4(s.rootGetters.getRestApiContext);e&&GP(e,s.rootGetters.defaultLocale)},async getNodesInformation(s,e){const t=await H4(s.rootGetters.getRestApiContext,e);t.forEach(i=>{if(i.translation){const n=i.name.replace("n8n-nodes-base.","");jP({[n]:i.translation},s.getters.defaultLocale)}}),s.commit("setNodeTypes",t)},async getNodeParameterOptions(s,e){return q4(s.rootGetters.getRestApiContext,e)},async getResourceLocatorResults(s,e){return X4(s.rootGetters.getRestApiContext,e)}}};function eq(s){return Array.isArray(s.version)?s.version:[s.version]}const tq={namespaced:!0,state:{activeNodeName:null,mainPanelDimensions:{},sessionId:"",input:{displayMode:"table",nodeName:void 0,run:void 0,branch:void 0,data:{isEmpty:!0}},output:{displayMode:"table",branch:void 0,data:{isEmpty:!0},editMode:{enabled:!1,value:""}},focusedMappableInput:"",mappingTelemetry:{},hoveringItem:null,draggable:{isDragging:!1,type:"",data:"",canDrop:!1,stickyPosition:null}},getters:{activeNodeName:s=>s.activeNodeName,activeNode:(s,e,t,i)=>i.getNodeByName(s.activeNodeName),ndvInputData:(s,e,t,i)=>{var l,c,d,u,h,p,f,w,g;const n=i.getWorkflowExecution,o=s.input.nodeName,r=(l=s.input.run)!=null?l:0,a=(c=s.input.branch)!=null?c:0;return!n||!o||r===void 0||a===void 0?[]:(g=(w=(f=(p=(h=(u=(d=n.data)==null?void 0:d.resultData)==null?void 0:u.runData)==null?void 0:h[o])==null?void 0:p[r])==null?void 0:f.data)==null?void 0:w.main)==null?void 0:g[a]},ndvSessionId:s=>s.sessionId,getPanelDisplayMode:s=>e=>s[e].displayMode,inputPanelDisplayMode:s=>s.input.displayMode,outputPanelDisplayMode:s=>s.output.displayMode,outputPanelEditMode:s=>s.output.editMode,focusedMappableInput:s=>s.focusedMappableInput,isDraggableDragging:s=>s.draggable.isDragging,draggableType:s=>s.draggable.type,draggableData:s=>s.draggable.data,canDraggableDrop:s=>s.draggable.canDrop,mainPanelDimensions:s=>e=>({...{relativeRight:1,relativeLeft:1,relativeWidth:1},...s.mainPanelDimensions[e]}),draggableStickyPos:s=>s.draggable.stickyPosition,mappingTelemetry:s=>s.mappingTelemetry,hoveringItem:s=>s.hoveringItem,ndvInputNodeName:s=>s.input.nodeName,ndvInputRunIndex:s=>s.input.run,ndvInputBranchIndex:s=>s.input.branch,getNDVDataIsEmpty:s=>e=>s[e].data.isEmpty},mutations:{setActiveNodeName(s,e){s.activeNodeName=e},setInputNodeName:(s,e)=>{m.set(s.input,"nodeName",e)},setInputRunIndex:(s,e)=>{m.set(s.input,"run",e)},setMainPanelDimensions:(s,e)=>{m.set(s.mainPanelDimensions,e.panelType,{...s.mainPanelDimensions[e.panelType],...e.dimensions})},setNDVSessionId:s=>{m.set(s,"sessionId",`ndv-${Math.random().toString(36).slice(-8)}`)},resetNDVSessionId:s=>{m.set(s,"sessionId","")},setPanelDisplayMode:(s,e)=>{m.set(s[e.pane],"displayMode",e.mode)},setOutputPanelEditModeEnabled:(s,e)=>{m.set(s.output.editMode,"enabled",e)},setOutputPanelEditModeValue:(s,e)=>{m.set(s.output.editMode,"value",e)},setMappableNDVInputFocus(s,e){m.set(s,"focusedMappableInput",e)},draggableStartDragging(s,{type:e,data:t}){s.draggable={isDragging:!0,type:e,data:t,canDrop:!1,stickyPosition:null}},draggableStopDragging(s){s.draggable={isDragging:!1,type:"",data:"",canDrop:!1,stickyPosition:null}},setDraggableStickyPos(s,e){m.set(s.draggable,"stickyPosition",e)},setDraggableCanDrop(s,e){m.set(s.draggable,"canDrop",e)},setMappingTelemetry(s,e){s.mappingTelemetry={...s.mappingTelemetry,...e}},resetMappingTelemetry(s){s.mappingTelemetry={}},setHoveringItem(s,e){m.set(s,"hoveringItem",e)},setNDVBranchIndex(s,e){m.set(s[e.pane],"branch",e.branchIndex)},setNDVPanelDataIsEmpty(s,e){m.set(s[e.panel].data,"isEmpty",e.isEmpty)}},actions:{}};async function sq(s){return await j(s,"GET","/credential-types")}async function iq(s,e){return await j(s,"GET","/credentials/new",e?{name:e}:{})}async function nq(s){return await j(s,"GET","/credentials")}async function oq(s,e){return j(s,"POST","/credentials",e)}async function rq(s,e){return j(s,"DELETE",`/credentials/${e}`)}async function aq(s,e,t){return j(s,"PATCH",`/credentials/${e}`,t)}async function lq(s,e){return j(s,"GET",`/credentials/${e}`,{includeData:!0})}async function cq(s,e){return j(s,"GET","/oauth1-credential/auth",e)}async function dq(s,e){return j(s,"GET","/oauth2-credential/auth",e)}async function uq(s,e){return j(s,"POST","/credentials/test",e)}async function hq(s){return[]}async function pq(s,e,t){return j(s,"PUT",`/credentials/${e}/share`,t)}const Cn={mutations:{setCredentialOwnedBy(s,e){m.set(s.credentials[e.credentialId],"ownedBy",e.ownedBy)},setCredentialSharedWith(s,e){m.set(s.credentials[e.credentialId],"sharedWith",e.sharedWith)},addCredentialSharee(s,e){m.set(s.credentials[e.credentialId],"sharedWith",(s.credentials[e.credentialId].sharedWith||[]).concat([e.sharee]))},removeCredentialSharee(s,e){m.set(s.credentials[e.credentialId],"sharedWith",(s.credentials[e.credentialId].sharedWith||[]).filter(t=>t.id!==e.sharee.id))}},actions:{setCredentialSharedWith:async(s,e)=>{s.rootGetters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)&&(await pq(s.rootGetters.getRestApiContext,e.credentialId,{shareWithIds:e.sharedWith.map(t=>t.id)}),s.commit("setCredentialSharedWith",{credentialId:e.credentialId,sharedWith:e.sharedWith}))}}},qr="Unnamed credential",fq="account",mq=["httpBasicAuth","oAuth2Api","httpDigestAuth","oAuth1Api"],gq={namespaced:!0,state:{credentialTypes:{},credentials:{},...Cn.state},mutations:{setCredentialTypes:(s,e)=>{s.credentialTypes=e.reduce((t,i)=>(t[i.name]=i,t),{})},setCredentials:(s,e)=>{s.credentials=e.reduce((t,i)=>(i.id&&(t[i.id]=i),t),{})},setForeignCredentials:(s,e)=>{s.foreignCredentials=e.reduce((t,i)=>(i.id&&(t[i.id]=i),t),{})},upsertCredential(s,e){e.id&&m.set(s.credentials,e.id,{...s.credentials[e.id],...e})},deleteCredential(s,e){m.delete(s.credentials,e)},enableOAuthCredential(s,e){},...Cn.mutations},getters:{credentialTypesById(s){return s.credentialTypes},allCredentialTypes(s){return Object.values(s.credentialTypes).sort((e,t)=>e.displayName.localeCompare(t.displayName))},allCredentials(s){return Object.values(s.credentials).sort((e,t)=>e.name.localeCompare(t.name))},allForeignCredentials(s){return Object.values(s.foreignCredentials||{}).sort((e,t)=>e.name.localeCompare(t.name))},allCredentialsByType(s,e){const t=e.allCredentials;return e.allCredentialTypes.reduce((n,o)=>(n[o.name]=t.filter(r=>r.type===o.name),n),{})},getCredentialTypeByName:s=>e=>s.credentialTypes[e],getCredentialById:s=>e=>s.credentials[e],getCredentialByIdAndType:s=>(e,t)=>{const i=s.credentials[e];return!i||i.type!==t?void 0:i},getCredentialsByType:(s,e)=>t=>e.allCredentialsByType[t]||[],getNodesWithAccess(s,e,t,i){return n=>i["nodeTypes/allLatestNodeTypes"].filter(r=>{if(!r.credentials)return!1;for(const a of r.credentials)if(a.name===n)return!0;return!1})},getScopesByCredentialType(s,e){return t=>{const n=e.getCredentialTypeByName(t).properties.find(r=>r.name==="scope");if(!n||!n.default||typeof n.default!="string"||n.default==="")return[];let{default:o}=n;return o=o.replace(/^=/,"").replace(/\{\{.*\}\}/,""),/ /.test(o)?o.split(" "):/,/.test(o)?o.split(","):[o]}},getCredentialOwnerName:(s,e)=>t=>{const i=e.getCredentialById(t);return i&&i.ownedBy&&i.ownedBy.firstName?`${i.ownedBy.firstName} ${i.ownedBy.lastName} (${i.ownedBy.email})`:Zn.baseText("credentialEdit.credentialSharing.info.sharee.fallback")},...Cn.getters},actions:{fetchCredentialTypes:async(s,e)=>{if(s.getters.allCredentialTypes.length>0&&e!==!0)return;const t=await sq(s.rootGetters.getRestApiContext);s.commit("setCredentialTypes",t)},fetchAllCredentials:async s=>{const e=await nq(s.rootGetters.getRestApiContext);return s.commit("setCredentials",e),e},fetchForeignCredentials:async s=>{const e=await hq(s.rootGetters.getRestApiContext);return s.commit("setForeignCredentials",e),e},getCredentialData:async(s,{id:e})=>await lq(s.rootGetters.getRestApiContext,e),createNewCredential:async(s,e)=>{const t=await oq(s.rootGetters.getRestApiContext,e);return s.rootGetters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)?(s.commit("upsertCredential",t),e.ownedBy&&(s.commit("setCredentialOwnedBy",{credentialId:t.id,ownedBy:e.ownedBy}),e.sharedWith&&e.ownedBy.id===s.rootGetters["users/currentUserId"]&&await s.dispatch("setCredentialSharedWith",{credentialId:t.id,sharedWith:e.sharedWith}))):s.commit("upsertCredential",t),t},updateCredential:async(s,e)=>{const{id:t,data:i}=e,n=await aq(s.rootGetters.getRestApiContext,t,i);return s.rootGetters["settings/isEnterpriseFeatureEnabled"](Be.Sharing)?(s.commit("upsertCredential",n),i.ownedBy&&(s.commit("setCredentialOwnedBy",{credentialId:n.id,ownedBy:i.ownedBy}),i.sharedWith&&i.ownedBy.id===s.rootGetters["users/currentUserId"]&&await s.dispatch("setCredentialSharedWith",{credentialId:n.id,sharedWith:i.sharedWith}))):s.commit("upsertCredential",n),n},deleteCredential:async(s,{id:e})=>{await rq(s.rootGetters.getRestApiContext,e)&&s.commit("deleteCredential",e)},oAuth2Authorize:async(s,e)=>dq(s.rootGetters.getRestApiContext,e),oAuth1Authorize:async(s,e)=>cq(s.rootGetters.getRestApiContext,e),testCredential:async(s,e)=>uq(s.rootGetters.getRestApiContext,{credentials:e}),getNewCredentialName:async(s,e)=>{try{const{credentialTypeName:t}=e;let i=qr;if(!mq.includes(t)){const{displayName:o}=s.getters.getCredentialTypeByName(t);i=pf(o),i=i.length>0?`${i} ${fq}`:qr}return(await iq(s.rootGetters.getRestApiContext,i)).name}catch{return qr}},...Cn.actions}};function wq(s){return j(s,"GET","/settings")}async function yq(s,e){return await wt(Ka,"/prompts",{},{"n8n-instance-id":s,"n8n-user-id":e})}async function vq(s,e,t){return await Ji(Ka,"/prompt",{email:t},{"n8n-instance-id":s,"n8n-user-id":e})}async function _q(s,e,t){return await Ji(Ka,"/value-survey",t,{"n8n-instance-id":s,"n8n-user-id":e})}async function Oq(){return(await wt(E_,"search?q=keywords:n8n-community-node-package")).total||0}function Pw(s){return s.join(",")}function bq(s){return wt(s,"/health")}function xq(s,e){return wt(s,"/templates/categories",void 0,e)}async function $q(s,e,t){return await wt(s,"/templates/collections",{category:Pw(e.categories||[]),search:e.search},t)}async function Sp(s,e,t){return wt(s,"/templates/workflows",{skip:e.skip,rows:e.limit,category:Pw(e.categories),search:e.search},t)}async function Tq(s,e,t){return await wt(s,`/templates/collections/${e}`,void 0,t)}async function kq(s,e,t){return await wt(s,`/templates/workflows/${e}`,void 0,t)}async function Sq(s,e,t){return await wt(s,`/workflows/templates/${e}`,void 0,t)}function Eq(s){return j(s,"GET","/me/api-key")}function Cq(s){return j(s,"POST","/me/api-key")}function Nq(s){return j(s,"DELETE","/me/api-key")}const Pq={namespaced:!0,state:{settings:{},promptsData:{},userManagement:{enabled:!1,showSetupOnFirstLoad:!1,smtpSetup:!1},templatesEndpointHealthy:!1,api:{enabled:!1,latestVersion:0,path:"/"},onboardingCallPromptEnabled:!1},getters:{isEnterpriseFeatureEnabled:s=>e=>s.settings.enterprise[e],versionCli(s){return s.settings.versionCli},isUserManagementEnabled(s){return s.userManagement.enabled},isPublicApiEnabled(s){return s.api.enabled},publicApiLatestVersion(s){return s.api.latestVersion},publicApiPath(s){return s.api.path},showSetupPage(s){return s.userManagement.showSetupOnFirstLoad},getPromptsData(s){return s.promptsData},isDesktopDeployment(s){var e;return(e=s.settings.deployment)==null?void 0:e.type.startsWith("desktop_")},isCloudDeployment(s){return s.settings.deployment&&s.settings.deployment.type==="cloud"},isSmtpSetup(s){return s.userManagement.smtpSetup},isPersonalizationSurveyEnabled(s){return s.settings.telemetry.enabled&&s.settings.personalizationSurveyEnabled},telemetry:s=>s.settings.telemetry,logLevel:s=>s.settings.logLevel,isTelemetryEnabled:s=>s.settings.telemetry&&s.settings.telemetry.enabled,areTagsEnabled:s=>s.settings.workflowTagsDisabled!==void 0?!s.settings.workflowTagsDisabled:!0,isHiringBannerEnabled:s=>s.settings.hiringBannerEnabled,isTemplatesEnabled:s=>Boolean(s.settings.templates&&s.settings.templates.enabled),isTemplatesEndpointReachable:s=>s.templatesEndpointHealthy,templatesHost:s=>s.settings.templates.host,isOnboardingCallPromptFeatureEnabled:s=>s.onboardingCallPromptEnabled,isCommunityNodesFeatureEnabled:s=>s.settings.communityNodesEnabled,isNpmAvailable:s=>s.settings.isNpmAvailable,allowedModules:s=>s.settings.allowedModules,isQueueModeEnabled:s=>s.settings.executionMode==="queue",workflowCallerPolicyDefaultOption:s=>s.settings.workflowCallerPolicyDefaultOption,isWorkflowSharingEnabled:s=>s.settings.isWorkflowSharingEnabled},mutations:{setSettings(s,e){s.settings=e,s.userManagement.enabled=e.userManagement.enabled,s.userManagement.showSetupOnFirstLoad=!!e.userManagement.showSetupOnFirstLoad,s.userManagement.smtpSetup=e.userManagement.smtpSetup,s.api.enabled=e.publicApi.enabled,s.api.latestVersion=e.publicApi.latestVersion,s.api.path=e.publicApi.path,s.onboardingCallPromptEnabled=e.onboardingCallPromptEnabled},stopShowingSetupPage(s){m.set(s.userManagement,"showSetupOnFirstLoad",!1)},setPromptsData(s,e){m.set(s,"promptsData",e)},setTemplatesEndpointHealthy(s){s.templatesEndpointHealthy=!0},setCommunityNodesFeatureEnabled(s,e){s.settings.communityNodesEnabled=e},setIsWorkflowSharingEnabled(s,e){s.settings.isWorkflowSharingEnabled=e},setWorkflowCallerPolicyDefaultOption(s,e){s.settings.workflowCallerPolicyDefaultOption=e},setAllowedModules(s,e){s.settings.allowedModules={...e.builtIn&&{builtIn:e.builtIn.split(",")},...e.external&&{external:e.external.split(",")}}}},actions:{async getSettings(s){const e=await wq(s.rootGetters.getRestApiContext);s.commit("setSettings",e),s.commit("setUrlBaseWebhook",e.urlBaseWebhook,{root:!0}),s.commit("setUrlBaseEditor",e.urlBaseEditor,{root:!0}),s.commit("setEndpointWebhook",e.endpointWebhook,{root:!0}),s.commit("setEndpointWebhookTest",e.endpointWebhookTest,{root:!0}),s.commit("setSaveDataErrorExecution",e.saveDataErrorExecution,{root:!0}),s.commit("setSaveDataSuccessExecution",e.saveDataSuccessExecution,{root:!0}),s.commit("setSaveManualExecutions",e.saveManualExecutions,{root:!0}),s.commit("setTimezone",e.timezone,{root:!0}),s.commit("setExecutionTimeout",e.executionTimeout,{root:!0}),s.commit("setMaxExecutionTimeout",e.maxExecutionTimeout,{root:!0}),s.commit("setVersionCli",e.versionCli,{root:!0}),s.commit("setInstanceId",e.instanceId,{root:!0}),s.commit("setOauthCallbackUrls",e.oauthCallbackUrls,{root:!0}),s.commit("setN8nMetadata",e.n8nMetadata||{},{root:!0}),s.commit("setDefaultLocale",e.defaultLocale,{root:!0}),s.commit("setIsNpmAvailable",e.isNpmAvailable,{root:!0}),s.commit("versions/setVersionNotificationSettings",e.versionNotifications,{root:!0}),s.commit("setCommunityNodesFeatureEnabled",e.communityNodesEnabled===!0),s.commit("settings/setAllowedModules",e.allowedModules,{root:!0}),s.commit("settings/setWorkflowCallerPolicyDefaultOption",e.workflowCallerPolicyDefaultOption,{root:!0}),s.commit("settings/setIsWorkflowSharingEnabled",e.enterprise.workflowSharing,{root:!0})},async fetchPromptsData(s){if(!!s.getters.isTelemetryEnabled)try{const e=s.state.settings.instanceId,t=s.rootGetters["users/currentUserId"],i=await yq(e,t);i&&i.showContactPrompt?s.commit("ui/openModal",Za,{root:!0}):i&&i.showValueSurvey&&s.commit("ui/openModal",Bo,{root:!0}),s.commit("setPromptsData",i)}catch(e){return e}},async submitContactInfo(s,e){try{const t=s.state.settings.instanceId,i=s.rootGetters["users/currentUserId"];return await vq(t,i,e)}catch(t){return t}},async submitValueSurvey(s,e){try{const t=s.state.settings.instanceId,i=s.rootGetters["users/currentUserId"];return await _q(t,i,e)}catch(t){return t}},async testTemplatesEndpoint(s){const e=new Promise((t,i)=>setTimeout(()=>i(),2e3));await Promise.race([bq(s.getters.templatesHost),e]),s.commit("setTemplatesEndpointHealthy",!0)},async getApiKey(s){const{apiKey:e}=await Eq(s.rootGetters.getRestApiContext);return e},async createApiKey(s){const{apiKey:e}=await Cq(s.rootGetters.getRestApiContext);return e},async deleteApiKey(s){await Nq(s.rootGetters.getRestApiContext)}}};async function Dq(s,e=!1){return await j(s,"GET","/tags",{withUsageCount:e})}async function Iq(s,e){return await j(s,"POST","/tags",e)}async function Aq(s,e,t){return await j(s,"PATCH",`/tags/${e}`,t)}async function Rq(s,e){return await j(s,"DELETE",`/tags/${e}`)}const Mq={namespaced:!0,state:{tags:{},isLoading:!1,fetchedAll:!1,fetchedUsageCount:!1},mutations:{setLoading:(s,e)=>{s.isLoading=e},setAllTags:(s,e)=>{s.tags=e.reduce((t,i)=>(t[i.id]=i,t),{}),s.fetchedAll=!0},upsertTags(s,e){e.forEach(t=>{const i=t.id,n=s.tags[i];if(n){const o={...n,...t};m.set(s.tags,i,o)}else m.set(s.tags,i,t)})},deleteTag(s,e){m.delete(s.tags,e)}},getters:{allTags(s){return Object.values(s.tags).sort((e,t)=>e.name.localeCompare(t.name))},isLoading:s=>s.isLoading,hasTags:s=>Object.keys(s.tags).length>0,getTagById:s=>e=>s.tags[e]},actions:{fetchAll:async(s,e)=>{const{force:t=!1,withUsageCount:i=!1}=e||{};if(!t&&s.state.fetchedAll&&s.state.fetchedUsageCount===i)return Object.values(s.state.tags);s.commit("setLoading",!0);const n=await Dq(s.rootGetters.getRestApiContext,Boolean(i));return s.commit("setAllTags",n),s.commit("setLoading",!1),n},create:async(s,e)=>{const t=await Iq(s.rootGetters.getRestApiContext,{name:e});return s.commit("upsertTags",[t]),t},rename:async(s,{id:e,name:t})=>{const i=await Aq(s.rootGetters.getRestApiContext,e,{name:t});return s.commit("upsertTags",[i]),i},delete:async(s,e)=>{const t=await Rq(s.rootGetters.getRestApiContext,e);return t&&(s.commit("deleteTag",e),s.commit("removeWorkflowTagId",e,{root:!0})),t}}};function Wq(s,e){return j(s,"POST","/curl-to-json",{curlCommand:e})}const oc="https://api.n8n.io/api",Dw="/prompts/onboarding",Lq="/accounts/onboarding";async function Qq(s,e){return await wt(oc,Dw,{instance_id:s,user_id:`${s}#${e.id}`,is_owner:e.isOwner,survey_results:e.personalizationAnswers})}async function Bq(s,e,t){try{return await Ji(oc,Dw,{instance_id:s,user_id:`${s}#${e.id}`,email:t})}catch(i){throw i}}async function Uq(s,e,t,i){return await Ji(oc,Lq,{instance_id:s,user_id:`${s}#${e.id}`,email:t,agree:i})}const Vq={namespaced:!0,state:{modals:{[Yi]:{open:!1},[Ao]:{open:!1},[Za]:{open:!1},[_t]:{open:!1,mode:"",activeId:null},[Ro]:{open:!1},[Pn]:{open:!1,activeId:null},[Wo]:{open:!1},[Ki]:{open:!1},[Qo]:{open:!1},[Mo]:{open:!1},[Lo]:{open:!1},[Bo]:{open:!1},[Ns]:{open:!1},[Lt]:{open:!1},[Zi]:{open:!1},[Qi]:{open:!1},[Uo]:{open:!1},[jt]:{open:!1,mode:"",activeId:null},[Gt]:{open:!1,curlCommand:"",httpNodeParameters:""}},modalStack:[],sidebarMenuCollapsed:!1,isPageLoading:!0,currentView:"",fakeDoorFeatures:[{id:Qn.ENVIRONMENTS,featureName:"fakeDoor.settings.environments.name",icon:"server",infoText:"fakeDoor.settings.environments.infoText",actionBoxTitle:"fakeDoor.settings.environments.actionBox.title",actionBoxDescription:"fakeDoor.settings.environments.actionBox.description",linkURL:"https://n8n-community.typeform.com/to/l7QOrERN#f=environments",uiLocations:["settings"]},{id:Qn.LOGGING,featureName:"fakeDoor.settings.logging.name",icon:"sign-in-alt",infoText:"fakeDoor.settings.logging.infoText",actionBoxTitle:"fakeDoor.settings.logging.actionBox.title",actionBoxDescription:"fakeDoor.settings.logging.actionBox.description",linkURL:"https://n8n-community.typeform.com/to/l7QOrERN#f=logging",uiLocations:["settings"]},{id:Qn.SHARING,featureName:"fakeDoor.credentialEdit.sharing.name",actionBoxTitle:"fakeDoor.credentialEdit.sharing.actionBox.title",actionBoxDescription:"fakeDoor.credentialEdit.sharing.actionBox.description",linkURL:"https://n8n-community.typeform.com/to/l7QOrERN#f=sharing",uiLocations:["credentialsModal"]}],nodeViewInitialized:!1,addFirstStepOnLoad:!1,executionSidebarAutoRefresh:!0},getters:{isVersionsOpen:s=>s.modals[Ns].open,getCurlCommand:s=>s.modals[Gt].curlCommand,getHttpNodeParameters:s=>s.modals[Gt].httpNodeParameters,isModalOpen:s=>e=>s.modals[e].open,isModalActive:s=>e=>s.modalStack.length>0&&e===s.modalStack[0],getModalActiveId:s=>e=>s.modals[e].activeId,getModalMode:s=>e=>s.modals[e].mode,getModalData:s=>e=>s.modals[e].data,sidebarMenuCollapsed:s=>s.sidebarMenuCollapsed,getFakeDoorFeatures:s=>s.fakeDoorFeatures,getFakeDoorByLocation:(s,e)=>t=>e.getFakeDoorFeatures.filter(i=>i.uiLocations.includes(t)),getFakeDoorById:(s,e)=>t=>e.getFakeDoorFeatures.find(i=>i.id.toString()===t),getCurrentView:s=>s.currentView,isNodeView:s=>[O.NEW_WORKFLOW.toString(),O.WORKFLOW.toString(),O.EXECUTION.toString()].includes(s.currentView),getNDVDataIsEmpty:s=>e=>s.ndv[e].data.isEmpty,isNodeViewInitialized:s=>s.nodeViewInitialized,getAddFirstStepOnLoad:s=>s.addFirstStepOnLoad,isExecutionSidebarAutoRefreshOn:s=>s.executionSidebarAutoRefresh},mutations:{setMode:(s,e)=>{const{name:t,mode:i}=e;m.set(s.modals[t],"mode",i)},setFakeDoorFeatures:(s,e)=>{s.fakeDoorFeatures=e},setActiveId:(s,e)=>{const{name:t,id:i}=e;m.set(s.modals[t],"activeId",i)},setModalData:(s,e)=>{const{name:t,data:i}=e;m.set(s.modals[t],"data",i)},setCurlCommand:(s,e)=>{const{name:t,command:i}=e;m.set(s.modals[t],"curlCommand",i)},setHttpNodeParameters:(s,e)=>{const{name:t,parameters:i}=e;m.set(s.modals[t],"httpNodeParameters",i)},openModal:(s,e)=>{m.set(s.modals[e],"open",!0),s.modalStack=[e].concat(s.modalStack)},closeModal:(s,e)=>{m.set(s.modals[e],"open",!1),s.modalStack=s.modalStack.filter(t=>e!==t)},closeAllModals:s=>{Object.keys(s.modals).forEach(e=>{s.modals[e].open&&m.set(s.modals[e],"open",!1)}),s.modalStack=[]},toggleSidebarMenuCollapse:s=>{s.sidebarMenuCollapsed=!s.sidebarMenuCollapsed},collapseSidebarMenu:s=>{s.sidebarMenuCollapsed=!0},expandSidebarMenu:s=>{s.sidebarMenuCollapsed=!1},setCurrentView:(s,e)=>{s.currentView=e},setNDVSessionId:s=>{m.set(s.ndv,"sessionId",`ndv-${Math.random().toString(36).slice(-8)}`)},resetNDVSessionId:s=>{m.set(s.ndv,"sessionId","")},setPanelDisplayMode:(s,e)=>{m.set(s.ndv[e.pane],"displayMode",e.mode)},setOutputPanelEditModeEnabled:(s,e)=>{m.set(s.ndv.output.editMode,"enabled",e)},setOutputPanelEditModeValue:(s,e)=>{m.set(s.ndv.output.editMode,"value",e)},setMainPanelRelativePosition(s,e){s.mainPanelPosition=e},setMappableNDVInputFocus(s,e){m.set(s.ndv,"focusedMappableInput",e)},draggableStartDragging(s,{type:e,data:t}){s.draggable={isDragging:!0,type:e,data:t,canDrop:!1,stickyPosition:null}},draggableStopDragging(s){s.draggable={isDragging:!1,type:"",data:"",canDrop:!1,stickyPosition:null}},setDraggableStickyPos(s,e){m.set(s.draggable,"stickyPosition",e)},setDraggableCanDrop(s,e){m.set(s.draggable,"canDrop",e)},setMappingTelemetry(s,e){s.ndv.mappingTelemetry={...s.ndv.mappingTelemetry,...e}},resetMappingTelemetry(s){s.ndv.mappingTelemetry={}},setHoveringItem(s,e){m.set(s.ndv,"hoveringItem",e)},setNDVBranchIndex(s,e){m.set(s.ndv[e.pane],"branch",e.branchIndex)},setNDVPanelDataIsEmpty(s,e){m.set(s.ndv[e.panel].data,"isEmpty",e.isEmpty)},setNodeViewInitialized(s,e){s.nodeViewInitialized=e},setAddFirstStepOnLoad(s,e){s.addFirstStepOnLoad=e},setExecutionsSidebarAutoRefresh(s,e){s.executionSidebarAutoRefresh=e}},actions:{openModal:async(s,e)=>{s.commit("openModal",e)},openModalWithData:async(s,e)=>{s.commit("setModalData",e),s.commit("openModal",e.name)},openDeleteUserModal:async(s,{id:e})=>{s.commit("setActiveId",{name:Pn,id:e}),s.commit("openModal",Pn)},openExistingCredential:async(s,{id:e})=>{s.commit("setActiveId",{name:_t,id:e}),s.commit("setMode",{name:_t,mode:"edit"}),s.commit("openModal",_t)},setCurlCommand:async(s,{command:e})=>{s.commit("setCurlCommand",{name:Gt,command:e})},setHttpNodeParameters:async(s,{parameters:e})=>{s.commit("setHttpNodeParameters",{name:Gt,parameters:e})},openExisitngCredential:async(s,{id:e})=>{s.commit("setActiveId",{name:_t,id:e}),s.commit("setMode",{name:_t,mode:"edit"}),s.commit("openModal",_t)},openNewCredential:async(s,{type:e})=>{s.commit("setActiveId",{name:_t,id:e}),s.commit("setMode",{name:_t,mode:"new"}),s.commit("openModal",_t)},getNextOnboardingPrompt:async s=>{const e=s.rootGetters.instanceId,t=s.rootGetters["users/currentUser"];return await Qq(e,t)},applyForOnboardingCall:async(s,{email:e})=>{const t=s.rootGetters.instanceId,i=s.rootGetters["users/currentUser"];return await Bq(t,i,e)},submitContactEmail:async(s,{email:e,agree:t})=>{const i=s.rootGetters.instanceId,n=s.rootGetters["users/currentUser"];return await Uq(i,n,e||n.email,t)},async openCommunityPackageUninstallConfirmModal(s,e){s.commit("setActiveId",{name:jt,id:e}),s.commit("setMode",{name:jt,mode:At.UNINSTALL}),s.commit("openModal",jt)},async openCommunityPackageUpdateConfirmModal(s,e){s.commit("setActiveId",{name:jt,id:e}),s.commit("setMode",{name:jt,mode:At.UPDATE}),s.commit("openModal",jt)},async getCurlToJson(s,e){return await Wq(s.rootGetters.getRestApiContext,e)}}};function Fq(s){return j(s,"GET","/login")}function jq(s){return j(s,"GET","/me")}function zq(s,e){return j(s,"POST","/login",e)}async function Gq(s){await j(s,"POST","/logout")}function Hq(s,e){return j(s,"POST","/owner",e)}function qq(s){return j(s,"POST","/owner/skip-setup")}function Xq(s,e){return j(s,"GET","/resolve-signup-token",e)}function Yq(s,e){const{inviteeId:t,...i}=e;return j(s,"POST",`/users/${e.inviteeId}`,i)}async function Zq(s,e){await j(s,"POST","/forgot-password",e)}async function Kq(s,e){await j(s,"GET","/resolve-password-token",e)}async function Jq(s,e){await j(s,"POST","/change-password",e)}function eX(s,e){return j(s,"PATCH","/me",e)}function tX(s,e){return j(s,"PATCH","/me/password",e)}async function sX(s,{id:e,transferId:t}){await j(s,"DELETE",`/users/${e}`,t?{transferId:t}:{})}function iX(s){return j(s,"GET","/users")}function nX(s,e){return j(s,"POST","/users",e)}async function oX(s,{id:e}){await j(s,"POST",`/users/${e}/reinvite`)}async function rX(s,e){await j(s,"POST","/me/survey",e)}const aX=s=>Boolean(s&&s.isPending&&s.globalRole&&s.globalRole.name===ze.Owner),lX=s=>Boolean(s&&s.isPending),cX={namespaced:!0,state:{currentUserId:null,users:{}},mutations:{addUsers:(s,e)=>{e.forEach(t=>{const n={...s.users[t.id]||{},...t},o={...n,fullName:t.firstName?`${n.firstName} ${n.lastName||""}`:void 0,isDefaultUser:aX(n),isPendingUser:lX(n),isOwner:Boolean(n.globalRole&&n.globalRole.name===ze.Owner)};m.set(s.users,o.id,o)})},setCurrentUserId:(s,e)=>{s.currentUserId=e},clearCurrentUserId:s=>{s.currentUserId=null},deleteUser:(s,e)=>{m.delete(s.users,e)},setPersonalizationAnswers(s,e){if(!s.currentUserId)return;const t=s.users[s.currentUserId];!t||m.set(t,"personalizationAnswers",e)}},getters:{allUsers(s){return Object.values(s.users)},currentUserId(s){return s.currentUserId},currentUser(s){return s.currentUserId?s.users[s.currentUserId]:null},getUserById(s){return e=>s.users[e]},globalRoleName(s,e){return e.currentUser.globalRole.name},canUserDeleteTags(s,e,t,i){const n=e.currentUser;return Kn(jr.TAGS.CAN_DELETE_TAGS,n)},canUserAccessSidebarUserInfo(s,e,t,i){const n=e.currentUser;return Kn(jr.PRIMARY_MENU.CAN_ACCESS_USER_INFO,n)},showUMSetupWarning(s,e,t,i){const n=e.currentUser;return Kn(jr.USER_SETTINGS.VIEW_UM_SETUP_WARNING,n)},personalizedNodeTypes(s,e){const t=e.currentUser;if(!t)return[];const i=t.personalizationAnswers;return i?pI(i):[]}},actions:{async loginWithCookie(s){const e=await Fq(s.rootGetters.getRestApiContext);e&&(s.commit("addUsers",[e]),s.commit("setCurrentUserId",e.id))},async getCurrentUser(s){const e=await jq(s.rootGetters.getRestApiContext);e&&(s.commit("addUsers",[e]),s.commit("setCurrentUserId",e.id))},async loginWithCreds(s,e){const t=await zq(s.rootGetters.getRestApiContext,e);t&&(s.commit("addUsers",[t]),s.commit("setCurrentUserId",t.id))},async logout(s){await Gq(s.rootGetters.getRestApiContext),s.commit("clearCurrentUserId")},async createOwner(s,e){const t=await Hq(s.rootGetters.getRestApiContext,e);t&&(s.commit("addUsers",[t]),s.commit("setCurrentUserId",t.id),s.commit("settings/stopShowingSetupPage",null,{root:!0}))},async validateSignupToken(s,e){return await Xq(s.rootGetters.getRestApiContext,e)},async signup(s,e){const t=await Yq(s.rootGetters.getRestApiContext,e);t&&(s.commit("addUsers",[t]),s.commit("setCurrentUserId",t.id))},async sendForgotPasswordEmail(s,e){await Zq(s.rootGetters.getRestApiContext,e)},async validatePasswordToken(s,e){await Kq(s.rootGetters.getRestApiContext,e)},async changePassword(s,e){await Jq(s.rootGetters.getRestApiContext,e)},async updateUser(s,e){const t=await eX(s.rootGetters.getRestApiContext,e);s.commit("addUsers",[t])},async updateCurrentUserPassword(s,{password:e,currentPassword:t}){await tX(s.rootGetters.getRestApiContext,{newPassword:e,currentPassword:t})},async deleteUser(s,e){await sX(s.rootGetters.getRestApiContext,e),s.commit("deleteUser",e.id)},async fetchUsers(s){const e=await iX(s.rootGetters.getRestApiContext);s.commit("addUsers",e)},async inviteUsers(s,e){const t=await nX(s.rootGetters.getRestApiContext,e);return s.commit("addUsers",t.map(({user:i})=>({isPending:!0,...i}))),t},async reinviteUser(s,e){await oX(s.rootGetters.getRestApiContext,e)},async submitPersonalizationSurvey(s,e){await rX(s.rootGetters.getRestApiContext,e),s.commit("setPersonalizationAnswers",e)},async showPersonalizationSurvey(s){const e=s.rootGetters["settings/isPersonalizationSurveyEnabled"],t=s.getters.currentUser;e&&t&&!t.personalizationAnswers&&s.dispatch("ui/openModal",Qo,{root:!0})},async skipOwnerSetup(s){try{s.commit("settings/stopShowingSetupPage",null,{root:!0}),await qq(s.rootGetters.getRestApiContext)}catch{}}}};async function Ep(s,e){const t=await j(s,"GET","/workflows/new",e?{name:e}:{});return{name:t.name,onboardingFlowEnabled:t.onboardingFlowEnabled===!0}}async function dX(s,e){return await j(s,"GET","/workflows",e?{filter:e}:void 0)}async function uX(s){return await j(s,"GET","/active")}async function hX(s,e){return await j(s,"GET","/executions-current",{filter:e})}async function pX(s,e){return await j(s,"GET","/executions",{filter:e})}const fX={namespaced:!0,state:{currentWorkflowExecutions:[],activeWorkflowExecution:null,finishedExecutionsCount:0},actions:{getNewWorkflowData:async(s,e)=>{let t={name:"",onboardingFlowEnabled:!1};try{t=await Ep(s.rootGetters.getRestApiContext,e)}catch{t.name=e||x_}return s.commit("setWorkflowName",{newName:t.name},{root:!0}),t},getDuplicateCurrentWorkflowName:async(s,e)=>{if(e&&e.length+dc.length>=qa)return e;let t=`${e}${dc}`;try{t=(await Ep(s.rootGetters.getRestApiContext,t)).name}catch{}return t},async loadCurrentWorkflowExecutions(s,e){let t=[],i=[];const n={workflowId:s.rootGetters.workflowId};if(!s.rootGetters.workflowId)return[];try{return(e.status===""||!e.finished)&&(t=await hX(s.rootGetters.getRestApiContext,n)),(e.status===""||e.finished)&&(e.status==="waiting"?n.waitTill=!0:e.status!==""&&(n.finished=e.status==="success"),i=await pX(s.rootGetters.getRestApiContext,n)),s.commit("setTotalFinishedExecutionsCount",i.count),[...t,...i.results||[]]}catch(o){throw o}}},mutations:{setCurrentWorkflowExecutions(s,e){s.currentWorkflowExecutions=e},setActiveWorkflowExecution(s,e){s.activeWorkflowExecution=e},setTotalFinishedExecutionsCount(s,e){s.finishedExecutionsCount=e},deleteExecution(s,e){s.currentWorkflowExecutions.splice(s.currentWorkflowExecutions.indexOf(e),1)}},getters:{currentWorkflowExecutions:s=>s.currentWorkflowExecutions,getActiveWorkflowExecution:s=>s.activeWorkflowExecution,getExecutionDataById:s=>e=>s.currentWorkflowExecutions.find(t=>t.id===e),getTotalFinishedExecutionsCount:s=>s.finishedExecutionsCount,getAllLoadedFinishedExecutions:s=>s.currentWorkflowExecutions.filter(e=>e.finished===!0||e.stoppedAt!==void 0)}};async function mX(s,e,t){const i={[aO]:t};return await wt(s,e,{},i)}const gX={namespaced:!0,state:{versionNotificationSettings:{enabled:!1,endpoint:"",infoUrl:""},nextVersions:[],currentVersion:void 0},getters:{hasVersionUpdates(s){return s.nextVersions.length>0},nextVersions(s){return s.nextVersions},currentVersion(s){return s.currentVersion},areNotificationsEnabled(s){return s.versionNotificationSettings.enabled},infoUrl(s){return s.versionNotificationSettings.infoUrl}},mutations:{setVersions(s,{versions:e,currentVersion:t}){s.nextVersions=e.filter(i=>i.name!==t),s.currentVersion=e.find(i=>i.name===t)},setVersionNotificationSettings(s,e){s.versionNotificationSettings=e}},actions:{async fetchVersions(s){try{const{enabled:e,endpoint:t}=s.state.versionNotificationSettings;if(e&&t){const i=s.rootState.versionCli,n=s.rootState.instanceId,o=await mX(t,i,n);s.commit("setVersions",{versions:o,currentVersion:i})}}catch{}}}},Cp=10;function Ft(s){return JSON.stringify([s.search||"",[...s.categories].sort()])}const wX={namespaced:!0,state:{categories:{},collections:{},workflows:{},collectionSearches:{},workflowSearches:{},currentSessionId:"",previousSessionId:""},getters:{allCategories(s){return Object.values(s.categories).sort((e,t)=>e.name>t.name?1:-1)},getTemplateById(s){return e=>s.workflows[e]},getCollectionById(s){return e=>s.collections[e]},getCategoryById(s){return e=>s.categories[e]},getSearchedCollections(s){return e=>{const t=Ft(e),i=s.collectionSearches[t];return i?i.collectionIds.map(n=>s.collections[n]):null}},getSearchedWorkflows(s){return e=>{const t=Ft(e),i=s.workflowSearches[t];return i?i.workflowIds.map(n=>s.workflows[n]):null}},getSearchedWorkflowsTotal(s){return e=>{const t=Ft(e),i=s.workflowSearches[t];return i?i.totalWorkflows:0}},isSearchLoadingMore(s){return e=>{const t=Ft(e),i=s.workflowSearches[t];return Boolean(i&&i.loadingMore)}},isSearchFinished(s){return e=>{const t=Ft(e),i=s.workflowSearches[t];return Boolean(i&&!i.loadingMore&&i.totalWorkflows===i.workflowIds.length)}},currentSessionId(s){return s.currentSessionId},previousSessionId(s){return s.previousSessionId}},mutations:{addCategories(s,e){e.forEach(t=>{m.set(s.categories,t.id,t)})},addCollections(s,e){e.forEach(t=>{const i=(t.workflows||[]).map(o=>({id:o.id})),n=s.collections[t.id]||{};m.set(s.collections,t.id,{...n,...t,workflows:i})})},addWorkflows(s,e){e.forEach(t=>{const i=s.workflows[t.id]||{};m.set(s.workflows,t.id,{...i,...t})})},addCollectionSearch(s,e){const t=e.collections.map(n=>n.id),i=Ft(e.query);m.set(s.collectionSearches,i,{collectionIds:t})},addWorkflowsSearch(s,e){const t=e.workflows.map(o=>o.id),i=Ft(e.query),n=s.workflowSearches[i];if(!n){m.set(s.workflowSearches,i,{workflowIds:t,totalWorkflows:e.totalWorkflows});return}m.set(s.workflowSearches,i,{workflowIds:[...n.workflowIds,...t],totalWorkflows:e.totalWorkflows})},setWorkflowSearchLoading(s,e){const t=Ft(e);!s.workflowSearches[t]||m.set(s.workflowSearches[t],"loadingMore",!0)},setWorkflowSearchLoaded(s,e){const t=Ft(e);!s.workflowSearches[t]||m.set(s.workflowSearches[t],"loadingMore",!1)},resetSessionId(s){s.previousSessionId=s.currentSessionId,s.currentSessionId=""},setSessionId(s){s.currentSessionId||(s.currentSessionId=`templates-${Date.now()}`)}},actions:{async getTemplateById(s,e){const t=s.rootGetters["settings/templatesHost"],i=s.rootGetters.versionCli,o={...(await kq(t,e,{"n8n-version":i})).workflow,full:!0};return s.commit("addWorkflows",[o]),o},async getCollectionById(s,e){const t=s.rootGetters["settings/templatesHost"],i=s.rootGetters.versionCli,n=await Tq(t,e,{"n8n-version":i}),o={...n.collection,full:!0};return s.commit("addCollections",[o]),s.commit("addWorkflows",n.collection.workflows),s.getters.getCollectionById(e)},async getCategories(s){const e=s.getters.allCategories;if(e.length)return e;const t=s.rootGetters["settings/templatesHost"],i=s.rootGetters.versionCli,o=(await xq(t,{"n8n-version":i})).categories;return s.commit("addCategories",o),o},async getCollections(s,e){const t=s.getters.getSearchedCollections(e);if(t)return t;const i=s.rootGetters["settings/templatesHost"],n=s.rootGetters.versionCli,r=(await $q(i,e,{"n8n-version":n})).collections;return s.commit("addCollections",r),s.commit("addCollectionSearch",{query:e,collections:r}),r.forEach(a=>s.commit("addWorkflows",a.workflows)),r},async getWorkflows(s,e){const t=s.getters.getSearchedWorkflows(e);if(t)return t;const i=s.rootGetters["settings/templatesHost"],n=s.rootGetters.versionCli,o=await Sp(i,{...e,skip:0,limit:Cp},{"n8n-version":n});return s.commit("addWorkflows",o.workflows),s.commit("addWorkflowsSearch",{...o,query:e}),s.getters.getSearchedWorkflows(e)},async getMoreWorkflows(s,e){if(s.getters.isSearchLoadingMore(e)&&!s.getters.isSearchFinished(e))return[];const t=s.getters.getSearchedWorkflows(e)||[],i=s.rootGetters["settings/templatesHost"];s.commit("setWorkflowSearchLoading",e);try{const n=await Sp(i,{...e,skip:t.length,limit:Cp});return s.commit("setWorkflowSearchLoaded",e),s.commit("addWorkflows",n.workflows),s.commit("addWorkflowsSearch",{...n,query:e}),s.getters.getSearchedWorkflows(e)}catch(n){throw s.commit("setWorkflowSearchLoaded",e),n}},getWorkflowTemplate:async(s,e)=>{const t=s.rootGetters["settings/templatesHost"],i=s.rootGetters.versionCli;return await Sq(t,e,{"n8n-version":i})}}};async function yX(s){return(await wt(s.baseUrl,"/nodes")).data||[]}async function vX(s,e){return await Ji(s.baseUrl,"/nodes",{name:e})}async function _X(s,e){return await j(s,"DELETE","/nodes",{name:e})}async function OX(s,e){return await j(s,"PATCH","/nodes",{name:e})}const bX=300,xX={namespaced:!0,state:{availablePackageCount:-1,installedPackages:{}},mutations:{setAvailablePackageCount:(s,e)=>{s.availablePackageCount=e},setInstalledPackages:(s,e)=>{s.installedPackages=e.reduce((t,i)=>(t[i.packageName]=i,t),{})},removePackageByName(s,e){m.delete(s.installedPackages,e)},updatePackageObject(s,e){s.installedPackages[e.packageName]=e}},getters:{availablePackageCount(s){return s.availablePackageCount},getInstalledPackages(s){return Object.values(s.installedPackages).sort((e,t)=>e.packageName.localeCompare(t.packageName))},getInstalledPackageByName(s){return e=>s.installedPackages[e]}},actions:{async fetchAvailableCommunityPackageCount(s){if(s.state.availablePackageCount===-1){const e=await Oq();s.commit("setAvailablePackageCount",e)}},async fetchInstalledPackages(s){const e=await yX(s.rootGetters.getRestApiContext);s.commit("setInstalledPackages",e);const t=e.length>0?0:bX;setTimeout(()=>{},t)},async installPackage(s,e){try{await vX(s.rootGetters.getRestApiContext,e),await s.dispatch("communityNodes/fetchInstalledPackages")}catch(t){throw t}},async uninstallPackage(s,e){try{await _X(s.rootGetters.getRestApiContext,e),s.commit("removePackageByName",e)}catch(t){throw t}},async updatePackage(s,e){try{const t=s.getters.getInstalledPackageByName(e),i=await OX(s.rootGetters.getRestApiContext,t.packageName);s.commit("updatePackageObject",i)}catch(t){throw t}}}},$X={namespaced:!0,state:{itemsFilter:"",showTabs:!0,showScrim:!1,selectedType:Jp},getters:{showTabs:s=>s.showTabs,showScrim:s=>s.showScrim,selectedType:s=>s.selectedType,itemsFilter:s=>s.itemsFilter},mutations:{setShowTabs(s,e){s.showTabs=e},setShowScrim(s,e){s.showScrim=e},setSelectedType(s,e){s.selectedType=e},setFilter(s,e){s.itemsFilter=e}}};m.use(Ip);var Np,Pp;const TX={activeExecutions:[],activeWorkflows:[],activeActions:[],activeCredentialType:null,baseUrl:(Pp=(Np={}.VUE_APP_URL_BASE_API)!=null?Np:window.BASE_PATH)!=null?Pp:"/",defaultLocale:"en",endpointWebhook:"webhook",endpointWebhookTest:"webhook-test",executionId:null,executingNode:"",executionWaitingForWebhook:!1,pushConnectionActive:!0,saveDataErrorExecution:"all",saveDataSuccessExecution:"all",saveManualExecutions:!1,timezone:"America/New_York",stateIsDirty:!1,executionTimeout:-1,maxExecutionTimeout:Number.MAX_SAFE_INTEGER,versionCli:"0.0.0",oauthCallbackUrls:{},n8nMetadata:{},workflowExecutionData:null,workflowExecutionPairedItemMappings:{},lastSelectedNode:null,lastSelectedNodeOutputIndex:null,nodeViewOffsetPosition:[0,0],nodeViewMoveInProgress:!1,selectedNodes:[],sessionId:Math.random().toString(36).substring(2,15),urlBaseEditor:"http://localhost:5678",urlBaseWebhook:"http://localhost:5678/",isNpmAvailable:!1,workflow:{id:fe,name:"",active:!1,createdAt:-1,updatedAt:-1,connections:{},nodes:[],settings:{},tags:[],pinData:{},hash:""},workflowsById:{},sidebarMenuItems:[],instanceId:"",nodeMetadata:{},subworkflowExecutionError:null},kX={nodeTypes:J4,credentials:gq,tags:Mq,settings:Pq,templates:wX,workflows:fX,versions:gX,users:cX,ui:Vq,communityNodes:xX,nodeCreator:$X,ndv:tq},bs=new Ip.Store({strict:{}.NODE_ENV!=="production",modules:kX,state:TX,mutations:{addActiveAction(s,e){s.activeActions.includes(e)||s.activeActions.push(e)},removeActiveAction(s,e){const t=s.activeActions.indexOf(e);t!==-1&&s.activeActions.splice(t,1)},addActiveExecution(s,e){const t=s.activeExecutions.find(i=>i.id===e.id);if(t!==void 0){t.workflowName===void 0&&(t.workflowName=e.workflowName);return}s.activeExecutions.unshift(e)},finishActiveExecution(s,e){const t=s.activeExecutions.find(i=>i.id===e.executionId);t!==void 0&&(e.executionId!==void 0&&m.set(t,"id",e.executionId),m.set(t,"finished",e.data.finished),m.set(t,"stoppedAt",e.data.stoppedAt))},setSubworkflowExecutionError(s,e){s.subworkflowExecutionError=e},setActiveExecutions(s,e){m.set(s,"activeExecutions",e)},setWorkflows:(s,e)=>{s.workflowsById=e.reduce((t,i)=>(i.id&&(t[i.id]=i),t),{})},deleteWorkflow:(s,e)=>{const{[e]:t,...i}=s.workflowsById;s.workflowsById=i},addWorkflow:(s,e)=>{m.set(s.workflowsById,e.id,e)},setActiveWorkflows(s,e){s.activeWorkflows=e},setWorkflowActive(s,e){s.stateIsDirty=!1,s.activeWorkflows.indexOf(e)===-1&&s.activeWorkflows.push(e),s.workflowsById[e]&&m.set(s.workflowsById[e],"active",!0)},setWorkflowInactive(s,e){const t=s.activeWorkflows.indexOf(e);t!==-1&&s.activeWorkflows.splice(t,1),s.workflowsById[e]&&m.set(s.workflowsById[e],"active",!1)},setStateDirty(s,e){s.stateIsDirty=e},addSelectedNode(s,e){s.selectedNodes.push(e)},removeNodeFromSelection(s,e){let t;for(t in s.selectedNodes)if(s.selectedNodes[t].name===e.name){s.selectedNodes.splice(parseInt(t,10),1);break}},resetSelectedNodes(s){m.set(s,"selectedNodes",[])},pinData(s,e){s.workflow.pinData||m.set(s.workflow,"pinData",{}),Array.isArray(e.data)||(e.data=[e.data]);const t=e.data.map(i=>ol(i)?i:{json:i});m.set(s.workflow.pinData,e.node.name,t),s.stateIsDirty=!0,De.$emit("pin-data",{[e.node.name]:t})},unpinData(s,e){s.workflow.pinData||m.set(s.workflow,"pinData",{}),m.set(s.workflow.pinData,e.node.name,void 0),delete s.workflow.pinData[e.node.name],s.stateIsDirty=!0,De.$emit("unpin-data",{[e.node.name]:void 0})},setActive(s,e){s.workflow.active=e},addConnection(s,e){if(e.connection.length!==2)return;e.setStateDirty===!0&&(s.stateIsDirty=!0);const t=e.connection[0],i=e.connection[1];if(s.workflow.connections.hasOwnProperty(t.node)||m.set(s.workflow.connections,t.node,{}),s.workflow.connections[t.node].hasOwnProperty(t.type)||m.set(s.workflow.connections[t.node],t.type,[]),s.workflow.connections[t.node][t.type].length<t.index+1)for(let a=s.workflow.connections[t.node][t.type].length;a<=t.index;a++)s.workflow.connections[t.node][t.type].push([]);const n=["index","node","type"];let o,r=!1;e:for(const a of s.workflow.connections[t.node][t.type][t.index]){for(o of n)if(a[o]!==i[o])continue e;r=!0;break}r===!1&&s.workflow.connections[t.node][t.type][t.index].push(i)},removeConnection(s,e){const t=e.connection[0],i=e.connection[1];if(!s.workflow.connections.hasOwnProperty(t.node)||!s.workflow.connections[t.node].hasOwnProperty(t.type)||s.workflow.connections[t.node][t.type].length<t.index+1)return;s.stateIsDirty=!0;const n=s.workflow.connections[t.node][t.type][t.index];for(const o in n)n[o].node===i.node&&n[o].type===i.type&&n[o].index===i.index&&n.splice(parseInt(o,10),1)},removeAllConnections(s,e){e&&e.setStateDirty===!0&&(s.stateIsDirty=!0),s.workflow.connections={}},removeAllNodeConnection(s,e){s.stateIsDirty=!0,s.workflow.connections.hasOwnProperty(e.name)&&delete s.workflow.connections[e.name];const t=[];let i,n,o,r,a;for(i of Object.keys(s.workflow.connections))for(n of Object.keys(s.workflow.connections[i]))for(o of Object.keys(s.workflow.connections[i][n])){t.length=0;for(r of Object.keys(s.workflow.connections[i][n][parseInt(o,10)]))a=s.workflow.connections[i][n][parseInt(o,10)][parseInt(r,10)],a.node===e.name&&t.push(r);t.forEach(l=>{s.workflow.connections[i][n][parseInt(o,10)].splice(parseInt(l,10),1)})}},renameNodeSelectedAndExecution(s,e){s.stateIsDirty=!0,s.workflowExecutionData!==null&&s.workflowExecutionData.data&&s.workflowExecutionData.data.resultData.runData.hasOwnProperty(e.old)&&(s.workflowExecutionData.data.resultData.runData[e.new]=s.workflowExecutionData.data.resultData.runData[e.old],delete s.workflowExecutionData.data.resultData.runData[e.old]),s.lastSelectedNode===e.old&&(s.lastSelectedNode=e.new),m.set(s.nodeMetadata,e.new,s.nodeMetadata[e.old]),m.delete(s.nodeMetadata,e.old),s.workflow.pinData&&s.workflow.pinData.hasOwnProperty(e.old)&&(m.set(s.workflow.pinData,e.new,s.workflow.pinData[e.old]),m.delete(s.workflow.pinData,e.old)),s.workflowExecutionPairedItemMappings=fr(s.workflowExecutionData)},resetAllNodesIssues(s){return s.workflow.nodes.forEach(e=>{e.issues=void 0}),!0},setNodeIssue(s,e){const t=s.workflow.nodes.find(i=>i.name===e.node);if(!t)return!1;if(e.value===null){if(t.issues===void 0||t.issues[e.type]===void 0)return!0;m.delete(t.issues,e.type)}else t.issues===void 0&&m.set(t,"issues",{}),m.set(t.issues,e.type,e.value);return!0},setWorkflowId(s,e){s.workflow.id=e==="new"?fe:e},setWorkflowName(s,e){e.setStateDirty===!0&&(s.stateIsDirty=!0),s.workflow.name=e.newName},setWorkflowHash(s,e){s.workflow.hash=e},replaceInvalidWorkflowCredentials(s,{credentials:e,invalid:t,type:i}){s.workflow.nodes.forEach(n=>{if(!n.credentials||!n.credentials[i])return;const o=n.credentials[i];if(typeof o=="string"&&o===t.name){n.credentials[i]=e;return}if(o.id===null){o.name===t.name&&(n.credentials[i]=e);return}o.id===t.id&&(n.credentials[i]=e)})},addNode(s,e){!e.hasOwnProperty("name")||s.workflow.nodes.push(e)},removeNode(s,e){m.delete(s.nodeMetadata,e.name),s.workflow.pinData&&s.workflow.pinData.hasOwnProperty(e.name)&&m.delete(s.workflow.pinData,e.name);for(let t=0;t<s.workflow.nodes.length;t++)if(s.workflow.nodes[t].name===e.name){s.workflow.nodes.splice(t,1),s.stateIsDirty=!0;return}},removeAllNodes(s,e){e.setStateDirty===!0&&(s.stateIsDirty=!0),e.removePinData&&m.set(s.workflow,"pinData",{}),s.workflow.nodes.splice(0,s.workflow.nodes.length),s.nodeMetadata={}},updateNodeProperties(s,e){const t=s.workflow.nodes.find(i=>i.name===e.name);if(t)for(const i of Object.keys(e.properties))s.stateIsDirty=!0,m.set(t,i,e.properties[i])},setNodeValue(s,e){const t=s.workflow.nodes.find(i=>i.name===e.name);if(t==null)throw new Error(`Node with the name "${e.name}" could not be found to set parameter.`);s.stateIsDirty=!0,m.set(t,e.key,e.value)},setNodeParameters(s,e){const t=s.workflow.nodes.find(i=>i.name===e.name);if(t==null)throw new Error(`Node with the name "${e.name}" could not be found to set parameter.`);s.stateIsDirty=!0,m.set(t,"parameters",e.value),s.nodeMetadata[t.name]||m.set(s.nodeMetadata,t.name,{}),m.set(s.nodeMetadata[t.name],"parametersLastUpdatedAt",Date.now())},setNodeViewMoveInProgress(s,e){s.nodeViewMoveInProgress=e},setNodeViewOffsetPosition(s,e){s.nodeViewOffsetPosition=e.newOffset},setExecutingNode(s,e){s.executingNode=e},setExecutionWaitingForWebhook(s,e){s.executionWaitingForWebhook=e},setActiveExecutionId(s,e){s.executionId=e},setPushConnectionActive(s,e){s.pushConnectionActive=e},setUrlBaseWebhook(s,e){const t=e.endsWith("/")?e:`${e}/`;m.set(s,"urlBaseWebhook",t)},setUrlBaseEditor(s,e){const t=e.endsWith("/")?e:`${e}/`;m.set(s,"urlBaseEditor",t)},setEndpointWebhook(s,e){m.set(s,"endpointWebhook",e)},setEndpointWebhookTest(s,e){m.set(s,"endpointWebhookTest",e)},setSaveDataErrorExecution(s,e){m.set(s,"saveDataErrorExecution",e)},setSaveDataSuccessExecution(s,e){m.set(s,"saveDataSuccessExecution",e)},setSaveManualExecutions(s,e){m.set(s,"saveManualExecutions",e)},setTimezone(s,e){m.set(s,"timezone",e)},setExecutionTimeout(s,e){m.set(s,"executionTimeout",e)},setMaxExecutionTimeout(s,e){m.set(s,"maxExecutionTimeout",e)},setVersionCli(s,e){m.set(s,"versionCli",e)},setInstanceId(s,e){m.set(s,"instanceId",e)},setOauthCallbackUrls(s,e){m.set(s,"oauthCallbackUrls",e)},setN8nMetadata(s,e){m.set(s,"n8nMetadata",e)},setDefaultLocale(s,e){m.set(s,"defaultLocale",e)},setIsNpmAvailable(s,e){m.set(s,"isNpmAvailable",e)},setActiveCredentialType(s,e){s.activeCredentialType=e},setLastSelectedNode(s,e){s.lastSelectedNode=e},setLastSelectedNodeOutputIndex(s,e){s.lastSelectedNodeOutputIndex=e},setWorkflowExecutionData(s,e){s.workflowExecutionData=e,s.workflowExecutionPairedItemMappings=fr(s.workflowExecutionData)},addNodeExecutionData(s,e){if(s.workflowExecutionData===null||!s.workflowExecutionData.data)throw new Error('The "workflowExecutionData" is not initialized!');s.workflowExecutionData.data.resultData.runData[e.nodeName]===void 0&&m.set(s.workflowExecutionData.data.resultData.runData,e.nodeName,[]),s.workflowExecutionData.data.resultData.runData[e.nodeName].push(e.data),s.workflowExecutionPairedItemMappings=fr(s.workflowExecutionData)},clearNodeExecutionData(s,e){s.workflowExecutionData===null||!s.workflowExecutionData.data||m.delete(s.workflowExecutionData.data.resultData.runData,e)},setWorkflowSettings(s,e){m.set(s.workflow,"settings",e)},setWorkflowPinData(s,e){m.set(s.workflow,"pinData",e||{}),De.$emit("pin-data",e||{})},setWorkflowTagIds(s,e){m.set(s.workflow,"tags",e)},addWorkflowTagIds(s,e){m.set(s.workflow,"tags",[...new Set([...s.workflow.tags||[],...e])])},removeWorkflowTagId(s,e){const i=s.workflow.tags.filter(n=>n!==e);m.set(s.workflow,"tags",i)},setWorkflow(s,e){m.set(s,"workflow",e),s.workflow.hasOwnProperty("active")||m.set(s.workflow,"active",!1),s.workflow.hasOwnProperty("connections")||m.set(s.workflow,"connections",{}),s.workflow.hasOwnProperty("createdAt")||m.set(s.workflow,"createdAt",-1),s.workflow.hasOwnProperty("updatedAt")||m.set(s.workflow,"updatedAt",-1),s.workflow.hasOwnProperty("id")||m.set(s.workflow,"id",fe),s.workflow.hasOwnProperty("nodes")||m.set(s.workflow,"nodes",[]),s.workflow.hasOwnProperty("settings")||m.set(s.workflow,"settings",{})},addSidebarMenuItems(s,e){const t=s.sidebarMenuItems.concat(e);m.set(s,"sidebarMenuItems",t)}},getters:{workflowExecutionPairedItemMappings:s=>s.workflowExecutionPairedItemMappings,executedNode:s=>s.workflowExecutionData?s.workflowExecutionData.executedNode:void 0,activeCredentialType:s=>s.activeCredentialType,subworkflowExecutionError:s=>s.subworkflowExecutionError,workflowHash:s=>s.workflow.hash,isActionActive:s=>e=>s.activeActions.includes(e),isNewWorkflow:s=>s.workflow.id===fe,currentWorkflowHasWebhookNode:s=>!!s.workflow.nodes.find(e=>!!e.webhookId),getActiveExecutions:s=>s.activeExecutions,getParametersLastUpdated:s=>e=>s.nodeMetadata[e]&&s.nodeMetadata[e].parametersLastUpdatedAt,getBaseUrl:s=>s.baseUrl,getRestUrl:s=>{let e="rest";return{}.VUE_APP_ENDPOINT_REST&&(e={}.VUE_APP_ENDPOINT_REST),`${s.baseUrl}${e}`},getRestApiContext(s){let e="rest";return{}.VUE_APP_ENDPOINT_REST&&(e={}.VUE_APP_ENDPOINT_REST),{baseUrl:`${s.baseUrl}${e}`,sessionId:s.sessionId}},getWebhookBaseUrl:s=>s.urlBaseWebhook,getWebhookUrl:s=>`${s.urlBaseWebhook}${s.endpointWebhook}`,getWebhookTestUrl:s=>`${s.urlBaseEditor}${s.endpointWebhookTest}`,getStateIsDirty:s=>s.stateIsDirty,instanceId:s=>s.instanceId,saveDataErrorExecution:s=>s.saveDataErrorExecution,saveDataSuccessExecution:s=>s.saveDataSuccessExecution,saveManualExecutions:s=>s.saveManualExecutions,timezone:s=>s.timezone,executionTimeout:s=>s.executionTimeout,maxExecutionTimeout:s=>s.maxExecutionTimeout,versionCli:s=>s.versionCli,oauthCallbackUrls:s=>s.oauthCallbackUrls,n8nMetadata:s=>s.n8nMetadata,defaultLocale:s=>s.defaultLocale,pushConnectionActive:s=>s.pushConnectionActive,sessionId:s=>s.sessionId,allWorkflows(s){return Object.values(s.workflowsById).sort((e,t)=>e.name.localeCompare(t.name))},getActiveWorkflows:s=>s.activeWorkflows,workflowTriggerNodes:(s,e)=>s.workflow.nodes.filter(t=>{const i=e["nodeTypes/getNodeType"](t.type,t.typeVersion);return i&&i.group.includes("trigger")}),getNodeViewOffsetPosition:s=>s.nodeViewOffsetPosition,isNodeViewMoveInProgress:s=>s.nodeViewMoveInProgress,getSelectedNodes:s=>{const e=new Set;return s.selectedNodes.filter(t=>e.has(t.id)?!1:(e.add(t.id),!0))},isNodeSelected:s=>e=>{let t;for(t in s.selectedNodes)if(s.selectedNodes[t].name===e)return!0;return!1},isActive:s=>s.workflow.active,allConnections:s=>s.workflow.connections,outgoingConnectionsByNodeName:s=>e=>s.workflow.connections.hasOwnProperty(e)?s.workflow.connections[e]:{},allNodes:s=>s.workflow.nodes,nodesByName:s=>s.workflow.nodes.reduce((e,t)=>(e[t.name]=t,e),{}),getNodeByName:(s,e)=>t=>e.nodesByName[t]||null,getNodeById:(s,e)=>t=>s.workflow.nodes.find(i=>i.id===t),nodesIssuesExist:s=>{for(const e of s.workflow.nodes)if(!(e.issues===void 0||Object.keys(e.issues).length===0))return!0;return!1},pinData:s=>s.workflow.pinData,pinDataByNodeName:s=>e=>{if(!(!s.workflow.pinData||!s.workflow.pinData[e]))return s.workflow.pinData[e].map(t=>t.json)},pinDataSize:(s,e,t,i)=>{const n=i["ndv/activeNodeName"];return s.workflow.nodes.reduce((o,r)=>(typeof r.pinData!="undefined"&&r.name!==n&&(o+=Ii(r.pinData)),o),0)},activeNode:(s,e,t,i)=>i["ndv/activeNode"],nativelyNumberSuffixedDefaults:(s,e)=>{const{"nodeTypes/allNodeTypes":t}=e;return t.reduce((i,n)=>(/\d$/.test(n.defaults.name)&&i.push(n.defaults.name),i),[])},lastSelectedNode:(s,e)=>e.getNodeByName(s.lastSelectedNode),lastSelectedNodeOutputIndex:(s,e)=>s.lastSelectedNodeOutputIndex,executingNode:s=>s.executingNode,activeExecutionId:s=>s.executionId,executionWaitingForWebhook:s=>s.executionWaitingForWebhook,workflowName:s=>s.workflow.name,workflowId:s=>s.workflow.id,workflowSettings:s=>s.workflow.settings===void 0?{}:s.workflow.settings,workflowTags:s=>s.workflow.tags,getWorkflowExecution:s=>s.workflowExecutionData,getWorkflowRunData:s=>!s.workflowExecutionData||!s.workflowExecutionData.data||!s.workflowExecutionData.data.resultData?null:s.workflowExecutionData.data.resultData.runData,getWorkflowResultDataByNodeName:(s,e)=>t=>{const i=e.getWorkflowRunData;return i===null||!i.hasOwnProperty(t)?null:i[t]},sidebarMenuItems:s=>s.sidebarMenuItems},actions:{fetchAllWorkflows:async s=>{const e=await dX(s.rootGetters.getRestApiContext);return s.commit("setWorkflows",e),e},fetchActiveWorkflows:async s=>{const e=await uX(s.rootGetters.getRestApiContext);return s.commit("setActiveWorkflows",e),e}}});m.use(Ap);function Nn(s){return s.getters["settings/isTemplatesEnabled"]?!1:{name:O.NOT_FOUND}}var Dp;const Iw=new Ap({mode:"history",base:(Dp=window.BASE_PATH)!=null?Dp:"/",scrollBehavior(s,e,t){t===null&&s.name===O.TEMPLATES&&s.meta&&s.meta.setScrollPosition(0)},routes:[{path:"/",name:O.HOMEPAGE,meta:{getRedirect(s){var t,i;return{name:((i=(t=window.posthog)==null?void 0:t.isFeatureEnabled)==null?void 0:i.call(t,"start-at-wf-empty-state"))?O.NEW_WORKFLOW:O.WORKFLOWS}},permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/collections/:id",name:O.COLLECTION,components:{default:gG,sidebar:Ct},meta:{templatesEnabled:!0,telemetry:{getProperties(s,e){return{collection_id:s.params.id,wf_template_repo_session_id:e.getters["templates/currentSessionId"]}}},getRedirect:Nn,permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/execution/:id",name:O.EXECUTION,components:{default:$i,header:bi,sidebar:Ct},meta:{nodeView:!0,permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/templates/:id",name:O.TEMPLATE,components:{default:PG,sidebar:Ct},meta:{templatesEnabled:!0,getRedirect:Nn,telemetry:{getProperties(s,e){return{template_id:s.params.id,wf_template_repo_session_id:e.getters["templates/currentSessionId"]}}},permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/templates/",name:O.TEMPLATES,components:{default:kH,sidebar:Ct},meta:{templatesEnabled:!0,getRedirect:Nn,scrollOffset:0,telemetry:{getProperties(s,e){return{wf_template_repo_session_id:e.getters["templates/currentSessionId"]}}},setScrollPosition(s){this.scrollOffset=s},permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/credentials",name:O.CREDENTIALS,components:{default:$4,sidebar:Ct},meta:{permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/workflow",redirect:"/workflow/new"},{path:"/workflows",name:O.WORKFLOWS,components:{default:j4,sidebar:Ct},meta:{permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/workflow/new",name:O.NEW_WORKFLOW,components:{default:$i,header:bi,sidebar:Ct},meta:{nodeView:!0,permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/workflow/:name",name:O.WORKFLOW,components:{default:$i,header:bi,sidebar:Ct},meta:{nodeView:!0,permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/workflow/:name/executions",name:O.EXECUTIONS,components:{default:Bj,header:bi,sidebar:Ct},meta:{keepWorkflowAlive:!0,permissions:{allow:{loginStatus:[re.LoggedIn]}}},children:[{path:"",name:O.EXECUTION_HOME,components:{executionPreview:Yj},meta:{keepWorkflowAlive:!0,permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:":executionId",name:O.EXECUTION_PREVIEW,components:{executionPreview:kz},meta:{keepWorkflowAlive:!0,permissions:{allow:{loginStatus:[re.LoggedIn]}}}}]},{path:"/workflows/demo",name:O.DEMO,components:{default:$i},meta:{permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/workflows/templates/:id",name:O.TEMPLATE_IMPORT,components:{default:$i,header:bi,sidebar:Ct},meta:{templatesEnabled:!0,getRedirect:Nn,permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"/signin",name:O.SIGNIN,components:{default:T9},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[re.LoggedOut]}}}},{path:"/signup",name:O.SIGNUP,components:{default:N9},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[re.LoggedOut]}}}},{path:"/setup",name:O.SETUP,components:{default:_9},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{role:[ze.Default]},deny:{shouldDeny:()=>bs.getters["settings/isUserManagementEnabled"]===!1}}}},{path:"/forgot-password",name:O.FORGOT_PASSWORD,components:{default:lL},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[re.LoggedOut]}}}},{path:"/change-password",name:O.CHANGE_PASSWORD,components:{default:HW},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[re.LoggedOut]}}}},{path:"/settings",redirect:"/settings/personal"},{path:"/settings/users",name:O.USERS_SETTINGS,components:{default:O5},meta:{telemetry:{pageCategory:"settings",getProperties(s,e){return{feature:"users"}}},permissions:{allow:{role:[ze.Default,ze.Owner]},deny:{shouldDeny:()=>bs.getters["settings/isUserManagementEnabled"]===!1}}}},{path:"/settings/personal",name:O.PERSONAL_SETTINGS,components:{default:n5},meta:{telemetry:{pageCategory:"settings",getProperties(s,e){return{feature:"personal"}}},permissions:{allow:{loginStatus:[re.LoggedIn]},deny:{role:[ze.Default]}}}},{path:"/settings/api",name:O.API_SETTINGS,components:{default:a9},meta:{telemetry:{pageCategory:"settings",getProperties(s,e){return{feature:"api"}}},permissions:{allow:{loginStatus:[re.LoggedIn]},deny:{shouldDeny:()=>bs.getters["settings/isPublicApiEnabled"]===!1}}}},{path:"/settings/community-nodes",name:O.COMMUNITY_NODES,components:{default:Y5},meta:{telemetry:{pageCategory:"settings"},permissions:{allow:{role:[ze.Default,ze.Owner]},deny:{shouldDeny:()=>bs.getters["settings/isCommunityNodesFeatureEnabled"]===!1}}}},{path:"/settings/coming-soon/:featureId",name:O.FAKE_DOOR,component:m9,props:!0,meta:{telemetry:{pageCategory:"settings",getProperties(s,e){return{feature:s.params.featureId}}},permissions:{allow:{loginStatus:[re.LoggedIn]}}}},{path:"*",name:O.NOT_FOUND,component:iL,props:{messageKey:"error.pageNotFound",errorCode:404,redirectTextKey:"error.goBack",redirectPage:O.HOMEPAGE},meta:{nodeView:!0,telemetry:{disabled:!0},permissions:{allow:{loginStatus:[re.LoggedIn,re.LoggedOut]}}}}]});function SX(s){const e=new EX;Object.defineProperty(s,"$telemetry",{get(){return e}}),Object.defineProperty(s.prototype,"$telemetry",{get(){return e}})}class EX{constructor(){this.userNodesPanelSession={sessionId:"",data:{nodeFilter:"",resultsNodes:[],filterMode:"Regular"}},this.pageEventQueue=[],this.previousPath="",this.store=null}get rudderStack(){return window.rudderanalytics}init(e,{instanceId:t,userId:i,store:n,versionCli:o}){if(!e.enabled||!e.config||this.rudderStack)return;const{config:{key:r,url:a}}=e;this.store=n;const c=n.getters["settings/logLevel"]==="debug"?{logLevel:"DEBUG"}:{};this.initRudderStack(r,a,{integrations:{All:!1},loadIntegration:!1,...c}),this.identify(t,i,o),this.flushPageEvents(),this.track("Session started",{session_id:n.getters.sessionId})}identify(e,t,i){const n={instance_id:e,version_cli:i};t?this.rudderStack.identify(`${e}#${t}`,n):(this.rudderStack.reset(),this.rudderStack.identify(void 0,n))}track(e,t){if(!this.rudderStack)return;const i={...t,version_cli:this.store&&this.store.getters.versionCli};this.rudderStack.track(e,i)}page(e){if(this.rudderStack){if(e.path===this.previousPath)return;this.previousPath=e.path;const t=e.name;let i={};this.store&&e.meta&&e.meta.telemetry&&typeof e.meta.telemetry.getProperties=="function"&&(i=e.meta.telemetry.getProperties(e,this.store));const n=e.meta&&e.meta.telemetry&&e.meta.telemetry.pageCategory||"Editor";this.rudderStack.page(n,t,i)}else this.pageEventQueue.push({route:e})}flushPageEvents(){const e=this.pageEventQueue;this.pageEventQueue=[],e.forEach(({route:t})=>{this.page(t)})}trackNodesPanel(e,t={}){if(this.rudderStack)switch(t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,e){case"nodeView.createNodeActiveChanged":t.createNodeActive!==!1&&(this.resetNodesPanelSession(),t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,this.track("User opened nodes panel",t));break;case"nodeCreateList.selectedTypeChanged":this.userNodesPanelSession.data.filterMode=t.new_filter,this.track("User changed nodes panel filter",t);break;case"nodeCreateList.destroyed":this.userNodesPanelSession.data.nodeFilter.length>0&&this.userNodesPanelSession.data.nodeFilter!==""&&this.track("User entered nodes panel search term",this.generateNodesPanelEvent());break;case"nodeCreateList.nodeFilterChanged":t.newValue.length===0&&this.userNodesPanelSession.data.nodeFilter.length>0&&this.track("User entered nodes panel search term",this.generateNodesPanelEvent()),t.newValue.length>(t.oldValue||"").length&&(this.userNodesPanelSession.data.nodeFilter=t.newValue,this.userNodesPanelSession.data.resultsNodes=(t.filteredNodes||[]).map(n=>n.key));break;case"nodeCreateList.onCategoryExpanded":t.is_subcategory=!1,this.track("User viewed node category",t);break;case"nodeCreateList.onSubcategorySelected":const i=t.selected.properties;i&&i.subcategory&&(t.category_name=i.subcategory),t.is_subcategory=!0,delete t.selected,this.track("User viewed node category",t);break;case"nodeView.addNodeButton":this.track("User added node to workflow canvas",t);break;case"nodeView.addSticky":this.track("User inserted workflow note",t);break}}resetNodesPanelSession(){this.userNodesPanelSession.sessionId=`nodes_panel_session_${new Date().valueOf()}`,this.userNodesPanelSession.data={nodeFilter:"",resultsNodes:[],filterMode:"All"}}generateNodesPanelEvent(){return{search_string:this.userNodesPanelSession.data.nodeFilter,results_count:this.userNodesPanelSession.data.resultsNodes.length,filter_mode:this.userNodesPanelSession.data.filterMode,nodes_panel_session_id:this.userNodesPanelSession.sessionId}}initRudderStack(e,t,i){window.rudderanalytics=window.rudderanalytics||[],this.rudderStack.methods=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"],this.rudderStack.factory=n=>(...o)=>{const r=[n,...o];return this.rudderStack.push(r),this.rudderStack};for(const n of this.rudderStack.methods)this.rudderStack[n]=this.rudderStack.factory(n);this.rudderStack.loadJS=()=>{const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";const o=document.getElementsByTagName("script")[0];o&&o.parentNode&&o.parentNode.insertBefore(n,o)},this.rudderStack.loadJS(),this.rudderStack.load(e,t,i)}}m.config.productionTip=!1;Iw.afterEach((s,e)=>{af("main.routeChange",bs,{from:e,to:s})});m.use(SX);m.use(s=>UP(s,bs));new m({i18n:qe,router:Iw,store:bs,render:s=>s($W)}).$mount("#app");({}).NODE_ENV!=="production"&&(window.onerror=(s,e,t,i,n)=>{s.toString().includes("ResizeObserver")||(console.error("error caught in main.ts"),console.error(s),console.error(n))});export{Jp as A,Ys as C,f7 as D,K_ as E,Vs as H,Fo as M,pi as N,d7 as O,TB as P,u7 as R,Zr as S,ea as T,xt as W,As as _,CX as __vite_legacy_guard,Wt as a,h7 as b,rO as c,Yg as d,ve as e,vb as f,Zt as g,Jr as h,ll as i,c7 as j,A2 as k,p7 as l,nt as m,be as n,ct as o,an as p,ui as q,Lc as r,Bn as s,bx as t};
