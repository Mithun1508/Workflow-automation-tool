var M={exports:{}};(function(X){function T(o){return o.type.indexOf("mouse")!==-1?o.clientX:o.touches[0].clientX}function O(o){return o.type.indexOf("mouse")!==-1?o.clientY:o.touches[0].clientY}var S=function(){var o=!1;try{var d=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,d)}catch{}return o}(),h=0,Y={install:function(o,d){var l=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",namespace:"touch"},d);function f(t){var e=this.$$touchObj,s=t.type.indexOf("touch")>=0,a=t.type.indexOf("mouse")>=0,u=this;s&&(h=t.timeStamp),!(a&&h&&t.timeStamp-h<350)&&(e.touchStarted||(w(this),e.touchStarted=!0,e.touchMoved=!1,e.swipeOutBounded=!1,e.startX=T(t),e.startY=O(t),e.currentX=0,e.currentY=0,e.touchStartTime=t.timeStamp,e.touchHoldTimer=setTimeout(function(){e.touchHoldTimer=null,n(t,u,"touchhold")},e.options.touchHoldTolerance),n(t,this,"start")))}function v(t){var e=this.$$touchObj;if(e.currentX=T(t),e.currentY=O(t),e.touchMoved){if(!e.swipeOutBounded){var a=e.options.swipeTolerance;e.swipeOutBounded=Math.abs(e.startX-e.currentX)>a&&Math.abs(e.startY-e.currentY)>a}}else{var s=e.options.tapTolerance;e.touchMoved=Math.abs(e.startX-e.currentX)>s||Math.abs(e.startY-e.currentY)>s,e.touchMoved&&(b(e),n(t,this,"moved"))}e.touchMoved&&n(t,this,"moving")}function L(){var t=this.$$touchObj;b(t),m(this),t.touchStarted=t.touchMoved=!1,t.startX=t.startY=0}function p(t){var e=this.$$touchObj,s=t.type.indexOf("touch")>=0,a=t.type.indexOf("mouse")>=0;s&&(h=t.timeStamp);var u=s&&!e.touchHoldTimer;if(b(e),e.touchStarted=!1,m(this),!(a&&h&&t.timeStamp-h<350))if(n(t,this,"end"),e.touchMoved){if(!e.swipeOutBounded){var i=e.options.swipeTolerance,c,r=Math.abs(e.startY-e.currentY),g=Math.abs(e.startX-e.currentX);(r>i||g>i)&&(r>i?c=e.startY>e.currentY?"top":"bottom":c=e.startX>e.currentX?"left":"right",e.callbacks["swipe."+c]?n(t,this,"swipe."+c,c):n(t,this,"swipe",c))}}else if(e.callbacks.longtap&&t.timeStamp-e.touchStartTime>e.options.longTapTimeInterval)t.cancelable&&t.preventDefault(),n(t,this,"longtap");else if(e.callbacks.touchhold&&u){t.cancelable&&t.preventDefault();return}else n(t,this,"tap")}function k(){w(this)}function j(){m(this)}function n(t,e,s,a){var u=e.$$touchObj,i=u&&u.callbacks[s]||[];if(i.length===0)return null;for(var c=0;c<i.length;c++){var r=i[c];r.modifiers.stop&&t.stopPropagation(),r.modifiers.prevent&&t.cancelable&&t.preventDefault(),!(r.modifiers.self&&t.target!==t.currentTarget)&&typeof r.value=="function"&&(a?r.value(a,t):r.value(t))}}function w(t){var e=t.$$touchObj.options.touchClass;e&&t.classList.add(e)}function m(t){var e=t.$$touchObj.options.touchClass;e&&t.classList.remove(e)}function b(t){t.touchHoldTimer&&(clearTimeout(t.touchHoldTimer),t.touchHoldTimer=null)}function E(t,e){var s=t.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:l};return e&&(s.options=Object.assign({},s.options,e)),t.$$touchObj=s,t.$$touchObj}o.directive(l.namespace,{bind:function(t,e){var s=E(t),a=S?{passive:!0}:!1,u=e.arg||"tap";switch(u){case"swipe":var i=e.modifiers;if(i.left||i.right||i.top||i.bottom){for(var c in e.modifiers)if(["left","right","top","bottom"].indexOf(c)>=0){var r="swipe."+c;s.callbacks[r]=s.callbacks[r]||[],s.callbacks[r].push(e)}}else s.callbacks.swipe=s.callbacks.swipe||[],s.callbacks.swipe.push(e);break;case"start":case"moving":e.modifiers.disablePassive&&(a=!1);default:s.callbacks[u]=s.callbacks[u]||[],s.callbacks[u].push(e)}s.hasBindTouchEvents||(t.addEventListener("touchstart",f,a),t.addEventListener("touchmove",v,a),t.addEventListener("touchcancel",L),t.addEventListener("touchend",p),s.options.disableClick||(t.addEventListener("mousedown",f),t.addEventListener("mousemove",v),t.addEventListener("mouseup",p),t.addEventListener("mouseenter",k),t.addEventListener("mouseleave",j)),s.hasBindTouchEvents=!0)},unbind:function(t){t.removeEventListener("touchstart",f),t.removeEventListener("touchmove",v),t.removeEventListener("touchcancel",L),t.removeEventListener("touchend",p),t.$$touchObj&&!t.$$touchObj.options.disableClick&&(t.removeEventListener("mousedown",f),t.removeEventListener("mousemove",v),t.removeEventListener("mouseup",p),t.removeEventListener("mouseenter",k),t.removeEventListener("mouseleave",j)),delete t.$$touchObj}}),o.directive(l.namespace+"-class",{bind:function(t,e){E(t,{touchClass:e.value})}}),o.directive(l.namespace+"-options",{bind:function(t,e){E(t,e.value)}})}};X.exports=Y})(M);var x=M.exports;export{x as V};
