"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LowerCaseUserEmail1648740597343 = void 0;
const config = require("../../../../config");
class LowerCaseUserEmail1648740597343 {
    constructor() {
        this.name = 'LowerCaseUserEmail1648740597343';
    }
    async up(queryRunner) {
        let tablePrefix = config.get('database.tablePrefix');
        const schema = config.get('database.postgresdb.schema');
        if (schema) {
            tablePrefix = schema + '.' + tablePrefix;
        }
        await queryRunner.query(`SET search_path TO ${schema};`);
        await queryRunner.query(`
			UPDATE ${tablePrefix}user
			SET email = LOWER(email);
		`);
    }
    async down(queryRunner) { }
}
exports.LowerCaseUserEmail1648740597343 = LowerCaseUserEmail1648740597343;
//# sourceMappingURL=1648740597343-LowerCaseUserEmail.js.map